
{{/*
  style/GetMainCSS
  Process the main css stylesheet and return as resource

  @author @regisphilibert

  @context Any (.)

  @returns Resource

  @uses
     - func/style/GetResource
*/}}
{{ $main_style := dict }}

{{/* We prepare a slice of resources to be concatenated as one */}}
{{ $assets_to_concat := collections.Slice (dict) }}

{{/* We add locale css files to the slice in the proper order */}}
{{ range collections.Slice (dict) "_tachyons.css" "_code.css" "_hugo-internal-templates.css" "_social-icons.css" "_styles.css" }}
  {{ with partials.IncludeCached "func/style/GetResource.html" . . }}
    {{ $assets_to_concat = $assets_to_concat | collections.Append . }}
  {{ end }}
{{ end }}

{{- $config := site.Params.ananke.social -}}
{{- $networks := $config.follow.networks -}}

{{/* Ensure that $networks is a valid slice for the Where function */}}
{{- if $networks }}
  {{- $setups := collections.Where $config.networks "slug" "in" $networks }}
  {{ with $setups }}
    {{ $socials_rules := collections.Slice (dict) }}
    {{ range $service := . }}
      {{ with . }}
        <!-- Handle each social network setup here -->
      {{ end }}
    {{ end }}
  {{ end }}
{{- end }}
