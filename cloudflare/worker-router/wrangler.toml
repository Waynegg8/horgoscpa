# name 與 main 設定
name = "horgoscpa-router"
main = "src/index.js"
compatibility_date = "2025-10-30"
account_id = "4ad0a8042beb2d218bd6edf39aee0fea"

routes = [
	{ pattern = "www.horgoscpa.com/login", zone_name = "horgoscpa.com" },
	{ pattern = "www.horgoscpa.com/internal/*", zone_name = "horgoscpa.com" },
	{ pattern = "www.horgoscpa.com/internal/api/*", zone_name = "horgoscpa.com" },
	{ pattern = "horgoscpa.com/login", zone_name = "horgoscpa.com" },
	{ pattern = "horgoscpa.com/internal/*", zone_name = "horgoscpa.com" },
	{ pattern = "horgoscpa.com/internal/api/*", zone_name = "horgoscpa.com" }
]

[vars]
INTERNAL_BASE_HOST = "horgoscpa-internal.pages.dev"
INTERNAL_API_HOST = "horgoscpa-internal.pages.dev"
SESSION_COOKIE_NAME = "session"
SESSION_TTL_SECONDS = "2592000"
APP_ENV = "dev"

[[d1_databases]]
binding = "DATABASE"
database_name = "horgoscpa-db"
database_id = "98c44e77-3cf0-440e-b2a3-dd952d183e6f"
migrations_dir = "migrations"

# R2 Storage（文档存储）
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "horgoscpa-documents"

# KV Storage（快速缓存）
[[kv_namespaces]]
binding = "CACHE"
id = "0b5186bacfc24815a04a9240d6e7ba45"

# Cron Triggers（定時任務）
[triggers]
crons = [
	"5 0 1 * *"  # 每月 1 日 00:05 UTC（補休到期轉加班費）
]