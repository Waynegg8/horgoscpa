# 核心准则（每次必读）

## 最高原则
**100%功能一致，边读边做，持续对比，回溯统一**

## 工作流程
1. 读 progress.md 得到步骤X
2. 读 steps/X.md 执行任务
3. 完成5个动作：读→记录→重构→对比→回溯
4. 更新 progress.md
5. 输出：✅ X/? → X+1
6. 每10步输出：⚠️ 建议换新对话

## 绝对禁止（违反立即重做）
1. ❌ 禁止输出解释、总结、说明（只输出✅状态）
2. ❌ 禁止跳过read_file（声称"已知道"、"太长"、"类似"）
3. ❌ 禁止只读不做、只做不比、只比不溯
4. ❌ 禁止说"与XX类似"、"参考XX方式"
5. ❌ 禁止批量复制粘贴
6. ❌ 禁止假设页面相同
7. ❌ 禁止省略功能（必须100%迁移）
8. ❌ 禁止猜测字段名（必须对照standards/）

## 5个强制动作
### 1. 读取
```
read_file 文件.html 行X 行Y
```
必须实际执行，不得跳过

### 2. 记录
写入 catalog/文件.md:
- 完整代码片段（不是摘要）
- 组件位置
- API和字段（对照standards/验证）

### 3. 重构
- 发现组件 → 提取到new-code/components/
- 写入new-code/pages/ （使用组件）
- 保留所有功能

### 4. 对比
列出旧代码功能点：
- [ ] 功能1 ✓
- [ ] 功能2 ✓
检查新代码是否都有

### 5. 回溯
本段与之前有差异？
- 评估哪种更好
- 修改之前的new-code/
- 记录到logs/回溯.txt

## 回溯触发条件
- 同一组件有不同实现
- 同一逻辑有不同写法
- 发现应该统一的地方

立即统一，不要"稍后处理"

## 输出格式（严格）
正常：
```
✅ 5/? → 6
```

检查点：
```
✅ 10/? → 11
⚠️ 建议换新对话
```

自检失败（内部处理不输出）：
```
[内部] 缺少XX，补充后重新验证
```

## 给AI的核心提醒
1. RULES.md是圣经，每次必读必遵守
2. 禁止偷懒，read_file必须实际执行
3. 禁止批量思维，每个文件都独特
4. 必须记录差异，不得说"相同"
5. 只输出状态，不写任何解释

## 给用户的核心提醒
1. 步骤多是正常的（600+步），这是质量保证
2. 每次只输入"继续"即可
3. 看到检查点就换新对话
4. AI输出很简短，不浪费token
