# 會計師事務所內部營運管理平台

**專案版本：** 2.0  
**最後更新：** 2025年10月27日  
**技術架構：** Cloudflare (Pages, Workers, D1, R2)

---

## 專案概述

本專案旨在建構一個現代化、自動化、且易於維護的內部營運管理平台。平台採用 Cloudflare Serverless 架構，實現資料即時同步、業務邏輯自動化，並為管理員提供直觀的網頁管理介面。

### 核心目標
- **業務邏輯引擎**：處理工時表、加權工時計算及複雜的假期規則
- **多階段任務追蹤**：管理記帳、工商登記等複雜流程的進度
- **權限簡化**：僅管理員和員工兩級，透過「能看見就能編輯」原則簡化權限管理
- **完全自動化**：移除所有手動審批流程，改為系統自動計算
- **標準化與模塊化**：所有業務規則存入資料庫，前後端完全模塊化架構

---

## 技術堆疊

| 層級 | 技術 | 用途 |
|------|------|------|
| 前端 | Vue.js 3 + Tailwind CSS | 單頁應用 (SPA) |
| 後端 | Cloudflare Workers + Hono | RESTful API |
| 資料庫 | Cloudflare D1 | SQL 資料儲存 |
| 檔案儲存 | Cloudflare R2 | 物件儲存 (圖片、文件) |
| 部署 | Cloudflare Pages | 靜態網站託管 |
| 自動化 | Cloudflare Workers Cron | 定時任務 |
| 身份驗證 | JWT + HttpOnly Cookie | 登入與會話管理 |

---

## 📚 文檔導覽

### 核心設計文檔
1. **[架構設計](./架構設計.md)** - Cloudflare 架構圖與資料流向
2. **[資料庫設計](./資料庫設計.md)** - 完整 D1 Schema 定義（27個資料表）
3. **[權限系統設計](./權限系統設計.md)** - 權限模型詳細說明
4. **[自動化流程](./自動化流程.md)** - Cron Jobs 設計與邏輯
5. **[開發規範](./開發規範.md)** - 標準化與模塊化規範

### 開發指南
- **[AI 開發指南](./AI開發指南.md)** - AI 開發流程與規範
- **[🚨 外部網站禁止修改清單](./🚨外部網站禁止修改清單.md)** - ⚠️ **必讀**

---

## 🎯 功能模塊（22個）

### 系統設定（僅管理員）
1. [員工權限設定](./功能模塊/01-員工權限設定.md) - 控制員工模塊可見性
2. [業務規則管理](./功能模塊/02-業務規則管理.md) - 6種業務規則（假期、加班、週期等）
3. [服務項目管理](./功能模塊/03-服務項目管理.md) - 定義服務類型
4. [員工帳號管理](./功能模塊/04-員工帳號管理.md) - 新增、編輯、重設密碼
5. [CSV 導入功能](./功能模塊/05-CSV導入功能.md) - 批量導入客戶

### 個人中心
6. [儀表板](./功能模塊/06-儀表板.md) - Widgets + 視覺化
7. [個人資料設定](./功能模塊/07-個人資料設定.md) - 修改姓名、性別、密碼

### 工時表與報表
8. [工時表填寫](./功能模塊/08-工時表填寫.md) - Excel 風格格狀介面
10. [報表中心](./功能模塊/10-報表中心.md) - 詳細工時統計、趨勢預測

### 假期管理
12. [生活事件登記](./功能模塊/12-生活事件登記.md) - 婚假、喪假等事件
13. [假期餘額查詢](./功能模塊/13-假期餘額查詢.md) - 應有/已用/剩餘

### 任務追蹤系統
14. [任務模板管理](./功能模塊/14-任務模板管理.md) - 多階段模板
15. [客戶服務設定](./功能模塊/15-客戶服務設定.md) - 配置週期性服務
16. [任務進度追蹤](./功能模塊/16-任務進度追蹤.md) - 看板/列表視圖
17. [階段進度更新](./功能模塊/17-階段進度更新.md) - 階段狀態更新

### SOP 知識庫
18. [SOP 文件管理](./功能模塊/18-SOP文件管理.md) - WYSIWYG 編輯器
19. [客戶專屬 SOP 連結](./功能模塊/19-客戶專屬SOP連結.md) - 客製化 SOP

### 通用知識庫
20. [通用知識庫](./功能模塊/20-通用知識庫.md) - 內部 FAQ

### 外部網站 CMS
21. [外部文章管理](./功能模塊/21-外部文章管理.md) - 管理公開文章、FAQ
22. [資源中心管理](./功能模塊/22-資源中心管理.md) - 管理下載資源

詳細列表請參閱 [功能模塊總覽](./功能模塊/README.md)

---

## 🔌 API 規格文檔

### 完整 API 端點文檔
- [API 規格總覽](./API規格/README.md) - 所有 API 索引
- [員工權限 API](./API規格/員工權限/_概覽.md) - 8個端點
- [業務規則 API](./API規格/業務規則/) - 6大類，45個端點
  - [國定假日 API](./API規格/業務規則/國定假日/_概覽.md)
  - [假別類型 API](./API規格/業務規則/假別類型/_概覽.md)
  - [加班費率 API](./API規格/業務規則/加班費率/_概覽.md)
  - [特休規則 API](./API規格/業務規則/特休規則/_概覽.md)
  - [其他假期規則 API](./API規格/業務規則/其他假期規則/_概覽.md)
  - [週期類型 API](./API規格/業務規則/週期類型/_概覽.md)

### 傳統 API 文檔（待拆解）
- [認證 API](./API設計/認證API.md)
- [工時 API](./API設計/工時API.md)
- [任務 API](./API設計/任務API.md)
- [客戶 API](./API設計/客戶API.md)
- [假期 API](./API設計/假期API.md)

---

## 💾 資料庫設計文檔

### 完整資料表文檔（27個表格）
- [資料庫設計總覽](./資料庫設計.md) - Schema 概述
- [資料庫設計詳細規範](./資料庫設計/README.md)

### 按類別瀏覽
- [核心業務](./資料庫設計/核心業務/) - Users, Clients, TimeLogs
- [業務服務](./資料庫設計/業務服務/) - ServiceTemplates, ClientServices
- [任務系統](./資料庫設計/任務系統/) - 任務模板與執行中任務
- [權限系統](./資料庫設計/權限系統/) - ModulePermissions
- [業務規則](./資料庫設計/業務規則/) - 假期、加班、週期類型
- [補休系統](./資料庫設計/補休系統/) - 補休餘額、交易、使用記錄
- [知識庫](./資料庫設計/知識庫/) - SOP、內部知識庫
- [外部網站](./資料庫設計/外部網站/) - 公開內容、資源
- [系統設定](./資料庫設計/系統設定/) - SystemSettings
- [標準化擴展](./資料庫設計/標準化擴展/) - 審計日誌、版本控制

---

## 🔧 技術規格文檔

### 按功能模塊分類
- [技術規格總覽](./技術規格/README.md)
- [員工權限](./技術規格/員工權限/) - UI設計、驗證邏輯、測試案例
- [業務規則](./技術規格/業務規則/) - 頁面結構、補休機制
- [服務項目](./技術規格/服務項目/) - UI設計、業務邏輯、測試案例

---

## 📋 部署與維護

- [環境設定](./部署指南/環境設定.md) - Cloudflare 環境配置
- [初始化流程](./部署指南/初始化流程.md) - 系統初始化 10 步驟
- [部署檢查清單](./部署指南/部署檢查清單.md) - 上線前檢查事項

---

## 🚀 快速開始

1. 閱讀 [AI 開發指南](./AI開發指南.md) 了解開發流程
2. 閱讀 [架構設計](./架構設計.md) 了解整體架構
3. 查看 [資料庫設計](./資料庫設計.md) 理解資料模型
4. 閱讀 [開發規範](./開發規範.md) 了解標準化原則
5. 根據需求閱讀對應的功能模塊文檔

---

## 💡 核心設計原則

### 標準化 (Standardization)
- **禁止硬編碼**：所有業務規則必須存入 D1 資料庫
- **管理介面管理**：管理員透過網頁介面配置規則，而非修改程式碼
- **統一格式**：API 回應、錯誤處理、日期格式等全部標準化

### 模塊化 (Modularity)
- **後端**：每個功能有獨立的 Service、Repository、Middleware
- **前端**：每個功能有獨立的 Page、Component、Store、API Service
- **文檔**：四層金字塔結構（功能模塊 → 技術規格 → API規格 → 資料庫設計）
- **代碼分層**：清晰的分層架構（Routes → Services → Repositories → Database）

---

## ⚠️ 重要提醒

### 僅用於內部管理系統
**Tailwind CSS 和所有前端組件僅用於：**
- 內部管理平台（`admin.yourfirm.com`）

**不影響：**
- 外部網站（`yourfirm.com`）保持現有設計

詳細清單請參閱 [🚨 外部網站禁止修改清單](./🚨外部網站禁止修改清單.md)

---

## 📊 文檔統計

- **核心設計文檔**：7個（架構、資料庫、權限、自動化、開發規範等）
- **功能模塊文檔**：22個主模塊 + 6個子模塊
- **技術規格文檔**：3個模塊，12個文檔
- **API 規格文檔**：53個端點文檔（已拆解），5個傳統文檔（待拆解）
- **資料庫設計文檔**：27個資料表文檔
- **開發規範文檔**：8個子文檔

**總計約 150+ 個文檔，全部符合模塊化標準（每個文檔 40-200 行）**

---

**最後更新：** 2025年10月27日  
**文檔版本：** 2.0（模塊化重組版）

- **開發規範文檔**：8個子文檔

**總計約 150+ 個文檔，全部符合模塊化標準（每個文檔 40-200 行）**

---

**最後更新：** 2025年10月27日  
**文檔版本：** 2.0（模塊化重組版）
