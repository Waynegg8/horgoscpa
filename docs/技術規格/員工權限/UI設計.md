# 員工權限設定 - UI 設計

**所屬功能：** [員工權限設定](../../功能模塊/01-員工權限設定.md)  
**最後更新：** 2025年10月27日

---

## 頁面結構

```
┌─────────────────────────────────────────────┐
│ 員工權限設定                                 │
├─────────────┬───────────────────────────────┤
│             │                               │
│ [預設權限]  │  ▢ 儀表板                     │
│ [個別調整]  │  ☑ 工時表填寫                 │
│             │  ☑ 個人資料設定               │
│             │  ▢ 報表中心                   │
│             │  ...                          │
│             │                               │
│             │  [儲存變更]                   │
└─────────────┴───────────────────────────────┘
```

---

## Tab 1：預設權限

### 功能說明
設定新員工加入時自動套用的權限模板。

### 介面元素

**權限清單（14個模塊）：**
```
☑ 儀表板
☑ 工時表填寫
☑ 個人資料設定
▢ 報表中心
▢ 生活事件登記
...（共14個）
```

**操作按鈕：**
- **[儲存變更]** - 主要按鈕，藍色
  - 點擊後彈出「同步現有員工」對話框

---

## Tab 2：個別調整

### 功能說明
針對特定員工調整權限，覆蓋預設模板。

### 介面元素

**員工選擇下拉選單：**
```
[請選擇員工 ▾]
├─ 張大明
├─ 李小華
└─ 王美麗
```

**權限清單（帶差異標示）：**
```
☑ 儀表板 [預設]
☑ 工時表填寫 [已調整] 🔵
▢ 個人資料設定 [預設]
☑ 報表中心 [已調整] 🔵
...
```

**差異標示規則：**
- **[預設]** - 灰色文字，與預設模板相同
- **[已調整]** 🔵 - 藍色標籤，與預設模板不同

**操作按鈕：**
- **[恢復為預設]** - 次要按鈕，灰色
  - 清除所有個別調整
- **[儲存變更]** - 主要按鈕，藍色

---

## 對話框：同步現有員工

### 觸發時機
在「預設權限」Tab 點擊「儲存變更」時彈出。

### 對話框內容

```
┌─────────────────────────────────────────┐
│ 是否同步更新現有員工？                   │
├─────────────────────────────────────────┤
│                                         │
│ 您修改了預設權限模板，請選擇要同步的員工： │
│                                         │
│ ☑ 張大明 [使用預設模板]                 │
│ ▢ 李小華 [已個別調整]                   │
│ ☑ 王美麗 [使用預設模板]                 │
│                                         │
│ 共 3 位員工，已選擇 2 位                │
│                                         │
│         [全選] [全不選] [取消] [確認]    │
└─────────────────────────────────────────┘
```

### 勾選邏輯
- **預設勾選：** 「使用預設模板」的員工（無個別調整）
- **預設不勾選：** 「已個別調整」的員工
- 管理員可手動調整勾選狀態

### 按鈕行為
- **[全選]** - 勾選所有員工
- **[全不選]** - 取消所有勾選
- **[取消]** - 關閉對話框，不儲存變更
- **[確認]** - 儲存預設模板，並同步更新已勾選的員工

---

## 互動流程

### 流程 1：修改預設權限模板

```
1. 管理員進入「預設權限」Tab
2. 勾選/取消勾選模塊（如：開放「報表中心」）
3. 點擊「儲存變更」
4. 系統彈出「同步現有員工」對話框
5. 對話框顯示：
   - 張大明 [使用預設模板] ☑ 預設勾選
   - 李小華 [已個別調整] ▢ 預設不勾選
   - 王美麗 [使用預設模板] ☑ 預設勾選
6. 管理員可手動調整勾選狀態（如：勾選李小華）
7. 點擊「確認」
8. 系統執行：
   - 更新預設模板
   - 同步已勾選的員工權限
   - 顯示成功訊息：「已更新預設模板，並同步 3 位員工」
```

---

### 流程 2：個別調整員工權限

```
1. 管理員進入「個別調整」Tab
2. 從下拉選單選擇「李小華」
3. 系統載入李小華的權限：
   ☑ 儀表板 [預設]
   ☑ 工時表填寫 [預設]
   ▢ 報表中心 [預設]
4. 管理員勾選「報表中心」
5. 介面更新為：
   ☑ 報表中心 [已調整] 🔵
6. 點擊「儲存變更」
7. 系統執行：
   - 保存李小華的個別權限
   - 顯示成功訊息：「已更新李小華的權限」
```

---

### 流程 3：恢復為預設

```
1. 管理員在「個別調整」Tab 選擇「李小華」
2. 系統顯示李小華有 3 個 [已調整] 項目
3. 管理員點擊「恢復為預設」
4. 系統彈出確認對話框：
   「確定要將李小華的權限恢復為預設模板？」
5. 管理員點擊「確認」
6. 系統執行：
   - 刪除李小華的個別權限設定
   - 重新套用預設模板
   - 介面更新：所有項目顯示 [預設]
   - 顯示成功訊息：「已恢復為預設模板」
```

---

## 狀態管理

### 前端狀態

```typescript
interface PermissionState {
  // 預設模板
  defaultPermissions: string[];  // ['dashboard', 'timesheet', ...]
  
  // 所有員工列表
  employees: {
    id: number;
    name: string;
    hasCustomPermissions: boolean;
  }[];
  
  // 當前選中員工的權限
  selectedEmployee: {
    id: number;
    permissions: string[];
  } | null;
  
  // UI 狀態
  activeTab: 'default' | 'individual';
  isLoading: boolean;
  showSyncDialog: boolean;
}
```

---

## 樣式規範

### 顏色

- **主要按鈕：** 藍色 `#3B82F6`
- **次要按鈕：** 灰色 `#6B7280`
- **差異標示：** 藍色標籤 `#DBEAFE`（背景） + `#1E40AF`（文字）
- **預設標示：** 灰色文字 `#9CA3AF`

### 間距

- Tab 之間：`16px`
- 權限清單項目：`12px`
- 按鈕之間：`12px`

---

## 響應式設計

### 桌面版（> 768px）
- 使用 Tab 切換
- 權限清單分兩欄顯示

### 手機版（< 768px）
- 使用折疊面板取代 Tab
- 權限清單單欄顯示
- 按鈕改為全寬

---

## 相關文檔

- [功能模塊](../../功能模塊/01-員工權限設定.md)
- [權限驗證邏輯](./權限驗證邏輯.md)
- [測試案例](./測試案例.md)

---

**最後更新：** 2025年10月27日



**所屬功能：** [員工權限設定](../../功能模塊/01-員工權限設定.md)  
**最後更新：** 2025年10月27日

---

## 頁面結構

```
┌─────────────────────────────────────────────┐
│ 員工權限設定                                 │
├─────────────┬───────────────────────────────┤
│             │                               │
│ [預設權限]  │  ▢ 儀表板                     │
│ [個別調整]  │  ☑ 工時表填寫                 │
│             │  ☑ 個人資料設定               │
│             │  ▢ 報表中心                   │
│             │  ...                          │
│             │                               │
│             │  [儲存變更]                   │
└─────────────┴───────────────────────────────┘
```

---

## Tab 1：預設權限

### 功能說明
設定新員工加入時自動套用的權限模板。

### 介面元素

**權限清單（14個模塊）：**
```
☑ 儀表板
☑ 工時表填寫
☑ 個人資料設定
▢ 報表中心
▢ 生活事件登記
...（共14個）
```

**操作按鈕：**
- **[儲存變更]** - 主要按鈕，藍色
  - 點擊後彈出「同步現有員工」對話框

---

## Tab 2：個別調整

### 功能說明
針對特定員工調整權限，覆蓋預設模板。

### 介面元素

**員工選擇下拉選單：**
```
[請選擇員工 ▾]
├─ 張大明
├─ 李小華
└─ 王美麗
```

**權限清單（帶差異標示）：**
```
☑ 儀表板 [預設]
☑ 工時表填寫 [已調整] 🔵
▢ 個人資料設定 [預設]
☑ 報表中心 [已調整] 🔵
...
```

**差異標示規則：**
- **[預設]** - 灰色文字，與預設模板相同
- **[已調整]** 🔵 - 藍色標籤，與預設模板不同

**操作按鈕：**
- **[恢復為預設]** - 次要按鈕，灰色
  - 清除所有個別調整
- **[儲存變更]** - 主要按鈕，藍色

---

## 對話框：同步現有員工

### 觸發時機
在「預設權限」Tab 點擊「儲存變更」時彈出。

### 對話框內容

```
┌─────────────────────────────────────────┐
│ 是否同步更新現有員工？                   │
├─────────────────────────────────────────┤
│                                         │
│ 您修改了預設權限模板，請選擇要同步的員工： │
│                                         │
│ ☑ 張大明 [使用預設模板]                 │
│ ▢ 李小華 [已個別調整]                   │
│ ☑ 王美麗 [使用預設模板]                 │
│                                         │
│ 共 3 位員工，已選擇 2 位                │
│                                         │
│         [全選] [全不選] [取消] [確認]    │
└─────────────────────────────────────────┘
```

### 勾選邏輯
- **預設勾選：** 「使用預設模板」的員工（無個別調整）
- **預設不勾選：** 「已個別調整」的員工
- 管理員可手動調整勾選狀態

### 按鈕行為
- **[全選]** - 勾選所有員工
- **[全不選]** - 取消所有勾選
- **[取消]** - 關閉對話框，不儲存變更
- **[確認]** - 儲存預設模板，並同步更新已勾選的員工

---

## 互動流程

### 流程 1：修改預設權限模板

```
1. 管理員進入「預設權限」Tab
2. 勾選/取消勾選模塊（如：開放「報表中心」）
3. 點擊「儲存變更」
4. 系統彈出「同步現有員工」對話框
5. 對話框顯示：
   - 張大明 [使用預設模板] ☑ 預設勾選
   - 李小華 [已個別調整] ▢ 預設不勾選
   - 王美麗 [使用預設模板] ☑ 預設勾選
6. 管理員可手動調整勾選狀態（如：勾選李小華）
7. 點擊「確認」
8. 系統執行：
   - 更新預設模板
   - 同步已勾選的員工權限
   - 顯示成功訊息：「已更新預設模板，並同步 3 位員工」
```

---

### 流程 2：個別調整員工權限

```
1. 管理員進入「個別調整」Tab
2. 從下拉選單選擇「李小華」
3. 系統載入李小華的權限：
   ☑ 儀表板 [預設]
   ☑ 工時表填寫 [預設]
   ▢ 報表中心 [預設]
4. 管理員勾選「報表中心」
5. 介面更新為：
   ☑ 報表中心 [已調整] 🔵
6. 點擊「儲存變更」
7. 系統執行：
   - 保存李小華的個別權限
   - 顯示成功訊息：「已更新李小華的權限」
```

---

### 流程 3：恢復為預設

```
1. 管理員在「個別調整」Tab 選擇「李小華」
2. 系統顯示李小華有 3 個 [已調整] 項目
3. 管理員點擊「恢復為預設」
4. 系統彈出確認對話框：
   「確定要將李小華的權限恢復為預設模板？」
5. 管理員點擊「確認」
6. 系統執行：
   - 刪除李小華的個別權限設定
   - 重新套用預設模板
   - 介面更新：所有項目顯示 [預設]
   - 顯示成功訊息：「已恢復為預設模板」
```

---

## 狀態管理

### 前端狀態

```typescript
interface PermissionState {
  // 預設模板
  defaultPermissions: string[];  // ['dashboard', 'timesheet', ...]
  
  // 所有員工列表
  employees: {
    id: number;
    name: string;
    hasCustomPermissions: boolean;
  }[];
  
  // 當前選中員工的權限
  selectedEmployee: {
    id: number;
    permissions: string[];
  } | null;
  
  // UI 狀態
  activeTab: 'default' | 'individual';
  isLoading: boolean;
  showSyncDialog: boolean;
}
```

---

## 樣式規範

### 顏色

- **主要按鈕：** 藍色 `#3B82F6`
- **次要按鈕：** 灰色 `#6B7280`
- **差異標示：** 藍色標籤 `#DBEAFE`（背景） + `#1E40AF`（文字）
- **預設標示：** 灰色文字 `#9CA3AF`

### 間距

- Tab 之間：`16px`
- 權限清單項目：`12px`
- 按鈕之間：`12px`

---

## 響應式設計

### 桌面版（> 768px）
- 使用 Tab 切換
- 權限清單分兩欄顯示

### 手機版（< 768px）
- 使用折疊面板取代 Tab
- 權限清單單欄顯示
- 按鈕改為全寬

---

## 相關文檔

- [功能模塊](../../功能模塊/01-員工權限設定.md)
- [權限驗證邏輯](./權限驗證邏輯.md)
- [測試案例](./測試案例.md)

---

**最後更新：** 2025年10月27日



