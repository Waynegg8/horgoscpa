# å…±ç”¨æ¥­å‹™é‚è¼¯

**å¸¸è¦‹æ¥­å‹™é‚è¼¯çš„çµ±ä¸€å¯¦ç¾** | CRUD æ¨¡å¼ã€é©—è­‰è¦å‰‡ã€è»Ÿåˆªé™¤

---

## ğŸ“‹ ç›®éŒ„
- [CRUD é€šç”¨æ¨¡å¼](#crud-é€šç”¨æ¨¡å¼)
- [é©—è­‰è¦å‰‡æ¨¡å¼](#é©—è­‰è¦å‰‡æ¨¡å¼)
- [è»Ÿåˆªé™¤æ¨™æº–](#è»Ÿåˆªé™¤æ¨™æº–)
- [å¯©è¨ˆæ—¥èªŒæ¨™æº–](#å¯©è¨ˆæ—¥èªŒæ¨™æº–)
- [æ¬Šé™æª¢æŸ¥æ¨¡å¼](#æ¬Šé™æª¢æŸ¥æ¨¡å¼)
- [åˆ†é æŸ¥è©¢æ¨¡å¼](#åˆ†é æŸ¥è©¢æ¨¡å¼)
- [å”¯ä¸€æ€§æª¢æŸ¥æ¨¡å¼](#å”¯ä¸€æ€§æª¢æŸ¥æ¨¡å¼)

---

## CRUD é€šç”¨æ¨¡å¼

### æ¨™æº– CRUD æµç¨‹

æ‰€æœ‰è³‡æºçš„ CRUD æ“ä½œéµå¾ªçµ±ä¸€çš„æµç¨‹ï¼š

```
Create (æ–°å¢):
1. é©—è­‰å¿…å¡«æ¬„ä½
2. é©—è­‰æ¬„ä½æ ¼å¼
3. æª¢æŸ¥å”¯ä¸€æ€§
4. æ’å…¥è³‡æ–™åº«
5. è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
6. è¿”å›æˆåŠŸéŸ¿æ‡‰

Read (æŸ¥è©¢):
1. é©—è­‰æ¬Šé™
2. æ‡‰ç”¨éæ¿¾æ¢ä»¶
3. æ‡‰ç”¨åˆ†é 
4. æŸ¥è©¢è³‡æ–™åº«
5. è¿”å›çµæœ

Update (æ›´æ–°):
1. é©—è­‰è³‡æºå­˜åœ¨
2. é©—è­‰æ¬Šé™
3. é©—è­‰æ¬„ä½æ ¼å¼
4. æª¢æŸ¥å”¯ä¸€æ€§ï¼ˆè‹¥ä¿®æ”¹å”¯ä¸€æ¬„ä½ï¼‰
5. æ›´æ–°è³‡æ–™åº«
6. è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
7. è¿”å›æˆåŠŸéŸ¿æ‡‰

Delete (åˆªé™¤):
1. é©—è­‰è³‡æºå­˜åœ¨
2. é©—è­‰æ¬Šé™
3. æª¢æŸ¥æ˜¯å¦è¢«å¼•ç”¨
4. è»Ÿåˆªé™¤ï¼ˆè¨­ç½® is_deleted = 1ï¼‰
5. è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
6. è¿”å›æˆåŠŸéŸ¿æ‡‰
```

### Create å¯¦ç¾æ¨¡æ¿

```javascript
// Service å±¤
class ClientService {
  async createClient(data, userId) {
    // 1. é©—è­‰å¿…å¡«æ¬„ä½
    const validation = this.validateRequired(data, ['client_id', 'company_name', 'assignee_user_id']);
    if (!validation.valid) {
      throw new ValidationError(validation.error);
    }
    
    // 2. é©—è­‰æ¬„ä½æ ¼å¼
    if (!this.isValidClientId(data.client_id)) {
      throw new ValidationError('çµ±ä¸€ç·¨è™Ÿå¿…é ˆç‚º 8 ä½æ•¸å­—');
    }
    
    // 3. æª¢æŸ¥å”¯ä¸€æ€§
    const existing = await this.repository.findByClientId(data.client_id);
    if (existing) {
      throw new ConflictError('çµ±ä¸€ç·¨è™Ÿå·²å­˜åœ¨');
    }
    
    // 4. æ’å…¥è³‡æ–™åº«
    const client = await this.repository.create({
      ...data,
      created_by: userId,
      created_at: new Date(),
      updated_at: new Date(),
      is_deleted: 0
    });
    
    // 5. è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
    await this.auditLog.log({
      user_id: userId,
      action: 'CREATE',
      table_name: 'Clients',
      record_id: client.client_id
    });
    
    // 6. è¿”å›æˆåŠŸ
    return client;
  }
}
```

### Read (åˆ—è¡¨) å¯¦ç¾æ¨¡æ¿

```javascript
async getClients(filters, pagination, userId, isAdmin) {
  // 1. æ§‹å»ºæŸ¥è©¢æ¢ä»¶
  let query = 'SELECT * FROM Clients WHERE is_deleted = 0';
  const params = [];
  
  // 2. æ¬Šé™éæ¿¾ï¼ˆéç®¡ç†å“¡åªèƒ½çœ‹è‡ªå·±è² è²¬çš„ï¼‰
  if (!isAdmin) {
    query += ' AND assignee_user_id = ?';
    params.push(userId);
  }
  
  // 3. æ‡‰ç”¨éæ¿¾æ¢ä»¶
  if (filters.company_name) {
    query += ' AND company_name LIKE ?';
    params.push(`%${filters.company_name}%`);
  }
  
  if (filters.business_status) {
    query += ' AND business_status = ?';
    params.push(filters.business_status);
  }
  
  // 4. æŸ¥è©¢ç¸½æ•¸
  const countQuery = query.replace('SELECT *', 'SELECT COUNT(*) as total');
  const countResult = await this.db.prepare(countQuery).bind(...params).first();
  
  // 5. æ‡‰ç”¨åˆ†é 
  query += ' ORDER BY created_at DESC LIMIT ? OFFSET ?';
  params.push(pagination.limit, pagination.offset);
  
  // 6. åŸ·è¡ŒæŸ¥è©¢
  const result = await this.db.prepare(query).bind(...params).all();
  
  // 7. è¿”å›çµæœ
  return {
    data: result.results,
    pagination: {
      total: countResult.total,
      limit: pagination.limit,
      offset: pagination.offset,
      has_more: (pagination.offset + pagination.limit) < countResult.total
    }
  };
}
```

### Update å¯¦ç¾æ¨¡æ¿

```javascript
async updateClient(clientId, data, userId) {
  // 1. é©—è­‰è³‡æºå­˜åœ¨
  const client = await this.repository.findById(clientId);
  if (!client || client.is_deleted) {
    throw new NotFoundError('å®¢æˆ¶ä¸å­˜åœ¨');
  }
  
  // 2. é©—è­‰æ¬Šé™ï¼ˆéç®¡ç†å“¡åªèƒ½ä¿®æ”¹è‡ªå·±è² è²¬çš„ï¼‰
  if (!userId.isAdmin && client.assignee_user_id !== userId) {
    throw new ForbiddenError('æ‚¨æ²’æœ‰æ¬Šé™ä¿®æ”¹æ­¤å®¢æˆ¶');
  }
  
  // 3. é©—è­‰æ¬„ä½æ ¼å¼
  if (data.email && !this.isValidEmail(data.email)) {
    throw new ValidationError('Email æ ¼å¼éŒ¯èª¤');
  }
  
  // 4. æª¢æŸ¥å”¯ä¸€æ€§ï¼ˆè‹¥ä¿®æ”¹çµ±ä¸€ç·¨è™Ÿï¼‰
  if (data.client_id && data.client_id !== clientId) {
    const existing = await this.repository.findByClientId(data.client_id);
    if (existing) {
      throw new ConflictError('çµ±ä¸€ç·¨è™Ÿå·²å­˜åœ¨');
    }
  }
  
  // 5. æ›´æ–°è³‡æ–™åº«
  const updated = await this.repository.update(clientId, {
    ...data,
    updated_by: userId,
    updated_at: new Date()
  });
  
  // 6. è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  await this.auditLog.log({
    user_id: userId,
    action: 'UPDATE',
    table_name: 'Clients',
    record_id: clientId,
    changes: data
  });
  
  return updated;
}
```

### Delete å¯¦ç¾æ¨¡æ¿

```javascript
async deleteClient(clientId, userId, isAdmin) {
  // 1. é©—è­‰æ¬Šé™ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰
  if (!isAdmin) {
    throw new ForbiddenError('åƒ…ç®¡ç†å“¡å¯åˆªé™¤å®¢æˆ¶');
  }
  
  // 2. é©—è­‰è³‡æºå­˜åœ¨
  const client = await this.repository.findById(clientId);
  if (!client || client.is_deleted) {
    throw new NotFoundError('å®¢æˆ¶ä¸å­˜åœ¨');
  }
  
  // 3. æª¢æŸ¥æ˜¯å¦è¢«å¼•ç”¨
  const hasServices = await this.db.prepare(
    'SELECT COUNT(*) as count FROM ClientServices WHERE client_id = ? AND is_deleted = 0'
  ).bind(clientId).first();
  
  if (hasServices.count > 0) {
    throw new ConflictError('å®¢æˆ¶æœ‰é€²è¡Œä¸­çš„æœå‹™ï¼Œç„¡æ³•åˆªé™¤');
  }
  
  // 4. è»Ÿåˆªé™¤
  await this.repository.softDelete(clientId, userId);
  
  // 5. è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  await this.auditLog.log({
    user_id: userId,
    action: 'DELETE',
    table_name: 'Clients',
    record_id: clientId
  });
  
  return { success: true };
}
```

---

## é©—è­‰è¦å‰‡æ¨¡å¼

### å¿…å¡«æ¬„ä½é©—è­‰

```javascript
class Validator {
  validateRequired(data, requiredFields) {
    for (const field of requiredFields) {
      if (!data[field] || data[field] === '') {
        return {
          valid: false,
          error: `${field} ç‚ºå¿…å¡«æ¬„ä½`
        };
      }
    }
    return { valid: true };
  }
}
```

### æ ¼å¼é©—è­‰

```javascript
class Validator {
  // Email é©—è­‰
  isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }
  
  // å°ç£çµ±ä¸€ç·¨è™Ÿé©—è­‰ï¼ˆ8 ä½æ•¸å­—ï¼‰
  isValidClientId(clientId) {
    return /^\d{8}$/.test(clientId);
  }
  
  // å°ç£æ‰‹æ©Ÿè™Ÿç¢¼é©—è­‰
  isValidMobile(mobile) {
    return /^09\d{8}$/.test(mobile);
  }
  
  // å°ç£é›»è©±è™Ÿç¢¼é©—è­‰
  isValidPhone(phone) {
    return /^0\d{1,2}-?\d{7,8}$/.test(phone);
  }
  
  // æ—¥æœŸæ ¼å¼é©—è­‰ï¼ˆYYYY-MM-DDï¼‰
  isValidDate(date) {
    return /^\d{4}-\d{2}-\d{2}$/.test(date);
  }
  
  // æ™‚é–“æ ¼å¼é©—è­‰ï¼ˆHH:mmï¼‰
  isValidTime(time) {
    return /^([01]\d|2[0-3]):([0-5]\d)$/.test(time);
  }
}
```

### æ•¸å€¼ç¯„åœé©—è­‰

```javascript
class Validator {
  // å·¥æ™‚é©—è­‰ï¼ˆ0-24 å°æ™‚ï¼‰
  isValidHours(hours) {
    const h = parseFloat(hours);
    return !isNaN(h) && h >= 0 && h <= 24;
  }
  
  // åˆ†é åƒæ•¸é©—è­‰
  validatePagination(limit, offset) {
    const safeLimit = Math.min(Math.max(parseInt(limit) || 50, 1), 100);
    const safeOffset = Math.max(parseInt(offset) || 0, 0);
    return { limit: safeLimit, offset: safeOffset };
  }
  
  // é‡‘é¡é©—è­‰ï¼ˆæ­£æ•¸ï¼‰
  isValidAmount(amount) {
    const a = parseFloat(amount);
    return !isNaN(a) && a >= 0;
  }
}
```

---

## è»Ÿåˆªé™¤æ¨™æº–

### è³‡æ–™è¡¨è¨­è¨ˆ
**æ‰€æœ‰è³‡æ–™è¡¨å¿…é ˆåŒ…å«ï¼š**
```sql
is_deleted INTEGER DEFAULT 0,  -- 0=æœªåˆªé™¤, 1=å·²åˆªé™¤
deleted_at DATETIME,            -- åˆªé™¤æ™‚é–“
deleted_by INTEGER,             -- åˆªé™¤äººå“¡ID
```

### è»Ÿåˆªé™¤å¯¦ç¾

```javascript
class Repository {
  async softDelete(id, userId) {
    return await this.db.prepare(`
      UPDATE ${this.tableName}
      SET is_deleted = 1,
          deleted_at = CURRENT_TIMESTAMP,
          deleted_by = ?
      WHERE ${this.primaryKey} = ?
    `).bind(userId, id).run();
  }
  
  // æŸ¥è©¢æ™‚è‡ªå‹•éæ¿¾å·²åˆªé™¤
  async findAll(conditions = {}) {
    let query = `SELECT * FROM ${this.tableName} WHERE is_deleted = 0`;
    // ... æ·»åŠ å…¶ä»–æ¢ä»¶
    return await this.db.prepare(query).all();
  }
  
  // æ¢å¾©å·²åˆªé™¤è³‡æ–™ï¼ˆè‹¥éœ€è¦ï¼‰
  async restore(id, userId) {
    return await this.db.prepare(`
      UPDATE ${this.tableName}
      SET is_deleted = 0,
          deleted_at = NULL,
          deleted_by = NULL,
          updated_by = ?
      WHERE ${this.primaryKey} = ?
    `).bind(userId, id).run();
  }
}
```

### è»Ÿåˆªé™¤æª¢æŸ¥ä¾è³´

```javascript
async checkCanDelete(resourceId, tableName, foreignKey) {
  // æª¢æŸ¥æ˜¯å¦æœ‰å…¶ä»–è³‡æºå¼•ç”¨æ­¤è³‡æº
  const dependencies = [
    { table: 'ClientServices', key: 'client_id' },
    { table: 'TimeLogs', key: 'client_id' }
  ];
  
  for (const dep of dependencies) {
    const count = await this.db.prepare(`
      SELECT COUNT(*) as count 
      FROM ${dep.table} 
      WHERE ${dep.key} = ? AND is_deleted = 0
    `).bind(resourceId).first();
    
    if (count.count > 0) {
      throw new ConflictError(`æ­¤${tableName}æœ‰ç›¸é—œè³‡æ–™ï¼Œç„¡æ³•åˆªé™¤`);
    }
  }
  
  return true;
}
```

---

## å¯©è¨ˆæ—¥èªŒæ¨™æº–

### å¯©è¨ˆæ—¥èªŒè³‡æ–™è¡¨
```sql
CREATE TABLE AuditLogs (
  log_id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  action TEXT NOT NULL,          -- CREATE, UPDATE, DELETE, LOGIN
  table_name TEXT NOT NULL,      -- æ“ä½œçš„è³‡æ–™è¡¨
  record_id TEXT,                -- è¨˜éŒ„ID
  changes TEXT,                  -- JSONæ ¼å¼çš„è®Šæ›´å…§å®¹
  ip_address TEXT,               -- ç”¨æˆ¶IP
  user_agent TEXT,               -- ç€è¦½å™¨è³‡è¨Š
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### å¯©è¨ˆæ—¥èªŒå¯¦ç¾

```javascript
class AuditLogService {
  async log(data) {
    return await this.db.prepare(`
      INSERT INTO AuditLogs (
        user_id, action, table_name, record_id, 
        changes, ip_address, user_agent, created_at
      )
      VALUES (?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP)
    `).bind(
      data.user_id,
      data.action,
      data.table_name,
      data.record_id,
      JSON.stringify(data.changes || {}),
      data.ip_address,
      data.user_agent
    ).run();
  }
  
  // æŸ¥è©¢ç‰¹å®šè¨˜éŒ„çš„æ“ä½œæ­·å²
  async getRecordHistory(tableName, recordId) {
    return await this.db.prepare(`
      SELECT 
        al.*,
        u.name as user_name
      FROM AuditLogs al
      LEFT JOIN Users u ON al.user_id = u.user_id
      WHERE al.table_name = ? AND al.record_id = ?
      ORDER BY al.created_at DESC
    `).bind(tableName, recordId).all();
  }
}
```

---

## æ¬Šé™æª¢æŸ¥æ¨¡å¼

### æ¨¡å¡Šæ¬Šé™æª¢æŸ¥

```javascript
async function checkModulePermission(userId, moduleName) {
  // æŸ¥è©¢ç”¨æˆ¶æ¬Šé™
  const permission = await db.prepare(`
    SELECT can_access 
    FROM ModulePermissions 
    WHERE user_id = ? AND module_name = ?
  `).bind(userId, moduleName).first();
  
  return permission ? permission.can_access === 1 : false;
}

// Middleware ä½¿ç”¨
function requirePermission(moduleName) {
  return async (c, next) => {
    const user = c.get('user');
    const hasPermission = await checkModulePermission(user.user_id, moduleName);
    
    if (!hasPermission) {
      return c.json(
        errorResponse('INSUFFICIENT_PERMISSIONS', 'æ¨¡å¡Šæ¬Šé™æœªé–‹å•Ÿ'), 
        403
      );
    }
    
    await next();
  };
}
```

### è³‡æºæ“æœ‰è€…æª¢æŸ¥

```javascript
async function checkResourceOwnership(userId, resourceId, resourceType, isAdmin) {
  // ç®¡ç†å“¡å¯ä»¥è¨ªå•æ‰€æœ‰è³‡æº
  if (isAdmin) {
    return true;
  }
  
  // æ ¹æ“šè³‡æºé¡å‹æª¢æŸ¥æ“æœ‰æ¬Š
  const ownershipQueries = {
    'client': 'SELECT assignee_user_id FROM Clients WHERE client_id = ?',
    'timelog': 'SELECT user_id FROM TimeLogs WHERE log_id = ?',
    'task': 'SELECT assignee_user_id FROM ActiveTasks WHERE task_id = ?'
  };
  
  const query = ownershipQueries[resourceType];
  if (!query) {
    throw new Error(`Unknown resource type: ${resourceType}`);
  }
  
  const result = await db.prepare(query).bind(resourceId).first();
  
  if (!result) {
    return false;
  }
  
  // æª¢æŸ¥æ˜¯å¦ç‚ºæ“æœ‰è€…
  const ownerIdKey = resourceType === 'client' ? 'assignee_user_id' : 'user_id';
  return result[ownerIdKey] === userId;
}
```

---

## åˆ†é æŸ¥è©¢æ¨¡å¼

### æ¨™æº–åˆ†é å¯¦ç¾

```javascript
async function getPaginatedResults(query, params, pagination) {
  // 1. æŸ¥è©¢ç¸½æ•¸
  const countQuery = query.replace(
    /SELECT .* FROM/i, 
    'SELECT COUNT(*) as total FROM'
  );
  const countResult = await db.prepare(countQuery).bind(...params).first();
  
  // 2. é©—è­‰åˆ†é åƒæ•¸
  const limit = Math.min(Math.max(parseInt(pagination.limit) || 50, 1), 100);
  const offset = Math.max(parseInt(pagination.offset) || 0, 0);
  
  // 3. æ·»åŠ åˆ†é åˆ°æŸ¥è©¢
  const paginatedQuery = `${query} LIMIT ? OFFSET ?`;
  const paginatedParams = [...params, limit, offset];
  
  // 4. åŸ·è¡ŒæŸ¥è©¢
  const result = await db.prepare(paginatedQuery).bind(...paginatedParams).all();
  
  // 5. è¿”å›çµæœ
  return {
    data: result.results,
    pagination: {
      total: countResult.total,
      limit,
      offset,
      has_more: (offset + limit) < countResult.total
    }
  };
}
```

---

## å”¯ä¸€æ€§æª¢æŸ¥æ¨¡å¼

### ç°¡å–®å”¯ä¸€æ€§æª¢æŸ¥

```javascript
async function checkUnique(tableName, field, value, excludeId = null) {
  let query = `
    SELECT COUNT(*) as count 
    FROM ${tableName} 
    WHERE ${field} = ? AND is_deleted = 0
  `;
  const params = [value];
  
  // æ›´æ–°æ™‚æ’é™¤ç•¶å‰è¨˜éŒ„
  if (excludeId) {
    query += ` AND ${getPrimaryKey(tableName)} != ?`;
    params.push(excludeId);
  }
  
  const result = await db.prepare(query).bind(...params).first();
  return result.count === 0;
}

// ä½¿ç”¨ç¯„ä¾‹
const isUnique = await checkUnique('Clients', 'client_id', '12345678');
if (!isUnique) {
  throw new ConflictError('çµ±ä¸€ç·¨è™Ÿå·²å­˜åœ¨');
}
```

### è¤‡åˆå”¯ä¸€æ€§æª¢æŸ¥

```javascript
async function checkCompositeUnique(tableName, conditions, excludeId = null) {
  // æ§‹å»ºæŸ¥è©¢æ¢ä»¶
  const whereClauses = [];
  const params = [];
  
  for (const [field, value] of Object.entries(conditions)) {
    whereClauses.push(`${field} = ?`);
    params.push(value);
  }
  
  let query = `
    SELECT COUNT(*) as count 
    FROM ${tableName} 
    WHERE ${whereClauses.join(' AND ')} AND is_deleted = 0
  `;
  
  if (excludeId) {
    query += ` AND ${getPrimaryKey(tableName)} != ?`;
    params.push(excludeId);
  }
  
  const result = await db.prepare(query).bind(...params).first();
  return result.count === 0;
}

// ä½¿ç”¨ç¯„ä¾‹ï¼šæª¢æŸ¥åŒä¸€ä¸»é …ç›®ä¸‹å­é …ç›®åç¨±å”¯ä¸€
const isUnique = await checkCompositeUnique('Services', {
  parent_service_id: 1,
  service_name: 'è¨˜å¸³æœå‹™'
});
```

---

## éŒ¯èª¤è™•ç†æ¨¡å¼

### è‡ªå®šç¾©éŒ¯èª¤é¡åˆ¥

```javascript
class ValidationError extends Error {
  constructor(message) {
    super(message);
    this.name = 'ValidationError';
    this.statusCode = 422;
    this.code = 'VALIDATION_ERROR';
  }
}

class NotFoundError extends Error {
  constructor(message) {
    super(message);
    this.name = 'NotFoundError';
    this.statusCode = 404;
    this.code = 'RESOURCE_NOT_FOUND';
  }
}

class ConflictError extends Error {
  constructor(message) {
    super(message);
    this.name = 'ConflictError';
    this.statusCode = 409;
    this.code = 'RESOURCE_CONFLICT';
  }
}

class ForbiddenError extends Error {
  constructor(message) {
    super(message);
    this.name = 'ForbiddenError';
    this.statusCode = 403;
    this.code = 'FORBIDDEN';
  }
}
```

### çµ±ä¸€éŒ¯èª¤è™•ç† Middleware

```javascript
app.onError((err, c) => {
  console.error('Error:', err);
  
  // å·²çŸ¥éŒ¯èª¤é¡å‹
  if (err.statusCode) {
    return c.json(
      errorResponse(err.code, err.message),
      err.statusCode
    );
  }
  
  // æœªçŸ¥éŒ¯èª¤
  return c.json(
    errorResponse('INTERNAL_ERROR', 'ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤'),
    500
  );
});
```

---

## ğŸ“ æœ€ä½³å¯¦è¸æª¢æŸ¥æ¸…å–®

### Service å±¤å¯¦ç¾æª¢æŸ¥æ¸…å–®
- [ ] å¯¦ç¾ CRUD å®Œæ•´æµç¨‹
- [ ] é©—è­‰æ‰€æœ‰å¿…å¡«æ¬„ä½
- [ ] é©—è­‰æ‰€æœ‰æ¬„ä½æ ¼å¼
- [ ] æª¢æŸ¥å”¯ä¸€æ€§ç´„æŸ
- [ ] å¯¦ç¾è»Ÿåˆªé™¤ï¼ˆä¸å¯¦éš›åˆªé™¤è³‡æ–™ï¼‰
- [ ] è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
- [ ] å¯¦ç¾æ¬Šé™æª¢æŸ¥
- [ ] ä½¿ç”¨è‡ªå®šç¾©éŒ¯èª¤é¡åˆ¥
- [ ] è¿”å›çµ±ä¸€éŸ¿æ‡‰æ ¼å¼

### Repository å±¤å¯¦ç¾æª¢æŸ¥æ¸…å–®
- [ ] æ‰€æœ‰æŸ¥è©¢è‡ªå‹•éæ¿¾ `is_deleted = 0`
- [ ] æ–°å¢è³‡æ–™æ™‚è¨­ç½®æ¨™æº–æ¬„ä½ï¼ˆcreated_at, created_byç­‰ï¼‰
- [ ] æ›´æ–°è³‡æ–™æ™‚è¨­ç½® updated_at, updated_by
- [ ] å¯¦ç¾è»Ÿåˆªé™¤æ–¹æ³•
- [ ] ä½¿ç”¨åƒæ•¸åŒ–æŸ¥è©¢ï¼ˆé˜²æ­¢ SQL æ³¨å…¥ï¼‰

---

## ğŸ”— ç›¸é—œæ–‡æª”

- **[API å…±ç”¨è¦ç¯„](../APIè¦æ ¼/APIå…±ç”¨è¦ç¯„.md)** - API éŸ¿æ‡‰æ ¼å¼ã€éŒ¯èª¤è™•ç†
- **[å¾Œç«¯é–‹ç™¼è¦ç¯„](../é–‹ç™¼è¦ç¯„/å¾Œç«¯é–‹ç™¼è¦ç¯„.md)** - å¾Œç«¯ç·¨ç¢¼æ¨™æº–
- **[æ•¸æ“šæ¨¡å‹é€ŸæŸ¥è¡¨](../å¿«é€Ÿåƒè€ƒ/æ•¸æ“šæ¨¡å‹é€ŸæŸ¥è¡¨.md)** - è³‡æ–™è¡¨çµæ§‹

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025å¹´10æœˆ27æ—¥  
**é©ç”¨ç¯„åœï¼š** æ‰€æœ‰å¾Œç«¯æ¥­å‹™é‚è¼¯

