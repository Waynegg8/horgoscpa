# éšæ®µé€²åº¦æ›´æ–° - UI è¨­è¨ˆ

**é é¢è·¯å¾‘ï¼š** `/tasks/:taskId`  
**æ¬Šé™ï¼š** æ‰€æœ‰å“¡å·¥  
**æœ€å¾Œæ›´æ–°ï¼š** 2025å¹´10æœˆ27æ—¥

---

## é é¢çµæ§‹

### ä»»å‹™è©³æƒ…é ï¼ˆæ­¥é©Ÿæ¢è¦–åœ–ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›  ä»Ÿé‘½ä¼æ¥­ - è¨˜å¸³ - 114å¹´9-10æœˆ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¸½è¦½                                  â”‚
â”‚  é–‹å§‹ï¼š2024-11-01  |  åˆ°æœŸï¼š2024-11-15â”‚
â”‚  é€²åº¦ï¼š50% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚
â”‚  ç‹€æ…‹ï¼šğŸŸ¡ é€²è¡Œä¸­                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  éšæ®µé€²åº¦                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                        â”‚
â”‚  1. âœ… è³‡æ–™æ”¶é›†èˆ‡æ ¸å° (3å¤©) å·²å®Œæˆ     â”‚
â”‚     2024-11-01 â†’ 2024-11-03           â”‚
â”‚     å‚™è¨»ï¼šå·²æ”¶åˆ°å…¨éƒ¨ç™¼ç¥¨               â”‚
â”‚     [ç·¨è¼¯å‚™è¨»]                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                        â”‚
â”‚  2. ğŸŸ¢ ç‡Ÿæ¥­ç¨…éå¸³ (2å¤©) é€²è¡Œä¸­         â”‚
â”‚     2024-11-04 â†’ 2024-11-05           â”‚
â”‚     âš ï¸ å‰©1å¤©                          â”‚
â”‚     [æ¨™è¨˜å®Œæˆ] [æ–°å¢å‚™è¨»]             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                        â”‚
â”‚  3. ğŸ”’ æåˆ—æŠ˜èˆŠ (1å¤©) æœªé–‹å§‹           â”‚
â”‚     âš ï¸ éœ€å…ˆå®Œæˆã€Œéšæ®µ 2ï¼šç‡Ÿæ¥­ç¨…éå¸³ã€ â”‚
â”‚     [é–‹å§‹æ­¤éšæ®µ] (æŒ‰éˆ•ç¦ç”¨)            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                        â”‚
â”‚  4. âšª å ±è¡¨ç”¢å‡ºèˆ‡æª¢æŸ¥ (2å¤©) æœªé–‹å§‹     â”‚
â”‚     (éœ€ç­‰å¾…å‰éšæ®µ)                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## çµ„ä»¶è¨­è¨ˆ

### 1. éšæ®µå¡ç‰‡çµ„ä»¶
```vue
<template>
  <div 
    class="stage-card" 
    :class="stageStatusClass"
  >
    <div class="stage-header">
      <span class="stage-icon">{{ stageIcon }}</span>
      <h4>{{ stage.stage_order }}. {{ stage.stage_name }}</h4>
      <span class="stage-days">({{ stage.estimated_days }}å¤©)</span>
      <span :class="`stage-status ${stage.status}`">
        {{ stageStatusText }}
      </span>
    </div>
    
    <div v-if="stage.actual_start_date" class="stage-dates">
      <span>{{ stage.actual_start_date }}</span>
      <span>â†’</span>
      <span>{{ stage.expected_due_date }}</span>
      <span 
        v-if="stage.days_remaining !== null" 
        :class="remainingClass"
      >
        {{ remainingText }}
      </span>
    </div>
    
    <div v-if="stage.depends_on && stage.status === 'pending'" class="stage-dependency">
      <span class="warning-icon">âš ï¸</span>
      <span>éœ€å…ˆå®Œæˆã€Œ{{ stage.depends_on_name }}ã€</span>
    </div>
    
    <div v-if="stage.notes" class="stage-notes">
      å‚™è¨»ï¼š{{ stage.notes }}
    </div>
    
    <div class="stage-actions">
      <button 
        v-if="stage.status === 'pending' && canStart"
        @click="startStage(stage)"
      >
        é–‹å§‹æ­¤éšæ®µ
      </button>
      
      <button 
        v-if="stage.status === 'in_progress'"
        @click="completeStage(stage)"
        class="btn-primary"
      >
        æ¨™è¨˜å®Œæˆ
      </button>
      
      <button 
        v-if="stage.status === 'in_progress' || stage.status === 'completed'"
        @click="editNotes(stage)"
        class="btn-secondary"
      >
        {{ stage.notes ? 'ç·¨è¼¯å‚™è¨»' : 'æ–°å¢å‚™è¨»' }}
      </button>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue';

const props = defineProps<{ stage: Stage }>();

const stageIcon = computed(() => {
  switch (props.stage.status) {
    case 'completed': return 'âœ…';
    case 'in_progress': {
      if (props.stage.days_remaining <= 0) return 'ğŸ”´';
      if (props.stage.days_remaining === 1) return 'ğŸŸ¡';
      return 'ğŸŸ¢';
    }
    case 'pending': {
      return props.stage.depends_on && !props.stage.can_start ? 'ğŸ”’' : 'âšª';
    }
    default: return 'âšª';
  }
});

const stageStatusText = computed(() => {
  const statusMap = {
    pending: 'æœªé–‹å§‹',
    in_progress: 'é€²è¡Œä¸­',
    completed: 'å·²å®Œæˆ'
  };
  return statusMap[props.stage.status] || 'æœªçŸ¥';
});

const remainingText = computed(() => {
  const days = props.stage.days_remaining;
  if (days < 0) return `é€¾${Math.abs(days)}å¤©`;
  if (days === 0) return 'ä»Šå¤©åˆ°æœŸ';
  return `å‰©${days}å¤©`;
});

const remainingClass = computed(() => {
  const days = props.stage.days_remaining;
  if (days < 0) return 'text-danger';
  if (days <= 1) return 'text-warning';
  return 'text-success';
});

const canStart = computed(() => {
  return !props.stage.depends_on || props.stage.can_start;
});
</script>

<style>
.stage-card {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 16px;
  background: white;
}

.stage-card.completed {
  background: #f0f9ff;
  border-left: 4px solid #2196F3;
}

.stage-card.in-progress {
  background: #f0fff4;
  border-left: 4px solid #4CAF50;
}

.stage-card.overdue {
  background: #fff5f5;
  border-left: 4px solid #ff4444;
}

.stage-card.locked {
  background: #f5f5f5;
  opacity: 0.7;
}

.stage-dependency {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  background: #fff3cd;
  border-radius: 4px;
  margin-top: 8px;
}
</style>
```

### 2. å‚™è¨»ç·¨è¼¯å°è©±æ¡†
```vue
<template>
  <dialog class="notes-dialog">
    <h3>éšæ®µå‚™è¨»</h3>
    <p>{{ stage.stage_name }}</p>
    
    <textarea 
      v-model="notes"
      rows="5"
      placeholder="è¼¸å…¥éšæ®µå‚™è¨»..."
    ></textarea>
    
    <div class="dialog-actions">
      <button @click="saveNotes" class="btn-primary">å„²å­˜</button>
      <button @click="closeDialog">å–æ¶ˆ</button>
    </div>
  </dialog>
</template>
```

---

## é¡è‰²è¦å‰‡

### ç‹€æ…‹æŒ‡ç¤ºå™¨
| ç‹€æ…‹ | å‰©é¤˜å¤©æ•¸ | é¡è‰² | åœ–ç¤º | èªªæ˜ |
|------|----------|------|------|------|
| æœªé–‹å§‹ | - | ç°è‰² | âšª | å°šæœªé–‹å§‹ |
| æœªé–‹å§‹ï¼ˆé–å®šï¼‰ | - | ç°è‰² | ğŸ”’ | ä¾è³´æœªå®Œæˆ |
| é€²è¡Œä¸­ | â‰¥2å¤© | ç¶ è‰² | ğŸŸ¢ | é€²è¡Œé †åˆ© |
| é€²è¡Œä¸­ | 1å¤© | é»ƒè‰² | ğŸŸ¡ | æ¥è¿‘åˆ°æœŸ |
| é€²è¡Œä¸­ | 0å¤© | æ©™è‰² | ğŸŸ  | ä»Šå¤©åˆ°æœŸ |
| é€¾æœŸ | <0å¤© | ç´…è‰² | ğŸ”´ | å·²é€¾æœŸ |
| å·²å®Œæˆ | - | è—è‰² | âœ… | å·²å®Œæˆ |

---

## äº’å‹•æµç¨‹

### é–‹å§‹éšæ®µ
1. æª¢æŸ¥ä¾è³´æ˜¯å¦æ»¿è¶³
2. è‹¥æœªæ»¿è¶³ï¼Œé¡¯ç¤ºæç¤ºä¸¦ç¦ç”¨æŒ‰éˆ•
3. è‹¥æ»¿è¶³ï¼Œé»æ“Šã€Œé–‹å§‹æ­¤éšæ®µã€
4. è¨­å®šé–‹å§‹æ—¥æœŸå’Œé è¨ˆå®Œæˆæ—¥æœŸ
5. æ›´æ–°ç‹€æ…‹ç‚ºã€Œé€²è¡Œä¸­ã€

### å®Œæˆéšæ®µ
1. é»æ“Šã€Œæ¨™è¨˜å®Œæˆã€
2. å¯é¸æ–°å¢å‚™è¨»
3. è¨­å®šå®Œæˆæ—¥æœŸ
4. æ›´æ–°ç‹€æ…‹ç‚ºã€Œå·²å®Œæˆã€
5. è‡ªå‹•æª¢æŸ¥ä¸‹ä¸€éšæ®µæ˜¯å¦å¯é–‹å§‹

### æ–°å¢/ç·¨è¼¯å‚™è¨»
1. é»æ“Šã€Œæ–°å¢å‚™è¨»ã€æˆ–ã€Œç·¨è¼¯å‚™è¨»ã€
2. å½ˆå‡ºå°è©±æ¡†
3. è¼¸å…¥å‚™è¨»å…§å®¹
4. é»æ“Šã€Œå„²å­˜ã€

---

## ç›¸é—œæ–‡æª”

- [åŠŸèƒ½æ¨¡å¡Š - éšæ®µé€²åº¦æ›´æ–°](../../åŠŸèƒ½æ¨¡å¡Š/17-éšæ®µé€²åº¦æ›´æ–°.md)
- [æ¥­å‹™é‚è¼¯](./æ¥­å‹™é‚è¼¯.md)
- [æ¸¬è©¦æ¡ˆä¾‹](./æ¸¬è©¦æ¡ˆä¾‹.md)





