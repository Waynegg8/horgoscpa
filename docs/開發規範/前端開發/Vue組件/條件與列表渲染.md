# 條件與列表渲染

**最後更新：** 2025年10月27日

---

## v-if vs v-show

### 使用 v-if

```vue
<!-- 條件不常變化 -->
<div v-if="isAdmin" class="admin-panel">
  管理員面板
</div>

<!-- 互斥條件 -->
<div v-if="isLoading">載入中...</div>
<div v-else-if="hasError">發生錯誤</div>
<div v-else>{{ data }}</div>
```

### 使用 v-show

```vue
<!-- 條件頻繁切換 -->
<div v-show="isExpanded" class="details">
  詳細資訊
</div>
```

### 選擇指南

| 場景 | 使用 | 原因 |
|------|------|------|
| 權限控制 | `v-if` | 不渲染到 DOM |
| 初始很少改變 | `v-if` | 減少初始成本 |
| 頻繁切換 | `v-show` | 減少重渲染 |
| 標籤頁切換 | `v-show` | 保持狀態 |

---

## 列表渲染

### 必須使用 :key

```vue
<!-- ✅ 使用唯一 ID -->
<div
  v-for="client in clients"
  :key="client.client_id"
  class="client-card"
>
  {{ client.company_name }}
</div>

<!-- ❌ 使用 index -->
<div
  v-for="(client, index) in clients"
  :key="index"
>
  {{ client.company_name }}
</div>
```

### 為什麼不用 index？

當列表項目被刪除或重新排序時，index 會重新分配，導致：
- 輸入框內容錯位
- 組件狀態混亂
- 不必要的重渲染

---

## 檢查清單

- [ ] v-if vs v-show 使用正確
- [ ] 列表渲染有 :key
- [ ] :key 使用唯一 ID（不用 index）
- [ ] 避免 v-if 與 v-for 同時使用

---

**相關：** [響應式狀態](./響應式狀態.md) | [性能優化](../../性能優化/)

