# Vue 生命週期

**最後更新：** 2025年10月27日

---

## 常用生命週期

### onMounted

```typescript
onMounted(() => {
  console.log('Component mounted');
  // 適合：初始化資料、設定事件監聽器
});
```

### onUpdated

```typescript
onUpdated(() => {
  console.log('Component updated');
  // 適合：操作更新後的 DOM
});
```

### onUnmounted

```typescript
onUnmounted(() => {
  console.log('Component unmounted');
  // 適合：清理定時器、移除事件監聽器
});
```

---

## 使用指南

| 生命週期 | 用途 | 範例 |
|----------|------|------|
| `onMounted` | 初始化資料、設定事件 | 載入客戶列表 |
| `onUpdated` | DOM 更新後操作 | 重新計算高度 |
| `onUnmounted` | 清理資源 | 清除定時器 |
| `onBeforeMount` | 掛載前準備 | 很少使用 |
| `onBeforeUnmount` | 卸載前清理 | 儲存草稿 |

---

## 完整範例

```typescript
<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';

const timer = ref<number | null>(null);
const count = ref(0);

onMounted(() => {
  // 設定定時器
  timer.value = setInterval(() => {
    count.value++;
  }, 1000);
});

onUnmounted(() => {
  // 清理定時器
  if (timer.value) {
    clearInterval(timer.value);
  }
});
</script>
```

---

## 檢查清單

- [ ] onMounted 用於初始化
- [ ] onUnmounted 用於清理
- [ ] 清理所有定時器和事件監聽器

---

**相關：** [響應式狀態](./響應式狀態.md)

