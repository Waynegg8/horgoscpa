# è³‡æ–™åº«å‘½åè¦ç¯„

**æœ€å¾Œæ›´æ–°ï¼š** 2025å¹´10æœˆ27æ—¥

---

## 1. è¡¨æ ¼å‘½å

### è¦å‰‡ï¼šPascalCaseï¼ˆå¤§é§å³°ï¼‰

```sql
âœ… æ­£ç¢ºï¼š
CREATE TABLE Users (...);
CREATE TABLE Clients (...);
CREATE TABLE ClientServices (...);
CREATE TABLE ActiveTasks (...);
CREATE TABLE ModulePermissions (...);

âŒ éŒ¯èª¤ï¼š
CREATE TABLE users (...);              -- ä¸ä½¿ç”¨å°å¯«
CREATE TABLE client_services (...);    -- ä¸ä½¿ç”¨ snake_case
CREATE TABLE clientservices (...);     -- ç¼ºå°‘å¯è®€æ€§
```

### å‘½ååŸå‰‡

- âœ… ä½¿ç”¨è¤‡æ•¸å½¢å¼ï¼ˆè¡¨ç¤ºå¤šç­†è¨˜éŒ„ï¼‰
- âœ… ä½¿ç”¨å®Œæ•´å–®å­—ï¼ˆé¿å…ç¸®å¯«ï¼‰
- âœ… é—œè¯è¡¨ä½¿ç”¨å…©å€‹è¡¨åçµ„åˆ

```sql
âœ… Users              -- è¤‡æ•¸
âœ… ClientServices     -- é—œè¯è¡¨ï¼šClient + Services
âœ… ClientTagAssignments  -- é—œè¯è¡¨ï¼šClient + Tag + Assignments

âŒ User               -- ä¸ä½¿ç”¨å–®æ•¸
âŒ CS                 -- ä¸ä½¿ç”¨ç¸®å¯«
```

---

## 2. æ¬„ä½å‘½å

### è¦å‰‡ï¼šsnake_caseï¼ˆè›‡å½¢ï¼‰

```sql
âœ… æ­£ç¢ºï¼š
user_id INTEGER
company_name TEXT
created_at TEXT
is_active BOOLEAN
overtime_rate REAL

âŒ éŒ¯èª¤ï¼š
userId INTEGER       -- ä¸ä½¿ç”¨ camelCase
UserName TEXT        -- ä¸ä½¿ç”¨ PascalCase
CREATED_AT TEXT      -- ä¸ä½¿ç”¨å¤§å¯«
```

---

## 3. ä¸»éµå‘½å

### è¦å‰‡ï¼š`{å–®æ•¸è¡¨å}_id`

```sql
âœ… æ­£ç¢ºï¼š
-- Users è¡¨
user_id INTEGER PRIMARY KEY

-- Clients è¡¨
client_id TEXT PRIMARY KEY

-- TaskTemplates è¡¨
task_template_id INTEGER PRIMARY KEY

âŒ éŒ¯èª¤ï¼š
id INTEGER           -- ä¸æ¸…æ¥šæ˜¯å“ªå€‹è¡¨
user_pk INTEGER      -- ä¸ä½¿ç”¨ _pk å¾Œç¶´
userId INTEGER       -- ä¸ä½¿ç”¨ camelCase
```

---

## 4. å¤–éµå‘½å

### è¦å‰‡ï¼šèˆ‡å¼•ç”¨çš„ä¸»éµç›¸åŒ

```sql
âœ… æ­£ç¢ºï¼š
CREATE TABLE TimeLogs (
    log_id INTEGER PRIMARY KEY,
    user_id INTEGER,              -- å¼•ç”¨ Users.user_id
    client_id TEXT,               -- å¼•ç”¨ Clients.client_id
    FOREIGN KEY (user_id) REFERENCES Users(user_id),
    FOREIGN KEY (client_id) REFERENCES Clients(client_id)
);

âŒ éŒ¯èª¤ï¼š
CREATE TABLE TimeLogs (
    id INTEGER PRIMARY KEY,
    user INTEGER,                 -- ä¸æ¸…æ¥š
    client TEXT                   -- ä¸æ¸…æ¥š
);
```

---

## 5. å¸ƒæ—æ¬„ä½å‘½å

### è¦å‰‡ï¼šä½¿ç”¨ `is_` æˆ– `has_` å‰ç¶´

```sql
âœ… æ­£ç¢ºï¼š
is_active BOOLEAN
is_deleted BOOLEAN
is_admin BOOLEAN
has_permission BOOLEAN

âŒ éŒ¯èª¤ï¼š
active BOOLEAN       -- ä¸æ¸…æ¥šæ˜¯ç‹€æ…‹é‚„æ˜¯å‹•ä½œ
deleted BOOLEAN      -- ä¸æ¸…æ¥šå«ç¾©
admin BOOLEAN        -- ä¸æ¸…æ¥šæ˜¯åè©é‚„æ˜¯ç‹€æ…‹
```

---

## 6. æ—¥æœŸ/æ™‚é–“æ¬„ä½å‘½å

### è¦å‰‡ï¼šä½¿ç”¨ `_at` æˆ– `_date` å¾Œç¶´

```sql
âœ… æ­£ç¢ºï¼š
created_at TEXT      -- æ™‚é–“æˆ³
updated_at TEXT
deleted_at TEXT
start_date TEXT      -- æ—¥æœŸ
end_date TEXT
work_date TEXT

âŒ éŒ¯èª¤ï¼š
created TEXT         -- ä¸æ¸…æ¥šæ˜¯ä»€éº¼
update TEXT
date TEXT            -- å¤ªç± çµ±
```

---

## 7. ç´¢å¼•å‘½å

### è¦å‰‡ï¼š`idx_{è¡¨å}_{æ¬„ä½å}`

```sql
âœ… æ­£ç¢ºï¼š
CREATE INDEX idx_clients_status ON Clients(status);
CREATE INDEX idx_time_logs_user_id ON TimeLogs(user_id);
CREATE INDEX idx_time_logs_work_date ON TimeLogs(work_date);

-- è¤‡åˆç´¢å¼•
CREATE INDEX idx_time_logs_user_date ON TimeLogs(user_id, work_date);

âŒ éŒ¯èª¤ï¼š
CREATE INDEX index1 ON Clients(status);           -- ä¸æ¸…æ¥š
CREATE INDEX clients_idx ON Clients(status);      -- é †åºéŒ¯èª¤
```

---

## 8. å¤–éµç´„æŸå‘½å

### è¦å‰‡ï¼š`fk_{è¡¨å}_{å¼•ç”¨è¡¨å}`

```sql
âœ… æ­£ç¢ºï¼š
CONSTRAINT fk_time_logs_users 
    FOREIGN KEY (user_id) REFERENCES Users(user_id)

CONSTRAINT fk_time_logs_clients 
    FOREIGN KEY (client_id) REFERENCES Clients(client_id)

âŒ éŒ¯èª¤ï¼š
CONSTRAINT fk1 FOREIGN KEY (user_id) ...          -- ä¸æ¸…æ¥š
```

---

## 9. æ¨™æº–æ¬„ä½

### æ‰€æœ‰è¡¨æ ¼å¿…é ˆåŒ…å«ï¼ˆå¯©è¨ˆæ¬„ä½ï¼‰

```sql
created_at TEXT NOT NULL          -- å»ºç«‹æ™‚é–“
updated_at TEXT NOT NULL          -- æ›´æ–°æ™‚é–“
created_by INTEGER                -- å»ºç«‹è€…
updated_by INTEGER                -- æ›´æ–°è€…
```

### é‡è¦è¡¨æ ¼æ‡‰åŒ…å«ï¼ˆè»Ÿåˆªé™¤ï¼‰

```sql
is_deleted BOOLEAN DEFAULT 0      -- æ˜¯å¦å·²åˆªé™¤
deleted_at TEXT                   -- åˆªé™¤æ™‚é–“
deleted_by INTEGER                -- åˆªé™¤è€…
```

---

## ğŸ“ å®Œæ•´ç¯„ä¾‹

```sql
CREATE TABLE ClientTags (
    -- ä¸»éµ
    tag_id INTEGER PRIMARY KEY AUTOINCREMENT,
    
    -- æ¥­å‹™æ¬„ä½
    tag_name TEXT NOT NULL UNIQUE,
    tag_color TEXT,
    display_order INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT 1,
    
    -- å¯©è¨ˆæ¬„ä½
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL,
    created_by INTEGER,
    updated_by INTEGER,
    
    -- è»Ÿåˆªé™¤
    is_deleted BOOLEAN DEFAULT 0,
    deleted_at TEXT,
    deleted_by INTEGER,
    
    -- å¤–éµç´„æŸ
    CONSTRAINT fk_client_tags_created_by 
        FOREIGN KEY (created_by) REFERENCES Users(user_id),
    CONSTRAINT fk_client_tags_updated_by 
        FOREIGN KEY (updated_by) REFERENCES Users(user_id),
    CONSTRAINT fk_client_tags_deleted_by 
        FOREIGN KEY (deleted_by) REFERENCES Users(user_id)
);

-- ç´¢å¼•
CREATE INDEX idx_client_tags_name ON ClientTags(tag_name);
CREATE INDEX idx_client_tags_active ON ClientTags(is_active);
CREATE INDEX idx_client_tags_deleted ON ClientTags(is_deleted);
```

---

## ç›¸é—œæ–‡æª”

- [ç¨‹å¼ç¢¼å‘½å](./ç¨‹å¼ç¢¼å‘½å.md)
- [è³‡æ–™åº«è¨­è¨ˆæ¨™æº–](../å¾Œç«¯é–‹ç™¼/06-è³‡æ–™åº«è¨­è¨ˆæ¨™æº–.md)

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025å¹´10æœˆ27æ—¥





