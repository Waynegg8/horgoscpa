# 文檔結構指南

**最後更新：** 2025年10月27日

---

## 四層金字塔結構

本專案採用**四層金字塔文檔結構**，每層針對不同目的和讀者：

```
📋 功能模塊（業務層）100-150行/檔
   ├─ 快速理解「是什麼」、「為什麼」
   └─ 索引其他詳細文檔
   
🔧 技術規格（實作層）80-120行/檔
   ├─ 詳細的「怎麼做」、「如何測試」
   └─ UI設計、業務邏輯、測試案例分離
   
🔌 API 規格（介面層）40-60行/端點
   ├─ 精確的端點定義
   └─ 每個端點獨立文檔 + 概覽文檔
   
💾 資料庫設計（資料層）80-100行/表
   ├─ 清楚的資料結構
   └─ 每個資料表獨立文檔
```

---

## 第一層：功能模塊（100-150行）

**位置：** `docs/功能模塊/`

### 目的
讓 AI 或開發者快速理解功能的業務價值和使用場景。

### 包含內容
- 功能概述（2-3段）
- 使用場景（3個實際案例）
- 子功能列表（如有）
- 技術規格文檔索引
- API 規格索引
- 資料表索引
- 相關功能連結

### 不包含內容
- ❌ 詳細的 UI 設計
- ❌ 完整的業務邏輯
- ❌ API 請求/回應範例
- ❌ 資料表結構

### 檔案命名
```
01-員工權限設定.md
02-業務規則管理.md
03-服務項目管理.md
...
```

### 範例結構
```markdown
# [編號] - [功能名稱]

## 功能概述
[2-3段說明]

## 使用場景
### 場景1：[名稱]
[描述]

## [子功能/流程]
[根據類型調整]

## 技術規格文檔索引
[連結]

## API 規格索引
[連結]

## 資料表索引
[連結]

## 相關文檔
[連結]
```

---

## 第二層：技術規格（80-120行/檔）

**位置：** `docs/技術規格/{模塊名稱}/`

### 目的
提供詳細的實作指導，讓開發者知道如何實現功能。

### 拆分原則
將一個功能的技術規格拆分為：
- `UI設計.md` - 頁面結構、互動流程、對話框
- `業務邏輯.md` - 計算公式、驗證規則、狀態機
- `測試案例.md` - 完整的測試步驟和預期結果

如果有子功能，可進一步細分：
```
技術規格/業務規則/
├─ 2.1-國定假日-UI設計.md
├─ 2.2-假別類型-UI設計.md
├─ 2.3-加班費率-勞基法對照表.md
├─ 補休機制.md
└─ 測試案例.md
```

### 每個文檔包含
- 清楚的標題和用途
- 詳細但精簡的說明（80-120行）
- 圖表或範例（如需要）
- 相關文檔連結

---

## 第三層：API 規格（40-60行/端點）

**位置：** `docs/API規格/{模塊名稱}/`

### 目的
精確定義 API 端點，讓前後端開發者有共同規範。

### 檔案結構
```
API規格/員工權限/
├─ _概覽.md              # 所有端點快速參考（50行）
├─ 獲取預設權限.md        # 單一端點完整說明（40-60行）
├─ 更新預設權限.md
├─ 獲取員工權限列表.md
└─ ...
```

### _概覽.md 內容
```markdown
# [模塊名稱] API 概覽

## 端點清單

| 端點 | 方法 | 用途 |
|------|------|------|
| /api/v1/... | GET | ... |

## 權限要求
[說明]

## 詳細文檔
- [端點1](./端點1.md)
- [端點2](./端點2.md)
```

### 單一端點文檔內容
```markdown
# [動作] - [資源名稱]

**端點：** `[METHOD] /api/v1/...`
**權限：** [權限]

## 概述
[1-2句說明]

## 請求
[參數、Body]

## 驗證規則
[規則列表]

## 回應
[成功/錯誤範例]

## 後端邏輯（可選）
[核心邏輯]
```

---

## 第四層：資料庫設計（80-100行/表）

**位置：** `docs/資料庫設計/{分類}/`

### 目的
清楚定義資料結構和查詢方式。

### 分類原則
依功能相關性分類：
```
資料庫設計/
├─ 核心資料表/
│  ├─ Users.md
│  └─ Roles.md
├─ 權限系統/
│  └─ ModulePermissions.md
├─ 業務規則/
│  ├─ Holidays.md
│  ├─ LeaveTypes.md
│  └─ OvertimeRates.md
└─ 補休系統/
   ├─ CompensatoryLeaveBalance.md
   ├─ CompensatoryLeaveTransactions.md
   └─ CompensatoryLeaveUsage.md
```

### 每個資料表文檔內容
```markdown
# [資料表名稱]

**用途：** [一句話說明]

## 表格結構
```sql
CREATE TABLE ...
```

## 欄位說明
[表格]

## 索引
[SQL]

## 範例資料
[INSERT]

## 常用查詢
### 查詢1：[用途]
```sql
SELECT ...
```

## 關聯資料表
[列表]
```

---

## 文檔大小規範

**嚴格限制：**
- 功能模塊：100-150 行
- 技術規格：80-120 行
- API 端點：40-60 行
- 資料表：80-100 行

**超過限制時：**
- 檢查是否有重複內容
- 拆分成多個子文檔
- 移除不必要的說明

**為什麼限制大小？**
1. AI 更容易理解和查找
2. 開發者更快找到需要的資訊
3. 更新維護更容易
4. 減少認知負擔

---

## 文檔間的連結

### 向下連結（從概要到詳細）
功能模塊 → 技術規格 → API規格 → 資料庫設計

```markdown
## 技術規格文檔索引
- [UI設計](../../技術規格/員工權限/UI設計.md)
```

### 向上連結（從詳細回概要）
```markdown
**所屬功能：** [員工權限設定](../../功能模塊/01-員工權限設定.md)
```

### 橫向連結（相關功能）
```markdown
## 相關文檔
- [業務規則管理](./02-業務規則管理.md)
```

---

## AI 使用指南

### 開發新功能時的閱讀順序

**第 1 步：快速理解（5分鐘）**
```
閱讀：功能模塊文檔
目的：理解「是什麼」、「為什麼」
```

**第 2 步：深入細節（10分鐘）**
```
閱讀：技術規格文檔
  ├─ UI設計 → 了解介面
  ├─ 業務邏輯 → 了解規則
  └─ 測試案例 → 了解驗證
```

**第 3 步：API介面（5分鐘）**
```
閱讀：API規格文檔
  ├─ _概覽 → 了解所有端點
  └─ 特定端點 → 了解詳細定義
```

**第 4 步：資料結構（5分鐘）**
```
閱讀：資料庫設計文檔
  └─ 相關資料表 → 了解結構和查詢
```

### 修復問題時的閱讀順序

```
1. 定位問題模塊（看錯誤訊息）
2. 閱讀功能模塊文檔（理解預期行為）
3. 閱讀技術規格文檔（理解設計）
4. 對照代碼（找出差異）
5. 更新文檔或修復代碼
```

---

## 文檔更新原則

### 何時更新

**立即更新：**
- 新增功能的完整討論後
- 修改設計決策後
- 發現文檔錯誤時
- API 設計變更時
- 資料表結構變更時

### 更新範圍

新增一個功能時，需要更新：

```
1. 功能模塊文檔（新增或更新相關模塊）
2. 技術規格文檔（新增 UI、邏輯、測試）
3. API 規格文檔（新增端點文檔）
4. 資料庫設計文檔（新增資料表文檔）
5. 相關功能的索引和連結
```

---

## 相關文檔

- [AI開發指南](../AI開發指南.md)
- [開發流程詳解](./開發流程詳解.md)
- [文檔撰寫標準](./文檔撰寫標準.md)

---

**最後更新：** 2025年10月27日



**最後更新：** 2025年10月27日

---

## 四層金字塔結構

本專案採用**四層金字塔文檔結構**，每層針對不同目的和讀者：

```
📋 功能模塊（業務層）100-150行/檔
   ├─ 快速理解「是什麼」、「為什麼」
   └─ 索引其他詳細文檔
   
🔧 技術規格（實作層）80-120行/檔
   ├─ 詳細的「怎麼做」、「如何測試」
   └─ UI設計、業務邏輯、測試案例分離
   
🔌 API 規格（介面層）40-60行/端點
   ├─ 精確的端點定義
   └─ 每個端點獨立文檔 + 概覽文檔
   
💾 資料庫設計（資料層）80-100行/表
   ├─ 清楚的資料結構
   └─ 每個資料表獨立文檔
```

---

## 第一層：功能模塊（100-150行）

**位置：** `docs/功能模塊/`

### 目的
讓 AI 或開發者快速理解功能的業務價值和使用場景。

### 包含內容
- 功能概述（2-3段）
- 使用場景（3個實際案例）
- 子功能列表（如有）
- 技術規格文檔索引
- API 規格索引
- 資料表索引
- 相關功能連結

### 不包含內容
- ❌ 詳細的 UI 設計
- ❌ 完整的業務邏輯
- ❌ API 請求/回應範例
- ❌ 資料表結構

### 檔案命名
```
01-員工權限設定.md
02-業務規則管理.md
03-服務項目管理.md
...
```

### 範例結構
```markdown
# [編號] - [功能名稱]

## 功能概述
[2-3段說明]

## 使用場景
### 場景1：[名稱]
[描述]

## [子功能/流程]
[根據類型調整]

## 技術規格文檔索引
[連結]

## API 規格索引
[連結]

## 資料表索引
[連結]

## 相關文檔
[連結]
```

---

## 第二層：技術規格（80-120行/檔）

**位置：** `docs/技術規格/{模塊名稱}/`

### 目的
提供詳細的實作指導，讓開發者知道如何實現功能。

### 拆分原則
將一個功能的技術規格拆分為：
- `UI設計.md` - 頁面結構、互動流程、對話框
- `業務邏輯.md` - 計算公式、驗證規則、狀態機
- `測試案例.md` - 完整的測試步驟和預期結果

如果有子功能，可進一步細分：
```
技術規格/業務規則/
├─ 2.1-國定假日-UI設計.md
├─ 2.2-假別類型-UI設計.md
├─ 2.3-加班費率-勞基法對照表.md
├─ 補休機制.md
└─ 測試案例.md
```

### 每個文檔包含
- 清楚的標題和用途
- 詳細但精簡的說明（80-120行）
- 圖表或範例（如需要）
- 相關文檔連結

---

## 第三層：API 規格（40-60行/端點）

**位置：** `docs/API規格/{模塊名稱}/`

### 目的
精確定義 API 端點，讓前後端開發者有共同規範。

### 檔案結構
```
API規格/員工權限/
├─ _概覽.md              # 所有端點快速參考（50行）
├─ 獲取預設權限.md        # 單一端點完整說明（40-60行）
├─ 更新預設權限.md
├─ 獲取員工權限列表.md
└─ ...
```

### _概覽.md 內容
```markdown
# [模塊名稱] API 概覽

## 端點清單

| 端點 | 方法 | 用途 |
|------|------|------|
| /api/v1/... | GET | ... |

## 權限要求
[說明]

## 詳細文檔
- [端點1](./端點1.md)
- [端點2](./端點2.md)
```

### 單一端點文檔內容
```markdown
# [動作] - [資源名稱]

**端點：** `[METHOD] /api/v1/...`
**權限：** [權限]

## 概述
[1-2句說明]

## 請求
[參數、Body]

## 驗證規則
[規則列表]

## 回應
[成功/錯誤範例]

## 後端邏輯（可選）
[核心邏輯]
```

---

## 第四層：資料庫設計（80-100行/表）

**位置：** `docs/資料庫設計/{分類}/`

### 目的
清楚定義資料結構和查詢方式。

### 分類原則
依功能相關性分類：
```
資料庫設計/
├─ 核心資料表/
│  ├─ Users.md
│  └─ Roles.md
├─ 權限系統/
│  └─ ModulePermissions.md
├─ 業務規則/
│  ├─ Holidays.md
│  ├─ LeaveTypes.md
│  └─ OvertimeRates.md
└─ 補休系統/
   ├─ CompensatoryLeaveBalance.md
   ├─ CompensatoryLeaveTransactions.md
   └─ CompensatoryLeaveUsage.md
```

### 每個資料表文檔內容
```markdown
# [資料表名稱]

**用途：** [一句話說明]

## 表格結構
```sql
CREATE TABLE ...
```

## 欄位說明
[表格]

## 索引
[SQL]

## 範例資料
[INSERT]

## 常用查詢
### 查詢1：[用途]
```sql
SELECT ...
```

## 關聯資料表
[列表]
```

---

## 文檔大小規範

**嚴格限制：**
- 功能模塊：100-150 行
- 技術規格：80-120 行
- API 端點：40-60 行
- 資料表：80-100 行

**超過限制時：**
- 檢查是否有重複內容
- 拆分成多個子文檔
- 移除不必要的說明

**為什麼限制大小？**
1. AI 更容易理解和查找
2. 開發者更快找到需要的資訊
3. 更新維護更容易
4. 減少認知負擔

---

## 文檔間的連結

### 向下連結（從概要到詳細）
功能模塊 → 技術規格 → API規格 → 資料庫設計

```markdown
## 技術規格文檔索引
- [UI設計](../../技術規格/員工權限/UI設計.md)
```

### 向上連結（從詳細回概要）
```markdown
**所屬功能：** [員工權限設定](../../功能模塊/01-員工權限設定.md)
```

### 橫向連結（相關功能）
```markdown
## 相關文檔
- [業務規則管理](./02-業務規則管理.md)
```

---

## AI 使用指南

### 開發新功能時的閱讀順序

**第 1 步：快速理解（5分鐘）**
```
閱讀：功能模塊文檔
目的：理解「是什麼」、「為什麼」
```

**第 2 步：深入細節（10分鐘）**
```
閱讀：技術規格文檔
  ├─ UI設計 → 了解介面
  ├─ 業務邏輯 → 了解規則
  └─ 測試案例 → 了解驗證
```

**第 3 步：API介面（5分鐘）**
```
閱讀：API規格文檔
  ├─ _概覽 → 了解所有端點
  └─ 特定端點 → 了解詳細定義
```

**第 4 步：資料結構（5分鐘）**
```
閱讀：資料庫設計文檔
  └─ 相關資料表 → 了解結構和查詢
```

### 修復問題時的閱讀順序

```
1. 定位問題模塊（看錯誤訊息）
2. 閱讀功能模塊文檔（理解預期行為）
3. 閱讀技術規格文檔（理解設計）
4. 對照代碼（找出差異）
5. 更新文檔或修復代碼
```

---

## 文檔更新原則

### 何時更新

**立即更新：**
- 新增功能的完整討論後
- 修改設計決策後
- 發現文檔錯誤時
- API 設計變更時
- 資料表結構變更時

### 更新範圍

新增一個功能時，需要更新：

```
1. 功能模塊文檔（新增或更新相關模塊）
2. 技術規格文檔（新增 UI、邏輯、測試）
3. API 規格文檔（新增端點文檔）
4. 資料庫設計文檔（新增資料表文檔）
5. 相關功能的索引和連結
```

---

## 相關文檔

- [AI開發指南](../AI開發指南.md)
- [開發流程詳解](./開發流程詳解.md)
- [文檔撰寫標準](./文檔撰寫標準.md)

---

**最後更新：** 2025年10月27日



