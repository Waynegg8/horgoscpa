# 前端開發規範

**最後更新：** 2025年10月27日  
**適用範圍：** 所有前端代碼（HTML、CSS、JavaScript/TypeScript、Vue.js）

---

## 目錄

1. [HTML 結構規範](#1-html-結構規範)
2. [CSS/Tailwind 規範](#2-csstailwind-規範)
3. [Vue.js 組件規範](#3-vuejs-組件規範)
4. [共用組件庫規範](#4-共用組件庫規範)
5. [響應式設計規範](#5-響應式設計規範)
6. [可訪問性規範](#6-可訪問性規範)
7. [性能優化規範](#7-性能優化規範)
8. [前端文件組織](#8-前端文件組織)

---

## 1. HTML 結構規範

### 1.1 語義化 HTML

**使用語義化標籤，不濫用 div：**

```html
✅ 正確：
<header class="site-header">
  <nav class="main-nav">
    <ul>
      <li><a href="/">首頁</a></li>
    </ul>
  </nav>
</header>

<main class="main-content">
  <article class="client-card">
    <h2>客戶名稱</h2>
    <p>客戶描述</p>
  </article>
</main>

<footer class="site-footer">
  <p>&copy; 2025 公司名稱</p>
</footer>

❌ 錯誤（過度使用 div）：
<div class="site-header">
  <div class="main-nav">
    <div class="nav-list">
      <div class="nav-item">
        <div class="nav-link">首頁</div>
      </div>
    </div>
  </div>
</div>
```

**語義化標籤對照表：**

| 用途 | 正確標籤 | 錯誤做法 |
|------|----------|----------|
| 頁面標題 | `<h1>`, `<h2>` | `<div class="title">` |
| 導航 | `<nav>` | `<div class="nav">` |
| 主要內容 | `<main>` | `<div class="main">` |
| 文章/卡片 | `<article>` | `<div class="card">` |
| 側邊欄 | `<aside>` | `<div class="sidebar">` |
| 章節 | `<section>` | `<div class="section">` |
| 頁腳 | `<footer>` | `<div class="footer">` |
| 按鈕 | `<button>` | `<div class="button">` |
| 表單 | `<form>` | `<div class="form">` |

---

### 1.2 HTML 層級結構

**避免過深的嵌套（建議最多 4-5 層）：**

```html
✅ 正確（3層）：
<div class="client-list">
  <div class="client-card">
    <h3 class="client-name">客戶名稱</h3>
  </div>
</div>

❌ 錯誤（7層，過深）：
<div class="wrapper">
  <div class="container">
    <div class="content">
      <div class="list">
        <div class="item">
          <div class="card">
            <div class="title">客戶名稱</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
```

---

### 1.3 HTML 屬性順序

**標準屬性順序（提高可讀性）：**

```html
<button
  id="save-button"
  class="btn btn-primary"
  type="button"
  name="save"
  data-action="save"
  disabled
  @click="handleSave"
>
  儲存
</button>
```

**順序規則：**
1. `id` - 唯一識別
2. `class` - 樣式類別
3. `type`, `name`, `value` - 表單屬性
4. `data-*` - 自訂屬性
5. `disabled`, `required` - 狀態屬性
6. `@click`, `v-model` - Vue 指令

---

### 1.4 表單規範

**完整的表單結構：**

```html
✅ 正確：
<form @submit.prevent="handleSubmit" class="client-form">
  <!-- 使用 label 提高可訪問性 -->
  <div class="form-group">
    <label for="company-name" class="form-label">
      公司名稱 <span class="required">*</span>
    </label>
    <input
      id="company-name"
      v-model="form.company_name"
      type="text"
      class="form-input"
      required
      placeholder="請輸入公司名稱"
      aria-describedby="company-name-hint"
    />
    <small id="company-name-hint" class="form-hint">
      請輸入完整的公司名稱
    </small>
    <span v-if="errors.company_name" class="form-error">
      {{ errors.company_name }}
    </span>
  </div>

  <div class="form-actions">
    <button type="submit" class="btn btn-primary">
      儲存
    </button>
    <button type="button" class="btn btn-secondary" @click="handleCancel">
      取消
    </button>
  </div>
</form>

❌ 錯誤（缺少 label、id、type）：
<div>
  <input v-model="name" placeholder="名稱" />
  <div @click="save">儲存</div>
</div>
```

---

### 1.5 按鈕規範

**使用正確的按鈕元素：**

```html
✅ 正確：
<!-- 表單提交 -->
<button type="submit" class="btn btn-primary">
  儲存
</button>

<!-- 一般動作 -->
<button type="button" class="btn btn-secondary" @click="handleClick">
  取消
</button>

<!-- 連結按鈕 -->
<a href="/clients" class="btn btn-link">
  查看客戶列表
</a>

❌ 錯誤：
<!-- 不使用 div 做按鈕（無法鍵盤操作、無語義） -->
<div class="button" @click="save">儲存</div>

<!-- 不使用 a 做動作按鈕（a 標籤應該用於導航） -->
<a @click="save">儲存</a>
```

---

## 2. CSS/Tailwind 規範

### 2.1 優先使用 Tailwind CSS

**核心原則：** 優先使用 Tailwind utility classes，減少自訂 CSS

```html
✅ 正確（使用 Tailwind）：
<div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-md">
  <h2 class="text-xl font-bold text-gray-800">客戶名稱</h2>
  <button class="px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700">
    編輯
  </button>
</div>

❌ 錯誤（自訂 CSS，增加維護成本）：
<div class="client-card">
  <h2 class="title">客戶名稱</h2>
  <button class="edit-btn">編輯</button>
</div>

<style>
.client-card {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  background: white;
  border-radius: 0.5rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
/* ... 更多自訂樣式 */
</style>
```

---

### 2.2 Tailwind 使用規範

**間距標準（使用 Tailwind spacing scale）：**

```html
<!-- 間距（Padding/Margin） -->
p-1   → 0.25rem (4px)   ✅ 小元素內距
p-2   → 0.5rem  (8px)   ✅ 按鈕內距
p-4   → 1rem    (16px)  ✅ 卡片內距
p-6   → 1.5rem  (24px)  ✅ 區塊內距
p-8   → 2rem    (32px)  ✅ 大區塊內距

m-2   → 0.5rem  (8px)   ✅ 元素間距
m-4   → 1rem    (16px)  ✅ 區塊間距
m-6   → 1.5rem  (24px)  ✅ 章節間距

<!-- 不使用任意值（除非必要） -->
✅ p-4
❌ p-[17px]
```

**顏色標準（使用 Tailwind 色彩系統）：**

```html
<!-- 主要顏色 -->
bg-blue-600       ✅ 主要操作按鈕
bg-gray-100       ✅ 背景色
bg-white          ✅ 卡片背景
text-gray-900     ✅ 主要文字
text-gray-600     ✅ 次要文字
text-gray-400     ✅ 提示文字

<!-- 狀態顏色 -->
bg-green-600      ✅ 成功
bg-red-600        ✅ 錯誤/刪除
bg-yellow-500     ✅ 警告
bg-gray-400       ✅ 禁用

<!-- 不使用任意顏色（除非品牌色） -->
✅ bg-blue-600
❌ bg-[#1a73e8]
```

**文字大小標準：**

```html
text-xs    → 0.75rem  (12px)  ✅ 小提示
text-sm    → 0.875rem (14px)  ✅ 次要文字、表單標籤
text-base  → 1rem     (16px)  ✅ 正文
text-lg    → 1.125rem (18px)  ✅ 副標題
text-xl    → 1.25rem  (20px)  ✅ 小標題
text-2xl   → 1.5rem   (24px)  ✅ 頁面標題
text-3xl   → 1.875rem (30px)  ✅ 大標題
```

**圓角標準：**

```html
rounded-none  → 0        ✅ 無圓角
rounded-sm    → 0.125rem ✅ 微圓角（輸入框）
rounded       → 0.25rem  ✅ 標準圓角（按鈕、卡片）
rounded-md    → 0.375rem ✅ 中圓角
rounded-lg    → 0.5rem   ✅ 大圓角
rounded-full  → 9999px   ✅ 完全圓形（頭像、標籤）
```

---

### 2.3 何時使用自訂 CSS

**僅在以下情況使用自訂 CSS：**

1. **複雜動畫**（Tailwind 無法實現）
2. **頁面特定樣式**（且必須加前綴）
3. **覆寫第三方組件樣式**

**自訂 CSS 規範：**

```vue
<template>
  <div class="client-detail-page">
    <div class="client-detail-header">
      <!-- 頁面特定結構 -->
    </div>
  </div>
</template>

<style scoped>
/* ✅ 正確：使用頁面前綴，避免全局污染 */
.client-detail-page {
  /* 頁面特定樣式 */
}

.client-detail-header {
  /* 複雜動畫或特殊佈局 */
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from { transform: translateY(-20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* ❌ 錯誤：沒有前綴，可能污染其他頁面 */
.header {
  /* ... */
}

.button {
  /* ... */
}
</style>
```

---

### 2.4 CSS 類別命名規範（僅用於自訂 CSS）

**使用 BEM 命名法：**

```html
<!-- Block（區塊） -->
<div class="client-card">
  <!-- Element（元素） -->
  <h3 class="client-card__title">客戶名稱</h3>
  <p class="client-card__description">描述</p>
  
  <!-- Modifier（修飾符） -->
  <button class="client-card__button client-card__button--primary">
    編輯
  </button>
  <button class="client-card__button client-card__button--secondary">
    刪除
  </button>
</div>
```

**命名規則：**
- Block: `kebab-case` (例如：`client-card`)
- Element: `block__element` (例如：`client-card__title`)
- Modifier: `block--modifier` 或 `block__element--modifier`

---

## 3. Vue.js 組件規範

### 3.1 組件檔案結構

**標準結構順序：**

```vue
<script setup lang="ts">
// 1. Imports（按類別分組）
import { ref, computed, onMounted, watch } from 'vue';
import { useRouter } from 'vue-router';
import { useClientStore } from '@/stores/client';
import StyledButton from '@/components/common/StyledButton.vue';
import type { Client } from '@/types/client';

// 2. Props 定義
interface Props {
  clientId: string;
  mode?: 'view' | 'edit';
  showActions?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
  mode: 'view',
  showActions: true
});

// 3. Emits 定義
const emit = defineEmits<{
  save: [client: Client];
  cancel: [];
  delete: [clientId: string];
}>();

// 4. Composables & Stores
const router = useRouter();
const clientStore = useClientStore();

// 5. Reactive State
const isLoading = ref(false);
const isEditing = ref(false);
const form = ref<Partial<Client>>({
  company_name: '',
  contact_person: ''
});
const errors = ref<Record<string, string>>({});

// 6. Computed Properties
const isValid = computed(() => {
  return form.value.company_name && form.value.company_name.length >= 2;
});

const submitButtonText = computed(() => {
  return isLoading.value ? '儲存中...' : '儲存';
});

// 7. Watchers
watch(() => props.clientId, async (newId) => {
  if (newId) {
    await loadClient(newId);
  }
});

// 8. Methods
const loadClient = async (id: string) => {
  isLoading.value = true;
  try {
    const client = await clientStore.getClient(id);
    if (client) {
      form.value = { ...client };
    }
  } catch (error) {
    console.error('Load client failed:', error);
  } finally {
    isLoading.value = false;
  }
};

const validateForm = (): boolean => {
  errors.value = {};
  
  if (!form.value.company_name) {
    errors.value.company_name = '請輸入公司名稱';
    return false;
  }
  
  if (form.value.company_name.length < 2) {
    errors.value.company_name = '公司名稱至少需要2個字元';
    return false;
  }
  
  return true;
};

const handleSave = async () => {
  if (!validateForm()) return;
  
  isLoading.value = true;
  try {
    const savedClient = await clientStore.updateClient(props.clientId, form.value);
    emit('save', savedClient);
  } catch (error) {
    console.error('Save failed:', error);
    errors.value.general = '儲存失敗，請稍後再試';
  } finally {
    isLoading.value = false;
  }
};

const handleCancel = () => {
  emit('cancel');
};

const handleDelete = () => {
  if (confirm('確定要刪除此客戶嗎？')) {
    emit('delete', props.clientId);
  }
};

// 9. Lifecycle Hooks
onMounted(async () => {
  if (props.clientId) {
    await loadClient(props.clientId);
  }
});
</script>

<template>
  <div class="client-form">
    <!-- Loading State -->
    <div v-if="isLoading" class="flex items-center justify-center p-8">
      <span class="text-gray-600">載入中...</span>
    </div>

    <!-- Form Content -->
    <form v-else @submit.prevent="handleSave" class="space-y-4">
      <!-- 公司名稱 -->
      <div class="form-group">
        <label for="company-name" class="block text-sm font-medium text-gray-700 mb-1">
          公司名稱 <span class="text-red-600">*</span>
        </label>
        <input
          id="company-name"
          v-model="form.company_name"
          type="text"
          class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
          :class="{ 'border-red-500': errors.company_name }"
          placeholder="請輸入公司名稱"
          :disabled="props.mode === 'view'"
        />
        <span v-if="errors.company_name" class="text-sm text-red-600 mt-1">
          {{ errors.company_name }}
        </span>
      </div>

      <!-- 聯絡人 -->
      <div class="form-group">
        <label for="contact-person" class="block text-sm font-medium text-gray-700 mb-1">
          聯絡人
        </label>
        <input
          id="contact-person"
          v-model="form.contact_person"
          type="text"
          class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="請輸入聯絡人"
          :disabled="props.mode === 'view'"
        />
      </div>

      <!-- Error Message -->
      <div v-if="errors.general" class="p-3 bg-red-50 border border-red-200 rounded text-sm text-red-600">
        {{ errors.general }}
      </div>

      <!-- Actions -->
      <div v-if="props.showActions && props.mode === 'edit'" class="flex gap-2 justify-end">
        <StyledButton
          type="submit"
          variant="primary"
          :disabled="!isValid || isLoading"
        >
          {{ submitButtonText }}
        </StyledButton>
        
        <StyledButton
          type="button"
          variant="secondary"
          @click="handleCancel"
          :disabled="isLoading"
        >
          取消
        </StyledButton>
        
        <StyledButton
          type="button"
          variant="danger"
          @click="handleDelete"
          :disabled="isLoading"
        >
          刪除
        </StyledButton>
      </div>
    </form>
  </div>
</template>

<style scoped>
/* 僅在必要時使用自訂樣式 */
/* 優先使用 Tailwind classes */
</style>
```

---

### 3.2 組件命名規範

**組件檔案命名：PascalCase**

```
✅ ClientForm.vue
✅ ClientList.vue
✅ StyledButton.vue
✅ UserProfile.vue

❌ clientForm.vue       -- 不使用 camelCase
❌ client-form.vue      -- 不使用 kebab-case
❌ ClientFormComponent.vue -- 不加 Component 後綴
```

**組件使用時：PascalCase**

```vue
✅ <ClientForm :client-id="id" />
✅ <StyledButton variant="primary" />

❌ <client-form />      -- 不使用 kebab-case
❌ <clientForm />       -- 不使用 camelCase
```

---

### 3.3 Props 命名規範

```typescript
// Props 定義：camelCase
interface Props {
  clientId: string;          // ✅
  showActions: boolean;      // ✅
  defaultValue: string;      // ✅
}

// Template 使用：kebab-case
<ClientForm
  :client-id="id"           // ✅
  :show-actions="true"      // ✅
  :default-value="value"    // ✅
/>
```

---

### 3.4 條件渲染規範

**v-if vs v-show：**

```vue
<!-- 使用 v-if：條件不常變化 -->
<div v-if="isAdmin" class="admin-panel">
  管理員面板
</div>

<!-- 使用 v-show：條件頻繁切換 -->
<div v-show="isExpanded" class="details">
  詳細資訊
</div>

<!-- 使用 v-else：互斥條件 -->
<div v-if="isLoading">載入中...</div>
<div v-else-if="hasError">發生錯誤</div>
<div v-else>{{ data }}</div>
```

---

### 3.5 列表渲染規範

**必須使用 :key：**

```vue
✅ 正確：
<div
  v-for="client in clients"
  :key="client.client_id"
  class="client-card"
>
  {{ client.company_name }}
</div>

❌ 錯誤（使用 index 作為 key，可能導致錯誤）：
<div
  v-for="(client, index) in clients"
  :key="index"
>
  {{ client.company_name }}
</div>
```

---

## 4. 共用組件庫規範

### 4.1 組件庫結構

```
frontend/src/components/
├── common/                    -- 共用組件（所有頁面都可用）
│   ├── StyledButton.vue      -- 標準按鈕
│   ├── StyledInput.vue       -- 標準輸入框
│   ├── StyledSelect.vue      -- 標準下拉選單
│   ├── StyledModal.vue       -- 標準彈窗
│   ├── StyledTable.vue       -- 標準表格
│   ├── StyledCard.vue        -- 標準卡片
│   ├── LoadingSpinner.vue    -- 載入動畫
│   ├── EmptyState.vue        -- 空狀態
│   └── Pagination.vue        -- 分頁組件
│
└── features/                  -- 功能組件（特定模塊專用）
    ├── clients/
    │   ├── ClientForm.vue
    │   ├── ClientCard.vue
    │   └── ClientFilters.vue
    ├── tasks/
    │   ├── TaskBoard.vue
    │   └── TaskStageProgress.vue
    └── timesheet/
        ├── TimesheetGrid.vue
        └── OvertimeCalculator.vue
```

---

### 4.2 標準按鈕組件 (StyledButton.vue)

**使用範例：**

```vue
<template>
  <!-- 主要按鈕 -->
  <StyledButton variant="primary" @click="handleSave">
    儲存
  </StyledButton>

  <!-- 次要按鈕 -->
  <StyledButton variant="secondary" @click="handleCancel">
    取消
  </StyledButton>

  <!-- 危險按鈕 -->
  <StyledButton variant="danger" @click="handleDelete">
    刪除
  </StyledButton>

  <!-- 禁用狀態 -->
  <StyledButton variant="primary" :disabled="!isValid">
    提交
  </StyledButton>

  <!-- 載入狀態 -->
  <StyledButton variant="primary" :loading="isLoading">
    儲存中...
  </StyledButton>

  <!-- 不同大小 -->
  <StyledButton variant="primary" size="sm">小按鈕</StyledButton>
  <StyledButton variant="primary" size="md">中按鈕</StyledButton>
  <StyledButton variant="primary" size="lg">大按鈕</StyledButton>
</template>
```

**實作範例：**

```vue
<!-- components/common/StyledButton.vue -->
<script setup lang="ts">
interface Props {
  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
  loading?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
  variant: 'primary',
  size: 'md',
  type: 'button',
  disabled: false,
  loading: false
});

const baseClasses = 'inline-flex items-center justify-center font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2';

const variantClasses = {
  primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 disabled:bg-blue-300',
  secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500 disabled:bg-gray-100',
  danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300',
  ghost: 'bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500'
};

const sizeClasses = {
  sm: 'px-3 py-1.5 text-sm',
  md: 'px-4 py-2 text-base',
  lg: 'px-6 py-3 text-lg'
};
</script>

<template>
  <button
    :type="props.type"
    :disabled="props.disabled || props.loading"
    :class="[
      baseClasses,
      variantClasses[props.variant],
      sizeClasses[props.size],
      { 'opacity-50 cursor-not-allowed': props.disabled || props.loading }
    ]"
  >
    <svg
      v-if="props.loading"
      class="animate-spin -ml-1 mr-2 h-4 w-4"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
    >
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
    <slot />
  </button>
</template>
```

---

### 4.3 何時創建新共用組件

**創建共用組件的條件（滿足任一即可）：**
1. 同樣的元素在 **3個或以上** 的地方使用
2. 元素有複雜的狀態邏輯
3. 元素需要保持樣式一致性

**範例決策：**

```
按鈕（Button）
- 使用頻率：所有頁面
- 複雜度：中（variant, size, loading 狀態）
→ ✅ 創建 StyledButton.vue

簡單的分隔線（Divider）
- 使用頻率：少數頁面
- 複雜度：低
→ ❌ 不創建組件，直接使用 <hr class="my-4 border-gray-200" />

複雜的資料表格（DataTable）
- 使用頻率：多個頁面
- 複雜度：高（排序、篩選、分頁）
→ ✅ 創建 StyledTable.vue
```

---

## 5. 響應式設計規範

### 5.1 Tailwind 斷點標準

**標準斷點：**

```
sm:  640px  (平板直向)
md:  768px  (平板橫向)
lg:  1024px (筆電)
xl:  1280px (桌面)
2xl: 1536px (大桌面)
```

**使用範例：**

```html
<!-- Mobile First 設計 -->
<div class="
  p-4               <!-- 手機：16px -->
  sm:p-6            <!-- 平板：24px -->
  lg:p-8            <!-- 桌面：32px -->
">
  <h1 class="
    text-2xl        <!-- 手機：24px -->
    sm:text-3xl     <!-- 平板：30px -->
    lg:text-4xl     <!-- 桌面：36px -->
    font-bold
  ">
    標題
  </h1>

  <!-- 響應式佈局 -->
  <div class="
    grid
    grid-cols-1     <!-- 手機：1欄 -->
    sm:grid-cols-2  <!-- 平板：2欄 -->
    lg:grid-cols-3  <!-- 桌面：3欄 -->
    gap-4
  ">
    <div>項目 1</div>
    <div>項目 2</div>
    <div>項目 3</div>
  </div>
</div>
```

---

### 5.2 響應式組件範例

```vue
<template>
  <!-- 響應式導航 -->
  <nav class="
    flex
    flex-col          <!-- 手機：垂直 -->
    lg:flex-row       <!-- 桌面：水平 -->
    gap-2
    lg:gap-4
  ">
    <a href="/">首頁</a>
    <a href="/clients">客戶</a>
    <a href="/tasks">任務</a>
  </nav>

  <!-- 響應式表格（手機改為卡片） -->
  <div class="
    hidden            <!-- 手機：隱藏表格 -->
    lg:block          <!-- 桌面：顯示表格 -->
  ">
    <table class="w-full">
      <!-- 桌面版表格 -->
    </table>
  </div>

  <div class="
    block             <!-- 手機：顯示卡片 -->
    lg:hidden         <!-- 桌面：隱藏卡片 -->
  ">
    <div v-for="client in clients" :key="client.id" class="card">
      <!-- 手機版卡片 -->
    </div>
  </div>
</template>
```

---

## 6. 可訪問性規範 (Accessibility)

### 6.1 ARIA 標籤

**表單欄位：**

```html
<label for="email" class="form-label">
  電子郵件
</label>
<input
  id="email"
  type="email"
  aria-describedby="email-hint email-error"
  aria-invalid="false"
  aria-required="true"
/>
<small id="email-hint">請輸入有效的電子郵件地址</small>
<span id="email-error" role="alert">{{ emailError }}</span>
```

**按鈕：**

```html
<!-- 有文字的按鈕不需要 aria-label -->
<button>儲存</button>

<!-- 僅圖示的按鈕需要 aria-label -->
<button aria-label="關閉">
  <svg>...</svg>
</button>
```

**載入狀態：**

```html
<div v-if="isLoading" role="status" aria-live="polite">
  <span class="sr-only">載入中...</span>
  <LoadingSpinner />
</div>
```

---

### 6.2 鍵盤操作

**確保所有交互元素可鍵盤操作：**

```html
<!-- ✅ button 元素天然支援鍵盤 -->
<button @click="handleClick">點擊</button>

<!-- ✅ a 標籤天然支援鍵盤 -->
<a href="/page">連結</a>

<!-- ❌ div 不支援鍵盤，需要額外處理 -->
<div @click="handleClick">點擊</div>

<!-- ✅ 如果必須使用 div，加上 tabindex 和 role -->
<div
  role="button"
  tabindex="0"
  @click="handleClick"
  @keydown.enter="handleClick"
  @keydown.space.prevent="handleClick"
>
  點擊
</div>
```

---

## 7. 性能優化規範

### 7.1 圖片優化

```html
<!-- 使用適當的圖片格式 -->
<img src="logo.svg" alt="公司 Logo" />      <!-- 圖示使用 SVG -->
<img src="photo.webp" alt="照片" />         <!-- 照片使用 WebP -->

<!-- 使用 loading="lazy" 延遲載入 -->
<img src="image.jpg" alt="描述" loading="lazy" />

<!-- 使用 srcset 提供不同解析度 -->
<img
  src="image-800w.jpg"
  srcset="
    image-400w.jpg 400w,
    image-800w.jpg 800w,
    image-1200w.jpg 1200w
  "
  sizes="(max-width: 640px) 400px, (max-width: 1024px) 800px, 1200px"
  alt="描述"
  loading="lazy"
/>
```

---

### 7.2 列表性能優化

**使用虛擬滾動（長列表）：**

```vue
<!-- 安裝 vue-virtual-scroller -->
<RecycleScroller
  :items="clients"
  :item-size="80"
  key-field="client_id"
  v-slot="{ item }"
>
  <ClientCard :client="item" />
</RecycleScroller>
```

**使用分頁（短列表）：**

```vue
<Pagination
  :total="totalClients"
  :per-page="50"
  :current-page="currentPage"
  @change="handlePageChange"
/>
```

---

### 7.3 避免不必要的重渲染

```vue
<script setup lang="ts">
// ✅ 使用 computed 快取計算結果
const filteredClients = computed(() => {
  return clients.value.filter(c => c.status === 'active');
});

// ❌ 使用方法會每次渲染都重新計算
const getFilteredClients = () => {
  return clients.value.filter(c => c.status === 'active');
};
</script>

<template>
  <!-- ✅ 使用 computed -->
  <div v-for="client in filteredClients" :key="client.id">
    {{ client.name }}
  </div>

  <!-- ❌ 使用方法 -->
  <div v-for="client in getFilteredClients()" :key="client.id">
    {{ client.name }}
  </div>
</template>
```

---

## 8. 前端文件組織

### 8.1 完整目錄結構

```
frontend/src/
├── api/                      -- API 呼叫模塊
│   ├── client.api.ts
│   ├── task.api.ts
│   └── auth.api.ts
│
├── assets/                   -- 靜態資源
│   ├── images/
│   ├── fonts/
│   └── styles/
│       └── tailwind.css
│
├── components/               -- 組件
│   ├── common/              -- 共用組件
│   │   ├── StyledButton.vue
│   │   ├── StyledInput.vue
│   │   └── ...
│   └── features/            -- 功能組件
│       ├── clients/
│       ├── tasks/
│       └── timesheet/
│
├── composables/              -- 組合式函數
│   ├── useAuth.ts
│   ├── usePermission.ts
│   └── usePagination.ts
│
├── layouts/                  -- 佈局組件
│   ├── DefaultLayout.vue
│   └── AuthLayout.vue
│
├── pages/                    -- 頁面組件
│   ├── Dashboard.vue
│   ├── Clients.vue
│   ├── Tasks.vue
│   └── Login.vue
│
├── router/                   -- 路由配置
│   ├── index.ts
│   └── guards/
│       ├── auth.guard.ts
│       └── permission.guard.ts
│
├── stores/                   -- Pinia 狀態管理
│   ├── auth.store.ts
│   ├── client.store.ts
│   └── task.store.ts
│
├── types/                    -- TypeScript 類型定義
│   ├── client.ts
│   ├── task.ts
│   └── api.ts
│
├── utils/                    -- 工具函數
│   ├── date.ts
│   ├── format.ts
│   └── validation.ts
│
├── App.vue                   -- 根組件
└── main.ts                   -- 入口文件
```

---

### 8.2 導入順序規範

```typescript
// 1. Vue 核心
import { ref, computed, onMounted } from 'vue';
import { useRouter, useRoute } from 'vue-router';

// 2. 第三方套件
import axios from 'axios';
import dayjs from 'dayjs';

// 3. Stores
import { useAuthStore } from '@/stores/auth';
import { useClientStore } from '@/stores/client';

// 4. Composables
import { useAuth } from '@/composables/useAuth';
import { usePagination } from '@/composables/usePagination';

// 5. Components
import StyledButton from '@/components/common/StyledButton.vue';
import ClientCard from '@/components/features/clients/ClientCard.vue';

// 6. Types
import type { Client, CreateClientRequest } from '@/types/client';
import type { ApiResponse } from '@/types/api';

// 7. Utils
import { formatDate } from '@/utils/date';
import { validateEmail } from '@/utils/validation';
```

---

## 9. AI 開發檢查清單

### 9.1 HTML 檢查

- [ ] 使用語義化標籤（nav, main, article, aside, footer）
- [ ] 避免過深的嵌套（最多 4-5 層）
- [ ] 表單有完整的 label 和 id
- [ ] 按鈕使用 button 元素，不使用 div
- [ ] 列表使用 ul/ol + li
- [ ] 圖片有 alt 屬性
- [ ] 交互元素可鍵盤操作

### 9.2 CSS/Tailwind 檢查

- [ ] 優先使用 Tailwind utility classes
- [ ] 使用標準的間距（p-4, m-4）
- [ ] 使用標準的顏色（bg-blue-600, text-gray-900）
- [ ] 使用標準的文字大小（text-base, text-lg）
- [ ] 自訂 CSS 有頁面前綴（避免全局污染）
- [ ] 響應式設計使用 Tailwind 斷點（sm:, md:, lg:）

### 9.3 Vue.js 檢查

- [ ] 組件檔案結構符合標準順序
- [ ] Props 和 Emits 有完整的 TypeScript 類型定義
- [ ] 使用 computed 而非方法（需快取的計算）
- [ ] 列表渲染使用正確的 :key（不使用 index）
- [ ] v-if vs v-show 使用正確
- [ ] 組件命名使用 PascalCase

### 9.4 共用組件檢查

- [ ] 檢查是否有現成的共用組件可用
- [ ] 優先使用 StyledButton 而非自訂按鈕
- [ ] 優先使用 StyledInput 而非自訂輸入框
- [ ] 優先使用 StyledModal 而非自訂彈窗
- [ ] 重複的UI元素已提取為共用組件（使用3次以上）

### 9.5 性能檢查

- [ ] 圖片使用 loading="lazy"
- [ ] 長列表使用虛擬滾動或分頁
- [ ] 使用 computed 快取計算結果
- [ ] 避免在 template 中使用複雜計算

### 9.6 可訪問性檢查

- [ ] 表單欄位有 label 和正確的 id
- [ ] 僅圖示的按鈕有 aria-label
- [ ] 錯誤訊息有 role="alert"
- [ ] 所有交互元素可鍵盤操作
- [ ] 載入狀態有 role="status"

---

## 10. 相關文檔

- [專案開發規格總覽](../AI開發指南/專案開發規格總覽.md)
- [代碼規範](./代碼規範.md)
- [文檔結構指南](./文檔結構指南.md)
- [API 標準規範](../API設計/00-API標準規範.md)

---

**最後更新：** 2025年10月27日  
**文檔版本：** 1.0


