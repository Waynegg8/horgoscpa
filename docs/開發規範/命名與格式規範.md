# 命名與格式規範

**適用範圍：** API、程式碼、資料庫、檔案  
**最後更新：** 2025年10月27日

---

## 📋 目錄
- [API 命名](#api-命名)
- [程式碼命名](#程式碼命名)
- [資料庫命名](#資料庫命名)
- [檔案命名](#檔案命名)

---

## API 命名

### 端點路徑：kebab-case + 複數名詞
```
✅ 正確：
GET  /api/v1/clients
GET  /api/v1/time-logs
GET  /api/v1/leave-types

❌ 錯誤：
GET  /api/v1/Clients          // 不用大寫
GET  /api/v1/timeLogs         // 不用 camelCase
GET  /api/v1/client           // 不用單數
```

### 子資源：/{resource}/:id/{sub-resource}
```
✅ 正確：
GET    /api/v1/clients/:id/services
POST   /api/v1/tasks/:id/stages/:stageId/complete

❌ 錯誤：
GET  /api/v1/clientServices/:clientId
```

### 查詢參數：snake_case
```
✅ 正確：
?page=1&limit=50&start_date=2025-01-01&user_id=123

❌ 錯誤：
?Page=1&pageLimit=50&StartDate=2025-01-01
```

### 錯誤碼：UPPER_SNAKE_CASE
```
✅ 正確：
VALIDATION_ERROR, CLIENT_NOT_FOUND, UNAUTHORIZED

❌ 錯誤：
validationError, ClientNotFound
```

---

## 程式碼命名

### TypeScript/JavaScript

#### 變數和函式：camelCase
```typescript
// 變數
const userName = 'John';
const isActive = true;
const totalCount = 100;

// 函式
function calculateTotal() { }
function getUserById(id) { }
async function fetchClients() { }
```

#### 類別和介面：PascalCase
```typescript
// 類別
class ClientService { }
class DatabaseRepository { }

// 介面
interface User { }
interface ClientData { }
```

#### 常數：UPPER_SNAKE_CASE
```typescript
const API_BASE_URL = 'https://api.example.com';
const MAX_RETRY_COUNT = 3;
const DEFAULT_PAGE_SIZE = 50;
```

#### 私有成員：_前綴
```typescript
class UserService {
  private _cache = new Map();
  
  private _validateUser(user) { }
  
  public getUser(id) {
    return this._cache.get(id);
  }
}
```

### Vue 組件

#### 組件名：PascalCase
```vue
<!-- 定義 -->
<script setup>
// ClientList.vue
</script>

<!-- 使用 -->
<template>
  <ClientList />
</template>
```

#### Props/Emits：camelCase（定義），kebab-case（使用）
```vue
<script setup>
// 定義
const props = defineProps({
  clientId: String,
  showActions: Boolean
});

const emit = defineEmits(['update:modelValue']);
</script>

<template>
  <!-- 使用 -->
  <ChildComponent 
    :client-id="id"
    :show-actions="true"
    @update:model-value="handleUpdate"
  />
</template>
```

---

## 資料庫命名

### 表名：PascalCase（複數）
```sql
Users
Clients
TimeLogs
LeaveApplications
```

### 欄位名：snake_case
```sql
user_id
company_name
created_at
is_deleted
```

### 主鍵：表名單數 + _id
```sql
user_id      -- Users 表
client_id    -- Clients 表
task_id      -- Tasks 表
```

### 外鍵：關聯表的主鍵名
```sql
-- Clients 表
assignee_user_id INTEGER  -- 關聯到 Users.user_id

-- TimeLogs 表
user_id INTEGER           -- 關聯到 Users.user_id
client_id TEXT            -- 關聯到 Clients.client_id
```

### 布林欄位：is_ 或 has_ 開頭
```sql
is_admin BOOLEAN
is_active BOOLEAN
is_deleted BOOLEAN
has_children BOOLEAN
```

### 日期時間欄位：_at 或 _date 結尾
```sql
created_at TEXT
updated_at TEXT
deleted_at TEXT
start_date TEXT
due_date TEXT
```

---

## 檔案命名

### 前端檔案

#### Vue 組件：PascalCase.vue
```
ClientList.vue
TaskBoard.vue
StyledButton.vue
UserProfile.vue
```

#### 頁面組件：...Page.vue
```
ClientsPage.vue
DashboardPage.vue
SettingsPage.vue
```

#### API 服務：camelCase.js
```
clientApi.js
authApi.js
taskApi.js
```

#### Store：camelCase.js
```
userStore.js
clientStore.js
taskStore.js
```

### 後端檔案

#### Service：PascalCase.service.js
```
ClientService.service.js
AuthService.service.js
TaskService.service.js
```

#### Repository：PascalCase.repository.js
```
ClientRepository.repository.js
UserRepository.repository.js
```

#### Middleware：camelCase.middleware.js
```
auth.middleware.js
permission.middleware.js
validation.middleware.js
```

#### Routes：kebab-case.routes.js
```
clients.routes.js
auth.routes.js
time-logs.routes.js
```

### 資料庫檔案
```
schema.sql
migrations/001_create_users.sql
migrations/002_create_clients.sql
seeds/init_data.sql
```

---

## 統一規範總表

| 類型 | 規範 | 範例 |
|------|------|------|
| **API 端點** | kebab-case | `/api/v1/time-logs` |
| **查詢參數** | snake_case | `?start_date=2025-01-01` |
| **錯誤碼** | UPPER_SNAKE_CASE | `VALIDATION_ERROR` |
| **資料表** | PascalCase | `Users`, `TimeLogs` |
| **資料庫欄位** | snake_case | `user_id`, `created_at` |
| **TS 變數/函式** | camelCase | `userName`, `getUser()` |
| **TS 類別/介面** | PascalCase | `ClientService`, `User` |
| **TS 常數** | UPPER_SNAKE_CASE | `MAX_RETRY_COUNT` |
| **Vue 組件** | PascalCase | `ClientList.vue` |
| **Vue Props** | camelCase (定義) | `clientId` |
| **Vue Props** | kebab-case (使用) | `:client-id` |

---

## 🔗 相關文檔

- [API 共用規範](../API規格/API共用規範.md)
- [Vue 開發規範](./Vue開發規範.md)
- [後端開發規範](./後端開發規範.md)

---

**最後更新：** 2025年10月27日  
**本文檔合併了命名規範下的所有子文檔（5個）**

