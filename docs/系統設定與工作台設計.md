# ç³»çµ±è¨­å®šèˆ‡å·¥ä½œå°è¨­è¨ˆ

**ç‰ˆæœ¬**: 1.0  
**æœ€å¾Œæ›´æ–°**: 2025-10-26

---

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

### ç³»çµ±è¨­å®š (settings.html)
çµ±ä¸€ç®¡ç†ç³»çµ±å„é …è¨­å®šï¼ŒåŒ…å«å“¡å·¥ç®¡ç†ã€å®¢æˆ¶ç®¡ç†ã€ç³»çµ±åƒæ•¸ç­‰ã€‚

### å·¥ä½œå° (dashboard.html)
æä¾›å€‹äººåŒ–çš„å·¥ä½œå„€è¡¨æ¿ï¼Œé¡¯ç¤ºå¾…è¾¦ä»»å‹™ã€å·¥æ™‚çµ±è¨ˆã€é‡è¦æé†’ç­‰ã€‚

---

## ğŸ—„ï¸ è³‡æ–™è¡¨çµæ§‹

### employees (å“¡å·¥è³‡æ–™)
```sql
CREATE TABLE employees (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,                -- å“¡å·¥å§“å
  employee_id TEXT UNIQUE,           -- å“¡å·¥ç·¨è™Ÿ
  department TEXT,                   -- éƒ¨é–€
  position TEXT,                     -- è·ä½
  hire_date DATE,                    -- åˆ°è·æ—¥æœŸ
  birth_date DATE,                   -- ç”Ÿæ—¥
  phone TEXT,
  email TEXT,
  address TEXT,
  emergency_contact TEXT,            -- ç·Šæ€¥è¯çµ¡äºº
  emergency_phone TEXT,              -- ç·Šæ€¥è¯çµ¡é›»è©±
  status TEXT DEFAULT 'active',      -- active, resigned, on_leave
  resignation_date DATE,             -- é›¢è·æ—¥æœŸ
  notes TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### system_parameters (ç³»çµ±åƒæ•¸)
```sql
CREATE TABLE system_parameters (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  param_key TEXT NOT NULL UNIQUE,    -- åƒæ•¸éµå€¼
  param_value TEXT,                  -- åƒæ•¸å€¼
  param_type TEXT,                   -- string, number, boolean, json
  description TEXT,                  -- åƒæ•¸èªªæ˜
  category TEXT,                     -- åƒæ•¸åˆ†é¡
  is_editable BOOLEAN DEFAULT 1,     -- æ˜¯å¦å¯ç·¨è¼¯
  updated_by TEXT,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**ç³»çµ±åƒæ•¸ç¯„ä¾‹**ï¼š
```sql
INSERT INTO system_parameters (param_key, param_value, param_type, description, category) VALUES
  ('company_name', 'éœçˆ¾æœæ–¯æœƒè¨ˆå¸«äº‹å‹™æ‰€', 'string', 'å…¬å¸åç¨±', 'general'),
  ('work_hours_per_day', '8', 'number', 'æ¯æ—¥æ¨™æº–å·¥æ™‚', 'timesheet'),
  ('annual_leave_enabled', 'true', 'boolean', 'å•Ÿç”¨å¹´å‡ç®¡ç†', 'leave'),
  ('overtime_rates', '{"weekday": 1.34, "weekend": 1.67}', 'json', 'åŠ ç­è²»ç‡', 'timesheet');
```

### task_reminders (ä»»å‹™æé†’)
```sql
CREATE TABLE task_reminders (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  task_id INTEGER,
  reminder_type TEXT NOT NULL,       -- task_due, approval_pending, follow_up
  message TEXT NOT NULL,             -- æé†’è¨Šæ¯
  is_read BOOLEAN DEFAULT 0,
  priority TEXT DEFAULT 'normal',    -- low, normal, high
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE
);
```

---

## ğŸ’» ç³»çµ±è¨­å®šé é¢è¨­è¨ˆ

### settings.html æ¨™ç±¤çµæ§‹

```
[å“¡å·¥ç®¡ç†] [å®¢æˆ¶ç®¡ç†] [ç³»çµ±åƒæ•¸] [ä»»å‹™ç¯„æœ¬] [æ¥­å‹™é¡å‹]
```

#### æ¨™ç±¤ 1: å“¡å·¥ç®¡ç†
```
å“¡å·¥åˆ—è¡¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[+ æ–°å¢å“¡å·¥]  æœå°‹: [æœå°‹å“¡å·¥...]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼µç´œè“                              â”‚
â”‚ æœƒè¨ˆéƒ¨ | æœƒè¨ˆå¸« | 2020-01-15 åˆ°è·  â”‚
â”‚ user1@example.com                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ç·¨è¼¯] [åœç”¨] [æŸ¥çœ‹å·¥æ™‚]
```

#### æ¨™ç±¤ 2: å®¢æˆ¶ç®¡ç†
```
å®¢æˆ¶åˆ—è¡¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[+ æ–°å¢å®¢æˆ¶]  æœå°‹: [æœå°‹å®¢æˆ¶...]  ç‹€æ…‹: [å…¨éƒ¨â–¾]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ABCç§‘æŠ€å…¬å¸                         â”‚
â”‚ çµ±ç·¨: 12345678 | è¯çµ¡äºº: ç‹å°æ˜     â”‚
â”‚ æœå‹™: è¨˜å¸³(æœˆ)ã€ç‡Ÿæ¥­ç¨…(é›™æœˆ)        â”‚
â”‚ è² è²¬: ç´œè“                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[æŸ¥çœ‹è©³æƒ…] [ç·¨è¼¯] [æœå‹™é…ç½®]
```

#### æ¨™ç±¤ 3: ç³»çµ±åƒæ•¸
```
ç³»çµ±åƒæ•¸è¨­å®š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä¸€èˆ¬è¨­å®š
  å…¬å¸åç¨±: [éœçˆ¾æœæ–¯æœƒè¨ˆå¸«äº‹å‹™æ‰€]
  å…¬å¸é›»è©±: [02-1234-5678]
  å…¬å¸åœ°å€: [...]

å·¥æ™‚è¨­å®š
  æ¯æ—¥æ¨™æº–å·¥æ™‚: [8] å°æ™‚
  åŠ ç­è²»ç‡(å¹³æ—¥): [1.34]
  åŠ ç­è²»ç‡(å‡æ—¥): [2.0]

å¹´å‡è¨­å®š
  â˜‘ å•Ÿç”¨å¹´å‡ç®¡ç†
  å¹´å‡çµè½‰ä¸Šé™: [5] å¤©
  å¹´å‡éæœŸæé†’: [30] å¤©å‰

[å„²å­˜è¨­å®š]
```

#### æ¨™ç±¤ 4: ä»»å‹™ç¯„æœ¬
```
ä»»å‹™ç¯„æœ¬ç®¡ç†
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[+ æ–°å¢ç¯„æœ¬]  åˆ†é¡: [å…¨éƒ¨â–¾]

å¤šéšæ®µä»»å‹™ç¯„æœ¬:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‡Ÿæ¥­ç¨…ç”³å ±æµç¨‹                      â”‚
â”‚ 8 å€‹éšæ®µ | ä½¿ç”¨æ¬¡æ•¸: 45            â”‚
â”‚ é ä¼°å·¥æ™‚: 7.5 å°æ™‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ç·¨è¼¯] [è¤‡è£½] [åˆªé™¤] [æŸ¥çœ‹çµ±è¨ˆ]
```

#### æ¨™ç±¤ 5: æ¥­å‹™é¡å‹
```
æ¥­å‹™é¡å‹ç®¡ç†
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[+ æ–°å¢æ¥­å‹™é¡å‹]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœƒè¨ˆæœå‹™                            â”‚
â”‚ ä»£ç¢¼: accounting                    â”‚
â”‚ å®¢æˆ¶æ•¸: 25 | SOP æ•¸: 8             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ç·¨è¼¯] [æŸ¥çœ‹å®¢æˆ¶] [æŸ¥çœ‹ SOP]
```

---

## ğŸ’» å·¥ä½œå°é é¢è¨­è¨ˆ

### dashboard.html ä½ˆå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 æ­¡è¿å›ä¾†ï¼Œå¼µç´œè“                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆ‘çš„ä»»å‹™     â”‚ â”‚ æœ¬æœˆå·¥æ™‚     â”‚ â”‚ å¹´å‡é¤˜é¡     â”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚   5 å€‹       â”‚ â”‚  168 å°æ™‚    â”‚ â”‚   10 å¤©      â”‚
â”‚   å¾…è™•ç†     â”‚ â”‚  +15 åŠ ç­    â”‚ â”‚   /15 å¤©     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ ä»Šæ—¥å¾…è¾¦ (3)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¡ ABCå…¬å¸ - 10æœˆç‡Ÿæ¥­ç¨…ç”³å ± (ä»Šå¤©æˆªæ­¢)          â”‚
â”‚ â–¡ XYZå…¬å¸ - è¨˜å¸³æœå‹™ (æ˜å¤©æˆªæ­¢)                â”‚
â”‚ â–¡ å¯©æ ¸æå››çš„è«‹å‡ç”³è«‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æœ¬é€±å·¥æ™‚åˆ†æ      â”‚ â”‚ ğŸ“… è¿‘æœŸæ’ç¨‹         â”‚
â”‚                      â”‚ â”‚                     â”‚
â”‚ [å·¥æ™‚è¶¨å‹¢åœ–]         â”‚ â”‚ 10/28 - 2å€‹ä»»å‹™     â”‚
â”‚                      â”‚ â”‚ 10/29 - 1å€‹ä»»å‹™     â”‚
â”‚                      â”‚ â”‚ 10/30 - 3å€‹ä»»å‹™     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” ç³»çµ±é€šçŸ¥ (2)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ å®¢æˆ¶ DEF çš„æœå‹™è²»ç”¨å·²æ›´æ–°                     â”‚
â”‚ â€¢ æ–°çš„ SOP å·²ç™¼å¸ƒï¼šå¹´åº¦ç¨…å‹™è¦åŠƒæµç¨‹             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ å·¥ä½œå° API è¨­è¨ˆ

### å–å¾—å·¥ä½œå°è³‡æ–™
```
GET /api/dashboard/summary

Response:
{
  "success": true,
  "summary": {
    "my_tasks": {
      "total": 5,
      "pending": 3,
      "in_progress": 2,
      "due_today": 1
    },
    "timesheet": {
      "current_month": {
        "regular_hours": 168,
        "overtime_hours": 15,
        "work_days": 21
      }
    },
    "annual_leave": {
      "remaining_days": 10,
      "total_days": 15,
      "expiry_date": "2025-12-31"
    },
    "upcoming_tasks": [
      {
        "task_id": 123,
        "title": "ABCå…¬å¸ - ç‡Ÿæ¥­ç¨…ç”³å ±",
        "due_date": "2025-10-28",
        "priority": "high"
      }
    ],
    "notifications": [
      {
        "id": 1,
        "type": "task_due",
        "message": "ABCå…¬å¸ä»»å‹™ä»Šå¤©æˆªæ­¢",
        "is_read": false,
        "created_at": "2025-10-26T09:00:00Z"
      }
    ]
  }
}
```

### æ¨™è¨˜é€šçŸ¥å·²è®€
```
PUT /api/notifications/{id}/read

Response:
{
  "success": true,
  "message": "é€šçŸ¥å·²æ¨™è¨˜ç‚ºå·²è®€"
}
```

---

## ğŸ“Š å·¥ä½œå°çµ±è¨ˆ

### å€‹äººæ•ˆèƒ½çµ±è¨ˆ
```sql
-- æœ¬æœˆä»»å‹™å®Œæˆæ•¸
SELECT 
  COUNT(*) as completed_tasks,
  SUM(actual_hours) as total_hours
FROM tasks t
JOIN task_stages ts ON t.id = ts.multi_stage_task_id
WHERE ts.completed_by = ?
  AND strftime('%Y-%m', ts.completed_at) = strftime('%Y-%m', 'now');
```

### å¾…è¾¦æé†’
```sql
-- å³å°‡åˆ°æœŸçš„ä»»å‹™
SELECT 
  t.id,
  t.title,
  t.due_date,
  t.priority,
  julianday(t.due_date) - julianday('now') as days_until_due
FROM tasks t
WHERE t.assigned_user = ?
  AND t.status IN ('pending', 'in_progress')
  AND t.due_date >= date('now')
  AND t.due_date <= date('now', '+7 days')
ORDER BY t.due_date;
```

---

## ğŸ”§ å¯¦æ–½ç´°ç¯€

### ç³»çµ±åƒæ•¸è®€å–
```javascript
async function getSystemParameter(key) {
  const param = await db.get(
    'SELECT param_value, param_type FROM system_parameters WHERE param_key = ?',
    [key]
  );
  
  if (!param) return null;
  
  // æ ¹æ“šé¡å‹è½‰æ›å€¼
  switch (param.param_type) {
    case 'number':
      return parseFloat(param.param_value);
    case 'boolean':
      return param.param_value === 'true';
    case 'json':
      return JSON.parse(param.param_value);
    default:
      return param.param_value;
  }
}
```

### å·¥ä½œå°æ•¸æ“šèšåˆ
```javascript
async function getDashboardData(userId) {
  // ä¸¦è¡ŒæŸ¥è©¢å¤šå€‹æ•¸æ“šæº
  const [myTasks, timesheet, annualLeave, notifications] = await Promise.all([
    getMyTasksSummary(userId),
    getCurrentMonthTimesheet(userId),
    getAnnualLeaveSummary(userId),
    getUnreadNotifications(userId)
  ]);
  
  return {
    my_tasks: myTasks,
    timesheet: timesheet,
    annual_leave: annualLeave,
    notifications: notifications,
    updated_at: new Date().toISOString()
  };
}
```

---

## ğŸ’» å‰ç«¯è¨­è¨ˆ

### å·¥ä½œå°å°éƒ¨ä»¶ (Widgets)

#### ä»»å‹™çµ±è¨ˆå°éƒ¨ä»¶
```javascript
class TaskStatsWidget {
  async render() {
    const stats = await fetchTaskStats();
    return `
      <div class="widget">
        <h3>æˆ‘çš„ä»»å‹™</h3>
        <div class="stat-number">${stats.total}</div>
        <div class="stat-detail">
          å¾…è™•ç†: ${stats.pending} | 
          é€²è¡Œä¸­: ${stats.in_progress}
        </div>
      </div>
    `;
  }
}
```

#### å·¥æ™‚çµ±è¨ˆå°éƒ¨ä»¶
```javascript
class TimesheetWidget {
  async render() {
    const timesheet = await fetchMonthlyTimesheet();
    return `
      <div class="widget">
        <h3>æœ¬æœˆå·¥æ™‚</h3>
        <div class="stat-number">${timesheet.regular_hours}h</div>
        <div class="stat-detail">
          åŠ ç­: ${timesheet.overtime_hours}h
        </div>
        <canvas id="timesheetChart"></canvas>
      </div>
    `;
  }
}
```

#### å¹´å‡å°éƒ¨ä»¶
```javascript
class AnnualLeaveWidget {
  async render() {
    const leave = await fetchAnnualLeave();
    const percentage = (leave.remaining / leave.total) * 100;
    
    return `
      <div class="widget">
        <h3>å¹´å‡é¤˜é¡</h3>
        <div class="stat-number">${leave.remaining}å¤©</div>
        <div class="progress-ring" data-progress="${percentage}">
          <svg>...</svg>
        </div>
      </div>
    `;
  }
}
```

---

## ğŸ”” é€šçŸ¥ç³»çµ±è¨­è¨ˆ

### é€šçŸ¥é¡å‹
```javascript
const NOTIFICATION_TYPES = {
  task_due: {
    icon: 'alarm',
    color: 'warning',
    template: '{task_title} å³å°‡åˆ°æœŸ'
  },
  task_assigned: {
    icon: 'assignment',
    color: 'info',
    template: 'æ–°ä»»å‹™å·²æŒ‡æ´¾çµ¦æ‚¨'
  },
  approval_pending: {
    icon: 'approval',
    color: 'primary',
    template: 'ç­‰å¾…æ‚¨çš„å¯©æ ¸'
  },
  leave_approved: {
    icon: 'check_circle',
    color: 'success',
    template: 'æ‚¨çš„è«‹å‡å·²æ ¸å‡†'
  }
};
```

### é€šçŸ¥ç”Ÿæˆé‚è¼¯
```javascript
async function createNotification(userId, type, data) {
  const template = NOTIFICATION_TYPES[type];
  const message = renderTemplate(template.template, data);
  
  await db.run(
    `INSERT INTO task_reminders (user_id, task_id, reminder_type, message)
     VALUES (?, ?, ?, ?)`,
    [userId, data.task_id, type, message]
  );
}

// ç¯„ä¾‹ä½¿ç”¨
await createNotification(1, 'task_due', {
  task_id: 123,
  task_title: 'ABCå…¬å¸ç‡Ÿæ¥­ç¨…ç”³å ±'
});
```

---

## ğŸ“Š å·¥ä½œå°çµ±è¨ˆ

### å€‹äººå·¥ä½œé‡è¦–åœ–
```sql
-- æœ¬é€±ä»»å‹™åˆ†å¸ƒ
SELECT 
  date(due_date) as date,
  COUNT(*) as task_count,
  SUM(estimated_hours) as estimated_hours
FROM tasks
WHERE assigned_user = ?
  AND due_date >= date('now', 'weekday 0', '-6 days')
  AND due_date <= date('now', 'weekday 0')
GROUP BY date
ORDER BY date;
```

### åœ˜éšŠå·¥ä½œé‡å¹³è¡¡
```sql
-- å„å“¡å·¥ç•¶å‰ä»»å‹™æ•¸èˆ‡å·¥æ™‚
SELECT 
  u.employee_name,
  COUNT(DISTINCT t.id) as task_count,
  SUM(CASE WHEN t.status = 'pending' THEN 1 ELSE 0 END) as pending_tasks,
  SUM(ts.estimated_hours - COALESCE(ts.actual_hours, 0)) as remaining_hours
FROM users u
LEFT JOIN tasks t ON u.id = t.assigned_user
LEFT JOIN task_stages ts ON t.id = ts.task_id AND ts.status != 'completed'
WHERE u.role IN ('employee', 'accountant')
  AND t.status IN ('pending', 'in_progress')
GROUP BY u.id
ORDER BY remaining_hours DESC;
```

---

## ğŸ”Œ API è¨­è¨ˆ

### å–å¾—ç³»çµ±åƒæ•¸
```
GET /api/system-parameters?category=timesheet

Response:
{
  "success": true,
  "parameters": [
    {
      "param_key": "work_hours_per_day",
      "param_value": "8",
      "param_type": "number",
      "description": "æ¯æ—¥æ¨™æº–å·¥æ™‚"
    }
  ]
}
```

### æ›´æ–°ç³»çµ±åƒæ•¸
```
PUT /api/system-parameters/{key}

Request:
{
  "param_value": "8.5"
}

Response:
{
  "success": true,
  "message": "åƒæ•¸å·²æ›´æ–°"
}
```

### å–å¾—æœªè®€é€šçŸ¥
```
GET /api/notifications?is_read=false

Response:
{
  "success": true,
  "notifications": [
    {
      "id": 1,
      "reminder_type": "task_due",
      "message": "ABCå…¬å¸ç‡Ÿæ¥­ç¨…ç”³å ±å³å°‡åˆ°æœŸ",
      "priority": "high",
      "created_at": "2025-10-26T09:00:00Z",
      "task_id": 123
    }
  ],
  "unread_count": 3
}
```

---

## ğŸ¨ å·¥ä½œå°è¦–è¦ºåŒ–

### å·¥æ™‚è¶¨å‹¢åœ–
```javascript
// ä½¿ç”¨ Chart.js ç¹ªè£½å·¥æ™‚è¶¨å‹¢
new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ['é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”'],
    datasets: [{
      label: 'æ­£å¸¸å·¥æ™‚',
      data: [8, 8, 8, 8, 8],
      backgroundColor: 'rgba(75, 192, 192, 0.5)'
    }, {
      label: 'åŠ ç­å·¥æ™‚',
      data: [0, 2, 1, 0, 3],
      backgroundColor: 'rgba(255, 99, 132, 0.5)'
    }]
  }
});
```

### ä»»å‹™å®Œæˆç‡ç’°å½¢åœ–
```javascript
new Chart(ctx, {
  type: 'doughnut',
  data: {
    labels: ['å·²å®Œæˆ', 'é€²è¡Œä¸­', 'æœªé–‹å§‹'],
    datasets: [{
      data: [12, 5, 3],
      backgroundColor: [
        'rgba(75, 192, 192, 0.8)',
        'rgba(54, 162, 235, 0.8)',
        'rgba(201, 203, 207, 0.8)'
      ]
    }]
  }
});
```

---

## ğŸš€ æœªä¾†æ“´å±•

### ç³»çµ±è¨­å®šæ“´å±•
- [ ] éƒµä»¶è¨­å®šï¼ˆSMTPï¼‰
- [ ] é€šçŸ¥è¨­å®šï¼ˆEmailã€æ¨æ’­ï¼‰
- [ ] æ¬Šé™ç´°éƒ¨æ§åˆ¶
- [ ] ä¸»é¡Œè‰²å½©è‡ªè¨‚
- [ ] è³‡æ–™åŒ¯å…¥/åŒ¯å‡ºè¨­å®š
- [ ] API é‡‘é‘°ç®¡ç†
- [ ] ç¨½æ ¸æ—¥èªŒè¨­å®š

### å·¥ä½œå°æ“´å±•
- [ ] å¯è‡ªè¨‚å°éƒ¨ä»¶é…ç½®
- [ ] æ‹–æ›³æ’ç‰ˆ
- [ ] å¤šå€‹å·¥ä½œå°è¦–åœ–ï¼ˆåˆ‡æ›ï¼‰
- [ ] æ—¥æ›†æ•´åˆ
- [ ] å¤©æ°£è³‡è¨Š
- [ ] å¾…è¾¦äº‹é …å¿«é€Ÿæ–°å¢
- [ ] èªéŸ³åŠ©æ‰‹
- [ ] æ•ˆèƒ½åˆ†æï¼ˆæœ¬æœˆ vs ä¸Šæœˆï¼‰

---

**ç›¸é—œæ–‡æª”**ï¼š
- [ç³»çµ±æ¶æ§‹è¨­è¨ˆ.md](./ç³»çµ±æ¶æ§‹è¨­è¨ˆ.md) - æ•´é«”æ¶æ§‹
- [å·¥æ™‚ç®¡ç†ç³»çµ±è¨­è¨ˆ.md](./å·¥æ™‚ç®¡ç†ç³»çµ±è¨­è¨ˆ.md) - å·¥æ™‚è³‡æ–™
- [APIç«¯é»æ–‡æª”.md](./APIç«¯é»æ–‡æª”.md) - API åƒè€ƒ

