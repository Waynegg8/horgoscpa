# 任務類型自動識別

**最後更新：** 2025年10月27日

---

## 目的

AI自動判斷用戶需求屬於哪種任務類型，並自動選擇對應的標準流程執行。

---

## 自動識別規則

### 類型 1：新增功能

**觸發關鍵詞：**
- "新增..."、"建立..."、"創建..."
- "我想要..."、"需要一個新的..."
- "增加一個模塊/功能/頁面"

**自動執行流程：** [新增功能標準流程](./標準工作流程/新增功能流程.md)

---

### 類型 2：修改現有功能

**觸發關鍵詞：**
- "修改..."、"調整..."、"改變..."
- "更新..."、"變更..."
- "我想把...改成..."

**自動執行流程：** [修改功能標準流程](./標準工作流程/修改功能流程.md)

---

### 類型 3：修復問題/Bug

**觸發關鍵詞：**
- "修復..."、"有問題..."、"出錯..."
- "不能..."、"無法..."、"失敗..."
- "bug"、"error"、"報錯"

**自動執行流程：** [修復問題標準流程](./標準工作流程/修復問題流程.md)

---

### 類型 4：代碼審查/優化

**觸發關鍵詞：**
- "優化..."、"審查..."、"檢查代碼..."
- "代碼質量..."、"重構..."
- "是否標準化..."、"是否模塊化..."
- "檢查{模塊}..."

**自動執行流程：** [優化代碼標準流程](./標準工作流程/優化代碼流程.md)

---

### 類型 5：性能優化

**觸發關鍵詞：**
- "太慢..."、"性能..."、"效率..."
- "加速..."、"響應時間..."

**自動執行流程：** [優化代碼標準流程](./標準工作流程/優化代碼流程.md)（專注效能檢查）

---

### 類型 6：文檔更新

**觸發關鍵詞：**
- "更新文檔..."、"修改文檔..."
- "文檔不一致..."
- 只提及文檔，不涉及代碼

**自動執行流程：** 直接更新文檔，無需討論

---

### 類型 7：諮詢/理解

**觸發關鍵詞：**
- "如何..."、"怎麼..."、"為什麼..."
- "解釋..."、"說明..."

**自動執行流程：** 
1. 讀取相關文檔
2. 提供清晰解釋
3. 詢問是否需要修改

---

## AI自動執行示例

### 示例 1：新增功能

```
用戶：我需要新增一個"客戶評分"功能

AI自動識別：類型1 - 新增功能
AI自動執行：
1. ✅ 讀取新增功能標準流程
2. ✅ 開始逐點討論：
   - 評分範圍？（1-5分？1-10分？）
   - 誰可以評分？（僅管理員？還是負責員工？）
   - 評分存在哪個表？（Clients表新增欄位？獨立表？）
   - 前端顯示在哪？（客戶列表？客戶詳情？）
3. ✅ 確認後，按順序更新：
   - 資料庫設計文檔
   - API規格文檔
   - 技術規格文檔
   - 功能模塊文檔
4. ✅ 依照文檔開始編程
```

### 示例 2：修改功能

```
用戶：@AI開發指南.md 我需要修改補休機制，改成先進先出

AI自動識別：類型2 - 修改功能
AI自動執行：
1. ✅ 讀取相關文檔：
   - 技術規格/業務規則/補休機制.md
   - 資料庫設計/補休系統/*.md
2. ✅ 與用戶確認：
   - 確認理解：先累積的補休要先被使用？
   - 月底清零邏輯是否改變？
   - 是否需要顯示每筆補休的來源日期？
3. ✅ 更新文檔（按順序）：
   - 技術規格/業務規則/補休機制.md
   - 資料庫設計/補休系統/CompensatoryLeaveUsage.md
   - API規格/補休API（如有）
4. ✅ 依照更新後的文檔修改代碼
5. ✅ 驗證符合標準
```

### 示例 3：代碼審查

```
用戶：@AI開發指南.md 我想檢查代碼是否都有模塊化

AI自動識別：類型4 - 代碼審查/優化
AI自動執行：
1. ✅ 列出所有功能模塊讓用戶選擇
2. ✅ 自動掃描所選模塊的所有代碼
3. ✅ 自動檢查：
   - 是否使用共用組件？
   - 是否有硬編碼業務規則？
   - 是否符合命名規範？
   - 是否有重複代碼？
4. ✅ 自動與其他模塊對比
5. ✅ 自動給出修復建議
6. ✅ 自動修復所有問題（先改文檔再改代碼）
```

### 示例 4：修復問題

```
用戶：工時表儲存時出現錯誤

AI自動識別：類型3 - 修復問題
AI自動執行：
1. ✅ 使用"五個為什麼"找根本原因：
   - 什麼錯誤？（詢問錯誤訊息）
   - 在什麼情況下發生？
   - 資料格式是否正確？
   - API驗證邏輯是否有問題？
   - 根本原因是什麼？
2. ✅ 提出系統性解決方案（不是表面修復）
3. ✅ 更新相關文檔（如果設計有變）
4. ✅ 修復代碼
5. ✅ 檢查類似問題是否存在
```

---

## 自動執行檢查點

每個流程執行時，AI會自動檢查：

- [ ] 已讀取所有相關文檔
- [ ] 已與用戶確認所有細節
- [ ] 已按順序更新所有設計文檔
- [ ] 代碼符合命名規範
- [ ] API遵循RESTful標準
- [ ] 文檔與代碼一致
- [ ] 未修改外部網站檔案

---

## 相關文檔

- [AI開發指南](../AI開發指南.md)
- [新增功能標準流程](./標準工作流程/新增功能流程.md)
- [修改功能標準流程](./標準工作流程/修改功能流程.md)
- [修復問題標準流程](./標準工作流程/修復問題流程.md)

---

**最後更新：** 2025年10月27日
