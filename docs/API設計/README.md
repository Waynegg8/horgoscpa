# API 設計文檔總覽

**專案：** 會計師事務所內部管理系統  
**API 版本：** v1  
**最後更新：** 2025年10月27日

---

## 文檔結構

本專案的 API 文檔採用模塊化結構，按功能模塊拆分，便於查找和維護。

---

## API 模塊索引

### 📚 通用規範
- [00-API標準規範](./00-API標準規範.md) - 所有 API 的通用規範和約定

### 🔐 認證與權限
- [認證API](./認證API.md) - 登入、登出、權限驗證

### ⚙️ 系統設定

#### 模塊01：員工權限管理
- [員工權限API](./員工權限API.md) - 模塊權限設定、預設模板、個別調整

#### 模塊02：業務規則管理
- [業務規則API/國定假日API](./業務規則API/國定假日API.md) - 國定假日與補班日管理
- [業務規則API/假別類型API](./業務規則API/假別類型API.md) - 權益型假別管理
- [業務規則API/加班費率API](./業務規則API/加班費率API.md) - 加班費率設定
- [業務規則API/特休規則API](./業務規則API/特休規則API.md) - 特休年資規則
- [業務規則API/其他假期規則API](./業務規則API/其他假期規則API.md) - 事件型假別
- [業務規則API/週期類型API](./業務規則API/週期類型API.md) - 服務週期類型

#### 模塊03：服務項目管理
- [服務項目API](./服務項目API.md) - 服務類型、主項目、子項目

#### 模塊04：員工帳號管理
- [員工帳號API](./員工帳號API.md) - 員工新增、編輯、停用

### 📝 工時與假期
- [工時API](./工時API.md) - 工時表填寫、加班、補休
- [假期API](./假期API.md) - 生活事件登記、假期餘額查詢

### 👥 客戶管理
- [客戶API](./客戶API.md) - 客戶資料、客戶服務設定

### 📋 任務管理
- [任務API](./任務API.md) - 任務模板、任務執行、階段更新

### 📊 報表中心
- [報表API](./報表API.md) - 工時報表、假期報表、任務報表

### 📚 知識管理
- [知識庫API](./知識庫API.md) - SOP文件、通用知識庫

### 🌐 外部網站
- [外部內容API](./外部內容API.md) - 文章、FAQ、資源中心
- [預約表單API](./預約表單API.md) - 預約表單設定、預約記錄

---

## API 設計原則

### 1. RESTful 設計
- 使用標準 HTTP 方法（GET, POST, PUT, DELETE）
- 語義化的 URL 路徑
- 正確使用 HTTP 狀態碼

### 2. 統一回應格式
```json
{
  "success": true,
  "message": "操作成功訊息",
  "data": { ... }
}
```

### 3. 錯誤處理標準化
```json
{
  "error": "錯誤類型",
  "message": "錯誤訊息",
  "code": "ERROR_CODE",
  "details": { ... }
}
```

### 4. 版本控制
- API 路徑包含版本號：`/api/v1/...`
- 主要版本變更時遞增版本號

### 5. 分頁與篩選
- 使用查詢參數：`?page=1&limit=20`
- 統一的篩選參數格式

### 6. 權限驗證
- 所有 API 需要 JWT Token 驗證
- 管理員專屬 API 額外檢查權限

---

## 快速參考

### API 前綴對照表

| 模塊 | API 前綴 |
|------|----------|
| 認證 | `/api/v1/auth` |
| 設定 | `/api/v1/settings` |
| 工時 | `/api/v1/timelogs` |
| 假期 | `/api/v1/leave` |
| 客戶 | `/api/v1/clients` |
| 任務 | `/api/v1/tasks` |
| 報表 | `/api/v1/reports` |
| 知識庫 | `/api/v1/knowledge` |
| 外部內容 | `/api/v1/public` |

---

## HTTP 狀態碼規範

| 狀態碼 | 說明 | 使用時機 |
|--------|------|----------|
| 200 | OK | 請求成功 |
| 201 | Created | 資源建立成功 |
| 204 | No Content | 刪除成功 |
| 400 | Bad Request | 請求參數錯誤 |
| 401 | Unauthorized | 未登入或 Token 無效 |
| 403 | Forbidden | 沒有權限 |
| 404 | Not Found | 資源不存在 |
| 409 | Conflict | 資源衝突（如刪除被使用的資料） |
| 422 | Unprocessable Entity | 驗證失敗 |
| 500 | Internal Server Error | 伺服器錯誤 |

---

## 開發指南

### 新增 API 時的檢查清單

- [ ] 遵循 RESTful 設計原則
- [ ] 使用標準回應格式
- [ ] 定義完整的驗證規則
- [ ] 實作錯誤處理
- [ ] 加入權限驗證
- [ ] 撰寫 API 文檔
- [ ] 撰寫測試案例
- [ ] 更新本 README 索引

---

## 相關文檔

- [資料庫設計](../資料庫設計.md)
- [功能模塊文檔](../功能模塊/)
- [權限系統設計](../權限系統設計.md)

---

**維護者：** AI Assistant  
**文檔版本：** 1.0



**專案：** 會計師事務所內部管理系統  
**API 版本：** v1  
**最後更新：** 2025年10月27日

---

## 文檔結構

本專案的 API 文檔採用模塊化結構，按功能模塊拆分，便於查找和維護。

---

## API 模塊索引

### 📚 通用規範
- [00-API標準規範](./00-API標準規範.md) - 所有 API 的通用規範和約定

### 🔐 認證與權限
- [認證API](./認證API.md) - 登入、登出、權限驗證

### ⚙️ 系統設定

#### 模塊01：員工權限管理
- [員工權限API](./員工權限API.md) - 模塊權限設定、預設模板、個別調整

#### 模塊02：業務規則管理
- [業務規則API/國定假日API](./業務規則API/國定假日API.md) - 國定假日與補班日管理
- [業務規則API/假別類型API](./業務規則API/假別類型API.md) - 權益型假別管理
- [業務規則API/加班費率API](./業務規則API/加班費率API.md) - 加班費率設定
- [業務規則API/特休規則API](./業務規則API/特休規則API.md) - 特休年資規則
- [業務規則API/其他假期規則API](./業務規則API/其他假期規則API.md) - 事件型假別
- [業務規則API/週期類型API](./業務規則API/週期類型API.md) - 服務週期類型

#### 模塊03：服務項目管理
- [服務項目API](./服務項目API.md) - 服務類型、主項目、子項目

#### 模塊04：員工帳號管理
- [員工帳號API](./員工帳號API.md) - 員工新增、編輯、停用

### 📝 工時與假期
- [工時API](./工時API.md) - 工時表填寫、加班、補休
- [假期API](./假期API.md) - 生活事件登記、假期餘額查詢

### 👥 客戶管理
- [客戶API](./客戶API.md) - 客戶資料、客戶服務設定

### 📋 任務管理
- [任務API](./任務API.md) - 任務模板、任務執行、階段更新

### 📊 報表中心
- [報表API](./報表API.md) - 工時報表、假期報表、任務報表

### 📚 知識管理
- [知識庫API](./知識庫API.md) - SOP文件、通用知識庫

### 🌐 外部網站
- [外部內容API](./外部內容API.md) - 文章、FAQ、資源中心
- [預約表單API](./預約表單API.md) - 預約表單設定、預約記錄

---

## API 設計原則

### 1. RESTful 設計
- 使用標準 HTTP 方法（GET, POST, PUT, DELETE）
- 語義化的 URL 路徑
- 正確使用 HTTP 狀態碼

### 2. 統一回應格式
```json
{
  "success": true,
  "message": "操作成功訊息",
  "data": { ... }
}
```

### 3. 錯誤處理標準化
```json
{
  "error": "錯誤類型",
  "message": "錯誤訊息",
  "code": "ERROR_CODE",
  "details": { ... }
}
```

### 4. 版本控制
- API 路徑包含版本號：`/api/v1/...`
- 主要版本變更時遞增版本號

### 5. 分頁與篩選
- 使用查詢參數：`?page=1&limit=20`
- 統一的篩選參數格式

### 6. 權限驗證
- 所有 API 需要 JWT Token 驗證
- 管理員專屬 API 額外檢查權限

---

## 快速參考

### API 前綴對照表

| 模塊 | API 前綴 |
|------|----------|
| 認證 | `/api/v1/auth` |
| 設定 | `/api/v1/settings` |
| 工時 | `/api/v1/timelogs` |
| 假期 | `/api/v1/leave` |
| 客戶 | `/api/v1/clients` |
| 任務 | `/api/v1/tasks` |
| 報表 | `/api/v1/reports` |
| 知識庫 | `/api/v1/knowledge` |
| 外部內容 | `/api/v1/public` |

---

## HTTP 狀態碼規範

| 狀態碼 | 說明 | 使用時機 |
|--------|------|----------|
| 200 | OK | 請求成功 |
| 201 | Created | 資源建立成功 |
| 204 | No Content | 刪除成功 |
| 400 | Bad Request | 請求參數錯誤 |
| 401 | Unauthorized | 未登入或 Token 無效 |
| 403 | Forbidden | 沒有權限 |
| 404 | Not Found | 資源不存在 |
| 409 | Conflict | 資源衝突（如刪除被使用的資料） |
| 422 | Unprocessable Entity | 驗證失敗 |
| 500 | Internal Server Error | 伺服器錯誤 |

---

## 開發指南

### 新增 API 時的檢查清單

- [ ] 遵循 RESTful 設計原則
- [ ] 使用標準回應格式
- [ ] 定義完整的驗證規則
- [ ] 實作錯誤處理
- [ ] 加入權限驗證
- [ ] 撰寫 API 文檔
- [ ] 撰寫測試案例
- [ ] 更新本 README 索引

---

## 相關文檔

- [資料庫設計](../資料庫設計.md)
- [功能模塊文檔](../功能模塊/)
- [權限系統設計](../權限系統設計.md)

---

**維護者：** AI Assistant  
**文檔版本：** 1.0



