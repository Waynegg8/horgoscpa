# 02 - 業務規則管理

**所屬模塊：** 系統設定（僅管理員）  
**頁面路徑：** `/settings/rules`  
**權限：** 管理員專屬  
**最後更新：** 2025年10月27日

---

## 功能概述

管理會計師事務所營運的各種業務規則，包括假期規則、工時計算規則、服務週期等。這些規則會影響整個系統的運作，包括工時計算、假期管理、客戶服務設定等。

**核心特點：**
- ✓ 完全符合台灣勞基法規定
- ✓ 支援複雜的假期規則（喪假依親屬、流產假依週數）
- ✓ 自動化補休管理（FIFO、月底清零）
- ✓ 精確的年資計算（到月份）
- ✓ 可擴展的週期類型管理

---

## 使用場景

### 場景 1：年度國定假日更新
每年政府公告新年度國定假日與補班日，管理員透過批量導入功能快速更新系統。

### 場景 2：員工加班與補休
員工平日加班 2 小時，系統自動累積補休時數，員工可選擇使用補休請假，月底未使用自動轉為加班費發放。

### 場景 3：新員工年資計算
新員工到職後，系統根據到職日自動計算年資（精確到月），並套用對應的特休天數。

### 場景 4：新增服務週期
事務所推出新的服務模式（如每週諮詢），管理員新增「每週」週期類型供客戶服務設定使用。

---

## 子功能列表

業務規則管理包含以下 6 個子功能：

| 子功能 | 說明 | 詳細文檔 |
|-------|------|---------|
| 2.1 國定假日管理 | 管理國定假日與補班日，用於判定加班類型 | [詳細文檔](./業務規則/2.1-國定假日管理.md) |
| 2.2 假別類型管理 | 管理權益型假別，設定年度額度和薪資比例 | [詳細文檔](./業務規則/2.2-假別類型管理.md) |
| 2.3 加班費率設定 | 設定加班費率，完全符合台灣勞基法規定 | [詳細文檔](./業務規則/2.3-加班費率設定.md) |
| 2.4 特休規則設定 | 設定年資對應的特休天數，精確計算年資 | [詳細文檔](./業務規則/2.4-特休規則設定.md) |
| 2.5 其他假期規則 | 管理事件型假別（婚假、喪假、產假等） | [詳細文檔](./業務規則/2.5-其他假期規則設定.md) |
| 2.6 週期類型管理 | 定義服務週期類型，供客戶服務設定使用 | [詳細文檔](./業務規則/2.6-週期類型管理.md) |

---

## 補休機制

**核心邏輯：**
- 員工加班後自動累積補休時數（記錄原始費率）
- 員工可在工時表選擇「補休」請假（FIFO 先進先出扣除）
- 月底未使用的補休自動轉為加班費發放（按原始費率計算）
- 補休視為正常工時計入加權工時計算
- 在假期餘額報表顯示補休餘額和明細

**詳細設計：** 請參考 [補休機制完整設計](../../技術規格/業務規則/補休機制.md)

---

## 頁面結構

採用**側邊欄 + Tab 混合式**設計：

```
┌─────────────────────────────────────────────┐
│ 業務規則管理                                 │
├──────────┬──────────────────────────────────┤
│          │                                  │
│ 📅 假期  │                                  │
│  國定假日│                                  │
│  假別類型│                                  │
│          │  (內容區域)                      │
│ ⏰ 工時   │                                  │
│  加班費率│                                  │
│  特休規則│                                  │
│  其他假期│                                  │
│          │                                  │
│ 📝 服務  │                                  │
│  週期類型│                                  │
│          │                                  │
└──────────┴──────────────────────────────────┘
```

---

## 技術規格文檔索引

### 子功能詳細設計
- [2.1 國定假日管理 - UI設計](../../技術規格/業務規則/2.1-國定假日-UI設計.md)
- [2.2 假別類型管理 - UI設計](../../技術規格/業務規則/2.2-假別類型-UI設計.md)
- [2.3 加班費率設定 - UI設計](../../技術規格/業務規則/2.3-加班費率-UI設計.md)
- [2.3 加班費率設定 - 勞基法對照表](../../技術規格/業務規則/2.3-加班費率-勞基法對照表.md)
- [2.4 特休規則設定 - 計算邏輯](../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)
- [2.5 其他假期規則 - UI設計](../../技術規格/業務規則/2.5-其他假期規則-UI設計.md)
- [2.6 週期類型管理 - UI設計](../../技術規格/業務規則/2.6-週期類型-UI設計.md)

### 補休機制
- [補休機制完整設計](../../技術規格/業務規則/補休機制.md) - 流程、FIFO邏輯、月底結算

### 測試
- [業務規則測試案例](../../技術規格/業務規則/測試案例.md) - 20個完整測試案例

---

## API 規格索引

### 業務規則 API
- [國定假日 API](../../API規格/業務規則/國定假日/_概覽.md)
- [假別類型 API](../../API規格/業務規則/假別類型/_概覽.md)
- [加班費率 API](../../API規格/業務規則/加班費率/_概覽.md)
- [特休規則 API](../../API規格/業務規則/特休規則/_概覽.md)
- [其他假期規則 API](../../API規格/業務規則/其他假期規則/_概覽.md)
- [週期類型 API](../../API規格/業務規則/週期類型/_概覽.md)

---

## 資料表索引

### 假期規則
- [Holidays](../../資料庫設計/業務規則/Holidays.md) - 國定假日
- [LeaveTypes](../../資料庫設計/業務規則/LeaveTypes.md) - 假別類型
- [OtherLeaveRules](../../資料庫設計/業務規則/OtherLeaveRules.md) - 其他假期規則

### 工時規則
- [OvertimeRates](../../資料庫設計/業務規則/OvertimeRates.md) - 加班費率
- [AnnualLeaveRules](../../資料庫設計/業務規則/AnnualLeaveRules.md) - 特休規則

### 服務規則
- [ServiceFrequencyTypes](../../資料庫設計/業務規則/ServiceFrequencyTypes.md) - 週期類型

### 補休系統
- [CompensatoryLeaveBalance](../../資料庫設計/補休系統/CompensatoryLeaveBalance.md) - 補休餘額
- [CompensatoryLeaveTransactions](../../資料庫設計/補休系統/CompensatoryLeaveTransactions.md) - 補休異動明細
- [CompensatoryLeaveUsage](../../資料庫設計/補休系統/CompensatoryLeaveUsage.md) - 補休使用明細（FIFO追蹤）

---

## 相關文檔

- [工時表填寫](./08-工時表填寫.md) - 使用業務規則計算工時
- [生活事件登記](./12-生活事件登記.md) - 使用其他假期規則計算給假
- [報表中心](./10-報表中心.md) - 顯示假期餘額（含補休）
- [客戶服務設定](./15-客戶服務設定.md) - 使用週期類型

---

**最後更新：** 2025年10月27日  
**文檔版本：** 2.0（模塊化重組版）

| 2.2 假別類型管理 | 管理權益型假別，設定年度額度和薪資比例 | [詳細文檔](./業務規則/2.2-假別類型管理.md) |
| 2.3 加班費率設定 | 設定加班費率，完全符合台灣勞基法規定 | [詳細文檔](./業務規則/2.3-加班費率設定.md) |
| 2.4 特休規則設定 | 設定年資對應的特休天數，精確計算年資 | [詳細文檔](./業務規則/2.4-特休規則設定.md) |
| 2.5 其他假期規則 | 管理事件型假別（婚假、喪假、產假等） | [詳細文檔](./業務規則/2.5-其他假期規則設定.md) |
| 2.6 週期類型管理 | 定義服務週期類型，供客戶服務設定使用 | [詳細文檔](./業務規則/2.6-週期類型管理.md) |

---

## 補休機制

**核心邏輯：**
- 員工加班後自動累積補休時數（記錄原始費率）
- 員工可在工時表選擇「補休」請假（FIFO 先進先出扣除）
- 月底未使用的補休自動轉為加班費發放（按原始費率計算）
- 補休視為正常工時計入加權工時計算
- 在假期餘額報表顯示補休餘額和明細

**詳細設計：** 請參考 [補休機制完整設計](../../技術規格/業務規則/補休機制.md)

---

## 頁面結構

採用**側邊欄 + Tab 混合式**設計：

```
┌─────────────────────────────────────────────┐
│ 業務規則管理                                 │
├──────────┬──────────────────────────────────┤
│          │                                  │
│ 📅 假期  │                                  │
│  國定假日│                                  │
│  假別類型│                                  │
│          │  (內容區域)                      │
│ ⏰ 工時   │                                  │
│  加班費率│                                  │
│  特休規則│                                  │
│  其他假期│                                  │
│          │                                  │
│ 📝 服務  │                                  │
│  週期類型│                                  │
│          │                                  │
└──────────┴──────────────────────────────────┘
```

---

## 技術規格文檔索引

### 子功能詳細設計
- [2.1 國定假日管理 - UI設計](../../技術規格/業務規則/2.1-國定假日-UI設計.md)
- [2.2 假別類型管理 - UI設計](../../技術規格/業務規則/2.2-假別類型-UI設計.md)
- [2.3 加班費率設定 - UI設計](../../技術規格/業務規則/2.3-加班費率-UI設計.md)
- [2.3 加班費率設定 - 勞基法對照表](../../技術規格/業務規則/2.3-加班費率-勞基法對照表.md)
- [2.4 特休規則設定 - 計算邏輯](../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)
- [2.5 其他假期規則 - UI設計](../../技術規格/業務規則/2.5-其他假期規則-UI設計.md)
- [2.6 週期類型管理 - UI設計](../../技術規格/業務規則/2.6-週期類型-UI設計.md)

### 補休機制
- [補休機制完整設計](../../技術規格/業務規則/補休機制.md) - 流程、FIFO邏輯、月底結算

### 測試
- [業務規則測試案例](../../技術規格/業務規則/測試案例.md) - 20個完整測試案例

---

## API 規格索引

### 業務規則 API
- [國定假日 API](../../API規格/業務規則/國定假日/_概覽.md)
- [假別類型 API](../../API規格/業務規則/假別類型/_概覽.md)
- [加班費率 API](../../API規格/業務規則/加班費率/_概覽.md)
- [特休規則 API](../../API規格/業務規則/特休規則/_概覽.md)
- [其他假期規則 API](../../API規格/業務規則/其他假期規則/_概覽.md)
- [週期類型 API](../../API規格/業務規則/週期類型/_概覽.md)

---

## 資料表索引

### 假期規則
- [Holidays](../../資料庫設計/業務規則/Holidays.md) - 國定假日
- [LeaveTypes](../../資料庫設計/業務規則/LeaveTypes.md) - 假別類型
- [OtherLeaveRules](../../資料庫設計/業務規則/OtherLeaveRules.md) - 其他假期規則

### 工時規則
- [OvertimeRates](../../資料庫設計/業務規則/OvertimeRates.md) - 加班費率
- [AnnualLeaveRules](../../資料庫設計/業務規則/AnnualLeaveRules.md) - 特休規則

### 服務規則
- [ServiceFrequencyTypes](../../資料庫設計/業務規則/ServiceFrequencyTypes.md) - 週期類型

### 補休系統
- [CompensatoryLeaveBalance](../../資料庫設計/補休系統/CompensatoryLeaveBalance.md) - 補休餘額
- [CompensatoryLeaveTransactions](../../資料庫設計/補休系統/CompensatoryLeaveTransactions.md) - 補休異動明細
- [CompensatoryLeaveUsage](../../資料庫設計/補休系統/CompensatoryLeaveUsage.md) - 補休使用明細（FIFO追蹤）

---

## 相關文檔

- [工時表填寫](./08-工時表填寫.md) - 使用業務規則計算工時
- [生活事件登記](./12-生活事件登記.md) - 使用其他假期規則計算給假
- [報表中心](./10-報表中心.md) - 顯示假期餘額（含補休）
- [客戶服務設定](./15-客戶服務設定.md) - 使用週期類型

---

**最後更新：** 2025年10月27日  
**文檔版本：** 2.0（模塊化重組版）
