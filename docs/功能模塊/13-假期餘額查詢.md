# 13 - 假期餘額查詢

**所屬模塊：** 假期管理  
**頁面路徑：** `/leave/balance`  
**權限：** 所有使用者  
**最後更新：** 2025年10月27日

---

## 功能概述

顯示各假別的應有/已用/剩餘時數，即時計算。

---

## UI 設計

```
我的假期狀態 - 2025年
───────────────────────
特休
應有：56h (年資1年)
已用：16h
剩餘：40h  ██████░░░░ 71%

病假
應有：240h
已用：16h
剩餘：224h ████████░ 93%

婚假（事件給假）
應有：64h (2023-05-10結婚)
已用：64h
剩餘：0h  ░░░░░░░░░░ 0%
```

---

## 計算邏輯

### 特休
- 根據年資查詢 `AnnualLeaveRules`
- 計算已用：`SUM(leave_hours) WHERE leave_type='特休'`

### 其他假別
- 查詢 `OtherLeaveRules`
- 事件給假需先查詢 `LeaveEvents`

---

## API

```
GET /api/v1/leave/balance?year=2025
```

---

**可選：** F151(餘額預警), F152(統計報表)

**相關：** [假期API](../API設計/假期API.md), [生活事件登記](./12-生活事件登記.md)

