# 外部內容管理（完整版）

**模塊編號：** 21-22（合併）  
**權限要求：** 僅管理員  
**頁面路徑：** `/admin/content`  
**最後更新：** 2025年10月28日

---

## 📋 目錄
- [功能概述](#功能概述)
- [外部文章管理](#外部文章管理)
- [資源中心管理](#資源中心管理)

---

## 功能概述

### 核心功能
1. **外部文章管理** - 管理公開網站的文章（Blog）
2. **資源中心管理** - 管理可下載的文件資源

### 設計原則
- ✅ 僅管理員可管理
- ✅ 支持 SEO 優化
- ✅ 草稿/發布狀態
- ✅ 分類和標籤

---

## 外部文章管理

### 功能描述
管理公開網站（yourfirm.com）的文章內容。

### UI 設計
```
┌─────────────────────────────────────┐
│ 外部文章管理              [+ 新增]  │
├─────────────────────────────────────┤
│ 篩選: [全部▼] [已發布▼] [草稿▼]   │
├─────────────────────────────────────┤
│ 📝 公司設立完整指南                 │
│    分類：公司設立 | 狀態：已發布    │
│    瀏覽：1,234次 | 更新：2025-10-15│
│    [編輯] [查看] [取消發布]         │
├─────────────────────────────────────┤
│ 📝 稅務申報注意事項（草稿）         │
│    分類：稅務資訊 | 狀態：草稿      │
│    更新：2025-10-20                 │
│    [編輯] [發布] [刪除]             │
└─────────────────────────────────────┘
```

### 核心功能
1. **新增文章** - WYSIWYG 編輯器
2. **編輯文章** - 修改標題、內容、SEO
3. **發布/取消發布** - 控制是否顯示在公開網站
4. **SEO 優化** - 設定 title、description、keywords
5. **特色圖片** - 上傳文章封面圖
6. **URL Slug** - 設定友善的 URL

### 文章欄位
| 欄位 | 說明 |
|------|------|
| `title` | 文章標題 |
| `slug` | URL標識（如：company-setup-guide）|
| `summary` | 文章摘要 |
| `content` | 文章內容（HTML）|
| `featured_image` | 特色圖片 URL |
| `category` | 分類 |
| `tags` | 標籤（JSON陣列）|
| `is_published` | 是否發布 |
| `seo_title` | SEO標題 |
| `seo_description` | SEO描述 |
| `seo_keywords` | SEO關鍵字 |

### SEO 優化
```html
<!-- 自動生成 -->
<title>公司設立完整指南 | XX會計師事務所</title>
<meta name="description" content="詳細說明...">
<meta name="keywords" content="公司設立,會計師,台中">
```

---

## 資源中心管理

### 功能描述
管理公開網站的可下載文件資源。

### UI 設計
```
┌─────────────────────────────────────┐
│ 資源中心管理              [+ 上傳]  │
├─────────────────────────────────────┤
│ 篩選: [PDF▼] [Excel▼] [Word▼]      │
├─────────────────────────────────────┤
│ 📄 公司設立檢查清單.pdf             │
│    分類：公司設立 | 大小：2.3 MB    │
│    下載：156次 | 更新：2025-10-10   │
│    [下載] [編輯] [刪除]             │
├─────────────────────────────────────┤
│ 📊 記帳服務報價單.xlsx              │
│    分類：價格資訊 | 大小：1.1 MB    │
│    下載：89次 | 更新：2025-09-15    │
│    [下載] [編輯] [刪除]             │
└─────────────────────────────────────┘
```

### 核心功能
1. **上傳文件** - 支持 PDF、Excel、Word 等
2. **編輯資訊** - 修改標題、描述、分類
3. **發布/取消發布** - 控制是否顯示
4. **下載統計** - 記錄下載次數
5. **文件管理** - 刪除、替換文件

### 支持的文件類型
- PDF（.pdf）
- Excel（.xlsx, .xls）
- Word（.docx, .doc）
- 圖片（.jpg, .png）- 用於資訊圖表
- 壓縮檔（.zip）- 用於打包資源

### 儲存位置
- **Cloudflare R2** - 物件儲存
- **CDN 加速** - 快速下載
- **自動備份** - 定期備份

---

## 權限控制

### 外部文章管理
- **管理員**：完整權限
- **員工**：無權限（管理員專屬功能）

### 資源中心管理
- **管理員**：完整權限
- **員工**：無權限（管理員專屬功能）

### 內容顯示
- **公開網站**：所有已發布的內容
- **內部系統**：所有內容（包含草稿）

---

## 與外部網站整合

### 文章顯示
```
公開網站: yourfirm.com/blog/company-setup-guide
  ↓
查詢 ExternalArticles
  ↓
WHERE slug = 'company-setup-guide' AND is_published = 1
  ↓
渲染文章頁面
```

### 資源下載
```
公開網站: yourfirm.com/resources/checklist.pdf
  ↓
查詢 ResourceCenter
  ↓
WHERE file_url = 'checklist.pdf' AND is_published = 1
  ↓
重定向到 R2 儲存位置
  ↓
記錄下載次數 +1
```

---

## 🔗 相關文檔

- **API 規格：** 外部內容管理API（待創建）
- **資料庫設計：** [知識與內容管理表](../資料庫設計/知識與內容管理表.md)
- **禁止修改：** [🚨外部網站禁止修改清單](../🚨外部網站禁止修改清單.md)

---

**最後更新：** 2025年10月28日  
**本文檔合併了以下2個功能模塊：**
1. 21-外部文章管理.md
2. 22-資源中心管理.md

