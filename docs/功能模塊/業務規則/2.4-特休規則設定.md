# 2.4 - 特休規則設定

**所屬模塊：** [業務規則管理](../02-業務規則管理.md)  
**權限：** 管理員專屬  
**最後更新：** 2025年10月27日

---

## 功能概述

設定員工年資對應的特休天數，**依照到職日精確計算年資（到月份）**。規則變更時，系統會自動重新計算所有員工的特休額度。

---

## 核心功能

### 特休規則 CRUD
- 新增/編輯/刪除特休規則
- 設定年資範圍（月）對應的特休天數
- 規則變更立即重算所有員工

### 恢復法定預設值
- 一鍵恢復台灣勞基法規定的特休規則
- 共26條規則，涵蓋0-25年年資

---

## 年資計算邏輯

### 精確到月份

**範例：**
- 到職日：2023年3月15日
- 查詢日：2025年10月27日
- 年資：2年7個月 = **31個月**
- 特休天數：**10天**（依 24-35個月規則）

**計算公式：**
```typescript
const months = (查詢年 - 到職年) * 12 + (查詢月 - 到職月)
// 如果 查詢日 < 到職日，則 months - 1
```

---

## 法定預設值（26條規則）

| 年資範圍（月） | 特休天數 | 說明 |
|--------------|---------|------|
| 0-5 | 0 | 未滿6個月 |
| 6-11 | 3 | 滿6個月未滿1年 |
| 12-23 | 7 | 滿1年未滿2年 |
| 24-35 | 10 | 滿2年未滿3年 |
| 36-47 | 14 | 滿3年未滿4年 |
| 48-59 | 14 | 滿4年未滿5年 |
| 60-71 | 15 | 滿5年未滿6年 |
| ... | ... | 每年遞增 |
| 120-131 | 16 | 滿10年未滿11年 |
| 132-143 | 17 | 滿11年未滿12年 |
| ... | ... | 每年+1天 |
| 276-287 | 29 | 滿23年未滿24年 |
| 288+ | 30 | 滿24年以上（上限30天） |

**完整規則：** [計算邏輯詳細文檔](../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)

---

## 使用場景

### 場景 1：新員工到職

新員工於 2025年10月1日 到職。

**自動計算：**
- 2025年10月1日：年資0月，特休0天
- 2026年4月1日：年資6月，特休3天
- 2026年10月1日：年資12月，特休7天

---

### 場景 2：修改規則影響所有員工

管理員決定調整 1-2年 的特休從 7天 改為 8天。

**系統行為：**
1. 更新規則：12-23月 = 8天
2. 自動重算所有員工特休
3. 符合條件的員工額度從 7天 更新為 8天
4. 通知受影響員工

---

## UI 設計要點

### 列表介面
- 按年資範圍排序
- 顯示年資範圍（月）和特休天數
- 規則缺口提示（如 0-5月、12-23月 之間有缺口）

### 表單設計
- 年資開始（月）
- 年資結束（月，可為 null 表示無上限）
- 特休天數（0-30天）
- 說明欄位

---

## 技術規格索引

### 詳細設計
- [計算邏輯](../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)

### API 規格
- [特休規則 API](../../API規格/業務規則/特休規則/_概覽.md)
  - [獲取特休規則列表](../../API規格/業務規則/特休規則/獲取特休規則列表.md)
  - [新增特休規則](../../API規格/業務規則/特休規則/新增特休規則.md)
  - [恢復法定預設值](../../API規格/業務規則/特休規則/恢復法定預設值.md)

### 資料庫設計
- [AnnualLeaveRules 資料表](../../資料庫設計/業務規則/AnnualLeaveRules.md)

---

## 測試案例

### 測試 1：年資計算精確度
- 到職日：2023-03-15
- 查詢日：2025-10-27
- 預期：年資31月，特休10天

### 測試 2：恢復法定預設值
- 操作：點擊「恢復法定預設值」
- 預期：插入26條規則，自動重算所有員工

### 測試 3：規則變更重算
- 前置：100位員工
- 操作：修改 12-23月 規則從 7天 改為 8天
- 預期：符合條件的員工特休更新為 8天

---

## 相關文檔

- [業務規則管理](../02-業務規則管理.md) - 主模塊
- [報表中心](../10-報表中心.md) - 顯示特休餘額
- [工時表填寫](../08-工時表填寫.md) - 請特休

---

**最後更新：** 2025年10月27日



**所屬模塊：** [業務規則管理](../02-業務規則管理.md)  
**權限：** 管理員專屬  
**最後更新：** 2025年10月27日

---

## 功能概述

設定員工年資對應的特休天數，**依照到職日精確計算年資（到月份）**。規則變更時，系統會自動重新計算所有員工的特休額度。

---

## 核心功能

### 特休規則 CRUD
- 新增/編輯/刪除特休規則
- 設定年資範圍（月）對應的特休天數
- 規則變更立即重算所有員工

### 恢復法定預設值
- 一鍵恢復台灣勞基法規定的特休規則
- 共26條規則，涵蓋0-25年年資

---

## 年資計算邏輯

### 精確到月份

**範例：**
- 到職日：2023年3月15日
- 查詢日：2025年10月27日
- 年資：2年7個月 = **31個月**
- 特休天數：**10天**（依 24-35個月規則）

**計算公式：**
```typescript
const months = (查詢年 - 到職年) * 12 + (查詢月 - 到職月)
// 如果 查詢日 < 到職日，則 months - 1
```

---

## 法定預設值（26條規則）

| 年資範圍（月） | 特休天數 | 說明 |
|--------------|---------|------|
| 0-5 | 0 | 未滿6個月 |
| 6-11 | 3 | 滿6個月未滿1年 |
| 12-23 | 7 | 滿1年未滿2年 |
| 24-35 | 10 | 滿2年未滿3年 |
| 36-47 | 14 | 滿3年未滿4年 |
| 48-59 | 14 | 滿4年未滿5年 |
| 60-71 | 15 | 滿5年未滿6年 |
| ... | ... | 每年遞增 |
| 120-131 | 16 | 滿10年未滿11年 |
| 132-143 | 17 | 滿11年未滿12年 |
| ... | ... | 每年+1天 |
| 276-287 | 29 | 滿23年未滿24年 |
| 288+ | 30 | 滿24年以上（上限30天） |

**完整規則：** [計算邏輯詳細文檔](../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)

---

## 使用場景

### 場景 1：新員工到職

新員工於 2025年10月1日 到職。

**自動計算：**
- 2025年10月1日：年資0月，特休0天
- 2026年4月1日：年資6月，特休3天
- 2026年10月1日：年資12月，特休7天

---

### 場景 2：修改規則影響所有員工

管理員決定調整 1-2年 的特休從 7天 改為 8天。

**系統行為：**
1. 更新規則：12-23月 = 8天
2. 自動重算所有員工特休
3. 符合條件的員工額度從 7天 更新為 8天
4. 通知受影響員工

---

## UI 設計要點

### 列表介面
- 按年資範圍排序
- 顯示年資範圍（月）和特休天數
- 規則缺口提示（如 0-5月、12-23月 之間有缺口）

### 表單設計
- 年資開始（月）
- 年資結束（月，可為 null 表示無上限）
- 特休天數（0-30天）
- 說明欄位

---

## 技術規格索引

### 詳細設計
- [計算邏輯](../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)

### API 規格
- [特休規則 API](../../API規格/業務規則/特休規則/_概覽.md)
  - [獲取特休規則列表](../../API規格/業務規則/特休規則/獲取特休規則列表.md)
  - [新增特休規則](../../API規格/業務規則/特休規則/新增特休規則.md)
  - [恢復法定預設值](../../API規格/業務規則/特休規則/恢復法定預設值.md)

### 資料庫設計
- [AnnualLeaveRules 資料表](../../資料庫設計/業務規則/AnnualLeaveRules.md)

---

## 測試案例

### 測試 1：年資計算精確度
- 到職日：2023-03-15
- 查詢日：2025-10-27
- 預期：年資31月，特休10天

### 測試 2：恢復法定預設值
- 操作：點擊「恢復法定預設值」
- 預期：插入26條規則，自動重算所有員工

### 測試 3：規則變更重算
- 前置：100位員工
- 操作：修改 12-23月 規則從 7天 改為 8天
- 預期：符合條件的員工特休更新為 8天

---

## 相關文檔

- [業務規則管理](../02-業務規則管理.md) - 主模塊
- [報表中心](../10-報表中心.md) - 顯示特休餘額
- [工時表填寫](../08-工時表填寫.md) - 請特休

---

**最後更新：** 2025年10月27日



