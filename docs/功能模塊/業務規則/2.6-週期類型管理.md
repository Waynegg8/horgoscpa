# 2.6 - 週期類型管理

**所屬模塊：** [業務規則管理](../02-業務規則管理.md)  
**權限：** 管理員專屬  
**最後更新：** 2025年10月27日

---

## 功能概述

定義服務的週期類型選項（每月、雙月、每季等），供「客戶服務設定」使用。管理員可根據業務需求自行新增週期類型。

**注意：** 這裡只定義週期類型，具體執行日期（如每月5日、每季第10日）由客戶服務設定管理。

---

## 核心功能

### 週期類型 CRUD
- 新增/編輯週期類型
- 設定代碼、名稱、說明
- 停用機制（不可刪除已使用的類型）

### 批量排序
- 拖曳排序
- 常用類型排前面

### 查詢使用情況
- 查看哪些客戶服務使用該週期類型
- 防止誤刪正在使用的類型

---

## 預設週期類型

| 代碼 | 名稱 | 說明 |
|------|------|------|
| `monthly` | 月結 | 每月執行一次 |
| `bimonthly` | 雙月結 | 每兩個月執行一次 |
| `quarterly` | 季結 | 每季執行一次 |
| `annually` | 年結 | 每年執行一次 |
| `one_time` | 一次性 | 僅執行一次 |

---

## 使用場景

### 場景 1：新增自訂週期

事務所推出新的服務模式「每週諮詢」。

**操作步驟：**
1. 新增週期類型
2. 代碼：`weekly`
3. 名稱：每週
4. 說明：每週執行一次
5. 保存後即可在客戶服務設定中選擇

---

### 場景 2：調整週期類型排序

發現「月結」最常用，調整到第一位。

**操作步驟：**
1. 進入排序模式
2. 拖曳「月結」到第一位
3. 保存排序

---

### 場景 3：停用不常用的週期

發現「半年結」很少使用，決定停用。

**操作步驟：**
1. 查詢使用情況：0個客戶使用
2. 停用該週期類型
3. 新的客戶服務無法選擇此週期

---

## 與客戶服務設定的關聯

```
流程：
1. 業務規則 - 週期類型：定義「月結」「季結」等選項
   ↓
2. 客戶服務設定：客戶A的記帳服務 = 月結，每月5日執行
                客戶B的記帳服務 = 季結，每季10日執行
   ↓
3. 系統自動產生任務
```

---

## UI 設計要點

### 列表介面
- 顯示週期名稱、代碼
- 啟用/停用狀態標記
- 拖曳排序功能
- 使用情況統計

### 表單設計
- 週期代碼（唯一，小寫字母+底線）
- 週期名稱
- 說明欄位

---

## 技術規格索引

### 詳細設計
- [UI 設計](../../技術規格/業務規則/2.6-週期類型-UI設計.md)

### API 規格
- [週期類型 API](../../API規格/業務規則/週期類型/_概覽.md)
  - [獲取週期類型列表](../../API規格/業務規則/週期類型/獲取週期類型列表.md)
  - [新增週期類型](../../API規格/業務規則/週期類型/新增週期類型.md)
  - [調整排序](../../API規格/業務規則/週期類型/調整排序.md)
  - [停用週期類型](../../API規格/業務規則/週期類型/停用週期類型.md)
  - [查詢使用情況](../../API規格/業務規則/週期類型/查詢使用情況.md)

### 資料庫設計
- [ServiceFrequencyTypes 資料表](../../資料庫設計/業務規則/ServiceFrequencyTypes.md)

---

## 測試案例

### 測試 1：新增週期類型
- 輸入：weekly，每週，每週執行一次
- 預期：成功新增

### 測試 2：禁止刪除已使用的類型
- 前置：「月結」已被10個客戶服務使用
- 操作：刪除「月結」
- 預期：顯示錯誤，無法刪除

### 測試 3：批量排序
- 操作：調整順序為 [月結, 季結, 年結, 雙月結, 一次性]
- 預期：排序成功，列表按新順序顯示

---

## 相關文檔

- [業務規則管理](../02-業務規則管理.md) - 主模塊
- [客戶服務設定](../15-客戶服務設定.md) - 使用週期類型
- [服務項目管理](../03-服務項目管理.md) - 提示使用週期類型

---

**最後更新：** 2025年10月27日



**所屬模塊：** [業務規則管理](../02-業務規則管理.md)  
**權限：** 管理員專屬  
**最後更新：** 2025年10月27日

---

## 功能概述

定義服務的週期類型選項（每月、雙月、每季等），供「客戶服務設定」使用。管理員可根據業務需求自行新增週期類型。

**注意：** 這裡只定義週期類型，具體執行日期（如每月5日、每季第10日）由客戶服務設定管理。

---

## 核心功能

### 週期類型 CRUD
- 新增/編輯週期類型
- 設定代碼、名稱、說明
- 停用機制（不可刪除已使用的類型）

### 批量排序
- 拖曳排序
- 常用類型排前面

### 查詢使用情況
- 查看哪些客戶服務使用該週期類型
- 防止誤刪正在使用的類型

---

## 預設週期類型

| 代碼 | 名稱 | 說明 |
|------|------|------|
| `monthly` | 月結 | 每月執行一次 |
| `bimonthly` | 雙月結 | 每兩個月執行一次 |
| `quarterly` | 季結 | 每季執行一次 |
| `annually` | 年結 | 每年執行一次 |
| `one_time` | 一次性 | 僅執行一次 |

---

## 使用場景

### 場景 1：新增自訂週期

事務所推出新的服務模式「每週諮詢」。

**操作步驟：**
1. 新增週期類型
2. 代碼：`weekly`
3. 名稱：每週
4. 說明：每週執行一次
5. 保存後即可在客戶服務設定中選擇

---

### 場景 2：調整週期類型排序

發現「月結」最常用，調整到第一位。

**操作步驟：**
1. 進入排序模式
2. 拖曳「月結」到第一位
3. 保存排序

---

### 場景 3：停用不常用的週期

發現「半年結」很少使用，決定停用。

**操作步驟：**
1. 查詢使用情況：0個客戶使用
2. 停用該週期類型
3. 新的客戶服務無法選擇此週期

---

## 與客戶服務設定的關聯

```
流程：
1. 業務規則 - 週期類型：定義「月結」「季結」等選項
   ↓
2. 客戶服務設定：客戶A的記帳服務 = 月結，每月5日執行
                客戶B的記帳服務 = 季結，每季10日執行
   ↓
3. 系統自動產生任務
```

---

## UI 設計要點

### 列表介面
- 顯示週期名稱、代碼
- 啟用/停用狀態標記
- 拖曳排序功能
- 使用情況統計

### 表單設計
- 週期代碼（唯一，小寫字母+底線）
- 週期名稱
- 說明欄位

---

## 技術規格索引

### 詳細設計
- [UI 設計](../../技術規格/業務規則/2.6-週期類型-UI設計.md)

### API 規格
- [週期類型 API](../../API規格/業務規則/週期類型/_概覽.md)
  - [獲取週期類型列表](../../API規格/業務規則/週期類型/獲取週期類型列表.md)
  - [新增週期類型](../../API規格/業務規則/週期類型/新增週期類型.md)
  - [調整排序](../../API規格/業務規則/週期類型/調整排序.md)
  - [停用週期類型](../../API規格/業務規則/週期類型/停用週期類型.md)
  - [查詢使用情況](../../API規格/業務規則/週期類型/查詢使用情況.md)

### 資料庫設計
- [ServiceFrequencyTypes 資料表](../../資料庫設計/業務規則/ServiceFrequencyTypes.md)

---

## 測試案例

### 測試 1：新增週期類型
- 輸入：weekly，每週，每週執行一次
- 預期：成功新增

### 測試 2：禁止刪除已使用的類型
- 前置：「月結」已被10個客戶服務使用
- 操作：刪除「月結」
- 預期：顯示錯誤，無法刪除

### 測試 3：批量排序
- 操作：調整順序為 [月結, 季結, 年結, 雙月結, 一次性]
- 預期：排序成功，列表按新順序顯示

---

## 相關文檔

- [業務規則管理](../02-業務規則管理.md) - 主模塊
- [客戶服務設定](../15-客戶服務設定.md) - 使用週期類型
- [服務項目管理](../03-服務項目管理.md) - 提示使用週期類型

---

**最後更新：** 2025年10月27日



