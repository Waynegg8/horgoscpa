# 01 - 員工權限設定

**所屬模塊：** 系統設定（僅管理員）  
**頁面路徑：** `/settings/permissions`  
**權限：** 管理員專屬  
**最後更新：** 2025年10月27日

---

## 功能概述

管理員可以控制「員工」角色能夠存取哪些系統模塊，實現彈性的功能開放管理。採用「預設模板 + 個別調整」機制，方便管理且易於擴展。

**核心特點：**
- ✓ 針對個別員工做不同權限設定
- ✓ 預設模板機制，新員工自動套用
- ✓ 更新預設模板時可選擇同步現有員工
- ✓ 差異標示，清楚顯示個別調整內容
- ✓ 權限變更立即生效

---

## 使用場景

### 場景 1：事務所初期設定
事務所初期只想讓員工使用基本的工時表和假期功能，不開放客戶管理和報表功能。

### 場景 2：資深員工特殊權限
資深員工可以看到任務追蹤和 SOP 知識庫，新進員工暫時不開放。

### 場景 3：逐步擴展功能
管理員想逐步開放功能，先從核心功能開始，再慢慢擴展進階功能。

---

## 權限管理邏輯

### 預設模板機制
- 系統維護一個「預設員工權限模板」
- 新員工加入時，自動套用預設模板
- 管理員可隨時調整預設模板

### 個別調整機制
- 管理員可針對特定員工調整權限
- 個別調整的設定會覆蓋預設模板
- 可隨時「恢復為預設」，清除個別設定

### 更新預設模板的行為
當管理員更新預設模板時：
1. 系統彈出對話框，顯示所有員工列表
2. 預設勾選「使用預設模板」的員工
3. 「已個別調整」的員工預設不勾選（但可手動勾選）
4. 管理員可自由選擇要同步更新的員工

---

## 可設定的模塊清單

### 🔒 管理員專屬（永不開放給員工）

以下 8 個模塊只有管理員能存取，不會出現在員工權限設定清單中：

1. 員工權限設定
2. 業務規則管理
3. 員工帳號管理
4. 外部文章管理
5. 外部常見問題管理
6. 外部圖片資源管理
7. 外部資源中心管理
8. 預約表單設定

### ✅ 可開放給員工（14個模塊）

#### 📋 基礎功能
- **dashboard** - 儀表板
- **personal_settings** - 個人資料設定
- **timesheet** - 工時表填寫（含請假記錄）

#### 📊 報表與統計
- **reports** - 報表中心（員工看自己，管理員看全部，含假期餘額查詢）

#### 📅 假期管理
- **life_events** - 生活事件登記

#### 📝 任務管理
- **task_templates** - 任務模板管理（可編輯、複製、新增）
- **tasks** - 任務進度追蹤（員工看自己，管理員看全部）
- **stage_updates** - 階段進度更新（可標記日期）

#### 👥 客戶管理
- **client_services** - 客戶服務設定
- **booking_records** - 預約記錄查看

#### 📚 知識管理
- **sop_management** - SOP文件管理（三層級，可查看、編輯、新增，可連結任務）
- **knowledge_base** - 通用知識庫（三層級，可查看、編輯、新增，可連結任務）

#### ⚙️ 系統功能
- **service_management** - 服務項目管理（全公司共用）
- **csv_import** - CSV導入功能

---

## 技術規格文檔索引

詳細的實作規格請參考：

### UI 設計與互動
- [UI設計](../../技術規格/員工權限/UI設計.md) - 頁面結構、Tab設計、對話框、差異標示
- [權限驗證邏輯](../../技術規格/員工權限/權限驗證邏輯.md) - 前端路由保護、API保護、立即生效機制

### 測試
- [測試案例](../../技術規格/員工權限/測試案例.md) - 5個完整測試案例

---

## API 規格索引

完整 API 設計請參考：
- [員工權限 API 概覽](../../API規格/員工權限/_概覽.md) - 8個端點快速參考

---

## 資料表索引

- [ModulePermissions](../../資料庫設計/權限系統/ModulePermissions.md) - 模塊權限資料表

---

## 相關文檔

- [業務規則管理](./02-業務規則管理.md) - 管理員專屬功能
- [員工帳號管理](./04-員工帳號管理.md) - 員工帳號的新增與管理
- [權限系統設計](../權限系統設計.md) - 整體權限系統架構

---

**最後更新：** 2025年10月27日  
**文檔版本：** 2.0（模塊化重組版）


### 🔒 管理員專屬（永不開放給員工）

以下 8 個模塊只有管理員能存取，不會出現在員工權限設定清單中：

1. 員工權限設定
2. 業務規則管理
3. 員工帳號管理
4. 外部文章管理
5. 外部常見問題管理
6. 外部圖片資源管理
7. 外部資源中心管理
8. 預約表單設定

### ✅ 可開放給員工（14個模塊）

#### 📋 基礎功能
- **dashboard** - 儀表板
- **personal_settings** - 個人資料設定
- **timesheet** - 工時表填寫（含請假記錄）

#### 📊 報表與統計
- **reports** - 報表中心（員工看自己，管理員看全部，含假期餘額查詢）

#### 📅 假期管理
- **life_events** - 生活事件登記

#### 📝 任務管理
- **task_templates** - 任務模板管理（可編輯、複製、新增）
- **tasks** - 任務進度追蹤（員工看自己，管理員看全部）
- **stage_updates** - 階段進度更新（可標記日期）

#### 👥 客戶管理
- **client_services** - 客戶服務設定
- **booking_records** - 預約記錄查看

#### 📚 知識管理
- **sop_management** - SOP文件管理（三層級，可查看、編輯、新增，可連結任務）
- **knowledge_base** - 通用知識庫（三層級，可查看、編輯、新增，可連結任務）

#### ⚙️ 系統功能
- **service_management** - 服務項目管理（全公司共用）
- **csv_import** - CSV導入功能

---

## 技術規格文檔索引

詳細的實作規格請參考：

### UI 設計與互動
- [UI設計](../../技術規格/員工權限/UI設計.md) - 頁面結構、Tab設計、對話框、差異標示
- [權限驗證邏輯](../../技術規格/員工權限/權限驗證邏輯.md) - 前端路由保護、API保護、立即生效機制

### 測試
- [測試案例](../../技術規格/員工權限/測試案例.md) - 5個完整測試案例

---

## API 規格索引

完整 API 設計請參考：
- [員工權限 API 概覽](../../API規格/員工權限/_概覽.md) - 8個端點快速參考

---

## 資料表索引

- [ModulePermissions](../../資料庫設計/權限系統/ModulePermissions.md) - 模塊權限資料表

---

## 相關文檔

- [業務規則管理](./02-業務規則管理.md) - 管理員專屬功能
- [員工帳號管理](./04-員工帳號管理.md) - 員工帳號的新增與管理
- [權限系統設計](../權限系統設計.md) - 整體權限系統架構

---

**最後更新：** 2025年10月27日  
**文檔版本：** 2.0（模塊化重組版）
