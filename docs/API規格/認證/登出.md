# 登出

**端點：** `POST /api/v1/auth/logout`  
**權限：** 需登入

---

## 請求

### Body
無需 Body

### Headers
- Cookie: `auth_token=<JWT>`

---

## 成功回應

**HTTP 狀態碼：** 200

```json
{
  "success": true,
  "data": {
    "message": "已成功登出"
  }
}
```

**額外動作：**
- 刪除 `auth_token` Cookie

---

## 錯誤回應

### 未登入
**HTTP 狀態碼：** 401
```json
{
  "success": false,
  "error": {
    "code": "UNAUTHORIZED",
    "message": "請先登入"
  }
}
```

---

## 業務邏輯

### 步驟
1. 驗證 JWT Token（由 `authMiddleware` 處理）
2. 刪除 Cookie
3. 返回成功訊息

### 注意事項
- 前端應在收到成功回應後：
  - 清除本地狀態（Vuex/Pinia）
  - 導向登入頁
- JWT Token 不會被加入黑名單（Stateless 設計）

---

## 範例程式碼

```typescript
app.post('/api/v1/auth/logout', authMiddleware, async (c) => {
  // 清除 Cookie
  deleteCookie(c, 'auth_token');
  
  return c.json(successResponse({ message: '已成功登出' }));
});
```

---

## 前端使用範例

```javascript
async function logout() {
  try {
    const response = await fetch('/api/v1/auth/logout', {
      method: 'POST',
      credentials: 'include'  // 必須，才能送出 Cookie
    });
    
    if (response.ok) {
      // 清除本地狀態
      store.commit('CLEAR_USER');
      
      // 導向登入頁
      router.push('/login');
    }
  } catch (error) {
    console.error('登出失敗', error);
  }
}
```


