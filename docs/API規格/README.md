# API規格索引

**層級：** 第3層（API端點詳細規格）  
**API 版本：** v1  
**最後更新：** 2025年10月27日

---

## 概述

本目錄包含所有 RESTful API 端點的詳細規格文檔。每個端點文檔包含請求格式、回應格式、錯誤處理、使用範例等。

---

## API 文檔結構

### 模塊化組織

每個API模塊包含：
- `_概覽.md` - 模塊概覽和端點列表
- `端點名稱.md` - 具體端點的詳細規格

**範例結構：**
```
業務規則/
├── 國定假日/
│   ├── _概覽.md
│   ├── 獲取國定假日列表.md
│   ├── 新增國定假日.md
│   └── ...
└── 假別類型/
    ├── _概覽.md
    └── ...
```

---

## API 模塊列表

### 認證與授權
- [認證 API](../API設計/認證API.md) - 登入、登出、Token 刷新

---

### 員工權限系統
- [員工權限 API](.員工權限/_概覽.md)
  - 預設權限模板管理
  - 個別員工權限管理
  - 權限同步

---

### 業務規則管理

#### 假期規則
- [國定假日 API](./業務規則/國定假日/_概覽.md) - CRUD、批量導入/匯出、使用查詢
- [假別類型 API](./業務規則/假別類型/_概覽.md) - CRUD、啟用/停用、使用查詢
- [其他假期規則 API](./業務規則/其他假期規則/_概覽.md) - 事件型假期（婚假、喪假、產假）

#### 工時規則
- [加班費率 API](./業務規則/加班費率/_概覽.md) - CRUD、恢復法定預設值、歷史費率
- [特休規則 API](./業務規則/特休規則/_概覽.md) - CRUD、恢復法定預設值、自動重算

#### 服務規則
- [週期類型 API](./業務規則/週期類型/_概覽.md) - CRUD、排序、使用查詢

---

### 工時管理
- [工時 API](../API設計/工時API.md) - 工時表 CRUD、加權工時計算

---

### 假期管理
- [假期 API](../API設計/假期API.md) - 假期登記、餘額查詢、生活事件

---

### 客戶與任務
- [客戶 API](../API設計/客戶API.md) - 客戶 CRUD、搜尋、批量操作
- [任務 API](../API設計/任務API.md) - 任務 CRUD、進度更新、階段管理

---

### 系統設定
- [設定 API](../API設計/設定API.md) - 各種系統設定

---

## API 標準規範

### 通用規範
- [API 標準規範](../API設計/00-API標準規範.md)
  - 版本控制 (`/api/v1/`)
  - 統一回應格式
  - HTTP 狀態碼標準
  - 錯誤處理
  - 分頁規範

---

## 統一回應格式

### 成功回應

```json
{
  "success": true,
  "data": { ... },
  "message": "操作成功（可選）"
}
```

---

### 錯誤回應

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "錯誤訊息",
    "details": { ... }
  }
}
```

---

## HTTP 狀態碼

| 狀態碼 | 說明 | 使用場景 |
|-------|------|---------|
| 200 | OK | 成功（GET, PUT, DELETE） |
| 201 | Created | 成功創建（POST） |
| 400 | Bad Request | 請求參數錯誤 |
| 401 | Unauthorized | 未認證 |
| 403 | Forbidden | 無權限 |
| 404 | Not Found | 資源不存在 |
| 409 | Conflict | 資源衝突 |
| 500 | Internal Server Error | 伺服器錯誤 |

---

## 常見錯誤代碼

| 錯誤代碼 | 說明 |
|---------|------|
| `ADMIN_PERMISSION_REQUIRED` | 需要管理員權限 |
| `RESOURCE_NOT_FOUND` | 資源不存在 |
| `RESOURCE_IN_USE` | 資源正在使用中（無法刪除） |
| `VALIDATION_ERROR` | 資料驗證失敗 |
| `DUPLICATE_ENTRY` | 重複的資料 |

---

## 分頁格式

### 請求參數

```
GET /api/v1/resource?page=1&page_size=20
```

### 回應格式

```json
{
  "success": true,
  "data": [ ... ],
  "pagination": {
    "page": 1,
    "page_size": 20,
    "total": 100,
    "total_pages": 5
  }
}
```

---

## 相關文檔

- [功能模塊索引](../功能模塊/README.md) - 第1層：功能概覽
- [技術規格索引](../技術規格/README.md) - 第2層：技術實現細節
- [資料庫設計索引](../資料庫設計/README.md) - 第4層：資料表設計
- [開發規範](../開發規範/) - API 開發標準

---

**最後更新：** 2025年10月27日



**層級：** 第3層（API端點詳細規格）  
**API 版本：** v1  
**最後更新：** 2025年10月27日

---

## 概述

本目錄包含所有 RESTful API 端點的詳細規格文檔。每個端點文檔包含請求格式、回應格式、錯誤處理、使用範例等。

---

## API 文檔結構

### 模塊化組織

每個API模塊包含：
- `_概覽.md` - 模塊概覽和端點列表
- `端點名稱.md` - 具體端點的詳細規格

**範例結構：**
```
業務規則/
├── 國定假日/
│   ├── _概覽.md
│   ├── 獲取國定假日列表.md
│   ├── 新增國定假日.md
│   └── ...
└── 假別類型/
    ├── _概覽.md
    └── ...
```

---

## API 模塊列表

### 認證與授權
- [認證 API](../API設計/認證API.md) - 登入、登出、Token 刷新

---

### 員工權限系統
- [員工權限 API](.員工權限/_概覽.md)
  - 預設權限模板管理
  - 個別員工權限管理
  - 權限同步

---

### 業務規則管理

#### 假期規則
- [國定假日 API](./業務規則/國定假日/_概覽.md) - CRUD、批量導入/匯出、使用查詢
- [假別類型 API](./業務規則/假別類型/_概覽.md) - CRUD、啟用/停用、使用查詢
- [其他假期規則 API](./業務規則/其他假期規則/_概覽.md) - 事件型假期（婚假、喪假、產假）

#### 工時規則
- [加班費率 API](./業務規則/加班費率/_概覽.md) - CRUD、恢復法定預設值、歷史費率
- [特休規則 API](./業務規則/特休規則/_概覽.md) - CRUD、恢復法定預設值、自動重算

#### 服務規則
- [週期類型 API](./業務規則/週期類型/_概覽.md) - CRUD、排序、使用查詢

---

### 工時管理
- [工時 API](../API設計/工時API.md) - 工時表 CRUD、加權工時計算

---

### 假期管理
- [假期 API](../API設計/假期API.md) - 假期登記、餘額查詢、生活事件

---

### 客戶與任務
- [客戶 API](../API設計/客戶API.md) - 客戶 CRUD、搜尋、批量操作
- [任務 API](../API設計/任務API.md) - 任務 CRUD、進度更新、階段管理

---

### 系統設定
- [設定 API](../API設計/設定API.md) - 各種系統設定

---

## API 標準規範

### 通用規範
- [API 標準規範](../API設計/00-API標準規範.md)
  - 版本控制 (`/api/v1/`)
  - 統一回應格式
  - HTTP 狀態碼標準
  - 錯誤處理
  - 分頁規範

---

## 統一回應格式

### 成功回應

```json
{
  "success": true,
  "data": { ... },
  "message": "操作成功（可選）"
}
```

---

### 錯誤回應

```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "錯誤訊息",
    "details": { ... }
  }
}
```

---

## HTTP 狀態碼

| 狀態碼 | 說明 | 使用場景 |
|-------|------|---------|
| 200 | OK | 成功（GET, PUT, DELETE） |
| 201 | Created | 成功創建（POST） |
| 400 | Bad Request | 請求參數錯誤 |
| 401 | Unauthorized | 未認證 |
| 403 | Forbidden | 無權限 |
| 404 | Not Found | 資源不存在 |
| 409 | Conflict | 資源衝突 |
| 500 | Internal Server Error | 伺服器錯誤 |

---

## 常見錯誤代碼

| 錯誤代碼 | 說明 |
|---------|------|
| `ADMIN_PERMISSION_REQUIRED` | 需要管理員權限 |
| `RESOURCE_NOT_FOUND` | 資源不存在 |
| `RESOURCE_IN_USE` | 資源正在使用中（無法刪除） |
| `VALIDATION_ERROR` | 資料驗證失敗 |
| `DUPLICATE_ENTRY` | 重複的資料 |

---

## 分頁格式

### 請求參數

```
GET /api/v1/resource?page=1&page_size=20
```

### 回應格式

```json
{
  "success": true,
  "data": [ ... ],
  "pagination": {
    "page": 1,
    "page_size": 20,
    "total": 100,
    "total_pages": 5
  }
}
```

---

## 相關文檔

- [功能模塊索引](../功能模塊/README.md) - 第1層：功能概覽
- [技術規格索引](../技術規格/README.md) - 第2層：技術實現細節
- [資料庫設計索引](../資料庫設計/README.md) - 第4層：資料表設計
- [開發規範](../開發規範/) - API 開發標準

---

**最後更新：** 2025年10月27日



