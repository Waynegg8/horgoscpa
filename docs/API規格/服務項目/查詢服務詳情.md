# 查詢服務詳情

**端點：** `GET /api/v1/services/:service_id`  
**權限：** 需有 `service_management` 權限

---

## 請求

### 路徑參數
| 參數 | 類型 | 必填 | 說明 |
|-----|------|------|------|
| `service_id` | integer | ✅ | 服務項目ID |

---

## 成功回應

**HTTP 狀態碼：** 200

```json
{
  "success": true,
  "data": {
    "service_id": 3,
    "parent_service_id": 1,
    "parent_service_name": "記帳服務",
    "service_name": "收集憑證",
    "description": "收集客戶提供的原始憑證",
    "sort_order": 0,
    "is_active": true,
    "created_by": 1,
    "created_by_name": "紜蓁",
    "created_at": "2025-01-02T00:00:00Z",
    "updated_at": "2025-01-02T00:00:00Z"
  }
}
```

---

## 錯誤回應

### 服務項目不存在
**HTTP 狀態碼：** 404
```json
{
  "success": false,
  "error": {
    "code": "SERVICE_NOT_FOUND",
    "message": "服務項目不存在"
  }
}
```

---

## 業務邏輯

### 返回資料
- 包含服務項目完整資訊
- 若為子項目，包含父項目名稱 (`parent_service_name`)
- 若為主項目，`parent_service_id` 和 `parent_service_name` 為 `null`

---

## 範例程式碼

```typescript
app.get('/api/v1/services/:service_id', 
  authMiddleware, 
  checkPermission('service_management'), 
  async (c) => {
    const serviceId = parseInt(c.req.param('service_id'));
    
    const service = await c.env.DB.prepare(`
      SELECT 
        s.service_id,
        s.parent_service_id,
        ps.service_name as parent_service_name,
        s.service_name,
        s.description,
        s.sort_order,
        s.is_active,
        s.created_by,
        u.name as created_by_name,
        s.created_at,
        s.updated_at
      FROM Services s
      LEFT JOIN Services ps ON s.parent_service_id = ps.service_id
      LEFT JOIN Users u ON s.created_by = u.user_id
      WHERE s.service_id = ? AND s.is_deleted = 0
    `).bind(serviceId).first();
    
    if (!service) {
      return c.json(errorResponse('SERVICE_NOT_FOUND', '服務項目不存在'), 404);
    }
    
    return c.json(successResponse(service));
  }
);
```


