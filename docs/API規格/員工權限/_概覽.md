# 員工權限 API 概覽

**API 前綴：** `/api/v1/settings/module-permissions`  
**最後更新：** 2025年10月27日

---

## 端點總覽

| 端點 | 方法 | 權限 | 說明 |
|------|------|------|------|
| `/default` | GET | 管理員 | 獲取預設權限模板 |
| `/default` | PUT | 管理員 | 更新預設權限模板 |
| `/sync` | POST | 管理員 | 同步預設模板到員工 |
| `/users` | GET | 管理員 | 獲取所有員工權限狀態 |
| `/users/:user_id` | GET | 管理員 | 獲取特定員工權限 |
| `/users/:user_id` | PUT | 管理員 | 更新特定員工權限 |
| `/users/:user_id` | DELETE | 管理員 | 恢復員工為預設模板 |
| `/me` | GET | 需登入 | 獲取當前用戶權限 |

---

## 權限模型

### 預設模板（Default Template）
- 儲存在 `ModulePermissions` 表，`user_id = NULL`
- 所有新員工預設使用此模板
- 管理員可調整預設值

### 個別權限（Custom Permissions）
- 儲存在 `ModulePermissions` 表，`user_id = <特定員工>`
- 覆蓋預設模板
- 可恢復為預設模板

### 管理員
- 自動擁有所有模塊權限
- 不受 `ModulePermissions` 表限制

---

## 可控制的模塊

| 模塊代號 | 說明 |
|---------|------|
| `dashboard` | 儀表板 |
| `personal_settings` | 個人資料設定 |
| `timesheet` | 工時表填寫 |
| `reports` | 報表中心 |
| `life_events` | 生活事件登記 |
| `task_templates` | 任務模板管理 |
| `tasks` | 任務進度追蹤 |
| `stage_updates` | 階段進度更新 |
| `client_services` | 客戶服務設定 |
| `booking_records` | 預約記錄 |
| `sop_management` | SOP 文件管理 |
| `knowledge_base` | 知識庫 |
| `service_management` | 服務項目管理 |
| `csv_import` | CSV 導入功能 |

---

## 詳細端點規格

### 管理員端點
- [獲取預設權限模板](./獲取預設權限模板.md)
- [更新預設權限模板](./更新預設權限模板.md)
- [同步預設模板到員工](./同步預設模板到員工.md)
- [獲取所有員工的權限狀態列表](./獲取所有員工的權限狀態列表.md)
- [獲取特定員工的權限](./獲取特定員工的權限.md)
- [更新特定員工的權限](./更新特定員工的權限.md)
- [恢復員工為預設模板](./恢復員工為預設模板.md)

### 員工端點
- [獲取當前用戶權限](./獲取當前用戶權限.md)

---

## 相關文檔

- [功能模塊 - 員工權限設定](../../功能模塊/01-員工權限設定.md)
- [資料庫設計 - ModulePermissions](../../資料庫設計/權限系統/ModulePermissions.md)


