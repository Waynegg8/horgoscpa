# 獲取預設權限模板

**端點：** `GET /api/v1/settings/module-permissions/default`  
**權限：** 管理員

---

## 請求

### 查詢參數
無

---

## 成功回應

**HTTP 狀態碼：** 200

```json
{
  "success": true,
  "data": {
    "dashboard": true,
    "personal_settings": true,
    "timesheet": true,
    "reports": false,
    "life_events": false,
    "task_templates": false,
    "tasks": false,
    "stage_updates": false,
    "client_services": false,
    "booking_records": false,
    "sop_management": false,
    "knowledge_base": false,
    "service_management": false,
    "csv_import": false
  }
}
```

---

## 業務邏輯

### 步驟
1. 查詢 `ModulePermissions` 表，條件 `user_id IS NULL`
2. 轉換為鍵值對格式返回

### 資料來源
- **資料表：** `ModulePermissions`
- **條件：** `user_id IS NULL`（預設模板標記）

---

## 範例程式碼

```typescript
app.get('/api/v1/settings/module-permissions/default', adminOnly, async (c) => {
  const rows = await c.env.DB.prepare(`
    SELECT module_name, is_enabled 
    FROM ModulePermissions 
    WHERE user_id IS NULL
  `).all();
  
  const permissions = {};
  rows.results.forEach(row => {
    permissions[row.module_name] = row.is_enabled === 1;
  });
  
  return c.json(successResponse(permissions));
});
```

---

## 前端使用範例

```javascript
async function fetchDefaultPermissions() {
  const response = await fetch('/api/v1/settings/module-permissions/default', {
    credentials: 'include'
  });
  const { data } = await response.json();
  
  // data = { dashboard: true, reports: false, ... }
  console.log('預設權限模板:', data);
}
```


