# 獲取預設權限模板

**端點：** `GET /api/v1/settings/module-permissions/default`  
**權限：** 管理員  
**最後更新：** 2025年10月27日

---

## 概述

獲取新員工加入時自動套用的預設權限模板。

---

## 請求

無需參數。

---

## 回應

### 成功回應（HTTP 200）

```json
{
  "success": true,
  "data": {
    "dashboard": true,
    "personal_settings": true,
    "timesheet": true,
    "reports": false,
    "life_events": false,
    "task_templates": false,
    "tasks": false,
    "stage_updates": false,
    "client_services": false,
    "booking_records": false,
    "sop_management": false,
    "knowledge_base": false,
    "service_management": false,
    "csv_import": false
  }
}
```

**欄位說明：**
- `data`: 模塊名稱與啟用狀態的對應
- `true` = 預設開放，`false` = 預設不開放

---

### 錯誤回應

**403 Forbidden - 無權限：**
```json
{
  "success": false,
  "error": {
    "code": "ADMIN_PERMISSION_REQUIRED",
    "message": "需要管理員權限"
  }
}
```

---

## 後端邏輯

```typescript
async function getDefaultPermissions() {
  // 查詢 user_id = NULL 的記錄（預設模板）
  const permissions = await db.all(`
    SELECT module_name, is_enabled
    FROM ModulePermissions
    WHERE user_id IS NULL
  `);
  
  // 轉換為物件格式
  const result = {};
  permissions.forEach(p => {
    result[p.module_name] = p.is_enabled;
  });
  
  return result;
}
```

---

## 相關端點

- [更新預設權限模板](./更新預設權限模板.md)
- [同步預設模板到員工](./同步預設模板到員工.md)
- [API 概覽](./_概覽.md)

---

**最後更新：** 2025年10月27日



**端點：** `GET /api/v1/settings/module-permissions/default`  
**權限：** 管理員  
**最後更新：** 2025年10月27日

---

## 概述

獲取新員工加入時自動套用的預設權限模板。

---

## 請求

無需參數。

---

## 回應

### 成功回應（HTTP 200）

```json
{
  "success": true,
  "data": {
    "dashboard": true,
    "personal_settings": true,
    "timesheet": true,
    "reports": false,
    "life_events": false,
    "task_templates": false,
    "tasks": false,
    "stage_updates": false,
    "client_services": false,
    "booking_records": false,
    "sop_management": false,
    "knowledge_base": false,
    "service_management": false,
    "csv_import": false
  }
}
```

**欄位說明：**
- `data`: 模塊名稱與啟用狀態的對應
- `true` = 預設開放，`false` = 預設不開放

---

### 錯誤回應

**403 Forbidden - 無權限：**
```json
{
  "success": false,
  "error": {
    "code": "ADMIN_PERMISSION_REQUIRED",
    "message": "需要管理員權限"
  }
}
```

---

## 後端邏輯

```typescript
async function getDefaultPermissions() {
  // 查詢 user_id = NULL 的記錄（預設模板）
  const permissions = await db.all(`
    SELECT module_name, is_enabled
    FROM ModulePermissions
    WHERE user_id IS NULL
  `);
  
  // 轉換為物件格式
  const result = {};
  permissions.forEach(p => {
    result[p.module_name] = p.is_enabled;
  });
  
  return result;
}
```

---

## 相關端點

- [更新預設權限模板](./更新預設權限模板.md)
- [同步預設模板到員工](./同步預設模板到員工.md)
- [API 概覽](./_概覽.md)

---

**最後更新：** 2025年10月27日



