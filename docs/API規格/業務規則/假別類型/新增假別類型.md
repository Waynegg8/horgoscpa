# 新增假別類型

**端點：** `POST /api/v1/settings/leave-types`  
**權限：** 管理員  
**最後更新：** 2025年10月27日

---

## 概述

新增一個假別類型。

---

## 請求

### 請求 Body

```json
{
  "code": "family_care_leave",
  "name": "家庭照顧假",
  "gender_restriction": null,
  "annual_quota_days": 7,
  "pay_rate": 0.0,
  "requires_proof": false,
  "description": "全年7天，併入事假計算，無薪",
  "sort_order": 10
}
```

---

## 驗證規則

- `code`: 必填，唯一，只能包含小寫字母、數字、底線
- `name`: 必填，最長 50 字元
- `gender_restriction`: 可選，只能是 `male`、`female` 或 `null`
- `annual_quota_days`: 可選，非負整數，`null` 表示無上限
- `pay_rate`: 必填，0.0 到 1.0 之間
- `requires_proof`: 可選，布林值，預設 `false`
- `description`: 可選，最長 200 字元
- `sort_order`: 可選，整數，預設 0

---

## 回應

### 成功回應（HTTP 201）

```json
{
  "success": true,
  "message": "假別類型已新增",
  "data": {
    "leave_type_id": 10,
    "code": "family_care_leave",
    "name": "家庭照顧假",
    "gender_restriction": null,
    "annual_quota_days": 7,
    "pay_rate": 0.0,
    "requires_proof": false,
    "description": "全年7天，併入事假計算，無薪",
    "is_active": true,
    "sort_order": 10
  }
}
```

---

### 錯誤回應

**409 Conflict - 代碼已存在：**
```json
{
  "success": false,
  "error": {
    "code": "LEAVE_TYPE_CODE_EXISTS",
    "message": "假別代碼已存在"
  }
}
```

**400 Bad Request - 無效的薪資比例：**
```json
{
  "success": false,
  "error": {
    "code": "INVALID_PAY_RATE",
    "message": "薪資比例必須在 0.0 到 1.0 之間"
  }
}
```

---

## 使用範例

### 範例：新增自訂假別類型

**請求：**
```bash
POST /api/v1/settings/leave-types
Content-Type: application/json

{
  "code": "volunteer_leave",
  "name": "志工假",
  "annual_quota_days": 5,
  "pay_rate": 1.0,
  "description": "參與志工活動的有薪假"
}
```

**回應：**
```json
{
  "success": true,
  "message": "假別類型已新增",
  "data": {
    "leave_type_id": 11,
    "code": "volunteer_leave",
    "name": "志工假"
  }
}
```

---

## 相關端點

- [獲取假別類型列表](./獲取假別類型列表.md)
- [編輯假別類型](./編輯假別類型.md)
- [API 概覽](./_概覽.md)

---

**最後更新：** 2025年10月27日



**端點：** `POST /api/v1/settings/leave-types`  
**權限：** 管理員  
**最後更新：** 2025年10月27日

---

## 概述

新增一個假別類型。

---

## 請求

### 請求 Body

```json
{
  "code": "family_care_leave",
  "name": "家庭照顧假",
  "gender_restriction": null,
  "annual_quota_days": 7,
  "pay_rate": 0.0,
  "requires_proof": false,
  "description": "全年7天，併入事假計算，無薪",
  "sort_order": 10
}
```

---

## 驗證規則

- `code`: 必填，唯一，只能包含小寫字母、數字、底線
- `name`: 必填，最長 50 字元
- `gender_restriction`: 可選，只能是 `male`、`female` 或 `null`
- `annual_quota_days`: 可選，非負整數，`null` 表示無上限
- `pay_rate`: 必填，0.0 到 1.0 之間
- `requires_proof`: 可選，布林值，預設 `false`
- `description`: 可選，最長 200 字元
- `sort_order`: 可選，整數，預設 0

---

## 回應

### 成功回應（HTTP 201）

```json
{
  "success": true,
  "message": "假別類型已新增",
  "data": {
    "leave_type_id": 10,
    "code": "family_care_leave",
    "name": "家庭照顧假",
    "gender_restriction": null,
    "annual_quota_days": 7,
    "pay_rate": 0.0,
    "requires_proof": false,
    "description": "全年7天，併入事假計算，無薪",
    "is_active": true,
    "sort_order": 10
  }
}
```

---

### 錯誤回應

**409 Conflict - 代碼已存在：**
```json
{
  "success": false,
  "error": {
    "code": "LEAVE_TYPE_CODE_EXISTS",
    "message": "假別代碼已存在"
  }
}
```

**400 Bad Request - 無效的薪資比例：**
```json
{
  "success": false,
  "error": {
    "code": "INVALID_PAY_RATE",
    "message": "薪資比例必須在 0.0 到 1.0 之間"
  }
}
```

---

## 使用範例

### 範例：新增自訂假別類型

**請求：**
```bash
POST /api/v1/settings/leave-types
Content-Type: application/json

{
  "code": "volunteer_leave",
  "name": "志工假",
  "annual_quota_days": 5,
  "pay_rate": 1.0,
  "description": "參與志工活動的有薪假"
}
```

**回應：**
```json
{
  "success": true,
  "message": "假別類型已新增",
  "data": {
    "leave_type_id": 11,
    "code": "volunteer_leave",
    "name": "志工假"
  }
}
```

---

## 相關端點

- [獲取假別類型列表](./獲取假別類型列表.md)
- [編輯假別類型](./編輯假別類型.md)
- [API 概覽](./_概覽.md)

---

**最後更新：** 2025年10月27日



