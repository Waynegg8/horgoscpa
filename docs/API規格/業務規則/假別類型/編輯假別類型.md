# 編輯假別類型

**端點：** `PUT /api/v1/settings/leave-types/:id`  
**權限：** 管理員  
**最後更新：** 2025年10月27日

---

## 概述

編輯特定假別類型的資訊。

---

## 請求

### 路徑參數

- `id` (必填, integer): 假別類型 ID

### 請求 Body

```json
{
  "name": "病假（更新）",
  "annual_quota_days": 35,
  "pay_rate": 0.6,
  "description": "更新後的說明"
}
```

**說明：** 只需包含要更新的欄位

---

## 驗證規則

- `code`: 不可修改（系統內部使用）
- `name`: 可選，最長 50 字元
- `gender_restriction`: 可選，只能是 `male`、`female` 或 `null`
- `annual_quota_days`: 可選，非負整數或 `null`
- `pay_rate`: 可選，0.0 到 1.0 之間
- `requires_proof`: 可選，布林值
- `description`: 可選，最長 200 字元
- `sort_order`: 可選，整數

---

## 回應

### 成功回應（HTTP 200）

```json
{
  "success": true,
  "message": "假別類型已更新",
  "data": {
    "leave_type_id": 1,
    "code": "sick_leave",
    "name": "病假（更新）",
    "annual_quota_days": 35,
    "pay_rate": 0.6,
    "description": "更新後的說明",
    "updated_at": "2025-10-27T10:00:00Z"
  }
}
```

---

### 錯誤回應

**404 Not Found - 找不到假別類型：**
```json
{
  "success": false,
  "error": {
    "code": "LEAVE_TYPE_NOT_FOUND",
    "message": "找不到指定的假別類型"
  }
}
```

**400 Bad Request - 無效的薪資比例：**
```json
{
  "success": false,
  "error": {
    "code": "INVALID_PAY_RATE",
    "message": "薪資比例必須在 0.0 到 1.0 之間"
  }
}
```

---

## 使用範例

### 範例：調整病假額度

**請求：**
```bash
PUT /api/v1/settings/leave-types/1
Content-Type: application/json

{
  "annual_quota_days": 35,
  "description": "調整為35天額度"
}
```

**回應：**
```json
{
  "success": true,
  "message": "假別類型已更新"
}
```

---

## 注意事項

### 修改已使用的假別類型

當修改已被員工使用的假別類型時：
- ✅ 可以修改：名稱、說明、排序
- ⚠️ 謹慎修改：年度額度、薪資比例
- ❌ 不建議修改：性別限制（可能影響已請假記錄）

**建議：** 重大變更應創建新的假別類型，並停用舊的

---

## 相關端點

- [獲取特定假別類型](./獲取特定假別類型.md)
- [停用假別類型](./停用假別類型.md)
- [API 概覽](./_概覽.md)

---

**最後更新：** 2025年10月27日



**端點：** `PUT /api/v1/settings/leave-types/:id`  
**權限：** 管理員  
**最後更新：** 2025年10月27日

---

## 概述

編輯特定假別類型的資訊。

---

## 請求

### 路徑參數

- `id` (必填, integer): 假別類型 ID

### 請求 Body

```json
{
  "name": "病假（更新）",
  "annual_quota_days": 35,
  "pay_rate": 0.6,
  "description": "更新後的說明"
}
```

**說明：** 只需包含要更新的欄位

---

## 驗證規則

- `code`: 不可修改（系統內部使用）
- `name`: 可選，最長 50 字元
- `gender_restriction`: 可選，只能是 `male`、`female` 或 `null`
- `annual_quota_days`: 可選，非負整數或 `null`
- `pay_rate`: 可選，0.0 到 1.0 之間
- `requires_proof`: 可選，布林值
- `description`: 可選，最長 200 字元
- `sort_order`: 可選，整數

---

## 回應

### 成功回應（HTTP 200）

```json
{
  "success": true,
  "message": "假別類型已更新",
  "data": {
    "leave_type_id": 1,
    "code": "sick_leave",
    "name": "病假（更新）",
    "annual_quota_days": 35,
    "pay_rate": 0.6,
    "description": "更新後的說明",
    "updated_at": "2025-10-27T10:00:00Z"
  }
}
```

---

### 錯誤回應

**404 Not Found - 找不到假別類型：**
```json
{
  "success": false,
  "error": {
    "code": "LEAVE_TYPE_NOT_FOUND",
    "message": "找不到指定的假別類型"
  }
}
```

**400 Bad Request - 無效的薪資比例：**
```json
{
  "success": false,
  "error": {
    "code": "INVALID_PAY_RATE",
    "message": "薪資比例必須在 0.0 到 1.0 之間"
  }
}
```

---

## 使用範例

### 範例：調整病假額度

**請求：**
```bash
PUT /api/v1/settings/leave-types/1
Content-Type: application/json

{
  "annual_quota_days": 35,
  "description": "調整為35天額度"
}
```

**回應：**
```json
{
  "success": true,
  "message": "假別類型已更新"
}
```

---

## 注意事項

### 修改已使用的假別類型

當修改已被員工使用的假別類型時：
- ✅ 可以修改：名稱、說明、排序
- ⚠️ 謹慎修改：年度額度、薪資比例
- ❌ 不建議修改：性別限制（可能影響已請假記錄）

**建議：** 重大變更應創建新的假別類型，並停用舊的

---

## 相關端點

- [獲取特定假別類型](./獲取特定假別類型.md)
- [停用假別類型](./停用假別類型.md)
- [API 概覽](./_概覽.md)

---

**最後更新：** 2025年10月27日



