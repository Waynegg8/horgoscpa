# 假別類型 API 概覽

**API 前綴：** `/api/v1/settings/leave-types`  
**所屬功能：** [業務規則管理](../../../功能模塊/02-業務規則管理.md)  
**最後更新：** 2025年10月27日

---

## 概述

管理權益型假別（病假、事假、生理假、補休等），這些假別有固定年度額度，員工可直接在工時表請假使用。

**主要功能：**
- 假別類型的 CRUD 操作
- 軟刪除（停用/啟用）機制
- 性別限制設定
- 年度額度和薪資比例設定
- 查詢使用情況

---

## 端點列表

| 方法 | 端點 | 說明 | 權限 |
|------|------|------|------|
| GET | `/leave-types` | 獲取假別類型列表 | 管理員 |
| GET | `/leave-types/:id` | 獲取特定假別類型 | 管理員 |
| POST | `/leave-types` | 新增假別類型 | 管理員 |
| PUT | `/leave-types/:id` | 編輯假別類型 | 管理員 |
| DELETE | `/leave-types/:id` | 停用假別類型 | 管理員 |
| PUT | `/leave-types/:id/activate` | 啟用假別類型 | 管理員 |
| GET | `/leave-types/:id/usage` | 查詢使用情況 | 管理員 |

---

## 詳細文檔

### CRUD 操作
- [獲取假別類型列表](./獲取假別類型列表.md)
- [獲取特定假別類型](./獲取特定假別類型.md)
- [新增假別類型](./新增假別類型.md)
- [編輯假別類型](./編輯假別類型.md)
- [停用假別類型](./停用假別類型.md)
- [啟用假別類型](./啟用假別類型.md)

### 查詢功能
- [查詢使用情況](./查詢使用情況.md)

---

## 資料模型

```typescript
interface LeaveType {
  leave_type_id: number;
  code: string;                // 假別代碼（如：sick_leave）
  name: string;                // 假別名稱（如：病假）
  gender_restriction: 'male' | 'female' | null;  // 性別限制
  annual_quota_days: number | null;  // 年度額度（天），null=無上限
  pay_rate: number;            // 薪資比例（0.0-1.0）
  requires_proof: boolean;     // 是否需證明文件
  description: string;
  is_active: boolean;
  sort_order: number;
}
```

---

## 錯誤代碼

| 錯誤代碼 | HTTP 狀態碼 | 說明 |
|---------|------------|------|
| `LEAVE_TYPE_NOT_FOUND` | 404 | 找不到指定的假別類型 |
| `LEAVE_TYPE_CODE_EXISTS` | 409 | 假別代碼已存在 |
| `LEAVE_TYPE_IN_USE` | 409 | 該假別類型已被請假記錄使用，無法完全刪除 |
| `INVALID_PAY_RATE` | 400 | 無效的薪資比例（需在0.0-1.0之間） |

---

## 相關文檔

- [功能模塊 - 業務規則管理](../../../功能模塊/02-業務規則管理.md)
- [資料庫設計 - LeaveTypes](../../../資料庫設計/業務規則/LeaveTypes.md)
- [API 標準規範](../../00-API標準規範.md)

---

**最後更新：** 2025年10月27日



**API 前綴：** `/api/v1/settings/leave-types`  
**所屬功能：** [業務規則管理](../../../功能模塊/02-業務規則管理.md)  
**最後更新：** 2025年10月27日

---

## 概述

管理權益型假別（病假、事假、生理假、補休等），這些假別有固定年度額度，員工可直接在工時表請假使用。

**主要功能：**
- 假別類型的 CRUD 操作
- 軟刪除（停用/啟用）機制
- 性別限制設定
- 年度額度和薪資比例設定
- 查詢使用情況

---

## 端點列表

| 方法 | 端點 | 說明 | 權限 |
|------|------|------|------|
| GET | `/leave-types` | 獲取假別類型列表 | 管理員 |
| GET | `/leave-types/:id` | 獲取特定假別類型 | 管理員 |
| POST | `/leave-types` | 新增假別類型 | 管理員 |
| PUT | `/leave-types/:id` | 編輯假別類型 | 管理員 |
| DELETE | `/leave-types/:id` | 停用假別類型 | 管理員 |
| PUT | `/leave-types/:id/activate` | 啟用假別類型 | 管理員 |
| GET | `/leave-types/:id/usage` | 查詢使用情況 | 管理員 |

---

## 詳細文檔

### CRUD 操作
- [獲取假別類型列表](./獲取假別類型列表.md)
- [獲取特定假別類型](./獲取特定假別類型.md)
- [新增假別類型](./新增假別類型.md)
- [編輯假別類型](./編輯假別類型.md)
- [停用假別類型](./停用假別類型.md)
- [啟用假別類型](./啟用假別類型.md)

### 查詢功能
- [查詢使用情況](./查詢使用情況.md)

---

## 資料模型

```typescript
interface LeaveType {
  leave_type_id: number;
  code: string;                // 假別代碼（如：sick_leave）
  name: string;                // 假別名稱（如：病假）
  gender_restriction: 'male' | 'female' | null;  // 性別限制
  annual_quota_days: number | null;  // 年度額度（天），null=無上限
  pay_rate: number;            // 薪資比例（0.0-1.0）
  requires_proof: boolean;     // 是否需證明文件
  description: string;
  is_active: boolean;
  sort_order: number;
}
```

---

## 錯誤代碼

| 錯誤代碼 | HTTP 狀態碼 | 說明 |
|---------|------------|------|
| `LEAVE_TYPE_NOT_FOUND` | 404 | 找不到指定的假別類型 |
| `LEAVE_TYPE_CODE_EXISTS` | 409 | 假別代碼已存在 |
| `LEAVE_TYPE_IN_USE` | 409 | 該假別類型已被請假記錄使用，無法完全刪除 |
| `INVALID_PAY_RATE` | 400 | 無效的薪資比例（需在0.0-1.0之間） |

---

## 相關文檔

- [功能模塊 - 業務規則管理](../../../功能模塊/02-業務規則管理.md)
- [資料庫設計 - LeaveTypes](../../../資料庫設計/業務規則/LeaveTypes.md)
- [API 標準規範](../../00-API標準規範.md)

---

**最後更新：** 2025年10月27日



