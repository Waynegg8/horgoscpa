# 特休規則 API 概覽

**API 前綴：** `/api/v1/settings/annual-leave-rules`  
**所屬功能：** [業務規則管理](../../../功能模塊/02-業務規則管理.md)  
**最後更新：** 2025年10月27日

---

## 概述

設定員工年資對應的特休天數，依照台灣勞基法規定。系統根據員工到職日精確計算年資（到月份），規則變更時自動重新計算所有員工的特休額度。

**主要功能：**
- 特休規則的 CRUD 操作
- 規則變更立即重算員工特休額度
- 恢復法定預設值（26 條規則，涵蓋0-25年年資）

---

## 端點列表

| 方法 | 端點 | 說明 | 權限 |
|------|------|------|------|
| GET | `/annual-leave-rules` | 獲取特休規則列表 | 管理員 |
| GET | `/annual-leave-rules/:id` | 獲取特定規則 | 管理員 |
| POST | `/annual-leave-rules` | 新增特休規則 | 管理員 |
| PUT | `/annual-leave-rules/:id` | 編輯特休規則 | 管理員 |
| DELETE | `/annual-leave-rules/:id` | 刪除特休規則 | 管理員 |
| POST | `/annual-leave-rules/reset-defaults` | 恢復法定預設值 | 管理員 |

---

## 詳細文檔

### CRUD 操作
- [獲取特休規則列表](./獲取特休規則列表.md)
- [獲取特定規則](./獲取特定規則.md)
- [新增特休規則](./新增特休規則.md)
- [編輯特休規則](./編輯特休規則.md)
- [刪除特休規則](./刪除特休規則.md)

### 特殊操作
- [恢復法定預設值](./恢復法定預設值.md)

---

## 年資計算邏輯

### 精確到月份

**範例：**
- 到職日：2023年3月15日
- 查詢日：2025年10月27日
- 年資：2年7個月 = 31個月
- 特休天數：10天（依 24-35個月規則）

---

## 法定預設值（26條規則）

| 年資範圍（月） | 特休天數 | 說明 |
|--------------|---------|------|
| 0-5 | 0 | 未滿6個月 |
| 6-11 | 3 | 滿6個月未滿1年 |
| 12-23 | 7 | 滿1年未滿2年 |
| 24-35 | 10 | 滿2年未滿3年 |
| 36-47 | 14 | 滿3年未滿5年 |
| 48-59 | 14 | 滿4年未滿5年 |
| 60-119 | 15 | 滿5年未滿10年 |
| 120-287 | 16-29 | 滿10年起，每年+1天 |
| 288+ | 30 | 滿24年以上，上限30天 |

完整26條規則見：[資料庫設計 - AnnualLeaveRules](../../../資料庫設計/業務規則/AnnualLeaveRules.md)

---

## 錯誤代碼

| 錯誤代碼 | HTTP 狀態碼 | 說明 |
|---------|------------|------|
| `ANNUAL_LEAVE_RULE_NOT_FOUND` | 404 | 找不到指定的特休規則 |
| `YEARS_RANGE_OVERLAPPING` | 409 | 年資範圍與現有規則重疊 |
| `INVALID_LEAVE_DAYS` | 400 | 無效的特休天數（需0-30之間） |

---

## 相關文檔

- [功能模塊 - 業務規則管理](../../../功能模塊/02-業務規則管理.md)
- [資料庫設計 - AnnualLeaveRules](../../../資料庫設計/業務規則/AnnualLeaveRules.md)
- [特休規則 - 計算邏輯](../../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)

---

**最後更新：** 2025年10月27日



**API 前綴：** `/api/v1/settings/annual-leave-rules`  
**所屬功能：** [業務規則管理](../../../功能模塊/02-業務規則管理.md)  
**最後更新：** 2025年10月27日

---

## 概述

設定員工年資對應的特休天數，依照台灣勞基法規定。系統根據員工到職日精確計算年資（到月份），規則變更時自動重新計算所有員工的特休額度。

**主要功能：**
- 特休規則的 CRUD 操作
- 規則變更立即重算員工特休額度
- 恢復法定預設值（26 條規則，涵蓋0-25年年資）

---

## 端點列表

| 方法 | 端點 | 說明 | 權限 |
|------|------|------|------|
| GET | `/annual-leave-rules` | 獲取特休規則列表 | 管理員 |
| GET | `/annual-leave-rules/:id` | 獲取特定規則 | 管理員 |
| POST | `/annual-leave-rules` | 新增特休規則 | 管理員 |
| PUT | `/annual-leave-rules/:id` | 編輯特休規則 | 管理員 |
| DELETE | `/annual-leave-rules/:id` | 刪除特休規則 | 管理員 |
| POST | `/annual-leave-rules/reset-defaults` | 恢復法定預設值 | 管理員 |

---

## 詳細文檔

### CRUD 操作
- [獲取特休規則列表](./獲取特休規則列表.md)
- [獲取特定規則](./獲取特定規則.md)
- [新增特休規則](./新增特休規則.md)
- [編輯特休規則](./編輯特休規則.md)
- [刪除特休規則](./刪除特休規則.md)

### 特殊操作
- [恢復法定預設值](./恢復法定預設值.md)

---

## 年資計算邏輯

### 精確到月份

**範例：**
- 到職日：2023年3月15日
- 查詢日：2025年10月27日
- 年資：2年7個月 = 31個月
- 特休天數：10天（依 24-35個月規則）

---

## 法定預設值（26條規則）

| 年資範圍（月） | 特休天數 | 說明 |
|--------------|---------|------|
| 0-5 | 0 | 未滿6個月 |
| 6-11 | 3 | 滿6個月未滿1年 |
| 12-23 | 7 | 滿1年未滿2年 |
| 24-35 | 10 | 滿2年未滿3年 |
| 36-47 | 14 | 滿3年未滿5年 |
| 48-59 | 14 | 滿4年未滿5年 |
| 60-119 | 15 | 滿5年未滿10年 |
| 120-287 | 16-29 | 滿10年起，每年+1天 |
| 288+ | 30 | 滿24年以上，上限30天 |

完整26條規則見：[資料庫設計 - AnnualLeaveRules](../../../資料庫設計/業務規則/AnnualLeaveRules.md)

---

## 錯誤代碼

| 錯誤代碼 | HTTP 狀態碼 | 說明 |
|---------|------------|------|
| `ANNUAL_LEAVE_RULE_NOT_FOUND` | 404 | 找不到指定的特休規則 |
| `YEARS_RANGE_OVERLAPPING` | 409 | 年資範圍與現有規則重疊 |
| `INVALID_LEAVE_DAYS` | 400 | 無效的特休天數（需0-30之間） |

---

## 相關文檔

- [功能模塊 - 業務規則管理](../../../功能模塊/02-業務規則管理.md)
- [資料庫設計 - AnnualLeaveRules](../../../資料庫設計/業務規則/AnnualLeaveRules.md)
- [特休規則 - 計算邏輯](../../../技術規格/業務規則/2.4-特休規則-計算邏輯.md)

---

**最後更新：** 2025年10月27日



