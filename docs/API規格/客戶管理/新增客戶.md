# 新增客戶

**端點：** `POST /api/v1/clients`  
**權限：** 管理員、會計師

---

## 請求 Body

```json
{
  "client_id": "86753078",
  "tax_registration_number": "12345678",
  "company_name": "冠群資訊股份有限公司",
  "business_status": "營業中",
  "organization_type": "股份有限公司",
  "capital_amount": 10000000,
  "establishment_date": "0840417",
  "responsible_person": "簡安秀",
  "tax_registration_address": "臺中市西區民生里建國路21號",
  "registered_business_items": [
    {
      "name": "電腦及電腦周邊設備零售",
      "code": "483111"
    }
  ],
  "payment_collection_timing": "每月5日",
  "payment_collection_remarks": "匯款後請提供匯款證明",
  "assignee_user_id": 1,
  "contact_person_1": "李小姐",
  "phone": "04-1234-5678",
  "email": "contact@example.com",
  "invoice_count": 50,
  "remarks": "重要客戶",
  "tag_ids": [1, 2]
}
```

---

## 必填欄位
- `client_id` ✅（8位數字）
- `company_name` ✅
- `assignee_user_id` ✅

---

## 成功回應

**HTTP 狀態碼：** 201

```json
{
  "success": true,
  "data": {
    "client_id": "86753078",
    "message": "客戶新增成功"
  }
}
```

---

## 錯誤回應

### 統一編號已存在
**HTTP 狀態碼：** 409
```json
{
  "success": false,
  "error": {
    "code": "DUPLICATE_CLIENT_ID",
    "message": "統一編號已存在"
  }
}
```

### 驗證錯誤
**HTTP 狀態碼：** 422
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "client_id 必須為 8 位數字"
  }
}
```

---

## 業務邏輯

### 驗證規則
- `client_id`: 8位數字，唯一
- `company_name`: 1-100 字元
- `assignee_user_id`: 必須存在於 Users 表
- `email`: 符合 email 格式（若提供）
- `registered_business_items`: JSON 陣列格式

### 處理流程
1. 驗證必填欄位
2. 檢查統一編號是否重複
3. 插入 `Clients` 表
4. 若有 `tag_ids`，插入 `ClientTagAssignments`
5. 返回成功訊息





