# 客戶標籤關聯 API

**版本：** v1  
**Base URL：** `/api/v1/clients/:client_id/tags`  
**最後更新：** 2025年10月27日

---

## 查詢標籤

**端點：** `GET /clients/:client_id/tags`  
**權限：** 所有員工

### 回應範例

```json
{
  "success": true,
  "data": [
    {
      "tag_id": 1,
      "tag_name": "VIP客戶",
      "tag_color": "#FF5733",
      "assigned_at": "2025-01-01T00:00:00Z",
      "assigned_by": 1,
      "assigned_by_name": "紜蓁"
    }
  ]
}
```

---

## 新增標籤

**端點：** `POST /clients/:client_id/tags`  
**權限：** 所有員工

### 請求 Body

```json
{
  "tag_id": 1
}
```

### 回應範例

```json
{
  "success": true,
  "data": {
    "message": "標籤新增成功"
  }
}
```

### 錯誤回應

```json
{
  "success": false,
  "error": {
    "code": "TAG_ALREADY_ASSIGNED",
    "message": "此標籤已指派給該客戶"
  }
}
```

---

## 移除標籤

**端點：** `DELETE /clients/:client_id/tags/:tag_id`  
**權限：** 所有員工

### 回應範例

```json
{
  "success": true,
  "data": {
    "message": "標籤移除成功"
  }
}
```

---

## 批次新增

**端點：** `POST /clients/:client_id/tags/batch`  
**權限：** 所有員工

### 請求 Body

```json
{
  "tag_ids": [1, 2, 3]
}
```

### 回應範例

```json
{
  "success": true,
  "data": {
    "message": "批次新增成功",
    "added_count": 3
  }
}
```

---

**相關文檔：**
- [API 概覽](./_概覽.md)
- [標籤管理 API](./標籤管理.md)


