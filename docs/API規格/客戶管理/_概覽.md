# 客戶管理 API 概覽

**版本：** v1  
**Base URL：** `/api/v1`  
**最後更新：** 2025年10月27日

---

## API 端點總覽

### 客戶 CRUD
| 方法 | 路徑 | 說明 | 文檔 |
|-----|------|------|------|
| GET | `/clients` | 查詢客戶列表 | [詳細](./查詢客戶列表.md) |
| GET | `/clients/:id` | 查詢客戶詳情 | [詳細](./查詢客戶詳情.md) |
| POST | `/clients` | 新增客戶 | [詳細](./新增客戶.md) |
| PUT | `/clients/:id` | 更新客戶 | [詳細](./更新客戶.md) |
| DELETE | `/clients/:id` | 刪除客戶 | [詳細](./刪除客戶.md) |

### 標籤管理
| 方法 | 路徑 | 說明 | 文檔 |
|-----|------|------|------|
| GET | `/customer-tags` | 查詢所有標籤 | [詳細](./標籤管理.md#查詢列表) |
| POST | `/customer-tags` | 新增標籤 | [詳細](./標籤管理.md#新增標籤) |
| PUT | `/customer-tags/:id` | 更新標籤 | [詳細](./標籤管理.md#更新標籤) |
| DELETE | `/customer-tags/:id` | 刪除標籤 | [詳細](./標籤管理.md#刪除標籤) |

### 標籤關聯
| 方法 | 路徑 | 說明 | 文檔 |
|-----|------|------|------|
| GET | `/clients/:id/tags` | 查詢客戶標籤 | [詳細](./標籤關聯.md#查詢標籤) |
| POST | `/clients/:id/tags` | 新增標籤 | [詳細](./標籤關聯.md#新增標籤) |
| DELETE | `/clients/:id/tags/:tag_id` | 移除標籤 | [詳細](./標籤關聯.md#移除標籤) |

---

## 認證

所有 API 都需要 JWT 認證：

```
Authorization: Bearer <JWT_TOKEN>
```

或使用 HttpOnly Cookie：
```
Cookie: auth_token=<JWT_TOKEN>
```

---

## 標準回應格式

### 成功
```json
{
  "success": true,
  "data": { ... }
}
```

### 錯誤
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "錯誤訊息"
  }
}
```

---

## 錯誤代碼

| 代碼 | HTTP狀態 | 說明 |
|-----|---------|------|
| `CLIENT_NOT_FOUND` | 404 | 客戶不存在 |
| `DUPLICATE_CLIENT_ID` | 409 | 統一編號已存在 |
| `INVALID_CLIENT_ID_FORMAT` | 400 | 統一編號格式錯誤 |
| `TAG_NOT_FOUND` | 404 | 標籤不存在 |
| `DUPLICATE_TAG_NAME` | 409 | 標籤名稱已存在 |
| `PERMISSION_DENIED` | 403 | 無權限 |

---

**相關文檔：**

### 客戶 CRUD
- [查詢客戶列表](./查詢客戶列表.md)
- [查詢客戶詳情](./查詢客戶詳情.md)
- [新增客戶](./新增客戶.md)
- [更新客戶](./更新客戶.md)
- [刪除客戶](./刪除客戶.md)

### 標籤系統
- [標籤管理 API](./標籤管理.md)
- [標籤關聯 API](./標籤關聯.md)

