# 完成階段

**端點：** `POST /api/v1/task-stages/:id/complete`  
**權限：** 負責人

---

## 請求

### 路徑參數
| 參數 | 類型 | 必填 | 說明 |
|-----|------|------|------|
| `id` | integer | ✅ | 階段ID |

### Body
```json
{
  "notes": "已完成所有過帳作業"
}
```

### 欄位說明
| 欄位 | 類型 | 必填 | 說明 |
|-----|------|------|------|
| `notes` | string | ❌ | 階段備註 |

---

## 成功回應

**HTTP 狀態碼：** 200

```json
{
  "success": true,
  "data": {
    "message": "階段已完成",
    "actual_completion_date": "2024-11-06",
    "task_progress": 50
  }
}
```

---

## 業務邏輯

### 自動更新
- 設定 `actual_completion_date`
- 更新任務進度
- 若所有階段完成，自動完成任務

### 依賴解鎖
- 完成階段後，依賴此階段的下一階段自動解鎖





