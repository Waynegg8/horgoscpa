# å‰ç«¯æ¶æ„è§„èŒƒ

**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-10-26  
**é€‚ç”¨èŒƒå›´**: å†…éƒ¨ç®¡ç†ç³»ç»Ÿ

---

## ğŸ“‹ æ€»ä½“æ¶æ„

### æŠ€æœ¯æ ˆ
- **HTML5**: è¯­ä¹‰åŒ–æ ‡ç­¾
- **CSS3**: ç°ä»£åŒ–æ ·å¼ï¼Œä½¿ç”¨CSSå˜é‡
- **JavaScript**: Vanilla JSï¼ˆæ— æ¡†æ¶ï¼‰
- **å›¾æ ‡**: Google Material Symbols

### è®¾è®¡åŸåˆ™
1. **ç»„ä»¶åŒ–**: é€šè¿‡CSSç»„ä»¶åº“å®ç°æ ·å¼å¤ç”¨
2. **å“åº”å¼**: ç§»åŠ¨ä¼˜å…ˆï¼Œæ”¯æŒ768pxã€480pxæ–­ç‚¹
3. **ä¸€è‡´æ€§**: ç»Ÿä¸€çš„é¢œè‰²ã€é—´è·ã€åœ†è§’ç³»ç»Ÿ
4. **å¯ç»´æŠ¤æ€§**: åˆ†ç¦»æ ·å¼ä¸ç»“æ„ï¼Œé¿å…å†…åµŒCSS

---

## ğŸ¨ CSSæ¶æ„

### æ–‡ä»¶ç»“æ„

```
assets/css/
â”œâ”€â”€ å¯¹å¤–ç½‘ç«™ï¼ˆä¸ä¿®æ”¹ï¼‰
â”‚   â”œâ”€â”€ common.css          # å¯¹å¤–ç½‘ç«™å…±ç”¨æ ·å¼
â”‚   â”œâ”€â”€ navbar.css          # å¯¹å¤–å¯¼èˆªæ 
â”‚   â”œâ”€â”€ footer.css          # å¯¹å¤–é¡µè„š
â”‚   â””â”€â”€ ...                 # å…¶ä»–å¯¹å¤–é¡µé¢æ ·å¼
â”‚
â””â”€â”€ å†…éƒ¨ç³»ç»Ÿ
    â”œâ”€â”€ internal-system.css      # å†…éƒ¨ç³»ç»ŸåŸºç¡€æ ·å¼
    â”œâ”€â”€ internal-components.css  # ç»Ÿä¸€ç»„ä»¶åº“ï¼ˆæ ¸å¿ƒï¼‰
    â”œâ”€â”€ tasks-page.css           # ä»»åŠ¡é¡µé¢ç‰¹å®šæ ·å¼
    â”œâ”€â”€ settings-page.css        # è®¾å®šé¡µé¢ç‰¹å®šæ ·å¼
    â”œâ”€â”€ knowledge-page.css       # çŸ¥è¯†åº“é¡µé¢ç‰¹å®šæ ·å¼
    â””â”€â”€ [å…¶ä»–é¡µé¢].css           # æŒ‰éœ€æ·»åŠ 
```

### å¼•å…¥é¡ºåº

æ‰€æœ‰å†…éƒ¨ç³»ç»Ÿé¡µé¢åº”æŒ‰ä»¥ä¸‹é¡ºåºå¼•å…¥CSSï¼š

```html
<link rel="stylesheet" href="assets/css/internal-system.css">
<link rel="stylesheet" href="assets/css/internal-components.css">
<link rel="stylesheet" href="assets/css/[é¡µé¢ç‰¹å®š].css">
```

---

## ğŸ¯ CSSå˜é‡ç³»ç»Ÿ

### ä¸»è‰²ç³»
```css
--primary-color: #2c5f7c;      /* ä¸»è‰² */
--primary-hover: #1e4258;      /* ä¸»è‰²æ‚¬åœ */
--primary-light: #4a7fa0;      /* ä¸»è‰²æµ…è‰² */
```

### åŠŸèƒ½è‰²
```css
--success-color: #4caf50;      /* æˆåŠŸ */
--danger-color: #f44336;       /* å±é™© */
--warning-color: #ff9800;      /* è­¦å‘Š */
--info-color: #2196F3;         /* ä¿¡æ¯ */
```

### æ–‡å­—è‰²
```css
--text-primary: #333;          /* ä¸»æ–‡å­— */
--text-secondary: #666;        /* æ¬¡è¦æ–‡å­— */
--text-light: #999;            /* æµ…è‰²æ–‡å­— */
```

### èƒŒæ™¯è‰²
```css
--light-bg: #f5f5f5;           /* æµ…è‰²èƒŒæ™¯ */
--bg-white: #ffffff;           /* ç™½è‰²èƒŒæ™¯ */
--bg-card: #ffffff;            /* å¡ç‰‡èƒŒæ™¯ */
```

### è¾¹æ¡†å’Œåˆ†éš”
```css
--border-color: #ddd;          /* è¾¹æ¡†é¢œè‰² */
--border-light: #eee;          /* æµ…è‰²è¾¹æ¡† */
```

### é˜´å½±
```css
--shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
--shadow-md: 0 2px 8px rgba(0,0,0,0.08);
--shadow-lg: 0 4px 16px rgba(0,0,0,0.12);
```

### åœ†è§’
```css
--radius-sm: 4px;              /* å°åœ†è§’ */
--radius-md: 8px;              /* ä¸­åœ†è§’ */
--radius-lg: 12px;             /* å¤§åœ†è§’ */
```

### è¿‡æ¸¡
```css
--transition-fast: all 0.2s ease;
--transition-standard: all 0.3s ease;
```

---

## ğŸ§© ç»„ä»¶åº“

### 1. æ ‡ç­¾é¡µç»„ä»¶ (Tabs)

**HTMLç»“æ„**:
```html
<div class="tabs-container">
    <div class="tab-nav">
        <button class="tab-button active">æ ‡ç­¾1</button>
        <button class="tab-button">æ ‡ç­¾2</button>
    </div>
    
    <div class="tab-content active">å†…å®¹1</div>
    <div class="tab-content">å†…å®¹2</div>

</div>
```

**CSSç±»**:
- `.tabs-container` - å®¹å™¨
- `.tab-nav` - æ ‡ç­¾å¯¼èˆª
- `.tab-button` - æ ‡ç­¾æŒ‰é’®
- `.tab-button.active` - æ¿€æ´»çŠ¶æ€
- `.tab-content` - å†…å®¹åŒºåŸŸ
- `.tab-content.active` - æ˜¾ç¤ºå†…å®¹

#### Tabs JS è¡Œä¸ºè§„èŒƒ
- ä½¿ç”¨ `data-tab` å±æ€§æ ‡è¯†æŒ‰é’®ç›®æ ‡ï¼Œä¾‹å¦‚ï¼š`<button class="tab-button" data-tab="work-analysis">`ã€‚
- å¯¹åº”å†…å®¹å®¹å™¨é‡‡ç”¨ `id="<tab-name>-tab"`ï¼Œä¾‹å¦‚ï¼š`id="work-analysis-tab"`ã€‚
- åˆ‡æ¢é€»è¾‘ï¼šç‚¹å‡» `.tab-button` æ—¶ï¼Œä¸ºå½“å‰æŒ‰é’®æ·»åŠ  `.active`ï¼Œç§»é™¤å…¶ä»–æŒ‰é’®çš„ `.active`ï¼›åŒæ—¶ä¸ºå¯¹åº” `.tab-content` æ·»åŠ  `.active`ï¼Œç§»é™¤å…¶ä»–å†…å®¹çš„ `.active`ã€‚
- ç¦æ­¢åœ¨ HTML å†™è¡Œå†…è„šæœ¬åˆ‡æ¢æ ‡ç­¾ï¼›ç»Ÿä¸€ç”±é¡µé¢è„šæœ¬ï¼ˆä¾‹å¦‚ `assets/js/reports.js`ï¼‰åˆå§‹åŒ–å¹¶æ§åˆ¶ã€‚

```js
function initTabs() {
  document.querySelectorAll('.tab-button').forEach(button => {
    button.addEventListener('click', () => {
      const tabName = button.dataset.tab;
      document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
      button.classList.add('active');
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.getElementById(`${tabName}-tab`).classList.add('active');
    });
  });
}
```

### 2. å·¥å…·æ ç»„ä»¶ (Toolbar)

**HTMLç»“æ„**:
```html
<div class="toolbar">
    <div class="toolbar-left">
        <button class="btn btn-primary">+ æ–°å¢</button>
    </div>
    <div class="toolbar-right">
        <div class="search-box">
            <input type="text" placeholder="æœç´¢...">
            <span class="search-icon">ğŸ”</span>
        </div>
    </div>
</div>
```

### 3. è¡¨æ ¼ç»„ä»¶ (Table)

**HTMLç»“æ„**:
```html
<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>åˆ—1</th>
                <th>åˆ—2</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>æ•°æ®1</td>
                <td>æ•°æ®2</td>
                <td>
                    <div class="table-actions">
                        <button class="btn-edit">ç¼–è¾‘</button>
                        <button class="btn-delete">åˆ é™¤</button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
```

### 4. å¡ç‰‡ç»„ä»¶ (Card)

**HTMLç»“æ„**:
```html
<div class="card">
    <div class="card-header">
        <h3>å¡ç‰‡æ ‡é¢˜</h3>
    </div>
    <div class="card-body">
        å¡ç‰‡å†…å®¹
    </div>
    <div class="card-footer">
        <button class="btn btn-primary">ç¡®å®š</button>
    </div>
</div>
```

### 5. è¡¨å•ç»„ä»¶ (Form)

**HTMLç»“æ„**:
```html
<div class="form-group">
    <label class="required">å­—æ®µåç§°</label>
    <input type="text" class="form-control">
    <small>å¸®åŠ©æ–‡æœ¬</small>
</div>
```

### 6. æŒ‰é’®ç»„ä»¶ (Button)

**CSSç±»**:
- `.btn` - åŸºç¡€æŒ‰é’®
- `.btn-primary` - ä¸»æŒ‰é’®
- `.btn-success` - æˆåŠŸæŒ‰é’®
- `.btn-danger` - å±é™©æŒ‰é’®
- `.btn-secondary` - æ¬¡è¦æŒ‰é’®
- `.btn-outline` - è¾¹æ¡†æŒ‰é’®
- `.btn-sm` - å°æŒ‰é’®
- `.btn-lg` - å¤§æŒ‰é’®

### 7. çŠ¶æ€å¾½ç«  (Badge)

**CSSç±»**:
- `.badge` - åŸºç¡€å¾½ç« 
- `.badge-pending` - å¾…å¤„ç†
- `.badge-in-progress` - è¿›è¡Œä¸­
- `.badge-completed` - å·²å®Œæˆ
- `.badge-cancelled` - å·²å–æ¶ˆ

### 8. æ¨¡æ€æ¡†ç»„ä»¶ (Modal)

**HTMLç»“æ„**:
```html
<div class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h3>æ ‡é¢˜</h3>
            <button class="modal-close">Ã—</button>
        </div>
        <div class="modal-body">
            å†…å®¹
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary">å–æ¶ˆ</button>
            <button class="btn btn-primary">ç¡®å®š</button>
        </div>
    </div>
</div>
```

---

## ğŸ“ å¸ƒå±€è§„èŒƒ

### é˜²æ­¢å¤šé‡æ»šåŠ¨æ¡

**æ ¸å¿ƒåŸåˆ™**: åªåœ¨ä¸»å®¹å™¨ä¸Šè®¾ç½® `overflow-y: auto`

```css
/* æ­£ç¡®çš„åšæ³• */
body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

.internal-main {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    height: calc(100vh - 60px); /* 60pxæ˜¯å¯¼èˆªæ é«˜åº¦ */
}

.internal-container {
    max-width: 1600px;
    margin: 0 auto;
    /* ä¸è¦è®¾ç½® overflow */
}

.tab-content {
    padding: 20px;
    /* ä¸è¦è®¾ç½® overflow å’Œ max-height */
}
```

### å“åº”å¼æ–­ç‚¹

```css
/* å¹³æ¿ */
@media (max-width: 768px) {
    /* è°ƒæ•´å¸ƒå±€ */
}

/* æ‰‹æœº */
@media (max-width: 480px) {
    /* è¿›ä¸€æ­¥ç®€åŒ– */
}
```

---

## ğŸ“ å‘½åè§„èŒƒ

### CSSç±»å‘½å

**BEMé£æ ¼**ï¼ˆæ¨èï¼‰:
```css
.block {}
.block__element {}
.block--modifier {}
```

**å®ä¾‹**:
```css
.task-card {}
.task-card__header {}
.task-card__title {}
.task-card--urgent {}
```

### é€šç”¨å‰ç¼€

- `.internal-` - å†…éƒ¨ç³»ç»Ÿä¸“ç”¨
- `.btn-` - æŒ‰é’®ç›¸å…³
- `.badge-` - å¾½ç« ç›¸å…³
- `.status-` - çŠ¶æ€ç›¸å…³
- `.modal-` - æ¨¡æ€æ¡†ç›¸å…³

---

## ğŸš« ç¦æ­¢äº‹é¡¹

1. âŒ **ç¦æ­¢å†…åµŒæ ·å¼**: ä¸è¦ä½¿ç”¨ `<style>` æ ‡ç­¾åœ¨HTMLä¸­å†™CSS
2. âŒ **ç¦æ­¢è¡Œå†…æ ·å¼**: é¿å…ä½¿ç”¨ `style="..."` å±æ€§
3. âŒ **ç¦æ­¢!important**: é™¤éç»å¯¹å¿…è¦
4. âŒ **ç¦æ­¢å¤šé‡æ»šåŠ¨æ¡**: ä¸è¦åœ¨åµŒå¥—å®¹å™¨ä¸Šéƒ½è®¾ç½®overflow
5. âŒ **ç¦æ­¢ç¡¬ç¼–ç é¢œè‰²**: ä½¿ç”¨CSSå˜é‡
6. âŒ **ç¦æ­¢é­”æ³•æ•°å­—**: ä½¿ç”¨å˜é‡æˆ–æ³¨é‡Šè¯´æ˜

---

## âœ… æœ€ä½³å®è·µ

1. âœ… **ä½¿ç”¨CSSå˜é‡**: ä¿æŒæ ·å¼ä¸€è‡´æ€§
2. âœ… **ç»„ä»¶åŒ–æ€ç»´**: å¤ç”¨ç»„ä»¶åº“çš„ç±»
3. âœ… **ç§»åŠ¨ä¼˜å…ˆ**: å…ˆè®¾è®¡æ‰‹æœºç‰ˆï¼Œå†å¢å¼ºæ¡Œé¢ç‰ˆ
4. âœ… **è¯­ä¹‰åŒ–HTML**: ä½¿ç”¨æ­£ç¡®çš„æ ‡ç­¾
5. âœ… **æ¸è¿›å¢å¼º**: åŸºç¡€åŠŸèƒ½å…ˆå®ç°ï¼Œå†æ·»åŠ é«˜çº§ç‰¹æ€§
6. âœ… **æ€§èƒ½ä¼˜åŒ–**: å‡å°‘é‡ç»˜å’Œé‡æ’
7. âœ… **å¯è®¿é—®æ€§**: ä½¿ç”¨ARIAæ ‡ç­¾ï¼Œç¡®ä¿é”®ç›˜å¯¼èˆª

---

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### åˆ›å»ºæ–°é¡µé¢

1. **HTMLç»“æ„**: ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾
2. **å¼•å…¥CSS**: æŒ‰æ ‡å‡†é¡ºåºå¼•å…¥
3. **ä½¿ç”¨ç»„ä»¶**: ä¼˜å…ˆä½¿ç”¨ç»„ä»¶åº“çš„ç±»
4. **ç‰¹å®šæ ·å¼**: ä»…åœ¨å¿…è¦æ—¶åˆ›å»ºé¡µé¢ç‰¹å®šCSS
5. **æµ‹è¯•**: åœ¨ä¸åŒå±å¹•å°ºå¯¸æµ‹è¯•

### ä¿®æ”¹ç°æœ‰é¡µé¢

1. **æ£€æŸ¥è®¾è®¡æ–‡æ¡£**: äº†è§£ç°æœ‰æ¶æ„
2. **ç§»é™¤å†…åµŒæ ·å¼**: æå–åˆ°CSSæ–‡ä»¶
3. **åº”ç”¨ç»„ä»¶ç±»**: æ›¿æ¢ä¸ºç»„ä»¶åº“çš„ç±»
4. **æµ‹è¯•**: ç¡®ä¿åŠŸèƒ½æ­£å¸¸

---

## ğŸ“Š å·²é‡æ„é¡µé¢

| é¡µé¢ | çŠ¶æ€ | ç§»é™¤çš„å†…åµŒæ ·å¼è¡Œæ•° |
|------|------|-------------------|
| tasks.html | âœ… å®Œæˆ | ~270è¡Œ |
| settings.html | âœ… å®Œæˆ | ~250è¡Œ |
| knowledge.html | âœ… å®Œæˆ | ~210è¡Œ |
| timesheet.html | âœ… å®Œæˆ | - |
| reports.html | âœ… å®Œæˆ | - |
| content-editor.html | â³ å¾…å¤„ç† | - |
| dashboard.html | â³ å¾…å¤„ç† | - |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„è®¾è®¡.md](./ç³»ç»Ÿæ¶æ„è®¾è®¡.md) - æ•´ä½“ç³»ç»Ÿæ¶æ„
- [å¼€å‘ä¸éƒ¨ç½²æŒ‡å—.md](./å¼€å‘ä¸éƒ¨ç½²æŒ‡å—.md) - å¼€å‘è§„èŒƒ
- [APIç«¯ç‚¹æ–‡æ¡£.md](./APIç«¯ç‚¹æ–‡æª”.md) - APIå‚è€ƒ

---

**è®°ä½**: ä¸€è‡´æ€§æ¯”å®Œç¾æ›´é‡è¦ã€‚éµå¾ªè¿™äº›è§„èŒƒå¯ä»¥è®©å›¢é˜Ÿåä½œæ›´é¡ºç•…ï¼

## å…¨å±€è®Šæ•¸èˆ‡è…³æœ¬è¼‰å…¥é †åºï¼ˆèªè­‰æ¨¡çµ„ï¼‰
- ä½¿ç”¨ `auth-common.js` æä¾›çš„å…¨å±€è®Šæ•¸ï¼š
  - `window.sessionToken`ï¼šç”± `checkAuth()` è¨­å®šä¸¦æš´éœ²åˆ°å…¨å±€
  - `window.currentUser`ï¼šç”± `checkAuth()` è¨­å®šä¸¦æš´éœ²åˆ°å…¨å±€
- å‰ç«¯é é¢ä¸å¾—å†æ¬¡ä»¥ `let currentUser`ã€`let sessionToken` åœ¨å…¨å±€ï¼ˆéå‡½å¼æˆ– IIFE å…§ï¼‰é‡æ–°å®£å‘Šï¼Œé¿å…ç€è¦½å™¨å ±éŒ¯ã€ŒIdentifier has already been declaredã€ã€‚
- å»ºè­°è…³æœ¬è¼‰å…¥é †åºï¼ˆæ–¼ `<body>` çµå°¾ï¼‰ï¼š
  1) `assets/js/config.js`
  2) `assets/js/common-utils.js`
  3) `assets/js/auth-common.js`
  4) `assets/js/error-handler.js`
  5) é é¢å°ˆå±¬è…³æœ¬ï¼ˆå¦‚ `dashboard.js`, `reports.js`, `settings.js`, `unified-tasks.js`ï¼‰
- æ–¼é é¢å°ˆå±¬è…³æœ¬å…§ï¼Œç›´æ¥ä½¿ç”¨ `currentUser` èˆ‡ `sessionToken`ï¼ˆç”± `initPage()` â†’ `checkAuth()` è¨­å®šï¼‰ï¼Œå‹¿é‡æ–°å®£å‘Šã€‚å¿…è¦æ™‚å¯åœ¨å‡½å¼å…§ä½¿ç”¨å€åŸŸåˆ¥åï¼Œä¾‹å¦‚ï¼š
  ```javascript
  const user = currentUser; // ç”± auth-common.js è¨­å®šä¸¦æš´éœ²åˆ° window
  ```

### èªè­‰å¿«å–æ©Ÿåˆ¶ï¼ˆ2025-10-26ï¼‰
- `checkAuth()` åœ¨é©—è­‰æˆåŠŸæ™‚æœƒå°‡ç”¨æˆ¶è³‡æ–™ä¿å­˜åˆ° `localStorage.user_info`
- ç•¶é‡åˆ°ä»¥ä¸‹æƒ…æ³æ™‚ï¼Œæœƒå˜—è©¦ä½¿ç”¨å¿«å–çš„ç”¨æˆ¶è³‡æ–™ä»¥ä¿æŒä½¿ç”¨è€…é«”é©—ï¼š
  - å¾Œç«¯è¿”å› 500 ç­‰è‡¨æ™‚éŒ¯èª¤
  - ç¶²çµ¡é€£æ¥å¤±æ•—
- åªæœ‰åœ¨é‡åˆ° 401 æœªæˆæ¬ŠéŒ¯èª¤æ™‚ï¼Œæ‰æœƒæ¸…é™¤ token ä¸¦å¼·åˆ¶è·³è½‰åˆ°ç™»å…¥é 
- æ­¤æ©Ÿåˆ¶å¯é˜²æ­¢å› å¾Œç«¯è‡¨æ™‚æ•…éšœæˆ–ç¶²çµ¡æ³¢å‹•å°è‡´å·²ç™»å…¥ç”¨æˆ¶è¢«å¼·åˆ¶ç™»å‡º

### é é¢åˆå§‹åŒ–èˆ‡ currentUser å¯ç”¨æ€§ï¼ˆ2025-10-26ï¼‰
- æ‰€æœ‰å…§éƒ¨é é¢å¿…é ˆä½¿ç”¨ `initPage(callback)` åŒ…è£¹åˆå§‹åŒ–é‚è¼¯
- `initPage` æœƒå…ˆåŸ·è¡Œ `checkAuth()`ï¼ŒæˆåŠŸå¾Œæ‰åŸ·è¡Œ `callback`
- åœ¨ `callback` åŸ·è¡Œæ™‚ï¼Œ`window.currentUser` å’Œ `window.sessionToken` å·²ç¶“è¨­å®šå®Œæˆ
- è‹¥é é¢è…³æœ¬éœ€è¦åœ¨ callback å¤–è¨ªå• `currentUser`ï¼Œæ‡‰å¯¦ä½œé‡è©¦æ©Ÿåˆ¶ï¼š
  ```javascript
  let retries = 0;
  while (!window.currentUser && retries < 50) {
    await new Promise(resolve => setTimeout(resolve, 100));
    retries++;
  }
  ```
- æ­¤æ©Ÿåˆ¶ç¢ºä¿å³ä½¿ `checkAuth` è¼ƒæ…¢æˆ–ä½¿ç”¨å¿«å–è³‡æ–™ï¼Œé é¢ä¹Ÿèƒ½æ­£ç¢ºå–å¾—ç”¨æˆ¶è³‡è¨Š

