# è–ªè³‡ç®¡ç† - å®Œæ•´è¦æ ¼

**æ¨¡çµ„åç¨±ï¼š** è–ªè³‡ç®¡ç†ç³»çµ±  
**ç‰ˆæœ¬ï¼š** 3.2  
**æ›´æ–°æ—¥æœŸï¼š** 2025-10-28  
**é©ç”¨å°è±¡ï¼š** æœˆè–ªåˆ¶å“¡å·¥

---

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½

1. **éˆæ´»è–ªè³‡çµæ§‹**
   - å¯è‡ªç”±æ–°å¢/ä¿®æ”¹è–ªè³‡é …ç›®ï¼ˆå…¨å‹¤ã€æ´¥è²¼ã€åŠ çµ¦ç­‰ï¼‰
   - æ¯ä½å“¡å·¥å¯è¨­å®šä¸åŒçš„è–ªè³‡é …ç›®çµ„åˆ
   
2. **æœˆè–ªåˆ¶è¨ˆç®—**
   - ç¬¦åˆå°ç£å‹åŸºæ³•ï¼ˆæœˆè–ª Ã· 240å°æ™‚ = æ™‚è–ªåŸºæº–ï¼‰
   - è‡ªå‹•è¨ˆç®—åŠ ç­è²»ï¼ˆå¹³æ—¥/ä¼‘æ¯æ—¥/åœ‹å®šå‡æ—¥ä¸åŒå€ç‡ï¼‰
   
3. **å…¨å‹¤æ©Ÿåˆ¶**
   - è£œä¼‘ä¸å½±éŸ¿å…¨å‹¤
   - ç—…å‡/äº‹å‡æ‰£é™¤å…¨å‹¤
   
4. **è–ªè³‡å ±è¡¨**
   - æœˆåº¦è–ªè³‡æ˜ç´°
   - åŠ ç­è²»çµ±è¨ˆ
   - æˆæœ¬åˆ†æ

---

## ğŸ’¾ è³‡æ–™è¡¨è¨­è¨ˆ

### 1. Users è¡¨æ“´å……

```sql
-- æ–°å¢åŸºæœ¬è–ªè³‡è³‡è¨Šåˆ° Users è¡¨
ALTER TABLE Users ADD COLUMN base_salary REAL NOT NULL DEFAULT 0;  -- åº•è–ªï¼ˆæœˆè–ªï¼‰
ALTER TABLE Users ADD COLUMN join_date TEXT;  -- åˆ°è·æ—¥æœŸ
ALTER TABLE Users ADD COLUMN comp_hours_current_month REAL DEFAULT 0;  -- æœ¬æœˆè£œä¼‘æ™‚æ•¸
```

**èªªæ˜ï¼š**
- `base_salary`ï¼šæœˆè–ªåº•è–ªï¼ˆå¦‚ï¼š35,000å…ƒï¼‰
- `join_date`ï¼šç”¨æ–¼è¨ˆç®—å¹´è³‡ã€ç‰¹ä¼‘
- å…¶ä»–è–ªè³‡é …ç›®ï¼ˆå…¨å‹¤ã€æ´¥è²¼ï¼‰ä½¿ç”¨éˆæ´»é…ç½®ç³»çµ±

### 2. SalaryItemTypesï¼ˆè–ªè³‡é …ç›®é¡å‹ï¼‰â­

**è¨­è¨ˆç†ç”±ï¼š** æ¯å®¶å…¬å¸çš„è–ªè³‡é …ç›®ä¸åŒï¼Œéœ€è¦èƒ½è‡ªç”±æ–°å¢/ä¿®æ”¹é …ç›®

```sql
CREATE TABLE SalaryItemTypes (
  item_type_id INTEGER PRIMARY KEY AUTOINCREMENT,
  item_code TEXT UNIQUE NOT NULL,  -- é …ç›®ä»£ç¢¼ï¼ˆå¦‚ï¼šATTENDANCE_BONUSï¼‰
  item_name TEXT NOT NULL,  -- é …ç›®åç¨±ï¼ˆå¦‚ï¼šå…¨å‹¤çé‡‘ï¼‰
  category TEXT NOT NULL,  -- é¡åˆ¥ï¼š'allowance'ï¼ˆæ´¥è²¼ï¼‰, 'bonus'ï¼ˆçé‡‘ï¼‰, 'deduction'ï¼ˆæ‰£æ¬¾ï¼‰
  is_taxable BOOLEAN DEFAULT 1,  -- æ˜¯å¦è¨ˆå…¥èª²ç¨…
  is_fixed BOOLEAN DEFAULT 1,  -- é‡‘é¡æ˜¯å¦å›ºå®šï¼ˆ1=æ¯æœˆåŒé‡‘é¡ï¼Œ0=é‡‘é¡æœƒè®Šå‹•ï¼‰
  is_regular_payment BOOLEAN DEFAULT 1,  -- â­ æ˜¯å¦ç‚ºç¶“å¸¸æ€§çµ¦èˆ‡ï¼ˆ1=æ¯æœˆç™¼æ”¾ï¼Œ0=å¶çˆ¾ç™¼æ”¾å¦‚å¹´çµ‚ï¼‰
  affects_labor_insurance BOOLEAN DEFAULT 1,  -- æ˜¯å¦å½±éŸ¿å‹å¥ä¿
  affects_attendance BOOLEAN DEFAULT 0,  -- æ˜¯å¦å½±éŸ¿å…¨å‹¤åˆ¤å®š
  calculation_formula TEXT,  -- è¨ˆç®—å…¬å¼ï¼ˆè®Šå‹•é …ç›®ç”¨ï¼‰
  display_order INTEGER DEFAULT 0,  -- é¡¯ç¤ºé †åº
  is_active BOOLEAN DEFAULT 1,  -- æ˜¯å¦å•Ÿç”¨
  created_at TEXT DEFAULT (datetime('now')),
  
  CHECK (category IN ('allowance', 'bonus', 'deduction'))
);

CREATE INDEX idx_salary_item_types_active ON SalaryItemTypes(is_active);
CREATE INDEX idx_salary_item_types_order ON SalaryItemTypes(display_order);
CREATE INDEX idx_salary_item_types_regular ON SalaryItemTypes(is_regular_payment);

-- é è¨­é …ç›®ç¯„ä¾‹
INSERT INTO SalaryItemTypes (item_code, item_name, category, is_taxable, is_fixed, is_regular_payment) VALUES
('ATTENDANCE_BONUS', 'å…¨å‹¤çé‡‘', 'bonus', 1, 1, 1),        -- å›ºå®šé‡‘é¡ï¼Œè¨ˆå…¥æ™‚è–ª
('TRANSPORT', 'äº¤é€šæ´¥è²¼', 'allowance', 0, 1, 1),           -- å›ºå®šé‡‘é¡ï¼Œè¨ˆå…¥æ™‚è–ª
('MEAL', 'ä¼™é£Ÿæ´¥è²¼', 'allowance', 0, 1, 1),                -- å›ºå®šé‡‘é¡ï¼Œè¨ˆå…¥æ™‚è–ª
('POSITION', 'è·å‹™åŠ çµ¦', 'allowance', 1, 1, 1),            -- å›ºå®šé‡‘é¡ï¼Œè¨ˆå…¥æ™‚è–ª
('PHONE', 'é›»è©±æ´¥è²¼', 'allowance', 0, 1, 1),               -- å›ºå®šé‡‘é¡ï¼Œè¨ˆå…¥æ™‚è–ª
('PARKING', 'åœè»Šæ´¥è²¼', 'allowance', 0, 1, 1),             -- å›ºå®šé‡‘é¡ï¼Œè¨ˆå…¥æ™‚è–ª
('PERFORMANCE', 'ç¸¾æ•ˆçé‡‘', 'bonus', 1, 0, 1),             -- â­ é‡‘é¡æµ®å‹•ï¼Œä½†è¨ˆå…¥æ™‚è–ªï¼ˆå½±éŸ¿æˆæœ¬åˆ†æï¼‰
('YEAR_END', 'å¹´çµ‚çé‡‘', 'bonus', 1, 0, 0);                -- é‡‘é¡æµ®å‹•ï¼Œä¸è¨ˆå…¥æ™‚è–ªï¼ˆå¹´åº•ä¸€æ¬¡ï¼‰

/**
 * âš ï¸ ç¸¾æ•ˆçé‡‘è¨­è¨ˆèªªæ˜ï¼ˆis_regular_payment = 1ï¼Œé‡‘é¡æµ®å‹•ï¼‰ï¼š
 * 
 * ç‚ºä»€éº¼è¨ˆå…¥æ™‚è–ªï¼Ÿ
 * - ç¸¾æ•ˆçé‡‘æ˜¯æ¯æœˆç™¼æ”¾çš„çé‡‘ï¼Œå±¬æ–¼ã€Œç¶“å¸¸æ€§çµ¦èˆ‡ã€
 * - å½±éŸ¿çœŸå¯¦çš„äººåŠ›æˆæœ¬ï¼ˆå®¢æˆ¶æˆæœ¬åˆ†æéœ€è¦æº–ç¢ºåæ˜ ï¼‰
 * - é›–ç„¶é‡‘é¡æ¯æœˆä¸åŒï¼Œä½†æ‡‰è¨ˆå…¥æ™‚è–ªä»¥åæ˜ çœŸå¯¦æˆæœ¬
 * 
 * å¦‚ä½•è™•ç†é‡‘é¡æµ®å‹•ï¼Ÿ
 * - ç®¡ç†å“¡æ¯æœˆå¯æ›´æ–° EmployeeSalaryItems è¡¨ä¸­çš„ amount
 * - æ›´æ–°å¾Œï¼Œè©²æœˆçš„æ™‚è–ªæœƒè‡ªå‹•é‡æ–°è¨ˆç®—
 * - å®¢æˆ¶æˆæœ¬åˆ†ææœƒä½¿ç”¨ã€Œè©²æœˆå¯¦éš›çš„æ™‚è–ªæˆæœ¬ç‡ã€
 * 
 * å‰ç«¯æ“ä½œæµç¨‹ï¼š
 * 1. å“¡å·¥è–ªè³‡è¨­å®šé é¢ï¼šè¨­å®šç¸¾æ•ˆçé‡‘é è¨­å€¼ï¼ˆå¦‚ï¼š2000å…ƒï¼‰
 * 2. æ¯æœˆåˆï¼ˆæˆ–æœˆåº•ï¼‰ï¼šç®¡ç†å“¡æ‰¹æ¬¡æ›´æ–°ç¸¾æ•ˆçé‡‘é‡‘é¡
 * 3. ç³»çµ±ä½¿ç”¨æ›´æ–°å¾Œçš„é‡‘é¡è¨ˆç®—è©²æœˆæ™‚è–ª
 * 4. å®¢æˆ¶æˆæœ¬åˆ†æåæ˜ çœŸå¯¦äººåŠ›æˆæœ¬
 */
```

**æ¬„ä½èªªæ˜ï¼š**
```
is_fixedï¼ˆé‡‘é¡å›ºå®šæ€§ï¼‰ï¼š
  1 = æ¯æœˆé‡‘é¡ç›¸åŒï¼ˆå¦‚ï¼šäº¤é€šæ´¥è²¼ 1,000å…ƒï¼‰
  0 = æ¯æœˆé‡‘é¡æœƒè®Šï¼ˆå¦‚ï¼šç¸¾æ•ˆçé‡‘ 2,000~5,000å…ƒæµ®å‹•ï¼‰

is_regular_paymentï¼ˆç¶“å¸¸æ€§çµ¦èˆ‡ï¼‰ï¼šâ­ å½±éŸ¿æ™‚è–ªè¨ˆç®—
  1 = æ¯æœˆéƒ½ç™¼æ”¾ â†’ è¨ˆå…¥æ™‚è–ªåŸºæº–ï¼ˆå‹åŸºæ³•è¦æ±‚ï¼‰
  0 = å¶çˆ¾ç™¼æ”¾ï¼ˆå¦‚ï¼šå¹´çµ‚çé‡‘ã€ä¸‰ç¯€çé‡‘ï¼‰â†’ ä¸è¨ˆå…¥æ™‚è–ª

ç¯„ä¾‹ï¼š
- ç¸¾æ•ˆçé‡‘ï¼šis_fixed=0, is_regular_payment=1 
  â†’ é›–ç„¶é‡‘é¡æµ®å‹•ï¼Œä½†æ¯æœˆéƒ½ç™¼ï¼Œæ‰€ä»¥è¦è¨ˆå…¥æ™‚è–ª
  
- å¹´çµ‚çé‡‘ï¼šis_fixed=0, is_regular_payment=0
  â†’ é‡‘é¡æµ®å‹•ï¼Œä¸”åªåœ¨å¹´åº•ç™¼ï¼Œä¸è¨ˆå…¥æ™‚è–ª
```

### 3. EmployeeSalaryItemsï¼ˆå“¡å·¥è–ªè³‡é …ç›®ï¼‰

```sql
CREATE TABLE EmployeeSalaryItems (
  employee_item_id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  item_type_id INTEGER NOT NULL,
  amount REAL NOT NULL,  -- é‡‘é¡
  effective_date TEXT NOT NULL,  -- ç”Ÿæ•ˆæ—¥æœŸï¼ˆYYYY-MM-01ï¼‰
  expiry_date TEXT,  -- å¤±æ•ˆæ—¥æœŸï¼ˆYYYY-MM-æœ«æ—¥ï¼Œnull=æ°¸ä¹…æœ‰æ•ˆï¼‰
  notes TEXT,
  is_active BOOLEAN DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  
  FOREIGN KEY (user_id) REFERENCES Users(user_id),
  FOREIGN KEY (item_type_id) REFERENCES SalaryItemTypes(item_type_id)
);

CREATE INDEX idx_employee_salary_items_user ON EmployeeSalaryItems(user_id);
CREATE INDEX idx_employee_salary_items_active ON EmployeeSalaryItems(is_active);
CREATE INDEX idx_employee_salary_items_date ON EmployeeSalaryItems(effective_date, expiry_date);  -- â­ æœˆä»½æŸ¥è©¢å°ˆç”¨

/**
 * âš ï¸ æœˆåº¦ç¨ç«‹èª¿æ•´è¨­è¨ˆï¼ˆç¸¾æ•ˆçé‡‘ç­‰æµ®å‹•é …ç›®ï¼‰ï¼š
 * 
 * è¨­è¨ˆç†å¿µï¼š
 * - èª¿æ•´åªå½±éŸ¿æŒ‡å®šæœˆä»½ï¼Œä¸å½±éŸ¿å…¶ä»–æœˆä»½
 * - æ¯æœˆå¯ä»¥æœ‰ä¸åŒçš„é‡‘é¡
 * - æœªèª¿æ•´çš„æœˆä»½ä½¿ç”¨ã€Œæ°¸ä¹…æœ‰æ•ˆã€çš„é è¨­å€¼
 * 
 * è³‡æ–™ç¯„ä¾‹ï¼š
 * 
 * å“¡å·¥Açš„ç¸¾æ•ˆçé‡‘è¨­å®šï¼š
 * 1. employee_item_id=1, amount=2000, effective_date='2025-01-01', expiry_date=NULL
 *    â†’ é è¨­å€¼ï¼šå¾2025-01-01èµ·æ°¸ä¹…æœ‰æ•ˆï¼Œé‡‘é¡2000å…ƒ
 * 
 * 2. employee_item_id=5, amount=3500, effective_date='2025-11-01', expiry_date='2025-11-30'
 *    â†’ 11æœˆèª¿æ•´ï¼šåƒ…11æœˆç”¨3500å…ƒ
 * 
 * 3. employee_item_id=8, amount=4000, effective_date='2025-12-01', expiry_date='2025-12-31'
 *    â†’ 12æœˆèª¿æ•´ï¼šåƒ…12æœˆç”¨4000å…ƒ
 * 
 * æŸ¥è©¢é‚è¼¯ï¼š
 * - æŸ¥è©¢11æœˆè–ªè³‡æ™‚ï¼šæ‰¾åˆ° employee_item_id=5ï¼ˆ3500å…ƒï¼‰â†’ å„ªå…ˆä½¿ç”¨
 * - æŸ¥è©¢10æœˆè–ªè³‡æ™‚ï¼šæ‰¾åˆ° employee_item_id=1ï¼ˆ2000å…ƒï¼‰â†’ ä½¿ç”¨é è¨­å€¼
 * - æŸ¥è©¢12æœˆè–ªè³‡æ™‚ï¼šæ‰¾åˆ° employee_item_id=8ï¼ˆ4000å…ƒï¼‰â†’ ä½¿ç”¨12æœˆå°ˆå±¬å€¼
 * 
 * å„ªå…ˆé †åºï¼š
 * 1. æœˆä»½å°ˆå±¬è¨­å®šï¼ˆæœ‰ expiry_date çš„ï¼‰
 * 2. é è¨­å€¼ï¼ˆexpiry_date = NULL çš„ï¼‰
 */

-- å“¡å·¥è–ªè³‡é …ç›®ç¯„ä¾‹
-- å“¡å·¥Aï¼šå…¨å‹¤2000ã€äº¤é€š1000ã€ä¼™é£Ÿ1800
INSERT INTO EmployeeSalaryItems (user_id, item_type_id, amount, effective_date) VALUES
(1, 1, 2000, '2025-01-01'),  -- å…¨å‹¤çé‡‘
(1, 2, 1000, '2025-01-01'),  -- äº¤é€šæ´¥è²¼
(1, 3, 1800, '2025-01-01');  -- ä¼™é£Ÿæ´¥è²¼
```

### 4. MonthlyPayrollï¼ˆæœˆåº¦è–ªè³‡è¡¨ï¼‰

```sql
CREATE TABLE MonthlyPayroll (
  payroll_id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  year INTEGER NOT NULL,
  month INTEGER NOT NULL,
  
  -- è–ªè³‡çµ„æˆï¼ˆå‹•æ…‹å¾ EmployeeSalaryItems è¨ˆç®—ï¼‰
  base_salary REAL NOT NULL,  -- åº•è–ª
  total_allowances REAL DEFAULT 0,  -- æ´¥è²¼åˆè¨ˆ
  total_bonuses REAL DEFAULT 0,  -- çé‡‘åˆè¨ˆ
  
  -- åŠ ç­è²»ï¼ˆä¾å‹åŸºæ³•è¨ˆç®—ï¼‰
  overtime_weekday_2h REAL DEFAULT 0,  -- å¹³æ—¥åŠ ç­å‰2å°æ™‚è²»ç”¨ï¼ˆ1.34å€ï¼‰
  overtime_weekday_beyond REAL DEFAULT 0,  -- å¹³æ—¥åŠ ç­ç¬¬3å°æ™‚èµ·ï¼ˆ1.67å€ï¼‰
  overtime_restday_2h REAL DEFAULT 0,  -- ä¼‘æ¯æ—¥å‰2å°æ™‚ï¼ˆ1.34å€ï¼‰
  overtime_restday_beyond REAL DEFAULT 0,  -- ä¼‘æ¯æ—¥ç¬¬3å°æ™‚èµ·ï¼ˆ1.67å€ï¼‰
  overtime_holiday REAL DEFAULT 0,  -- åœ‹å®šå‡æ—¥/ä¾‹å‡æ—¥ï¼ˆ2.0å€ï¼‰
  
  -- æ‰£æ¬¾é …ç›®
  total_deductions REAL DEFAULT 0,  -- ç¸½æ‰£æ¬¾
  
  -- çµ±è¨ˆè³‡è¨Š
  total_work_hours REAL DEFAULT 0,  -- ç¸½å·¥æ™‚
  total_overtime_hours REAL DEFAULT 0,  -- åŠ ç­æ™‚æ•¸
  total_weighted_hours REAL DEFAULT 0,  -- åŠ æ¬Šå·¥æ™‚ç¸½è¨ˆ
  has_full_attendance BOOLEAN DEFAULT 1,  -- æ˜¯å¦å…¨å‹¤
  
  -- ç¸½è–ªè³‡
  gross_salary REAL NOT NULL,  -- æ‡‰ç™¼è–ªè³‡ï¼ˆå«æ‰€æœ‰åŠ é …ï¼‰
  net_salary REAL NOT NULL,  -- å¯¦ç™¼è–ªè³‡
  
  -- å‚™è¨»
  notes TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  
  FOREIGN KEY (user_id) REFERENCES Users(user_id),
  UNIQUE(user_id, year, month)  -- æ¯äººæ¯æœˆåªæœ‰ä¸€ç­†è–ªè³‡è¨˜éŒ„
);

CREATE INDEX idx_payroll_user ON MonthlyPayroll(user_id);
CREATE INDEX idx_payroll_date ON MonthlyPayroll(year, month);
```

### 5. OvertimeRecordsï¼ˆåŠ ç­è¨˜éŒ„æ˜ç´°ï¼‰

```sql
CREATE TABLE OvertimeRecords (
  overtime_id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  work_date TEXT NOT NULL,
  overtime_type TEXT NOT NULL,  -- 'weekday_2h', 'weekday_beyond', 'restday_2h', 'restday_beyond', 'holiday'
  hours REAL NOT NULL,
  rate_multiplier REAL NOT NULL,  -- è²»ç‡å€æ•¸ï¼ˆ1.34, 1.67, 2.0ï¼‰
  hourly_base REAL NOT NULL,  -- æ™‚è–ªåŸºæº–ï¼ˆbase_salary / 240ï¼‰
  overtime_pay REAL NOT NULL,  -- åŠ ç­è²»é‡‘é¡
  is_compensatory_leave BOOLEAN DEFAULT 0,  -- æ˜¯å¦é¸æ“‡è£œä¼‘ï¼ˆ1=è£œä¼‘, 0=åŠ ç­è²»ï¼‰
  payroll_id INTEGER,  -- é—œè¯åˆ°è–ªè³‡è¨˜éŒ„
  created_at TEXT DEFAULT (datetime('now')),
  
  FOREIGN KEY (user_id) REFERENCES Users(user_id),
  FOREIGN KEY (payroll_id) REFERENCES MonthlyPayroll(payroll_id)
);

CREATE INDEX idx_overtime_user_date ON OvertimeRecords(user_id, work_date);
CREATE INDEX idx_overtime_payroll ON OvertimeRecords(payroll_id);
```

### 6. YearEndBonusï¼ˆå¹´çµ‚çé‡‘ï¼‰â­ æ–°å¢

**è¨­è¨ˆç†ç”±ï¼š** å¹´çµ‚çé‡‘é€šå¸¸åœ¨æ¬¡å¹´1æœˆç™¼æ”¾ï¼Œä½†æ­¸å±¬ä¸Šä¸€å¹´åº¦ï¼Œéœ€ç¨ç«‹ç®¡ç†

```sql
CREATE TABLE YearEndBonus (
  bonus_id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  attribution_year INTEGER NOT NULL,     -- æ­¸å±¬å¹´åº¦ï¼ˆå¦‚ï¼š2025ï¼‰
  amount REAL NOT NULL,                  -- å¹´çµ‚çé‡‘é‡‘é¡
  payment_year INTEGER,                  -- å¯¦éš›ç™¼æ”¾å¹´åº¦ï¼ˆå¦‚ï¼š2026ï¼‰
  payment_month INTEGER,                 -- å¯¦éš›ç™¼æ”¾æœˆä»½ï¼ˆå¦‚ï¼š1ï¼‰
  payment_date TEXT,                     -- å¯¦éš›ç™¼æ”¾æ—¥æœŸï¼ˆå¦‚ï¼š2026-01-15ï¼‰
  decision_date TEXT,                    -- æ±ºå®šæ—¥æœŸï¼ˆå¦‚ï¼š2025-12-31ï¼‰
  notes TEXT,
  recorded_by INTEGER NOT NULL,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  is_deleted BOOLEAN DEFAULT 0,
  
  FOREIGN KEY (user_id) REFERENCES Users(user_id),
  FOREIGN KEY (recorded_by) REFERENCES Users(user_id),
  UNIQUE(user_id, attribution_year)  -- æ¯äººæ¯å¹´åº¦åªæœ‰ä¸€ç­†å¹´çµ‚
);

CREATE INDEX idx_yearend_user ON YearEndBonus(user_id);
CREATE INDEX idx_yearend_attribution ON YearEndBonus(attribution_year);
CREATE INDEX idx_yearend_payment ON YearEndBonus(payment_year, payment_month);
```

**èªªæ˜ï¼š**
```
ç¯„ä¾‹ï¼š2025å¹´åº¦å¹´çµ‚çé‡‘

2025å¹´12æœˆ31æ—¥ï¼šæ±ºå®šç™¼æ”¾
- attribution_year = 2025ï¼ˆæ­¸å±¬2025å¹´åº¦ï¼‰
- amount = 50,000å…ƒ
- decision_date = 2025-12-31

2026å¹´1æœˆ15æ—¥ï¼šå¯¦éš›ç™¼æ”¾
- payment_year = 2026
- payment_month = 1
- payment_date = 2026-01-15

å®¢æˆ¶æˆæœ¬åˆ†æï¼š
- æŸ¥è©¢ã€Œ2025å¹´å®¢æˆ¶Aæˆæœ¬ã€æ™‚
- æœƒæŒ‰å·¥æ™‚æ¯”ä¾‹åˆ†æ”¤ã€Œattribution_year = 2025ã€çš„å¹´çµ‚çé‡‘
- å³ä½¿å¯¦éš›ç™¼æ”¾åœ¨2026å¹´1æœˆ
```

---

## ğŸ“ è–ªè³‡è¨ˆç®—å…¬å¼

### 1. æ™‚è–ªåŸºæº–è¨ˆç®—ï¼ˆä¾å‹åŸºæ³•ï¼‰

```typescript
/**
 * è¨ˆç®—å¹³æ—¥æ¯å°æ™‚å·¥è³‡é¡
 * ä¾æ“šå‹åŸºæ³•ç¬¬ 2 æ¢ç¬¬ 3 æ¬¾åŠç¬¬ 24 æ¢
 */
function calculateHourlyBase(monthlySalary: number): number {
  // æœˆè–ªåˆ¶æ›ç®—æ™‚æ•¸ = 30å¤© Ã— 8å°æ™‚ = 240å°æ™‚
  const MONTHLY_STANDARD_HOURS = 240;
  
  // å¹³æ—¥æ¯å°æ™‚å·¥è³‡é¡ = æœˆè–ª Ã· 240å°æ™‚
  // æ³¨æ„ï¼šæœˆè–ªéœ€åŒ…å«æ‰€æœ‰ã€Œç¶“å¸¸æ€§çµ¦èˆ‡ã€ï¼ˆåº•è–ªã€å…¨å‹¤ã€æ´¥è²¼ç­‰ï¼‰
  return monthlySalary / MONTHLY_STANDARD_HOURS;
}

/**
 * ç¯„ä¾‹ï¼š
 * æœˆè–ª 35,000 å…ƒï¼ˆåŒ…å«åº•è–ªã€æ´¥è²¼ç­‰ç¶“å¸¸æ€§çµ¦èˆ‡ï¼‰
 * å¹³æ—¥æ¯å°æ™‚å·¥è³‡é¡ = 35,000 Ã· 240 â‰ˆ 146 å…ƒ
 */
```

### 2. åŠ ç­è²»è¨ˆç®—ï¼ˆä¾å‹åŸºæ³•ç¬¬24æ¢ï¼‰

```typescript
/**
 * åŠ ç­è²»è¨ˆç®—
 */
function calculateOvertimePay(
  monthlySalary: number,
  overtimeHours: number,
  overtimeType: OvertimeType
): number {
  const hourlyBase = calculateHourlyBase(monthlySalary);
  
  let multiplier: number;
  
  switch (overtimeType) {
    case 'weekday_2h':  // å¹³æ—¥å»¶é•·å·¥æ™‚å‰2å°æ™‚
      multiplier = 4/3;  // 1.34å€
      break;
    case 'weekday_beyond':  // å¹³æ—¥å»¶é•·å·¥æ™‚ç¬¬3å°æ™‚èµ·
      multiplier = 5/3;  // 1.67å€
      break;
    case 'restday_2h':  // ä¼‘æ¯æ—¥å‰2å°æ™‚
      multiplier = 4/3;  // 1.34å€
      break;
    case 'restday_beyond':  // ä¼‘æ¯æ—¥ç¬¬3å°æ™‚èµ·
      multiplier = 5/3;  // 1.67å€
      break;
    case 'holiday':  // åœ‹å®šå‡æ—¥/ä¾‹å‡æ—¥
      multiplier = 2;  // 2.0å€
      break;
  }
  
  return hourlyBase * overtimeHours * multiplier;
}

/**
 * ç¯„ä¾‹ï¼š
 * æœˆè–ª 35,000 å…ƒï¼ˆæ™‚è–ªåŸºæº– 146å…ƒï¼‰
 * å¹³æ—¥åŠ ç­ 3 å°æ™‚
 * - å‰2å°æ™‚ï¼š146 Ã— 2 Ã— 1.34 = 391å…ƒ
 * - ç¬¬3å°æ™‚ï¼š146 Ã— 1 Ã— 1.67 = 244å…ƒ
 * - åˆè¨ˆï¼š635å…ƒ
 */
```

### 3. å…¨å‹¤çé‡‘è¦å‰‡

```typescript
/**
 * å…¨å‹¤åˆ¤å®šè¦å‰‡
 * ä¾æ“šï¼šå…¬å¸å…§è¦ï¼ˆå¯èª¿æ•´ï¼‰
 */
function checkFullAttendance(
  user_id: number,
  year: number,
  month: number
): boolean {
  // æŸ¥è©¢è©²æœˆæ‰€æœ‰è«‹å‡è¨˜éŒ„
  const leaves = await db.prepare(`
    SELECT leave_type_id, hours
    FROM LeaveApplications
    WHERE user_id = ? 
      AND strftime('%Y', start_date) = ?
      AND strftime('%m', start_date) = ?
      AND is_deleted = 0
  `).bind(user_id, year, month).all();
  
  for (const leave of leaves.results) {
    // ä»¥ä¸‹æƒ…æ³æœƒæ‰£é™¤å…¨å‹¤ï¼š
    // - ç—…å‡ï¼ˆleave_type_id = 2ï¼‰
    // - äº‹å‡ï¼ˆleave_type_id = 3ï¼‰
    
    if (leave.leave_type_id === 2 || leave.leave_type_id === 3) {
      return false;  // ä¸ç¬¦åˆå…¨å‹¤
    }
    
    // ä»¥ä¸‹æƒ…æ³ä¸å½±éŸ¿å…¨å‹¤ï¼š
    // - ç‰¹ä¼‘ï¼ˆleave_type_id = 1ï¼‰
    // - è£œä¼‘ï¼ˆleave_type_id = 6ï¼‰âœ… é—œéµï¼
    // - å©šå‡ã€å–ªå‡ï¼ˆleave_type_id = 4, 5ï¼‰
  }
  
  // æª¢æŸ¥æ˜¯å¦æœ‰æ› è·è¨˜éŒ„
  const absences = await checkAbsenceRecords(user_id, year, month);
  if (absences > 0) {
    return false;
  }
  
  return true;  // å…¨å‹¤
}
```

### 4. æœˆåº¦è–ªè³‡ç¸½è¨ˆç®—

```typescript
/**
 * è¨ˆç®—å“¡å·¥æœˆåº¦è–ªè³‡
 */
async function calculateMonthlyPayroll(
  user_id: number,
  year: number,
  month: number
): Promise<PayrollData> {
  
  // 1. å–å¾—å“¡å·¥åŸºæœ¬è³‡æ–™
  const user = await db.prepare(`
    SELECT * FROM Users WHERE user_id = ?
  `).bind(user_id).first();
  
  // 2. è¨ˆç®—æ™‚è–ªåŸºæº–ï¼ˆæœˆè–ª Ã· 240å°æ™‚ï¼‰
  // æ³¨æ„ï¼šéœ€åŒ…å«æ‰€æœ‰ç¶“å¸¸æ€§çµ¦èˆ‡ï¼ˆåº•è–ªã€æ´¥è²¼ã€å…¨å‹¤ç­‰ï¼‰
  const hourlyBase = calculateHourlyBase(user.base_salary);
  
  // 3. æŸ¥è©¢å“¡å·¥æ‰€æœ‰è–ªè³‡é …ç›®ï¼ˆâš ï¸ åªç®—ç¶“å¸¸æ€§çµ¦èˆ‡ï¼Œä¸”éæ¿¾è©²æœˆæœ‰æ•ˆçš„ï¼‰
  const targetMonth = `${year}-${String(month).padStart(2, '0')}`;
  const targetMonthStart = `${targetMonth}-01`;
  
  const salaryItems = await db.prepare(`
    SELECT sit.*, esi.amount, esi.effective_date, esi.expiry_date
    FROM EmployeeSalaryItems esi
    JOIN SalaryItemTypes sit ON esi.item_type_id = sit.item_type_id
    WHERE esi.user_id = ?
      AND esi.is_active = 1
      AND sit.is_regular_payment = 1  -- ç¶“å¸¸æ€§çµ¦èˆ‡
      AND esi.effective_date <= ?     -- ç”Ÿæ•ˆæ—¥åœ¨ç›®æ¨™æœˆä»½ä¹‹å‰æˆ–ç•¶æœˆ
      AND (esi.expiry_date IS NULL OR esi.expiry_date >= ?)  -- æœªéæœŸ
    ORDER BY 
      CASE WHEN esi.expiry_date IS NOT NULL THEN 0 ELSE 1 END,  -- æœˆä»½å°ˆå±¬å„ªå…ˆ
      esi.effective_date DESC  -- æœ€æ–°çš„å„ªå…ˆ
  `).bind(user_id, targetMonthStart, targetMonthStart).all();
  
  // 4. å»é‡ï¼šåŒä¸€å€‹é …ç›®é¡å‹åªå–ä¸€ç­†ï¼ˆå„ªå…ˆæœˆä»½å°ˆå±¬ï¼Œå…¶æ¬¡é è¨­å€¼ï¼‰
  const uniqueItems = new Map();
  for (const item of salaryItems.results) {
    if (!uniqueItems.has(item.item_type_id)) {
      uniqueItems.set(item.item_type_id, item);
    }
  }
  
  // åˆ†é¡è¨ˆç®—
  let total_allowances = 0;
  let total_bonuses = 0;
  let attendance_bonus = 0;
  
  for (const item of salaryItems.results) {
    if (item.category === 'allowance') {
      total_allowances += item.amount;
    } else if (item.category === 'bonus') {
      if (item.item_code === 'ATTENDANCE_BONUS') {
        attendance_bonus = item.amount;  // å…ˆè¨˜éŒ„ï¼Œç¨å¾Œåˆ¤å®šæ˜¯å¦çµ¦äºˆ
      } else {
        total_bonuses += item.amount;
      }
    }
  }
  
  // 4. æŸ¥è©¢è©²æœˆæ‰€æœ‰åŠ ç­è¨˜éŒ„
  const overtimes = await db.prepare(`
    SELECT 
      t.work_date,
      t.hours,
      t.work_type_id,
      w.work_type_name,
      w.rate_multiplier
    FROM TimeLogs t
    JOIN WorkTypes w ON t.work_type_id = w.work_type_id
    WHERE t.user_id = ?
      AND strftime('%Y', t.work_date) = ?
      AND strftime('%m', t.work_date) = ?
      AND t.work_type_id > 1  -- åªç®—åŠ ç­
      AND is_compensatory_leave = 0  -- ä¸é¸è£œä¼‘çš„æ‰ç®—åŠ ç­è²»
      AND t.is_deleted = 0
  `).bind(user_id, year.toString(), month.toString().padStart(2, '0')).all();
  
  // 5. åˆ†é¡è¨ˆç®—åŠ ç­è²»
  let overtime_weekday_2h = 0;
  let overtime_weekday_beyond = 0;
  let overtime_restday_2h = 0;
  let overtime_restday_beyond = 0;
  let overtime_holiday = 0;
  let total_overtime_hours = 0;
  
  for (const ot of overtimes.results) {
    total_overtime_hours += ot.hours;
    
    const overtimePay = calculateOvertimePay(
      user.base_salary,
      ot.hours,
      getOvertimeType(ot.work_type_id)
    );
    
    // åˆ†é¡ç´¯è¨ˆ
    switch (ot.work_type_id) {
      case 2: overtime_weekday_2h += overtimePay; break;
      case 3: overtime_weekday_beyond += overtimePay; break;
      case 4: overtime_restday_2h += overtimePay; break;
      case 5: overtime_restday_beyond += overtimePay; break;
      case 6: overtime_holiday += overtimePay; break;
    }
  }
  
  // 6. åˆ¤å®šå…¨å‹¤
  const has_full_attendance = await checkFullAttendance(user_id, year, month);
  const final_attendance_bonus = has_full_attendance ? attendance_bonus : 0;
  
  // 7. è¨ˆç®—ç¸½è–ªè³‡
  const gross_salary = 
    user.base_salary +
    total_allowances +
    total_bonuses +
    final_attendance_bonus +
    overtime_weekday_2h +
    overtime_weekday_beyond +
    overtime_restday_2h +
    overtime_restday_beyond +
    overtime_holiday;
  
  const net_salary = gross_salary - total_deductions;
  
  // 8. å„²å­˜è–ªè³‡è¨˜éŒ„
  const payrollData = {
    user_id,
    year,
    month,
    base_salary: user.base_salary,
    total_allowances,
    total_bonuses: total_bonuses + final_attendance_bonus,
    overtime_weekday_2h,
    overtime_weekday_beyond,
    overtime_restday_2h,
    overtime_restday_beyond,
    overtime_holiday,
    total_deductions: 0,
    total_work_hours: await getTotalWorkHours(user_id, year, month),
    total_overtime_hours,
    total_weighted_hours: await getTotalWeightedHours(user_id, year, month),
    has_full_attendance,
    gross_salary,
    net_salary
  };
  
  await savePayrollRecord(payrollData);
  
  return payrollData;
}
```

---

## ğŸ”Œ API ç«¯é»

### è–ªè³‡é …ç›®é¡å‹ç®¡ç†

```
GET    /api/v1/admin/salary-item-types          æŸ¥è©¢æ‰€æœ‰è–ªè³‡é …ç›®é¡å‹
POST   /api/v1/admin/salary-item-types          æ–°å¢è–ªè³‡é …ç›®é¡å‹
PUT    /api/v1/admin/salary-item-types/:id      æ›´æ–°è–ªè³‡é …ç›®é¡å‹
DELETE /api/v1/admin/salary-item-types/:id      åˆªé™¤è–ªè³‡é …ç›®é¡å‹
```

### å¹´çµ‚çé‡‘ç®¡ç† â­ æ–°å¢

```
GET    /api/v1/admin/year-end-bonus             æŸ¥è©¢å¹´çµ‚çé‡‘åˆ—è¡¨
POST   /api/v1/admin/year-end-bonus             æ–°å¢å¹´çµ‚çé‡‘
PUT    /api/v1/admin/year-end-bonus/:id         æ›´æ–°å¹´çµ‚çé‡‘
DELETE /api/v1/admin/year-end-bonus/:id         åˆªé™¤å¹´çµ‚çé‡‘
GET    /api/v1/admin/year-end-bonus/summary     å¹´çµ‚çé‡‘çµ±è¨ˆ
```

**æ–°å¢å¹´çµ‚çé‡‘ç¯„ä¾‹ï¼š**
```json
// POST /api/v1/admin/year-end-bonus
{
  "user_id": 1,
  "attribution_year": 2025,      // æ­¸å±¬å¹´åº¦
  "amount": 50000,
  "payment_date": "2026-01-15",  // å¯¦éš›ç™¼æ”¾æ—¥æœŸ
  "notes": "2025å¹´åº¦ç¸¾æ•ˆå„ªç•°"
}

// å›æ‡‰
{
  "success": true,
  "data": {
    "bonus_id": 1,
    "user_id": 1,
    "username": "å“¡å·¥A",
    "attribution_year": 2025,
    "amount": 50000,
    "payment_date": "2026-01-15",
    "payment_year": 2026,
    "payment_month": 1
  }
}
```

**æŸ¥è©¢å¹´çµ‚çµ±è¨ˆç¯„ä¾‹ï¼š**
```json
// GET /api/v1/admin/year-end-bonus/summary?attribution_year=2025

{
  "success": true,
  "data": {
    "attribution_year": 2025,
    "total_bonus": 195000,
    "employee_count": 4,
    "average_bonus": 48750,
    "by_employee": [
      {
        "user_id": 1,
        "username": "å“¡å·¥A",
        "amount": 50000,
        "payment_status": "paid"
      },
      {
        "user_id": 2,
        "username": "å“¡å·¥B",
        "amount": 45000,
        "payment_status": "pending"
      }
    ]
  }
}
```

### å“¡å·¥è–ªè³‡è¨­å®š

```
GET    /api/v1/admin/users/:id/salary            æŸ¥è©¢å“¡å·¥è–ªè³‡è¨­å®š
PUT    /api/v1/admin/users/:id/salary            æ›´æ–°å“¡å·¥è–ªè³‡è¨­å®šï¼ˆæ•´æ‰¹æ›´æ–°ï¼‰
PUT    /api/v1/admin/users/:id/salary-items/:itemId  æ›´æ–°å–®ç­†è–ªè³‡é …ç›®ï¼ˆç¸¾æ•ˆçé‡‘æœˆåº¦èª¿æ•´ï¼‰â­ æ–°å¢
POST   /api/v1/admin/salary-items/batch-update  æ‰¹æ¬¡æ›´æ–°è–ªè³‡é …ç›®ï¼ˆæ‰€æœ‰å“¡å·¥çš„ç¸¾æ•ˆçé‡‘ï¼‰â­ æ–°å¢
```

**æ›´æ–°å–®ç­†è–ªè³‡é …ç›®ï¼ˆç¸¾æ•ˆçé‡‘æœˆåº¦èª¿æ•´ï¼‰ï¼š**
```json
// PUT /api/v1/admin/users/1/salary-items/7
{
  "amount": 3500,  // æœ¬æœˆç¸¾æ•ˆçé‡‘èª¿æ•´ç‚º 3500å…ƒ
  "effective_date": "2025-11-01"
}

// å›æ‡‰
{
  "success": true,
  "data": {
    "employee_item_id": 7,
    "user_id": 1,
    "item_code": "PERFORMANCE",
    "item_name": "ç¸¾æ•ˆçé‡‘",
    "old_amount": 2000,
    "new_amount": 3500,
    "effective_date": "2025-11-01",
    "impact": {
      "old_hourly_base": 166,
      "new_hourly_base": 172,  // æ™‚è–ªå¢åŠ ï¼ˆå› ç¸¾æ•ˆçé‡‘å¢åŠ ï¼‰
      "difference": 6
    }
  }
}
```

**æ‰¹æ¬¡æ›´æ–°ç¸¾æ•ˆçé‡‘ï¼ˆæ‰€æœ‰å“¡å·¥ï¼Œæ¯äººä¸åŒé‡‘é¡ï¼‰ï¼š**
```json
// POST /api/v1/admin/salary-items/batch-update
{
  "item_code": "PERFORMANCE",  // æŒ‡å®šè¦æ›´æ–°çš„è–ªè³‡é …ç›®
  "target_month": "2025-11",   // â­ åƒ…å½±éŸ¿æ­¤æœˆä»½
  "updates": [
    { "user_id": 1, "amount": 3500 },  // å“¡å·¥Aï¼šæœ¬æœˆ3500å…ƒ
    { "user_id": 2, "amount": 3000 },  // å“¡å·¥Bï¼šæœ¬æœˆ3000å…ƒ
    { "user_id": 3, "amount": 2500 }   // å“¡å·¥Cï¼šæœ¬æœˆ2500å…ƒï¼ˆæ¯äººä¸åŒï¼‰
  ]
}

// ç³»çµ±è™•ç†é‚è¼¯ï¼š
// 1. ç‚ºæ¯ä½å“¡å·¥å‰µå»ºã€Œæœˆä»½å°ˆå±¬ã€è¨˜éŒ„
//    effective_date = '2025-11-01'
//    expiry_date = '2025-11-30'
// 2. åƒ…11æœˆæŸ¥è©¢æ™‚ä½¿ç”¨é€™äº›å€¼
// 3. 12æœˆæŸ¥è©¢æ™‚æ¢å¾©ä½¿ç”¨é è¨­å€¼

// å›æ‡‰
{
  "success": true,
  "data": {
    "target_month": "2025-11",
    "total_updated": 3,
    "message": "å·²æ›´æ–°3ä½å“¡å·¥çš„11æœˆç¸¾æ•ˆçé‡‘ï¼Œåƒ…å½±éŸ¿11æœˆè–ªè³‡å’Œæˆæœ¬åˆ†æ"
  }
}
```

**å¯¦éš›æ•ˆæœï¼š**
```
å“¡å·¥Açš„ç¸¾æ•ˆçé‡‘ï¼š
- é è¨­å€¼ï¼š2000å…ƒï¼ˆeffective_date='2025-01-01', expiry_date=NULLï¼‰
- 11æœˆèª¿æ•´ï¼š3500å…ƒï¼ˆeffective_date='2025-11-01', expiry_date='2025-11-30'ï¼‰
- 12æœˆèª¿æ•´ï¼š4000å…ƒï¼ˆeffective_date='2025-12-01', expiry_date='2025-12-31'ï¼‰

æŸ¥è©¢10æœˆè–ªè³‡ â†’ ä½¿ç”¨2000å…ƒï¼ˆé è¨­å€¼ï¼‰
æŸ¥è©¢11æœˆè–ªè³‡ â†’ ä½¿ç”¨3500å…ƒï¼ˆ11æœˆå°ˆå±¬ï¼‰âœ…
æŸ¥è©¢12æœˆè–ªè³‡ â†’ ä½¿ç”¨4000å…ƒï¼ˆ12æœˆå°ˆå±¬ï¼‰âœ…
æŸ¥è©¢æ˜å¹´1æœˆ â†’ ä½¿ç”¨2000å…ƒï¼ˆé è¨­å€¼ï¼‰
```

**è«‹æ±‚ç¯„ä¾‹ï¼š**
```json
// PUT /api/v1/admin/users/1/salary
{
  "base_salary": 35000,
  "salary_items": [
    { "item_type_id": 1, "amount": 2000 },  // å…¨å‹¤çé‡‘
    { "item_type_id": 2, "amount": 1000 },  // äº¤é€šæ´¥è²¼
    { "item_type_id": 3, "amount": 1800 }   // ä¼™é£Ÿæ´¥è²¼
  ]
}
```

**å›æ‡‰ç¯„ä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "user_id": 1,
    "username": "å“¡å·¥A",
    "base_salary": 35000,
    "hourly_base": 145.83,
    "salary_items": [
      { "item_name": "å…¨å‹¤çé‡‘", "amount": 2000 },
      { "item_name": "äº¤é€šæ´¥è²¼", "amount": 1000 },
      { "item_name": "ä¼™é£Ÿæ´¥è²¼", "amount": 1800 }
    ],
    "total_fixed_salary": 39800
  }
}
```

### è–ªè³‡è¨ˆç®—èˆ‡æŸ¥è©¢

```
POST   /api/v1/admin/payroll/calculate          è¨ˆç®—æŒ‡å®šæœˆä»½è–ªè³‡
PUT    /api/v1/admin/payroll/:id/adjust         èª¿æ•´è–ªè³‡é …ç›®é‡‘é¡ï¼ˆç¸¾æ•ˆçé‡‘ç­‰ï¼‰â­ æ–°å¢
GET    /api/v1/admin/payroll                    æŸ¥è©¢è–ªè³‡è¨˜éŒ„
GET    /api/v1/admin/payroll/:id                æŸ¥è©¢è–ªè³‡è©³æƒ…
GET    /api/v1/my/payroll                       æŸ¥è©¢è‡ªå·±çš„è–ªè³‡è¨˜éŒ„
GET    /api/v1/my/payroll/:id                   æŸ¥è©¢è‡ªå·±çš„è–ªè³‡è©³æƒ…
GET    /api/v1/reports/payroll-summary          è–ªè³‡å½™ç¸½å ±è¡¨
```

**èª¿æ•´è–ªè³‡é …ç›®é‡‘é¡ï¼ˆç”¨æ–¼ç¸¾æ•ˆçé‡‘ï¼‰ï¼š**
```json
// PUT /api/v1/admin/payroll/:payrollId/adjust
{
  "adjustments": [
    {
      "item_code": "PERFORMANCE",
      "amount": 3000  // æœ¬æœˆç¸¾æ•ˆçé‡‘ 3000å…ƒï¼ˆè¦†è“‹é è¨­å€¼ï¼‰
    }
  ]
}

// å›æ‡‰
{
  "success": true,
  "data": {
    "payroll_id": 123,
    "user_id": 1,
    "username": "å“¡å·¥A",
    "adjusted_items": [
      {
        "item_code": "PERFORMANCE",
        "item_name": "ç¸¾æ•ˆçé‡‘",
        "original_amount": 2000,  // é è¨­å€¼
        "adjusted_amount": 3000,  // èª¿æ•´å¾Œ
        "difference": 1000
      }
    ],
    "gross_salary": 44315  // é‡æ–°è¨ˆç®—å¾Œçš„ç¸½è–ªè³‡
  }
}
```

### å¹´çµ‚çé‡‘ç®¡ç† â­ æ–°å¢

```
GET    /api/v1/admin/year-end-bonus             æŸ¥è©¢å¹´çµ‚çé‡‘åˆ—è¡¨
POST   /api/v1/admin/year-end-bonus             æ–°å¢å¹´çµ‚çé‡‘è¨˜éŒ„
PUT    /api/v1/admin/year-end-bonus/:id         æ›´æ–°å¹´çµ‚çé‡‘
DELETE /api/v1/admin/year-end-bonus/:id         åˆªé™¤å¹´çµ‚çé‡‘
GET    /api/v1/admin/year-end-bonus/summary     å¹´çµ‚çé‡‘å½™ç¸½ï¼ˆä¾æ­¸å±¬å¹´åº¦ï¼‰
```

**è¨ˆç®—è–ªè³‡ç¯„ä¾‹ï¼š**
```json
// POST /api/v1/admin/payroll/calculate
{
  "user_id": 1,  // å¯é¸ï¼Œä¸æä¾›å‰‡è¨ˆç®—æ‰€æœ‰å“¡å·¥
  "year": 2025,
  "month": 10
}

// å›æ‡‰
{
  "success": true,
  "data": {
    "payroll_id": 123,
    "user_id": 1,
    "username": "å“¡å·¥A",
    "year": 2025,
    "month": 10,
    "base_salary": 35000,
    "total_allowances": 2800,
    "total_bonuses": 2000,
    "overtime_weekday_2h": 880,
    "overtime_weekday_beyond": 244,
    "gross_salary": 41352,
    "net_salary": 41352,
    "has_full_attendance": true,
    "total_overtime_hours": 8.5
  }
}
```

**æ–°å¢å¹´çµ‚çé‡‘ç¯„ä¾‹ï¼š** â­
```json
// POST /api/v1/admin/year-end-bonus
{
  "user_id": 1,
  "attribution_year": 2025,        // æ­¸å±¬2025å¹´åº¦
  "amount": 50000,
  "payment_year": 2026,            // å¯¦éš›åœ¨2026å¹´ç™¼æ”¾
  "payment_month": 1,
  "decision_date": "2025-12-31",
  "notes": "æ ¹æ“š2025å¹´ç¸¾æ•ˆç™¼æ”¾"
}

// å›æ‡‰
{
  "success": true,
  "data": {
    "bonus_id": 1,
    "user_id": 1,
    "username": "å“¡å·¥A",
    "attribution_year": 2025,
    "amount": 50000,
    "payment_year": 2026,
    "payment_month": 1,
    "decision_date": "2025-12-31"
  }
}
```

**æŸ¥è©¢å¹´çµ‚å½™ç¸½ç¯„ä¾‹ï¼š**
```json
// GET /api/v1/admin/year-end-bonus/summary?attribution_year=2025

{
  "success": true,
  "data": {
    "attribution_year": 2025,
    "total_amount": 180000,        // æ‰€æœ‰å“¡å·¥åˆè¨ˆ
    "employee_count": 4,
    "average_bonus": 45000,
    "details": [
      {
        "user_id": 1,
        "username": "å“¡å·¥A",
        "amount": 50000,
        "payment_status": "paid",  // å·²ç™¼æ”¾
        "payment_date": "2026-01-15"
      },
      {
        "user_id": 2,
        "username": "å“¡å·¥B",
        "amount": 45000,
        "payment_status": "pending"  // å°šæœªç™¼æ”¾
      }
    ]
  }
}
```

---

## ğŸ¨ å‰ç«¯çµ„ä»¶

### EmployeeSalarySettingPage.vue

å“¡å·¥è–ªè³‡è¨­å®šé é¢ï¼Œæ”¯æ´éˆæ´»é…ç½®è–ªè³‡é …ç›®ã€‚

### YearEndBonusPage.vueï¼ˆå¹´çµ‚çé‡‘ç®¡ç†ï¼‰â­ æ–°å¢

**åŠŸèƒ½ï¼š** ç¨ç«‹ç®¡ç†å¹´çµ‚çé‡‘ï¼Œä¸å½±éŸ¿å¹³æ™‚æˆæœ¬è¨ˆç®—

```vue
<template>
  <div class="year-end-bonus-page">
    <h2>å¹´çµ‚çé‡‘ç®¡ç†</h2>
    
    <!-- å¹´åº¦é¸æ“‡ -->
    <div class="year-selector">
      <label>æ­¸å±¬å¹´åº¦ï¼š</label>
      <select v-model="selectedYear">
        <option v-for="y in years" :value="y">{{ y }}å¹´</option>
      </select>
    </div>
    
    <!-- çµ±è¨ˆå¡ç‰‡ -->
    <div class="summary-cards">
      <StatCard title="å¹´çµ‚ç¸½é¡" :value="formatCurrency(summary.total_amount)" />
      <StatCard title="äººæ•¸" :value="summary.employee_count + ' äºº'" />
      <StatCard title="å¹³å‡" :value="formatCurrency(summary.average_bonus)" />
    </div>
    
    <!-- å“¡å·¥åˆ—è¡¨ -->
    <DataTable :columns="columns" :data="bonusList">
      <template #actions="{ row }">
        <StyledButton @click="editBonus(row)">ç·¨è¼¯</StyledButton>
      </template>
    </DataTable>
    
    <!-- æ–°å¢/ç·¨è¼¯è¡¨å–® -->
    <Modal :show="showForm" title="è¨­å®šå¹´çµ‚çé‡‘">
      <form @submit.prevent="submitBonus">
        <FormGroup label="å“¡å·¥">
          <select v-model="form.user_id" required>
            <option v-for="u in employees" :value="u.user_id">
              {{ u.name }}
            </option>
          </select>
        </FormGroup>
        
        <FormGroup label="æ­¸å±¬å¹´åº¦">
          <input type="number" v-model="form.attribution_year" required />
          <p class="hint">ä¾‹å¦‚ï¼š2025ï¼ˆå³ä½¿åœ¨2026å¹´1æœˆç™¼æ”¾ï¼‰</p>
        </FormGroup>
        
        <FormGroup label="å¹´çµ‚é‡‘é¡">
          <input type="number" v-model="form.amount" required />
        </FormGroup>
        
        <FormGroup label="å¯¦éš›ç™¼æ”¾æ—¥æœŸ">
          <input type="date" v-model="form.payment_date" />
          <p class="hint">é è¨ˆä½•æ™‚ç™¼æ”¾ï¼ˆå¦‚ï¼š2026-01-15ï¼‰</p>
        </FormGroup>
        
        <FormGroup label="å‚™è¨»">
          <textarea v-model="form.notes" 
            placeholder="å¦‚ï¼šæ ¹æ“š2025å¹´ç¸¾æ•ˆæ±ºå®š"></textarea>
        </FormGroup>
        
        <StyledButton type="submit">å„²å­˜</StyledButton>
      </form>
    </Modal>
    
    <!-- èªªæ˜æ–‡å­— -->
    <div class="info-box">
      <h4>ğŸ’¡ å¹´çµ‚çé‡‘èªªæ˜</h4>
      <ul>
        <li>å¹´çµ‚çé‡‘ç¨ç«‹ç®¡ç†ï¼Œä¸å½±éŸ¿å¹³æ™‚çš„å®¢æˆ¶æˆæœ¬åˆ†æ</li>
        <li>æ­¸å±¬å¹´åº¦ï¼šå¹´çµ‚çé‡‘è¨ˆå…¥å“ªä¸€å¹´çš„æˆæœ¬ï¼ˆå¦‚ï¼š2025ï¼‰</li>
        <li>ç™¼æ”¾æ—¥æœŸï¼šå¯¦éš›ç™¼è–ªæ—¥ï¼ˆé€šå¸¸æ˜¯æ¬¡å¹´1æœˆï¼‰</li>
        <li>æˆæœ¬åˆ†æ”¤ï¼šæŸ¥è©¢å®¢æˆ¶æˆæœ¬æ™‚ï¼Œå¯å‹¾é¸ã€ŒåŒ…å«å¹´çµ‚ã€æŸ¥çœ‹çœŸå¯¦ç¸½æˆæœ¬</li>
        <li>åˆ†æ”¤æ–¹å¼ï¼šæŒ‰è©²å“¡å·¥ç‚ºå„å®¢æˆ¶å·¥ä½œçš„å·¥æ™‚æ¯”ä¾‹åˆ†æ”¤</li>
      </ul>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue';
import { getYearEndBonusSummary, createYearEndBonus } from '@/api/salary';

const selectedYear = ref(new Date().getFullYear() - 1);  // é è¨­ä¸Šä¸€å¹´
const summary = ref({});
const bonusList = ref([]);
const showForm = ref(false);
const form = ref({
  user_id: '',
  attribution_year: selectedYear.value,
  amount: 0,
  payment_date: '',
  notes: ''
});

const columns = [
  { key: 'username', label: 'å“¡å·¥å§“å' },
  { key: 'amount', label: 'å¹´çµ‚é‡‘é¡' },
  { key: 'payment_date', label: 'ç™¼æ”¾æ—¥æœŸ' },
  { key: 'payment_status', label: 'ç‹€æ…‹' },
  { key: 'actions', label: 'æ“ä½œ' }
];

watch(selectedYear, loadData);

onMounted(() => loadData());

async function loadData() {
  const response = await getYearEndBonusSummary(selectedYear.value);
  summary.value = response.data;
  bonusList.value = response.data.details || [];
}

async function submitBonus() {
  await createYearEndBonus(form.value);
  alert('å¹´çµ‚çé‡‘è¨­å®šæˆåŠŸ');
  showForm.value = false;
  loadData();
}
</script>
```

### PerformanceBonusAdjustmentPage.vueï¼ˆç¸¾æ•ˆçé‡‘èª¿æ•´é é¢ï¼‰â­ æ–°å¢

**åŠŸèƒ½ï¼š** ç®¡ç†å“¡æ¯æœˆèª¿æ•´ç¸¾æ•ˆçé‡‘é‡‘é¡ï¼ˆè¨ˆå…¥æ™‚è–ªï¼Œå½±éŸ¿æˆæœ¬åˆ†æï¼‰

```vue
<template>
  <div class="performance-bonus-page">
    <h2>ç¸¾æ•ˆçé‡‘èª¿æ•´</h2>
    
    <div class="info-box">
      <h4>ğŸ’¡ é‡è¦èªªæ˜</h4>
      <ul>
        <li>ç¸¾æ•ˆçé‡‘å±¬æ–¼ã€Œç¶“å¸¸æ€§çµ¦èˆ‡ã€ï¼Œ<strong>æœƒè¨ˆå…¥æ™‚è–ªåŸºæº–</strong></li>
        <li>èª¿æ•´ç¸¾æ•ˆçé‡‘æœƒå½±éŸ¿è©²æœˆçš„æ™‚è–ªæˆæœ¬ç‡å’Œå®¢æˆ¶æˆæœ¬åˆ†æ</li>
        <li>å»ºè­°ï¼šæ¯æœˆåˆï¼ˆæˆ–ä¸Šæœˆåº•ï¼‰èª¿æ•´ï¼Œç¢ºä¿æˆæœ¬è¨ˆç®—æº–ç¢º</li>
      </ul>
    </div>
    
    <!-- æœˆä»½é¸æ“‡ -->
    <div class="month-selector">
      <label>èª¿æ•´æœˆä»½ï¼š</label>
      <input type="month" v-model="selectedMonth" />
      <StyledButton @click="loadEmployees">è¼‰å…¥å“¡å·¥</StyledButton>
    </div>
    
    <!-- å“¡å·¥ç¸¾æ•ˆçé‡‘åˆ—è¡¨ -->
    <div v-if="employees.length > 0" class="employee-list">
      <table class="bonus-table">
        <thead>
          <tr>
            <th>å“¡å·¥å§“å</th>
            <th>é è¨­ç¸¾æ•ˆçé‡‘</th>
            <th>æœ¬æœˆèª¿æ•´ç‚º</th>
            <th>æ™‚è–ªå½±éŸ¿</th>
            <th>ç‹€æ…‹</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="emp in employees" :key="emp.user_id">
            <td>{{ emp.username }}</td>
            <td>{{ formatCurrency(emp.default_performance) }}</td>
            <td>
              <input 
                type="number" 
                v-model.number="emp.adjusted_performance"
                :placeholder="emp.default_performance"
                @input="calculateImpact(emp)"
                class="amount-input"
              />
            </td>
            <td>
              <span v-if="emp.hourly_impact" :class="emp.hourly_impact > 0 ? 'text-green' : 'text-red'">
                {{ emp.hourly_impact > 0 ? '+' : '' }}{{ emp.hourly_impact }}å…ƒ/æ™‚
              </span>
              <span v-else class="text-gray">ç„¡è®ŠåŒ–</span>
            </td>
            <td>
              <span v-if="emp.adjusted_performance !== emp.default_performance" class="badge badge-warning">
                å·²èª¿æ•´
              </span>
              <span v-else class="badge badge-secondary">
                ä½¿ç”¨é è¨­
              </span>
            </td>
          </tr>
        </tbody>
      </table>
      
      <!-- æ‰¹æ¬¡æ“ä½œ -->
      <div class="batch-actions">
        <StyledButton @click="batchUpdate" variant="primary">
          å„²å­˜æ‰€æœ‰èª¿æ•´
        </StyledButton>
        <StyledButton @click="resetAll" variant="ghost">
          å…¨éƒ¨æ¢å¾©é è¨­
        </StyledButton>
      </div>
      
      <!-- å½±éŸ¿é è¦½ -->
      <div class="impact-summary">
        <h4>èª¿æ•´å½±éŸ¿é è¦½</h4>
        <p>
          å…± {{ adjustedCount }} ä½å“¡å·¥èª¿æ•´ç¸¾æ•ˆçé‡‘<br>
          æ™‚è–ªæˆæœ¬ç‡è®ŠåŒ–ï¼šå¹³å‡ {{ averageImpact > 0 ? '+' : '' }}{{ averageImpact }}å…ƒ/æ™‚<br>
          é€™æœƒå½±éŸ¿ {{ selectedMonth }} çš„å®¢æˆ¶æˆæœ¬åˆ†æå ±è¡¨
        </p>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';
import { getEmployeeSalaries, batchUpdateSalaryItems } from '@/api/salary';

const selectedMonth = ref('2025-11');
const employees = ref([]);

const adjustedCount = computed(() => 
  employees.value.filter(e => e.adjusted_performance !== e.default_performance).length
);

const averageImpact = computed(() => {
  const impacts = employees.value.map(e => e.hourly_impact || 0);
  const sum = impacts.reduce((a, b) => a + b, 0);
  return Math.round(sum / impacts.length);
});

async function loadEmployees() {
  const response = await getEmployeeSalaries();
  employees.value = response.data.map(emp => {
    const perfItem = emp.salary_items.find(i => i.item_code === 'PERFORMANCE');
    return {
      user_id: emp.user_id,
      username: emp.username,
      base_salary: emp.base_salary,
      default_performance: perfItem?.amount || 0,
      adjusted_performance: perfItem?.amount || 0,
      current_hourly_base: emp.hourly_base,
      hourly_impact: 0
    };
  });
}

function calculateImpact(emp) {
  const diff = emp.adjusted_performance - emp.default_performance;
  const hourlyDiff = diff / 240;  // å½±éŸ¿æ™‚è–ª
  emp.hourly_impact = Math.round(hourlyDiff);
}

async function batchUpdate() {
  const updates = employees.value
    .filter(e => e.adjusted_performance !== e.default_performance)
    .map(e => ({
      user_id: e.user_id,
      amount: e.adjusted_performance
    }));
  
  if (updates.length === 0) {
    alert('æ²’æœ‰éœ€è¦èª¿æ•´çš„é …ç›®');
    return;
  }
  
  await batchUpdateSalaryItems({
    item_code: 'PERFORMANCE',
    updates,
    effective_date: selectedMonth.value + '-01'
  });
  
  alert(`å·²æ›´æ–°${updates.length}ä½å“¡å·¥çš„ç¸¾æ•ˆçé‡‘`);
  
  // é‡æ–°è¼‰å…¥
  await loadEmployees();
}

function resetAll() {
  employees.value.forEach(emp => {
    emp.adjusted_performance = emp.default_performance;
    emp.hourly_impact = 0;
  });
}
</script>

<style scoped>
.info-box {
  background: #dbeafe;
  border-left: 4px solid #3b82f6;
  padding: 1rem;
  margin-bottom: 2rem;
}

.bonus-table {
  width: 100%;
  border-collapse: collapse;
}

.bonus-table th,
.bonus-table td {
  padding: 0.75rem;
  border: 1px solid #e5e7eb;
  text-align: left;
}

.amount-input {
  width: 120px;
  text-align: right;
  padding: 0.5rem;
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
}

.impact-summary {
  margin-top: 2rem;
  padding: 1rem;
  background: #f3f4f6;
  border-radius: 0.5rem;
}
</style>
```

**æ“ä½œæµç¨‹ç¯„ä¾‹ï¼š**
```
æ¯æœˆ1æ—¥ï¼ˆæˆ–ä¸Šæœˆåº•ï¼‰ï¼š

æ­¥é©Ÿ1ï¼šç®¡ç†å“¡é€²å…¥ã€Œç¸¾æ•ˆçé‡‘èª¿æ•´ã€é é¢
  é¸æ“‡æœˆä»½ï¼š2025-11
  é»æ“Šã€Œè¼‰å…¥å“¡å·¥ã€

æ­¥é©Ÿ2ï¼šçœ‹åˆ°æ‰€æœ‰å“¡å·¥åˆ—è¡¨
  å“¡å·¥Aï¼šé è¨­ 2000å…ƒ â†’ èª¿æ•´ç‚º 3500å…ƒï¼ˆæ™‚è–ª +6å…ƒ/æ™‚ï¼‰
  å“¡å·¥Bï¼šé è¨­ 2000å…ƒ â†’ èª¿æ•´ç‚º 3000å…ƒï¼ˆæ™‚è–ª +4å…ƒ/æ™‚ï¼‰
  å“¡å·¥Cï¼šé è¨­ 2000å…ƒ â†’ ä¿æŒä¸è®Š

æ­¥é©Ÿ3ï¼šé»æ“Šã€Œå„²å­˜æ‰€æœ‰èª¿æ•´ã€
  ç³»çµ±æ‰¹æ¬¡æ›´æ–° EmployeeSalaryItems è¡¨
  å“¡å·¥Açš„ç¸¾æ•ˆçé‡‘ amount å¾ 2000 â†’ 3500

æ­¥é©Ÿ4ï¼šä¹‹å¾ŒæŸ¥è©¢11æœˆå®¢æˆ¶æˆæœ¬æ™‚
  å“¡å·¥Açš„æ™‚è–ªæˆæœ¬ç‡æœƒä½¿ç”¨èª¿æ•´å¾Œçš„å€¼ï¼ˆåŒ…å«3500å…ƒç¸¾æ•ˆçé‡‘ï¼‰
  å®¢æˆ¶æˆæœ¬åˆ†æåæ˜ çœŸå¯¦äººåŠ›æˆæœ¬ âœ…
```

### PayrollReportPage.vue

è–ªè³‡å ±è¡¨é é¢ï¼Œé¡¯ç¤ºæœˆåº¦è–ªè³‡æ˜ç´°å’Œçµ±è¨ˆã€‚

### YearEndBonusManagementPage.vueï¼ˆå¹´çµ‚çé‡‘ç®¡ç†ï¼‰â­ æ–°å¢

**åŠŸèƒ½ï¼š** ç®¡ç†å“¡è¨­å®šå¹´çµ‚çé‡‘

```vue
<template>
  <div class="yearend-bonus-page">
    <h2>å¹´çµ‚çé‡‘ç®¡ç†</h2>
    
    <div class="year-selector">
      <label>æ­¸å±¬å¹´åº¦ï¼š</label>
      <select v-model="selectedYear">
        <option value="2025">2025å¹´</option>
        <option value="2024">2024å¹´</option>
      </select>
      <StyledButton @click="loadBonusData">æŸ¥è©¢</StyledButton>
    </div>
    
    <!-- å½™ç¸½è³‡è¨Š -->
    <div class="summary-cards">
      <StatCard title="å¹´çµ‚ç¸½é¡" :value="formatCurrency(summary.total_amount)" />
      <StatCard title="å“¡å·¥äººæ•¸" :value="summary.employee_count + 'äºº'" />
      <StatCard title="å¹³å‡é‡‘é¡" :value="formatCurrency(summary.average_bonus)" />
    </div>
    
    <!-- å“¡å·¥å¹´çµ‚è¨­å®š -->
    <DataTable :columns="columns" :data="bonusData">
      <template #amount="{ row }">
        <input 
          v-model.number="row.amount" 
          type="number"
          @change="updateBonus(row)"
          placeholder="è¼¸å…¥é‡‘é¡"
        />
      </template>
      
      <template #payment_date="{ row }">
        <input 
          v-model="row.payment_date" 
          type="date"
          @change="updateBonus(row)"
        />
      </template>
    </DataTable>
    
    <div class="actions">
      <StyledButton @click="saveAll" variant="primary">å„²å­˜æ‰€æœ‰è®Šæ›´</StyledButton>
    </div>
    
    <div class="notice">
      <p><strong>ğŸ’¡ ä½¿ç”¨èªªæ˜ï¼š</strong></p>
      <ul>
        <li>æ­¸å±¬å¹´åº¦ï¼šé¸æ“‡é€™ç­†å¹´çµ‚æ˜¯ç®—åœ¨å“ªä¸€å¹´çš„æˆæœ¬ï¼ˆå¦‚ï¼š2025ï¼‰</li>
        <li>ç™¼æ”¾æ™‚é–“ï¼šå¯¦éš›ç™¼è–ªæ—¥æœŸï¼ˆå¯ä»¥æ˜¯æ¬¡å¹´1æœˆï¼‰</li>
        <li>æˆæœ¬åˆ†æ”¤ï¼šç³»çµ±æœƒæŒ‰å„å®¢æˆ¶çš„å·¥æ™‚æ¯”ä¾‹è‡ªå‹•åˆ†æ”¤å¹´çµ‚çé‡‘</li>
      </ul>
      
      <p><strong>âš ï¸ ç¯„ä¾‹ï¼š</strong></p>
      <p>
        2025å¹´12æœˆæ±ºå®šç™¼å¹´çµ‚ â†’ æ­¸å±¬å¹´åº¦é¸ã€Œ2025ã€<br>
        2026å¹´1æœˆ15æ—¥å¯¦éš›ç™¼æ”¾ â†’ ç™¼æ”¾æ—¥æœŸå¡«ã€Œ2026-01-15ã€<br>
        æŸ¥è©¢ã€Œ2025å¹´å®¢æˆ¶æˆæœ¬ã€â†’ æœƒåŒ…å«å¹´çµ‚åˆ†æ”¤ âœ…
      </p>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { getYearEndBonusSummary, updateYearEndBonus } from '@/api/salary';

const selectedYear = ref(2025);
const bonusData = ref([]);
const summary = ref({});

async function loadBonusData() {
  const response = await getYearEndBonusSummary(selectedYear.value);
  summary.value = response.data;
  bonusData.value = response.data.details;
}

async function updateBonus(row) {
  await updateYearEndBonus(row.bonus_id, {
    amount: row.amount,
    payment_date: row.payment_date
  });
}

onMounted(() => {
  loadBonusData();
});
</script>
```

---

### SalaryItemTypeManagementPage.vueï¼ˆè–ªè³‡é …ç›®è¨­å®šï¼‰

**åŠŸèƒ½ï¼š** ç®¡ç†å“¡æ–°å¢/ç·¨è¼¯è–ªè³‡é …ç›®é¡å‹

```vue
<template>
  <div class="salary-item-management">
    <h2>è–ªè³‡é …ç›®è¨­å®š</h2>
    
    <StyledButton @click="showForm = true">æ–°å¢è–ªè³‡é …ç›®</StyledButton>
    
    <!-- æ–°å¢/ç·¨è¼¯è¡¨å–® -->
    <Modal :show="showForm" title="æ–°å¢è–ªè³‡é …ç›®">
      <form @submit.prevent="submitForm">
        <FormGroup label="é …ç›®ä»£ç¢¼">
          <input v-model="form.item_code" placeholder="å¦‚ï¼šPERFORMANCE" required />
        </FormGroup>
        
        <FormGroup label="é …ç›®åç¨±">
          <input v-model="form.item_name" placeholder="å¦‚ï¼šç¸¾æ•ˆçé‡‘" required />
        </FormGroup>
        
        <FormGroup label="é¡åˆ¥">
          <select v-model="form.category" required>
            <option value="allowance">æ´¥è²¼</option>
            <option value="bonus">çé‡‘</option>
            <option value="deduction">æ‰£æ¬¾</option>
          </select>
        </FormGroup>
        
        <!-- é‡‘é¡å›ºå®šæ€§ -->
        <FormGroup label="é‡‘é¡å›ºå®šæ€§">
          <label>
            <input type="checkbox" v-model="form.is_fixed" />
            æ¯æœˆé‡‘é¡å›ºå®šï¼ˆå¦‚ï¼šäº¤é€šæ´¥è²¼æ¯æœˆ1000å…ƒï¼‰
          </label>
          <p class="hint">ä¸å‹¾é¸ = é‡‘é¡æœƒè®Šå‹•ï¼ˆå¦‚ï¼šç¸¾æ•ˆçé‡‘2000~5000å…ƒæµ®å‹•ï¼‰</p>
        </FormGroup>
        
        <!-- â­ ç¶“å¸¸æ€§çµ¦èˆ‡ï¼ˆå½±éŸ¿æ™‚è–ªè¨ˆç®—ï¼‰-->
        <FormGroup label="ç¶“å¸¸æ€§çµ¦èˆ‡ï¼ˆé‡è¦ï¼ï¼‰">
          <label>
            <input type="checkbox" v-model="form.is_regular_payment" />
            <strong>æ¯æœˆéƒ½ç™¼æ”¾ï¼ˆè¨ˆå…¥æ™‚è–ªåŸºæº–ï¼‰</strong>
          </label>
          <p class="hint warning">
            âš ï¸ å‹¾é¸å¾Œæœƒè¨ˆå…¥æ™‚è–ªè¨ˆç®—ï¼ˆå½±éŸ¿åŠ ç­è²»ï¼‰<br>
            ä¸å‹¾é¸ = å¶çˆ¾ç™¼æ”¾ï¼ˆå¦‚ï¼šå¹´çµ‚çé‡‘ã€ä¸‰ç¯€çé‡‘ï¼‰
          </p>
          <div class="examples">
            <p><strong>æ‡‰è©²å‹¾é¸ï¼š</strong>å…¨å‹¤çé‡‘ã€ç¸¾æ•ˆçé‡‘ï¼ˆæ¯æœˆéƒ½ç™¼ï¼‰ã€å„ç¨®æ´¥è²¼</p>
            <p><strong>ä¸æ‡‰å‹¾é¸ï¼š</strong>å¹´çµ‚çé‡‘ã€ç«¯åˆçé‡‘ã€ä¸­ç§‹çé‡‘ï¼ˆå¹´åº¦æ€§ï¼‰</p>
          </div>
        </FormGroup>
        
        <FormGroup label="æ˜¯å¦å½±éŸ¿å‹å¥ä¿">
          <label>
            <input type="checkbox" v-model="form.affects_labor_insurance" />
            è¨ˆå…¥å‹å¥ä¿æŠ•ä¿é‡‘é¡
          </label>
        </FormGroup>
        
        <StyledButton type="submit">å„²å­˜</StyledButton>
      </form>
    </Modal>
    
    <!-- é …ç›®åˆ—è¡¨ -->
    <DataTable :columns="columns" :data="items">
      <template #is_regular_payment="{ row }">
        <span v-if="row.is_regular_payment" class="badge badge-success">
          ç¶“å¸¸æ€§ï¼ˆè¨ˆå…¥æ™‚è–ªï¼‰
        </span>
        <span v-else class="badge badge-secondary">
          éç¶“å¸¸æ€§
        </span>
      </template>
    </DataTable>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { getSalaryItemTypes, createSalaryItemType } from '@/api/salary';

const showForm = ref(false);
const items = ref([]);
const form = ref({
  item_code: '',
  item_name: '',
  category: 'allowance',
  is_fixed: true,
  is_regular_payment: true,  // â­ é è¨­å‹¾é¸ï¼ˆå¤§éƒ¨åˆ†é …ç›®éƒ½æ˜¯ç¶“å¸¸æ€§ï¼‰
  affects_labor_insurance: true
});

const columns = [
  { key: 'item_name', label: 'é …ç›®åç¨±' },
  { key: 'category', label: 'é¡åˆ¥' },
  { key: 'is_fixed', label: 'é‡‘é¡å›ºå®š' },
  { key: 'is_regular_payment', label: 'ç¶“å¸¸æ€§çµ¦èˆ‡' },
  { key: 'actions', label: 'æ“ä½œ' }
];

onMounted(async () => {
  const response = await getSalaryItemTypes();
  items.value = response.data;
});

async function submitForm() {
  await createSalaryItemType(form.value);
  alert('è–ªè³‡é …ç›®æ–°å¢æˆåŠŸ');
  showForm.value = false;
  // é‡æ–°è¼‰å…¥åˆ—è¡¨...
}
</script>
```

---

## ğŸ“Š å ±è¡¨è¼¸å‡º

### 1. æœˆåº¦è–ªè³‡æ˜ç´°

åŒ…å«ï¼š
- åº•è–ª
- å„é …æ´¥è²¼/çé‡‘æ˜ç´°
- åŠ ç­è²»æ˜ç´°ï¼ˆåˆ†é¡é¡¯ç¤ºï¼‰
- æ‰£æ¬¾æ˜ç´°
- æ‡‰ç™¼/å¯¦ç™¼è–ªè³‡

### 2. å¹´åº¦è–ªè³‡çµ±è¨ˆ

åŒ…å«ï¼š
- å…¨å¹´è–ªè³‡ç¸½é¡
- æœˆåº¦è¶¨å‹¢åœ–
- åŠ ç­è²»çµ±è¨ˆ
- æˆæœ¬åˆ†æ

---

## âš ï¸ æ³¨æ„äº‹é …

1. **è£œä¼‘ä¸å½±éŸ¿å…¨å‹¤**ï¼šè£œä¼‘å‡åˆ¥ï¼ˆleave_type_id = 12ï¼‰ä¸è¨ˆå…¥å…¨å‹¤æ‰£é™¤æ¢ä»¶
2. **åŠ ç­è²»è¨ˆç®—**ï¼šåš´æ ¼éµå®ˆå‹åŸºæ³•å€ç‡ï¼ˆ1.34ã€1.67ã€2.0ã€2.67ç­‰åˆ†æ®µè¨ˆç®—ï¼‰
3. **æ™‚è–ªåŸºæº–**ï¼šå›ºå®šä½¿ç”¨ 240 å°æ™‚è¨ˆç®—ï¼ˆ30å¤© Ã— 8å°æ™‚ï¼‰ï¼Œç¬¦åˆæœˆè–ªåˆ¶æ›ç®—æ¨™æº–
4. **ç¶“å¸¸æ€§çµ¦èˆ‡**ï¼šâ­ æ™‚è–ªè¨ˆç®—ä½¿ç”¨ `is_regular_payment = 1` ç¯©é¸ï¼ŒåŒ…å«ï¼š
   - åº•è–ªï¼ˆå¿…å®šç®—ï¼‰
   - æ¯æœˆéƒ½ç™¼çš„æ´¥è²¼ï¼ˆäº¤é€šã€ä¼™é£Ÿã€é›»è©±ç­‰ï¼‰
   - æ¯æœˆéƒ½ç™¼çš„çé‡‘ï¼ˆå…¨å‹¤ã€ç¸¾æ•ˆç­‰ï¼‰
   - **ä¸åŒ…å«**ï¼šå¹´çµ‚çé‡‘ã€ä¸‰ç¯€çé‡‘ï¼ˆå¶çˆ¾ç™¼æ”¾ï¼‰
5. **éˆæ´»æ€§**ï¼šè–ªè³‡é …ç›®å¯è‡ªç”±æ–°å¢ï¼Œç®¡ç†å“¡åœ¨æ–°å¢æ™‚å‹¾é¸ã€Œæ˜¯å¦ç‚ºç¶“å¸¸æ€§çµ¦èˆ‡ã€
6. **ç¸¾æ•ˆçé‡‘è™•ç†**ï¼šå¦‚æœæ¯æœˆéƒ½ç™¼ï¼ˆé‡‘é¡æµ®å‹•ä¹Ÿå¯ï¼‰ï¼Œæ‡‰å‹¾é¸ã€Œç¶“å¸¸æ€§çµ¦èˆ‡ã€ä»¥æ­£ç¢ºè¨ˆç®—æ™‚è–ª

---

## ğŸ§ª æ¸¬è©¦æ¡ˆä¾‹

### é—œéµæ¥­å‹™é‚è¼¯æ¸¬è©¦ â­

```typescript
/**
 * æ¸¬è©¦1ï¼šè«‹ç—…å‡æ‡‰è©²æ‰£é™¤å…¨å‹¤çé‡‘
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬äº”ç« å ´æ™¯4
 */
test('è«‹ç—…å‡æ‡‰è©²æ‰£é™¤å…¨å‹¤çé‡‘', async () => {
  const userId = 1;
  
  // 1. å“¡å·¥ç”³è«‹ç—…å‡
  await applyLeave({
    user_id: userId,
    leave_type_id: 2,  // ç—…å‡
    start_date: '2025-11-10',
    end_date: '2025-11-10',
    days: 1
  });
  
  // 2. è¨ˆç®—11æœˆè–ªè³‡
  const payroll = await calculateMonthlyPayroll(userId, 2025, 11);
  
  // 3. é©—è­‰å…¨å‹¤çé‡‘ç‚º0
  expect(payroll.has_full_attendance).toBe(false);
  expect(payroll.total_bonuses).toBe(0);  // å…¨å‹¤çé‡‘æ‡‰ç‚º0
  
  console.log('âœ“ ç—…å‡æ­£ç¢ºæ‰£é™¤å…¨å‹¤çé‡‘');
});

/**
 * æ¸¬è©¦2ï¼šè«‹è£œä¼‘ä¸æ‡‰è©²æ‰£é™¤å…¨å‹¤çé‡‘
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬ä¸‰ç« ã€ç¬¬å››ç« 
 */
test('è«‹è£œä¼‘ä¸æ‡‰è©²æ‰£é™¤å…¨å‹¤çé‡‘', async () => {
  const userId = 1;
  
  // 1. å“¡å·¥ä½¿ç”¨è£œä¼‘è«‹å‡
  await applyLeave({
    user_id: userId,
    leave_type_id: 12,  // è£œä¼‘
    start_date: '2025-11-10',
    end_date: '2025-11-10',
    days: 1
  });
  
  // 2. è¨ˆç®—11æœˆè–ªè³‡
  const payroll = await calculateMonthlyPayroll(userId, 2025, 11);
  
  // 3. é©—è­‰å…¨å‹¤çé‡‘æ­£å¸¸ç™¼æ”¾
  expect(payroll.has_full_attendance).toBe(true);
  expect(payroll.total_bonuses).toBeGreaterThan(0);  // å…¨å‹¤çé‡‘æ‡‰æ­£å¸¸ç™¼æ”¾
  
  console.log('âœ“ è£œä¼‘ä¸å½±éŸ¿å…¨å‹¤çé‡‘');
});

/**
 * æ¸¬è©¦3ï¼šæ™‚è–ªè¨ˆç®—æ‡‰åŒ…å«ç¶“å¸¸æ€§çµ¦èˆ‡
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬ä¸‰ç«  3.4ç¯€
 */
test('æ™‚è–ªè¨ˆç®—æ‡‰åŒ…å«æ‰€æœ‰ç¶“å¸¸æ€§çµ¦èˆ‡', async () => {
  const userId = 1;
  
  // 1. è¨­å®šå“¡å·¥è–ªè³‡
  await setEmployeeSalary(userId, {
    base_salary: 35000,
    salary_items: [
      { item_type_id: 1, amount: 2000 },  // å…¨å‹¤çé‡‘ï¼ˆç¶“å¸¸æ€§ï¼‰
      { item_type_id: 2, amount: 1000 },  // äº¤é€šæ´¥è²¼ï¼ˆç¶“å¸¸æ€§ï¼‰
      { item_type_id: 7, amount: 3000 }   // ç¸¾æ•ˆçé‡‘ï¼ˆç¶“å¸¸æ€§ï¼Œé›–ç„¶é‡‘é¡æµ®å‹•ï¼‰
    ]
  });
  
  // 2. è¨ˆç®—æ™‚è–ªæˆæœ¬ç‡
  const hourlyCostRate = await calculateFullHourlyCostRate(userId, 2025, 11);
  
  // 3. é©—è­‰æ™‚è–ªåŒ…å«æ‰€æœ‰ç¶“å¸¸æ€§çµ¦èˆ‡
  const expectedMonthlySalary = 35000 + 2000 + 1000 + 3000;  // 41,000å…ƒ
  const expectedHourlyRate = expectedMonthlySalary / 240;  // ç´„170.83å…ƒ
  
  expect(hourlyCostRate).toBeCloseTo(expectedHourlyRate, 2);
  
  console.log('âœ“ æ™‚è–ªæ­£ç¢ºåŒ…å«æ‰€æœ‰ç¶“å¸¸æ€§çµ¦èˆ‡');
});

/**
 * æ¸¬è©¦4ï¼šåœ‹å®šå‡æ—¥åŠ ç­è²»ç‰¹æ®Šè¨ˆç®—
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬ä¸‰ç«  ç¯„ä¾‹4
 */
test('åœ‹å®šå‡æ—¥åŠ ç­3å°æ™‚æ‡‰çµ¦ä»˜8å°æ™‚å·¥è³‡', async () => {
  const userId = 1;
  const monthlySalary = 35000;
  const hourlyBase = monthlySalary / 240;  // ç´„146å…ƒ
  
  // 1. å“¡å·¥åœ‹æ…¶æ—¥åŠ ç­3å°æ™‚
  await createTimeLog({
    user_id: userId,
    work_date: '2025-10-10',  // åœ‹æ…¶æ—¥
    work_type_id: 7,  // åœ‹å®šå‡æ—¥8å°æ™‚å…§
    hours: 3,
    client_id: '12345678'
  });
  
  // 2. è¨ˆç®—åŠ ç­è²»
  const overtimePay = await calculateHolidayOvertimePay(userId, 3, 7);
  
  // 3. é©—è­‰çµ¦ä»˜8å°æ™‚å·¥è³‡ï¼ˆä¸æ˜¯3å°æ™‚ï¼‰
  const expected = hourlyBase * 8 * 2.0;  // 8å°æ™‚ Ã— 2.0å€
  expect(overtimePay).toBeCloseTo(expected, 2);
  
  // 4. é©—è­‰è£œä¼‘ç”¢ç”Ÿ8å°æ™‚ï¼ˆä¸æ˜¯3å°æ™‚ï¼‰
  const compLeave = await getCompensatoryLeaveBalance(userId);
  expect(compLeave.total_hours).toBe(8.0);  // æ‡‰ç”¢ç”Ÿ8å°æ™‚è£œä¼‘
  
  // 5. é©—è­‰åŠ æ¬Šå·¥æ™‚ç‚º8å°æ™‚ï¼ˆä¸æ˜¯6å°æ™‚ï¼‰
  const timelog = await getTimeLog(userId, '2025-10-10');
  expect(timelog.weighted_hours).toBe(8.0);  // åŠ æ¬Šå·¥æ™‚æ‡‰ç‚º8
  
  console.log('âœ“ åœ‹å®šå‡æ—¥ç‰¹æ®Šè¨ˆç®—æ­£ç¢ºï¼ˆçµ±ä¸€8å°æ™‚ï¼‰');
});

/**
 * æ¸¬è©¦5ï¼šå¹´çµ‚çé‡‘æŒ‰å·¥æ™‚æ¯”ä¾‹åˆ†æ”¤åˆ°å®¢æˆ¶
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬ä¸ƒç« å•é¡Œ7
 */
test('å¹´çµ‚çé‡‘æ‡‰æŒ‰å·¥æ™‚æ¯”ä¾‹åˆ†æ”¤åˆ°å„å®¢æˆ¶', async () => {
  const userId = 1;
  
  // 1. è¨­å®šå¹´çµ‚çé‡‘
  await createYearEndBonus({
    user_id: userId,
    attribution_year: 2025,
    amount: 50000
  });
  
  // 2. æŸ¥è©¢å®¢æˆ¶Aæˆæœ¬ï¼ˆå«å¹´çµ‚ï¼‰
  const clientCost = await calculateClientCost(
    '12345678',  // å®¢æˆ¶A
    '2025-01-01',
    '2025-12-31',
    true  // åŒ…å«å¹´çµ‚çé‡‘åˆ†æ”¤
  );
  
  // 3. é©—è­‰å¹´çµ‚åˆ†æ”¤è¨ˆç®—
  // å‡è¨­å“¡å·¥Aå…¨å¹´ç‚ºå®¢æˆ¶Aå·¥ä½œ240å°æ™‚ï¼Œç¸½å·¥æ™‚1920å°æ™‚
  // å æ¯”ï¼š240 / 1920 = 12.5%
  // åˆ†æ”¤ï¼š50,000 Ã— 12.5% = 6,250å…ƒ
  
  expect(clientCost.cost_breakdown.year_end_bonus).toBeCloseTo(6250, 0);
  
  console.log('âœ“ å¹´çµ‚çé‡‘æŒ‰å·¥æ™‚æ¯”ä¾‹æ­£ç¢ºåˆ†æ”¤');
});

/**
 * æ¸¬è©¦6ï¼šè£œä¼‘FIFOä½¿ç”¨é †åº
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬ä¸‰ç«  3.2ç¯€
 */
test('è£œä¼‘æ‡‰æŒ‰FIFOé †åºä½¿ç”¨', async () => {
  const userId = 1;
  
  // 1. ç”¢ç”Ÿ3ç­†è£œä¼‘ï¼ˆä¸åŒæ—¥æœŸï¼‰
  await generateCompLeave(userId, 4.0, 'log_1', 1.34, '2025-10-05');  // 10/5ç”¢ç”Ÿ4h
  await generateCompLeave(userId, 3.0, 'log_2', 1.67, '2025-10-12');  // 10/12ç”¢ç”Ÿ3h
  await generateCompLeave(userId, 2.0, 'log_3', 1.34, '2025-10-18');  // 10/18ç”¢ç”Ÿ2h
  
  // 2. ä½¿ç”¨4å°æ™‚è£œä¼‘
  await useCompensatoryLeave(userId, 4.0, '2025-10-25');
  
  // 3. é©—è­‰ä½¿ç”¨é †åºï¼ˆFIFOï¼‰
  const remaining = await getCompensatoryLeaveBalance(userId);
  
  // æ‡‰è©²ï¼š
  // - 10/5çš„4hå…¨éƒ¨ç”¨å®Œï¼ˆå‰©0hï¼‰
  // - 10/12çš„3hå‰©3hï¼ˆæœªå‹•ï¼‰
  // - 10/18çš„2hå‰©2hï¼ˆæœªå‹•ï¼‰
  
  const details = remaining.details;
  expect(details.find(d => d.earned_date === '2025-10-05').hours_remaining).toBe(0);
  expect(details.find(d => d.earned_date === '2025-10-12').hours_remaining).toBe(3);
  expect(details.find(d => d.earned_date === '2025-10-18').hours_remaining).toBe(2);
  
  console.log('âœ“ è£œä¼‘FIFOé †åºæ­£ç¢º');
});

/**
 * æ¸¬è©¦7ï¼šæ€§åˆ¥é™åˆ¶é©—è­‰
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬äºŒç«  4ç¯€
 */
test('ç”·æ€§å“¡å·¥ç”³è«‹ç”¢å‡æ‡‰è¢«æ‹’çµ•', async () => {
  const maleUser = { user_id: 1, gender: 'ç”·' };
  
  const data = {
    leave_type_id: 5,  // ç”¢å‡ï¼ˆé™å¥³æ€§ï¼‰
    start_date: '2025-11-20',
    end_date: '2026-01-15',
    days: 56
  };
  
  // æ‡‰è©²æ‹‹å‡ºéŒ¯èª¤
  await expect(applyLeave(data, maleUser))
    .rejects.toMatchObject({
      code: 'GENDER_RESTRICTION_VIOLATED',
      message: expect.stringContaining('ç”¢å‡åƒ…é™å¥³æ€§å“¡å·¥ç”³è«‹')
    });
  
  console.log('âœ“ æ€§åˆ¥é™åˆ¶é©—è­‰æ­£ç¢º');
});

/**
 * æ¸¬è©¦8ï¼šæ”¶æ“šè™Ÿç¢¼ä½µç™¼å®‰å…¨
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬ä¸ƒç« å•é¡Œ4
 */
test('å¤šäººåŒæ™‚é–‹æ”¶æ“šæ‡‰è‡ªå‹•åˆ†é…ä¸åŒè™Ÿç¢¼', async () => {
  // æ¨¡æ“¬2å€‹è«‹æ±‚åŒæ™‚åŸ·è¡Œ
  const [receipt1, receipt2] = await Promise.all([
    generateReceiptNumber('202511'),
    generateReceiptNumber('202511')
  ]);
  
  // é©—è­‰è™Ÿç¢¼ä¸åŒ
  expect(receipt1).not.toBe(receipt2);
  expect(receipt1).toMatch(/^202511-\d{3}$/);
  expect(receipt2).toMatch(/^202511-\d{3}$/);
  
  console.log(`âœ“ ä½µç™¼å®‰å…¨ï¼š${receipt1}, ${receipt2}`);
});

/**
 * æ¸¬è©¦9ï¼šéšæ®µå¿…é ˆæŒ‰é †åºå®Œæˆ
 * å°æ‡‰éœ€æ±‚ï¼šæ¥­å‹™å¯©æŸ¥å ±å‘Š ç¬¬äºŒç«  5ç¯€
 */
test('ä¸å¯è·³ééšæ®µç›´æ¥å®Œæˆå¾ŒçºŒéšæ®µ', async () => {
  const taskId = 123;
  const stage3Id = 3;
  
  // å˜—è©¦ç›´æ¥é–‹å§‹éšæ®µ3ï¼ˆéšæ®µ2æœªå®Œæˆï¼‰
  await expect(startStage(taskId, stage3Id, user))
    .rejects.toMatchObject({
      code: 'STAGE_ORDER_VIOLATION',
      message: expect.stringContaining('è«‹å…ˆå®Œæˆ')
    });
  
  console.log('âœ“ éšæ®µé †åºé©—è­‰æ­£ç¢º');
});

/**
 * æ¸¬è©¦10ï¼šå·¥æ™‚0.5å€æ•¸é©—è­‰
 */
test('å·¥æ™‚å¿…é ˆæ˜¯0.5çš„å€æ•¸', async () => {
  const data = {
    work_date: '2025-11-01',
    hours: 2.3,  // é0.5å€æ•¸
    work_type_id: 1
  };
  
  await expect(createTimeLog(data, user))
    .rejects.toMatchObject({
      code: 'HOURS_PRECISION_ERROR',
      message: expect.stringContaining('0.5çš„å€æ•¸')
    });
  
  console.log('âœ“ å·¥æ™‚ç²¾åº¦é©—è­‰æ­£ç¢º');
});
```

---

**ç›¸é—œæ–‡æª”ï¼š**
- [å‡æœŸç®¡ç†-å®Œæ•´è¦æ ¼](./å‡æœŸç®¡ç†-å®Œæ•´è¦æ ¼.md)
- [å·¥æ™‚ç®¡ç†-å®Œæ•´è¦æ ¼](./å·¥æ™‚ç®¡ç†-å®Œæ•´è¦æ ¼.md)
- [ç®¡ç†æˆæœ¬-å®Œæ•´è¦æ ¼](./ç®¡ç†æˆæœ¬-å®Œæ•´è¦æ ¼.md)

