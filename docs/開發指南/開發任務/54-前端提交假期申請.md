# 開發任務 54：前端提交假期申請串接

**對應規格：** 前端 `docs/開發指南/前端/假期管理-前端規格.md`

**對應手冊：** `docs/使用手冊/功能模組-05-假期管理.md`

## 範圍

將任務 50 的「申請假期 Modal」與任務 53 的 API 串接，實現完整的假期申請流程。

## 前置條件

- 任務 50（UI 骨架）已完成
- 任務 53（申請 API）已完成

## 輸入

- API：`POST /api/v1/leave/applications`
- API：`GET /api/v1/leave/available-types`（可申請假別，依性別過濾）

## 輸出

- 更新 `leaves.html`（加入申請表單提交邏輯）
- 申請成功後刷新列表與餘額

## 功能要求

### 假別下拉選單
- 呼叫 `GET /leave/available-types` 載入可申請假別
- 依性別自動過濾（後端處理）
- 顯示格式：`假別名稱（剩餘 X / 年度 Y）`

### 表單驗證（前端）
- 假別必選：『請選擇假別』
- 起訖日期：『結束日期不可早於開始日期』
- 原因字數：『請勿超過 200 字』

### 天數自動計算
- 根據起訖日期自動計算天數
- 排除週末與國定假日（簡化版可先不排除，顯示自然日數）

### 提交流程
- 送出前禁用按鈕，顯示『提交中…』
- 成功：顯示『已送出審核』，關閉 Modal，刷新列表與餘額
- 失敗：顯示錯誤訊息（欄位錯誤標示於欄位下方）

### 錯誤處理
- 401：導向登入頁
- 409：重疊申請，顯示『申請日期與現有假期重疊』
- 422：餘額不足或其他驗證錯誤，顯示具體訊息

## 驗收標準

- [ ] 假別下拉正確載入並依性別過濾
- [ ] 表單驗證正確執行
- [ ] 提交成功後列表與餘額刷新
- [ ] 錯誤訊息正確顯示
- [ ] 提交按鈕狀態正確管理
- [ ] 已部署並可完整測試假期申請流程







