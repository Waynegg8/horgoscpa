# å¦‚ä½•é–‹ç™¼

**çµ¦ AIï¼š** é–‹ç™¼ä»»ä½•åŠŸèƒ½çš„æ¨™æº–æµç¨‹

---

## ğŸš€ é–‹ç™¼æµç¨‹

### 1. é–±è®€å°æ‡‰çš„å®Œæ•´è¦æ ¼
```
ç”¨æˆ¶èªªï¼š"é–‹ç™¼å®¢æˆ¶ç®¡ç†åŠŸèƒ½"
  â†“
AI é–±è®€ï¼šé–‹ç™¼æŒ‡å—/å®¢æˆ¶ç®¡ç†-å®Œæ•´è¦æ ¼.md
  â†“
ç†è§£ï¼šè³‡æ–™è¡¨ã€APIã€å‰ç«¯çµ„ä»¶ã€æ¥­å‹™é‚è¼¯
  â†“
é–‹å§‹å¯¦ç¾
```

### 2. æŒ‰é †åºå¯¦ç¾

#### æ­¥é©Ÿ1ï¼šå‰µå»ºè³‡æ–™è¡¨
```sql
-- æ ¹æ“šè¦æ ¼æ–‡æª”ä¸­çš„ CREATE TABLE
-- è¤‡è£½è²¼ä¸Šå³å¯
```

#### æ­¥é©Ÿ2ï¼šå¯¦ç¾å¾Œç«¯
```
1. Repository å±¤ï¼ˆè³‡æ–™å­˜å–ï¼‰
2. Service å±¤ï¼ˆæ¥­å‹™é‚è¼¯ï¼‰
3. Route å±¤ï¼ˆAPI ç«¯é»ï¼‰
```

#### æ­¥é©Ÿ3ï¼šå¯¦ç¾å‰ç«¯
```
1. API Serviceï¼ˆèª¿ç”¨å¾Œç«¯ï¼‰
2. Page çµ„ä»¶ï¼ˆé é¢ï¼‰
3. å­çµ„ä»¶ï¼ˆè¡¨å–®ã€åˆ—è¡¨ç­‰ï¼‰
```

#### æ­¥é©Ÿ4ï¼šæ¸¬è©¦
```
1. æ¸¬è©¦ API ç«¯é»
2. æ¸¬è©¦æ¬Šé™æ§åˆ¶
3. æ¸¬è©¦å‰ç«¯åŠŸèƒ½
```

---

## ğŸ“ é …ç›®çµæ§‹

### å¾Œç«¯ï¼ˆCloudflare Workersï¼‰
```
timesheet-api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ clients.ts
â”‚   â”‚   â”œâ”€â”€ timelogs.ts
â”‚   â”‚   â”œâ”€â”€ leave.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ClientService.ts
â”‚   â”‚   â”œâ”€â”€ TimeLogService.ts
â”‚   â”‚   â””â”€â”€ LeaveService.ts
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ ClientRepository.ts
â”‚   â”‚   â”œâ”€â”€ TimeLogRepository.ts
â”‚   â”‚   â””â”€â”€ LeaveRepository.ts
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â””â”€â”€ error.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ wrangler.toml
â””â”€â”€ schema.sql
```

### å‰ç«¯ï¼ˆVue.jsï¼‰
```
src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ ClientsPage.vue
â”‚   â”œâ”€â”€ TimesheetPage.vue
â”‚   â”œâ”€â”€ LeavePage.vue
â”‚   â””â”€â”€ DashboardPage.vue
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ StyledButton.vue
â”‚   â”‚   â”œâ”€â”€ StyledInput.vue
â”‚   â”‚   â””â”€â”€ Modal.vue
â”‚   â””â”€â”€ clients/
â”‚       â”œâ”€â”€ ClientList.vue
â”‚       â””â”€â”€ ClientForm.vue
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ clients.js
â”‚   â”œâ”€â”€ timelogs.js
â”‚   â””â”€â”€ leave.js
â”œâ”€â”€ router/
â”‚   â””â”€â”€ index.js
â””â”€â”€ App.vue
```

---

## ğŸ”§ å¯¦ç¾è¦ç¯„

### å¾Œç«¯ä¸‰å±¤æ¶æ§‹

#### Repository å±¤ï¼ˆè³‡æ–™å­˜å–ï¼‰
```typescript
// åªè² è²¬ SQL æ“ä½œ
class ClientRepository {
  async findAll(filters) {
    // åŸ·è¡Œ SQL
  }
  async create(data) {
    // INSERT
  }
}
```

#### Service å±¤ï¼ˆæ¥­å‹™é‚è¼¯ï¼‰
```typescript
// è² è²¬é©—è­‰ã€æ¥­å‹™è¦å‰‡ã€æ¬Šé™
class ClientService {
  async getClients(filters, user) {
    // æ¬Šé™éæ¿¾
    if (!user.is_admin) {
      filters.assignee_user_id = user.user_id;
    }
    return await this.repository.findAll(filters);
  }
  
  async createClient(data, userId) {
    // é©—è­‰
    this.validate(data);
    // æª¢æŸ¥å”¯ä¸€æ€§
    // å‰µå»º
  }
}
```

#### Route å±¤ï¼ˆAPI ç«¯é»ï¼‰
```typescript
// åªè² è²¬æ¥æ”¶è«‹æ±‚ã€èª¿ç”¨ Serviceã€è¿”å›éŸ¿æ‡‰
app.get('/api/v1/clients', authMiddleware, async (c) => {
  const service = new ClientService(c.env.DB);
  const result = await service.getClients(c.req.query(), c.get('user'));
  return c.json(successResponse(result));
});
```

---

## ğŸ“ å…±ç”¨è¦ç¯„

### API éŸ¿æ‡‰æ ¼å¼
```json
// æˆåŠŸ
{
  "success": true,
  "data": { ... }
}

// éŒ¯èª¤
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "éŒ¯èª¤è¨Šæ¯"
  }
}
```

### æ¬Šé™æ§åˆ¶
```typescript
// å‰ç«¯è·¯ç”±
{ path: '/admin/*', meta: { requireAdmin: true } }

// å¾Œç«¯ API
app.post('/api/v1/admin/*', requireAdmin, handler);

// Service å±¤è³‡æ–™éæ¿¾
if (!user.is_admin) {
  filters.user_id = user.user_id;
}
```

### éŒ¯èª¤è™•ç†
```typescript
throw new ValidationError('è¨Šæ¯');  // 422
throw new NotFoundError('è¨Šæ¯');    // 404
throw new ConflictError('è¨Šæ¯');    // 409
throw new ForbiddenError('è¨Šæ¯');   // 403
```

---

## ğŸ¯ é–‹ç™¼æª¢æŸ¥æ¸…å–®

é–‹ç™¼ä»»ä½•åŠŸèƒ½å‰ï¼Œç¢ºèªï¼š

- [ ] å·²é–±è®€å°æ‡‰çš„å®Œæ•´è¦æ ¼æ–‡æª”
- [ ] ç†è§£è³‡æ–™è¡¨çµæ§‹
- [ ] ç†è§£ API ç«¯é»
- [ ] ç†è§£æ¬Šé™æ§åˆ¶è¦å‰‡
- [ ] ç†è§£æ¥­å‹™é‚è¼¯æµç¨‹

å¯¦ç¾å®Œæˆå¾Œï¼Œç¢ºèªï¼š

- [ ] è³‡æ–™è¡¨å·²å‰µå»ºï¼Œç´¢å¼•å·²å»ºç«‹
- [ ] API ç«¯é»å·²å¯¦ç¾ï¼Œæ¸¬è©¦é€šé
- [ ] æ¬Šé™æ§åˆ¶å·²å¯¦ç¾ï¼ˆç®¡ç†å“¡/å“¡å·¥ï¼‰
- [ ] å‰ç«¯é é¢å·²å¯¦ç¾ï¼Œå¯ä»¥ä½¿ç”¨
- [ ] éŒ¯èª¤è™•ç†å®Œæ•´
- [ ] é©—è­‰è¦å‰‡æ­£ç¢º

---

## ğŸ“š å®Œæ•´è¦æ ¼æ–‡æª”æ¸…å–®

### æ ¸å¿ƒåŠŸèƒ½
- [å®¢æˆ¶ç®¡ç†-å®Œæ•´è¦æ ¼.md](./å®¢æˆ¶ç®¡ç†-å®Œæ•´è¦æ ¼.md)
- [å·¥æ™‚ç®¡ç†-å®Œæ•´è¦æ ¼.md](./å·¥æ™‚ç®¡ç†-å®Œæ•´è¦æ ¼.md)
- [å‡æœŸç®¡ç†-å®Œæ•´è¦æ ¼.md](./å‡æœŸç®¡ç†-å®Œæ•´è¦æ ¼.md)
- [ä»»å‹™ç®¡ç†-å®Œæ•´è¦æ ¼.md](./ä»»å‹™ç®¡ç†-å®Œæ•´è¦æ ¼.md)

### ç³»çµ±è¨­å®šï¼ˆç®¡ç†å“¡ï¼‰
- [æ¥­å‹™è¦å‰‡-å®Œæ•´è¦æ ¼.md](./æ¥­å‹™è¦å‰‡-å®Œæ•´è¦æ ¼.md)
- [å“¡å·¥ç®¡ç†-å®Œæ•´è¦æ ¼.md](./å“¡å·¥ç®¡ç†-å®Œæ•´è¦æ ¼.md)

### å…±ç”¨è¦ç¯„
- [å…±ç”¨è¦ç¯„.md](./å…±ç”¨è¦ç¯„.md) - APIæ ¼å¼ã€æ¬Šé™ã€éŒ¯èª¤è™•ç†ç­‰

---

**AI é–‹ç™¼æ™‚åªéœ€è¦é–±è®€"é–‹ç™¼æŒ‡å—"ç›®éŒ„ä¸‹çš„æ–‡æª”å³å¯ï¼**

