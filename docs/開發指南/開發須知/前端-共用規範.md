### 前端共用規範（純 HTML + 共用 CSS + 原生 JS）

本規範定義頁面骨架、元件化策略、CSS 命名與變數、RWD 斷點、可存取性、效能與內容資料來源的統一要求。

### 元件化策略（無框架）
- **HTML 模板與片段（預設）**：
  - 可在 `templates/partials/` 放置可重用片段（如導航列、頁尾、側欄）。
  - 以極小 JS 工具（置於 `assets/js/components/`）動態載入片段至指定容器，以便全站共用與一致更新。
  - 載入函式應支援失敗回退與快取（避免頻繁請求）。
- **原生 Web Components（選擇性）**：
  - 僅在需要互動與狀態時使用，元件名稱使用 `x-` 前綴（例如 `x-navbar`）。
  - 置於 `assets/js/components/<domain>/`，提供初始化與銷毀（`connectedCallback` / `disconnectedCallback`）。
  - 元件可透過 `data-*` 或屬性接收設定；對外 API 僅暴露必要方法。

### CSS 組織與命名
- **變數與設計 Tokens**（置於 `assets/css/common.css` 的 `:root`）：
  - 色彩：`--color-primary`、`--color-secondary`、`--color-bg`、`--color-text`
  - 字體：`--font-sans`、`--font-mono`
  - 間距：`--space-1`（4px）、`--space-2`（8px）、`--space-3`（12px）、`--space-4`（16px）、`--space-5`（24px）、`--space-6`（32px）
  - 尺寸：`--radius-1`、`--radius-2`、`--shadow-1` 等
- **命名規則**：採 BEM（`block__element--modifier`），避免深層巢狀（≤ 3 層）。
- **檔案結構**：
  - `assets/css/common.css`：重置、排版、變數與共用元件的基礎樣式。
  - 頁面/模組樣式各自獨立（例如 `navbar.css`、`footer.css`、`index-style.css`）。
  - 禁止行內樣式；不得使用未定義 Token 的隨意顏色或尺寸。
- **載入順序**：先載入 `common.css`，再載入頁面/模組樣式檔。

### 響應式設計（RWD）
- **斷點建議**：
  - `--bp-sm: 480px`
  - `--bp-md: 768px`
  - `--bp-lg: 1024px`
  - `--bp-xl: 1280px`
- **寫法範例**：
```css
@media (min-width: 768px) { /* md */
  .layout__sidebar { display: block; }
}
```

### 頁面標準骨架
- `<head>` 必含：`<meta charset="utf-8">`、`<meta name="viewport" content="width=device-width, initial-scale=1">`、`<meta name="description">`、favicon 與 CSS 載入。
- `<body>`：
  - 首屏優化：關鍵內容就地渲染。
  - JS 採 `defer`，盡量放在文件底部；模組化腳本需以 `type="module"`。
- 例：
```html
<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>頁面標題</title>
    <link rel="stylesheet" href="/assets/css/common.css" />
    <link rel="stylesheet" href="/assets/css/navbar.css" />
  </head>
  <body>
    <header id="site-navbar"></header>
    <main>內容</main>
    <footer id="site-footer"></footer>
    <script defer type="module" src="/assets/js/components/bootstrap.js"></script>
  </body>
</html>
```

### 可存取性（a11y）
- 圖像須有有意義的 `alt`；互動元件具備可見焦點（`focus-visible`）。
- 表單欄位需 `label for` 對應；錯誤訊息以 ARIA 方式關聯。
- 顏色對比符合 WCAG AA；避免純色作為狀態唯一指示。

### 效能與資產
- 影像：提供正確 `width/height`、使用 `loading="lazy"`、優先選用 WebP/AVIF，儲存於 `assets/images/`。
- 字型：使用 `woff2`，以 `font-display: swap`；盡量減少字重。
- 快取：對靜態資源採長快取；對 HTML 不使用侵略性快取。

### 內容與資料來源
- 內容檔放置於 `content/**`，結構化資料放於 `assets/data/*.json`（例如 `assets/data/posts.json`）。
- 模板（如部落格文章頁）使用 `templates/post.html`，由 JS 掛載資料並渲染。

### 表單與驗證
- 前端先行驗證（必填、格式），友善顯示錯誤；不得阻止後端再次驗證。
- 錯誤訊息簡短明確（繁體中文），位置緊鄰欄位並於頂部摘要列出。

### 設計 Token 範例（置於 common.css）
```css
:root {
  --color-primary: #1f6feb;
  --color-secondary: #2ea043;
  --color-bg: #ffffff;
  --color-text: #0f172a;
  --space-1: 4px; --space-2: 8px; --space-3: 12px; --space-4: 16px; --space-5: 24px; --space-6: 32px;
  --radius-1: 4px; --radius-2: 8px;
}
```


