### 開發清單（任務索引｜小步、可部署）

說明：每個任務只有「編號 + 名稱」，並「指向需閱讀的前端/後端規格檔」。每一項任務皆以「可立即部署並看到成果」為目標（含部署驗證）。

— 初始化與基礎 —
00. 初始化 Cloudflare Pages/Workers 預覽部署（含部署驗證） — 參考：`docs/開發指南/開發須知/部署-與-環境.md` — [任務說明](../開發任務/00-初始化-Cloudflare-部署.md)
01. 建立首頁導覽與共用導覽/頁尾片段（含部署驗證） — 前端：`docs/開發指南/前端/系統基礎-前端規格.md` — [任務說明](../開發任務/01-共用導覽與頁尾.md)
02. Cloudflare API Token 與 wrangler 登入（含驗證） — [任務說明](../開發任務/02-Cloudflare-API-Token-與-wrangler-登入.md)
03. Worker 路徑路由（/login 與 /internal/* 代理內部系統）（含部署驗證） — [任務說明](../開發任務/03-Worker-路徑路由-代理內部系統.md)
04. Connect to Git 直連（Cloudflare Pages）（含部署驗證） — [任務說明](../開發任務/04-連結Git並自動部署-Pages.md)

05. 建立 D1 資料庫與綁定（含遷移） — 參考：`docs/開發指南/開發須知/資料庫-D1-規範.md` — [任務說明](../開發任務/05-D1-資料庫-建立與綁定.md)

— 系統基礎（登入/權限） —
手冊對應：`docs/使用手冊/功能模組-14-員工帳號管理.md`、`docs/使用手冊/參數配置-08-系統基礎參數與權限總覽.md`
10. 登入頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/系統基礎-前端規格.md`; 後端：`docs/開發指南/後端/系統基礎-後端規格.md`
11. `POST /auth/login` API（含部署驗證） — 後端：`docs/開發指南/後端/系統基礎-後端規格.md` — [任務說明](../開發任務/11-auth-login-API.md)
12. 前端串接登入送出與導向（含部署驗證） — 前端：`docs/開發指南/前端/系統基礎-前端規格.md` — [任務說明](../開發任務/12-前端登入-送出與導向.md)
13. `GET /auth/me` 與受保護頁導向（含部署驗證） — 前端：`docs/開發指南/前端/系統基礎-前端規格.md`; 後端：`docs/開發指南/後端/系統基礎-後端規格.md` — [任務說明](../開發任務/13-auth-me-保護頁.md)
14. 系統設定頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/系統基礎-前端規格.md` — [任務說明](../開發任務/14-系統設定-前端-UI-骨架.md)
15. 系統設定 API（含遷移與權限） — 後端：`docs/開發指南/後端/系統基礎-後端規格.md` — [任務說明](../開發任務/15-系統設定-API.md)
16. 系統設定前端串接（含部署驗證） — 前端：`docs/開發指南/前端/系統基礎-前端規格.md` — [任務說明](../開發任務/16-系統設定-前端-串接.md)
17. 內部系統樣式統一（表單/按鈕/字體尺寸標準化） — 前端：`docs/開發指南/前端/系統基礎-前端規格.md` — [任務說明](../開發任務/17-內部系統-樣式統一.md)

— 客戶管理 —
手冊對應：`docs/使用手冊/功能模組-02-客戶管理.md`
20. 客戶列表頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/客戶管理-前端規格.md`
21. `GET /clients` 列表 API（含部署驗證） — 後端：`docs/開發指南/後端/客戶管理-後端規格.md`
22. 前端串接客戶列表渲染（含部署驗證） — 前端：`docs/開發指南/前端/客戶管理-前端規格.md`; 後端：`docs/開發指南/後端/客戶管理-後端規格.md`
23. `POST /clients` 建立 API（含部署驗證） — 後端：`docs/開發指南/後端/客戶管理-後端規格.md` — [任務說明](../開發任務/23-建立客戶-API-與遷移.md)
24. 前端新增客戶表單串接（含部署驗證） — 前端：`docs/開發指南/前端/客戶管理-前端規格.md`
25. `GET /clients/:id` 客戶詳情 API（含部署驗證） — 後端：`docs/開發指南/後端/客戶管理-後端規格.md` — [任務說明](../開發任務/25-客戶詳情-API.md)
26. `PUT /clients/:id` 編輯客戶 API（含部署驗證） — 後端：`docs/開發指南/後端/客戶管理-後端規格.md` — [任務說明](../開發任務/26-編輯客戶-API.md)
27. `DELETE /clients/:id` 刪除客戶 API（含部署驗證） — 後端：`docs/開發指南/後端/客戶管理-後端規格.md` — [任務說明](../開發任務/27-刪除客戶-API.md)
28. 標籤管理 API（CRUD）（含部署驗證） — 後端：`docs/開發指南/後端/客戶管理-後端規格.md` — [任務說明](../開發任務/28-標籤管理-API.md)
29. `POST /clients/batch-assign` 批量分配負責人 API（含部署驗證） — 後端：`docs/開發指南/後端/客戶管理-後端規格.md` — [任務說明](../開發任務/29-批量分配負責人-API.md)
30. 客戶管理前端完整實作（含部署驗證） — 前端：`docs/開發指南/前端/客戶管理-前端規格.md` — [任務說明](../開發任務/30-客戶管理-前端完整實作.md)

— 任務管理 —
手冊對應：`docs/使用手冊/功能模組-06-任務管理.md`
31. 任務列表頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/任務管理-前端規格.md`
32. `GET /tasks` 列表 API（含部署驗證） — 後端：`docs/開發指南/後端/任務管理-後端規格.md`
33. 前端串接任務列表渲染（含部署驗證） — 前端：`docs/開發指南/前端/任務管理-前端規格.md`; 後端：`docs/開發指南/後端/任務管理-後端規格.md`
34. `POST /tasks` 建立 API（含部署驗證） — 後端：`docs/開發指南/後端/任務管理-後端規格.md`
35. 前端新增任務表單串接（含部署驗證） — 前端：`docs/開發指南/前端/任務管理-前端規格.md`

— 工時管理 —
手冊對應：`docs/使用手冊/功能模組-03-工時管理.md`
40. 工時列表頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/工時管理-前端規格.md`
41. `GET /timesheets` 列表 API（含部署驗證） — 後端：`docs/開發指南/後端/工時管理-後端規格.md`
42. 前端串接工時列表渲染（含部署驗證） — 前端：`docs/開發指南/前端/工時管理-前端規格.md`; 後端：`docs/開發指南/後端/工時管理-後端規格.md`
43. `POST /timesheets` 新增 API（含部署驗證） — 後端：`docs/開發指南/後端/工時管理-後端規格.md`
44. 前端新增工時表單串接（含部署驗證） — 前端：`docs/開發指南/前端/工時管理-前端規格.md`
45. 工時表優化與修復（客戶連動、智能提示、總計計算、國定假日整合）（含部署驗證） — 前端：`docs/開發指南/前端/工時管理-前端規格.md` — [任務說明](../開發任務/45-工時表-優化與修復.md)

— 假期管理 —
手冊對應：`docs/使用手冊/功能模組-05-假期管理.md`、（補休整併）`docs/使用手冊/功能模組-04-補休管理.md`
參考：`docs/使用手冊/參數配置-01-勞基法相關參數.md`、`docs/使用手冊/參數配置-02-補休相關參數.md`、`docs/使用手冊/參數配置-06-國定假日參數.md`、`docs/使用手冊/計算邏輯-01-工時與補休計算.md`、`docs/使用手冊/計算邏輯-02-補休使用與到期計算.md`、`docs/使用手冊/計算邏輯-03-特休年資計算.md`
50. 假期申請頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/假期管理-前端規格.md`
51. `GET /leaves` 與餘額 API（含部署驗證） — 後端：`docs/開發指南/後端/假期管理-後端規格.md` — [任務說明](../開發任務/51-假期餘額-API.md)
52. 前端串接假期列表/餘額（含部署驗證） — 前端：`docs/開發指南/前端/假期管理-前端規格.md`; 後端：`docs/開發指南/後端/假期管理-後端規格.md`
53. `POST /leaves` 申請 API（含部署驗證） — 後端：`docs/開發指南/後端/假期管理-後端規格.md`
54. 前端提交假期申請串接（含部署驗證） — 前端：`docs/開發指南/前端/假期管理-前端規格.md`
55. 取消補班制度與更新2025-2026年假日資料（含部署驗證） — 後端：`docs/開發指南/後端/假期管理-後端規格.md` — [任務說明](../開發任務/55-取消補班制度與更新假日資料.md)

— 收據收款 —
手冊對應：`docs/使用手冊/功能模組-07-收據收款管理.md`
60. 收據列表頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/收據收款-前端規格.md`
61. `GET /receipts` 列表 API（含部署驗證） — 後端：`docs/開發指南/後端/收據收款-後端規格.md`
62. 前端串接收據列表渲染（含部署驗證） — 前端：`docs/開發指南/前端/收據收款-前端規格.md`; 後端：`docs/開發指南/後端/收據收款-後端規格.md`
63. `POST /receipts` 建立 API（含部署驗證） — 後端：`docs/開發指南/後端/收據收款-後端規格.md`
64. 前端新增收據表單串接（含部署驗證） — 前端：`docs/開發指南/前端/收據收款-前端規格.md`

— 薪資管理 —
手冊對應：`docs/使用手冊/功能模組-15-薪資管理.md`
參考：`docs/使用手冊/參數配置-03-薪資相關參數.md`、`docs/使用手冊/計算邏輯-04-月薪制加班費計算.md`、`docs/使用手冊/計算邏輯-05-全勤獎金判定.md`、`docs/使用手冊/計算邏輯-06-月度薪資完整計算.md`
70. 薪資總覽頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/薪資管理-前端規格.md`
71. 薪資預覽計算 API（含部署驗證） — 後端：`docs/開發指南/後端/薪資管理-後端規格.md` — [任務說明](../開發任務/71-薪資預覽-API.md)
72. 前端串接薪資預覽（含部署驗證） — 前端：`docs/開發指南/前端/薪資管理-前端規格.md`; 後端：`docs/開發指南/後端/薪資管理-後端規格.md`
73. 月結產製 API（含部署驗證） — 後端：`docs/開發指南/後端/薪資管理-後端規格.md` — [任務說明](../開發任務/73-薪資月結-API.md)
74. 前端月結提交串接（含部署驗證） — 前端：`docs/開發指南/前端/薪資管理-前端規格.md`

— 管理成本分配 —
手冊對應：`docs/使用手冊/功能模組-13-管理成本分配.md`
參考：`docs/使用手冊/計算邏輯-07-客戶成本分析計算.md`
80. 成本分配頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/管理成本-前端規格.md`
81. 成本資料 API（含部署驗證） — 後端：`docs/開發指南/後端/管理成本-後端規格.md` — [任務說明](../開發任務/81-成本資料-API.md)
82. 前端串接成本資料（含部署驗證） — 前端：`docs/開發指南/前端/管理成本-前端規格.md`; 後端：`docs/開發指南/後端/管理成本-後端規格.md`

— 報表分析 —
手冊對應：`docs/使用手冊/功能模組-16-報表查詢與系統設定.md`
90. 報表首頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/報表分析-前端規格.md`
91. 報表查詢 API（含部署驗證） — 後端：`docs/開發指南/後端/報表分析-後端規格.md` — [任務說明](../開發任務/91-報表查詢-API.md)
92. 前端串接報表渲染（含部署驗證） — 前端：`docs/開發指南/前端/報表分析-前端規格.md`; 後端：`docs/開發指南/後端/報表分析-後端規格.md`

— 附件系統 —
手冊對應：`docs/使用手冊/功能模組-11-附件系統.md`
100. 附件列表頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/附件系統-前端規格.md`
101. 附件列表 API（含部署驗證） — 後端：`docs/開發指南/後端/附件系統-後端規格.md`
102. 前端串接附件列表（含部署驗證） — 前端：`docs/開發指南/前端/附件系統-前端規格.md`; 後端：`docs/開發指南/後端/附件系統-後端規格.md`
103. 上傳簽名 API（含部署驗證） — 後端：`docs/開發指南/後端/附件系統-後端規格.md` — [任務說明](../開發任務/103-附件-上傳簽名-API.md)
104. 前端上傳流程串接（含部署驗證） — 前端：`docs/開發指南/前端/附件系統-前端規格.md`

— 知識管理 —
手冊對應：`docs/使用手冊/功能模組-09-知識管理（內部知識庫）.md`
110. 知識庫列表頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/知識管理-前端規格.md`
111. 知識庫列表 API（含部署驗證） — 後端：`docs/開發指南/後端/知識管理-後端規格.md`
112. 前端串接知識列表（含部署驗證） — 前端：`docs/開發指南/前端/知識管理-前端規格.md`; 後端：`docs/開發指南/後端/知識管理-後端規格.md`

— 服務生命週期管理 —
手冊對應：`docs/使用手冊/功能模組-12-服務生命週期管理.md`
120. 生命週期設定頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/服務生命週期管理-前端規格.md`
121. 生命週期設定 API（含部署驗證） — 後端：`docs/開發指南/後端/服務生命週期管理-後端規格.md` — [任務說明](../開發任務/121-生命週期設定-API.md)
122. 前端串接生命週期設定（含部署驗證） — 前端：`docs/開發指南/前端/服務生命週期管理-前端規格.md`; 後端：`docs/開發指南/後端/服務生命週期管理-後端規格.md`

— 外部內容管理（官網 CMS） —
手冊對應：`docs/使用手冊/功能模組-08-外部內容管理（官網CMS）.md`
130. CMS 列表頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/外部內容管理-前端規格.md`
131. CMS 列表 API（含部署驗證） — 後端：`docs/開發指南/後端/外部內容管理-後端規格.md`
132. 前端串接 CMS 列表（含部署驗證） — 前端：`docs/開發指南/前端/外部內容管理-前端規格.md`; 後端：`docs/開發指南/後端/外部內容管理-後端規格.md`

— 儀表板 —
手冊對應：`docs/使用手冊/功能模組-01-儀表板.md`
140. 儀表板 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/儀表板-前端規格.md`
141. 儀表板指標 API（含部署驗證） — 後端：`docs/開發指南/後端/儀表板-後端規格.md`
142. 前端串接儀表板指標（含部署驗證） — 前端：`docs/開發指南/前端/儀表板-前端規格.md`; 後端：`docs/開發指南/後端/儀表板-後端規格.md`

— 業務規則（自動化） —
手冊對應：`docs/使用手冊/功能模組-10-業務規則管理.md`
參考：`docs/使用手冊/自動化-時間表總覽與好處.md`、`docs/使用手冊/自動化-每日自動執行.md`、`docs/使用手冊/自動化-每週自動執行.md`、`docs/使用手冊/自動化-每月自動執行.md`、`docs/使用手冊/自動化-每季自動執行.md`、`docs/使用手冊/自動化-每年自動執行.md`、`docs/使用手冊/自動化-特殊時間點自動執行.md`
150. 自動化設定頁 UI 骨架（含部署驗證） — 前端：`docs/開發指南/前端/業務規則-前端規格.md`
151. 自動化規則 API（含部署驗證） — 後端：`docs/開發指南/後端/業務規則-後端規格.md` — [任務說明](../開發任務/151-自動化規則-API.md)
152. 前端串接自動化規則（含部署驗證） — 前端：`docs/開發指南/前端/業務規則-前端規格.md`; 後端：`docs/開發指南/後端/業務規則-後端規格.md`

備註：
- 每項任務均以「可立即部署」為目標，提交前請依《AI-開發須知.md》完成自我測試與部署驗證。
- 「補休管理」相關需求併入「假期管理」。參數與系統設定屬「系統基礎」，同時可參考 `docs/使用手冊/參數配置-*.md` 與各模組使用手冊條目。

## 任務範圍
- ✅ 客戶下拉選單正常顯示所有客戶
- ✅ 工時類型選擇更友好（先輸入後提示）
- ✅ 日期標籤正確顯示假日類型
- ✅ 工時總計準確計算並自動更新
- ✅ 統一儲存按鈕提升填寫效率
- ✅ UI佈局合理，按鈕在同一行
- ✅ 每日工時完整性視覺提醒
- ✅ 工時類型時數限制正確
- ✅ 加班順序邏輯強制執行
- ✅ 刪除列正確調用後端API
- ✅ 完整性顯示改為「缺X小時」更直觀
- ✅ 國定假日正確顯示標籤
- ✅ 完整性檢查不檢查週末和假日（時序修復）
- ✅ 國定假日優先級最高（覆蓋週末顯示）
- ✅ 輸入時即時驗證（立即阻止不允許的組合）
- ✅ 假期記錄同步顯示（含假別）
- ✅ 請假記錄日期循環修復（不再擴散到其他日期）
- ✅ API 欄位兼容性（type vs leave_type）
- ✅ 導航後完整性檢查正確（使用 isDataLoaded 標記）
- ✅ 工時類型選擇即時驗證（防止先填數字後選不允許的類型）
- ✅ 完整性檢查在任何導航後都能正確顯示
- ✅ 重寫 timesheets.html 為無 JS 依賴的靜態版本
- ✅ 刪除有問題的 timesheets.js 腳本

- ✅ 修復 timesheets.js 的所有已知問題（客戶載入、工時類型驗證、總計計算、統一儲存、假日整合等）
- ✅ 恢復 timesheets.html 的完整動態功能，使用修復後的 js 腳本
- ✅ 確保整個工時管理模組可直接上線部署


