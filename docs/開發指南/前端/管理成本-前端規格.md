# 管理成本｜前端規格（UI/UX）

> 僅包含 UI、UX、畫面顯示邏輯與前端驗證；完全省略後端與資料庫細節。

---

## 1. 目標與範圍
- 管理員維護管理成本項目與月度成本，檢視分攤與分析報表
- 員工無權限（整頁隱藏；若直入路由顯示『您沒有權限存取此模組』訊息條）

---

## 2. 導覽與頁面結構（管理員）
- 單一「管理成本」設定頁，使用分頁籤（Tabs）：
  - 成本項目設定
  - 月度成本記錄
  - 成本分析
- 全域操作
  - 查詢月份（預設=本月）
  - 匯出（CSV/PDF，依產品策略）

---

## 3. 成本項目設定（Tab 1）
- 列表欄位：
  - 成本代碼、成本名稱、類別（固定/變動）、分攤方式（按人頭/按工時/按營收）、描述、狀態（啟用/停用）
- 操作：新增、編輯、刪除（軟刪）、啟用/停用、排序
- 表單欄位：
  - 成本代碼（必填，最長 20 字，英數大寫與底線）
  - 成本名稱（必填，最長 50 字）
  - 類別（必選：固定/變動）
  - 分攤方式（必選：按人頭/按工時/按營收）
  - 描述（選填，最長 200 字）
- 前端驗證：
  - 代碼格式：僅 A-Z、0-9、_；長度 ≤ 20
  - 名稱必填 ≤ 50；描述 ≤ 200
- 互動：
  - 刪除需二次確認；若該月份已有記錄，顯示提醒『此項目已有月度紀錄，刪除僅影響後續月份』

---

## 4. 月度成本記錄（Tab 2）
- 篩選：年/月（必填）
- 列表欄位：項目名稱、金額、備註、錄入人、錄入時間、更新時間
- 匯總卡片：本月總管理成本（固定/變動拆分）
- 新增/編輯對話框欄位：
  - 成本項目（必選）
  - 年（必填）、月（必填）
  - 金額（必填，正數，最多兩位小數）
  - 備註（選填，最長 100 字）
- 前端驗證：
  - 年/月必填且有效；金額 > 0 且 ≤ 上限（例如 1e9）
  - 同一項目同年月不可重複（顯示『該月份已有此項目記錄』）
- 互動：
  - 儲存成功後 Toast『已儲存』，列表與匯總即時更新

---

## 5. 成本分析（Tab 3）
- 篩選：年/月（必填）
- 顯示：
  - 匯總：本月總成本、員工人數、每人分攤、每小時管理成本（若有 per_hour 設定則顯示）
  - 結構：
    - 類別圓餅圖（固定 vs 變動）
    - 項目拆分表（項目、金額、占比）
  - 影響分析：
    - 時薪成本率對比（不含管理成本 vs 含管理成本）
- 警示（訊息條）：
  - 『本月份未輸入管理成本，報表僅顯示薪資成本』
  - 『僅輸入部分項目：RENT, INTERNET... 建議補齊以提高準確度』

---

## 6. 權限與狀態顯示
- 非管理員：整頁不渲染；顯示提示訊息條 + 返回首頁按鈕
- 請求錯誤：顯示後端 message；未知錯誤顯示『操作失敗，請稍後再試』

---

## 7. 無障礙與可用性
- 表單 Enter 送出、Esc 關閉對話框
- 開啟對話框自動聚焦第一欄位
- 表單驗證失敗時聚焦第一個錯誤欄位

---

## 8. 業務需求對應（覆蓋檢核）
- 角色：員工無權限；管理員可設定成本項目、記錄月度成本、查看報表
- 成本項目欄位：代碼、名稱、類別、分攤方式、描述、狀態
- 月度記錄：年/月、金額、備註；同項同月唯一
- 分攤與分析呈現：每人/每小時管理成本、結構拆分、影響分析與警示

