## 系統基礎－前端規格

對應使用手冊：`docs/使用手冊/功能模組-14-員工帳號管理.md`、`docs/使用手冊/功能模組-16-報表查詢與系統設定.md`、`docs/使用手冊/參數配置-08-系統基礎參數與權限總覽.md`、`docs/使用手冊/參數配置-09-重要提醒與必填設定.md`

**範圍**：僅涵蓋 UI/UX、畫面顯示邏輯與前端驗證；不含資料庫、API 與後端計算。

**依據**：對應《使用手冊》「參數配置－系統基礎參數與權限總覽」「參數配置－重要提醒與必填設定」「員工帳號管理」，並優先滿足其業務需求。

---

## 角色可見性（UI）

- 員工：
  - 可查看與編輯「個人資料」。
  - 可修改自己的密碼。
  - 不可存取「員工管理」「系統參數」。
- 管理員：
  - 可存取「員工管理」「系統參數」。
  - 可執行：新增/編輯/停用員工、重置密碼、調整指定系統參數。

UI 呈現規則：
- 非管理員隱藏所有管理相關入口（側邊欄、操作按鈕、頁面路徑防呆）。
- 嘗試直接訪問管理頁時顯示「無權限」頁。

---

## 頁面與元件

### 內部系統樣式（僅 /internal/* 生效）

- 內部頁統一載入：`assets/css/internal-system.css`
- 標準化內容：
  - 表單/按鈕字體與尺寸一致（`button,input,select,textarea`）
  - 舊類別 `.clients-btn`、`.btn-gray` 對齊 `.btn` 規格
  - 僅內部頁生效，不修改外部網站樣式

### 共用導覽/頁尾（內部系統）

- 片段位置：`templates/partials/internal-navbar.html`、`templates/partials/internal-footer.html`
- 載入方式：由 `assets/js/components/bootstrap.js` 於內部路徑（`/internal/*`）自動注入；並自動：
  - 載入所需樣式：`assets/css/internal-system.css`、`assets/css/internal-components.css`
  - 依目前路徑高亮對應導覽連結
  - 顯示目前使用者名稱（呼叫 `GET /internal/api/v1/auth/me`）
- 內部頁面需在文件底部引入：
  - `<script defer type="module" src="/assets/js/components/bootstrap.js"></script>`

### 登入頁（LoginPage）

- 欄位：
  - 帳號（必填）
  - 密碼（必填）
- 前端驗證：
  - 帳號/密碼不得為空。
- 錯誤提示（伺服器回應對應展示）：
  - 「帳號或密碼錯誤」
  - 「帳號已鎖定，請15分鐘後再試」
- 補充：登入成功後導向儀表板；維持登入狀態顯示使用者名稱。

### 個人資料頁（ProfilePage）

- 顯示/編輯欄位：
  - 姓名（必填）
  - 性別（必填；男性/女性，下拉選單）
  - Email（必填；Email 格式）
  - 到職日（必填；日期）
  - 手機、地址、緊急聯絡人姓名/電話（選填）
- 前端驗證：
  - Email 格式正確。
  - 必填欄位不可為空。
- 互動：
  - 變更未儲存時離開顯示警告。
  - 儲存成功顯示「個人資料已更新」。

### 修改密碼（ChangePasswordModal/Page）

- 欄位：
  - 目前密碼（必填）
  - 新密碼（必填，至少 6 碼，無複雜度要求）
  - 確認新密碼（必填，需相符）
- 錯誤提示：
  - 「原密碼錯誤」
  - 「密碼至少6個字元」
  - 「兩次密碼輸入不一致」

### 員工管理（AdminUsersPage｜管理員）

- 列表：
  - 欄位：帳號、姓名、Email、性別、到職日、角色（員工/管理員）、狀態（啟用/停用）、最近登入時間。
  - 搜尋：帳號/姓名/Email 模糊搜尋。
  - 篩選：角色、狀態。
  - 操作：查看/編輯、重置密碼、停用/啟用、新增員工。
- 新增/編輯表單：
  - 帳號（必填；英文或數字）
  - 密碼（僅新增時必填，至少6碼）
  - 姓名（必填）
  - 性別（必填；男性/女性）
  - Email（必填；Email 格式）
  - 到職日（必填；日期）
  - 角色（必選：員工/管理員）
  - 其他聯絡欄位（選填）
- 前端驗證：
  - 帳號：僅允許英數字元；長度建議 3–30（若伺服器回覆已存在，顯示「帳號已存在」）。
  - 密碼：至少6碼。
  - Email：格式正確。
  - 必填欄位：不可為空。
- 停用員工：
  - 操作前確認對話框（文案：「停用後該員工無法登入，確定要停用嗎？」）。
  - 停用狀態以灰色徽章顯示，提供「啟用」操作。

### 系統參數（SystemSettingsPage｜管理員）

- 分區：
  - 危險設定（警告色區塊）：
    - 補休有效期規則（current_month/next_month/3_months/6_months）
    - 每日工時上限（唯讀；顯示 12 小時）
    - 月薪制換算時數（唯讀；顯示 240）
  - 一般設定：
    - 公司名稱、聯絡信箱、時區、幣別（可編輯）
    - 工時最小單位（0.25/0.5/1 小時，下拉選單）
    - 啟用軟刪除（啟用/停用，下拉選單）
    - 工作日開始/結束時間（時間選擇）
    - 報表語系（可編輯，預設 zh-TW）
  - 薪資相關參數：
    - 全勤獎金金額（數字輸入，單位：元）
  - 成本分析參數：
    - 每小時管理成本（數字輸入，單位：元/小時）
    - 目標毛利率（數字輸入，單位：%，範圍 0-100）
- 互動與前端驗證：
  - 修改危險設定需勾選「我了解風險，確定要修改」後才可提交。
  - Email 欄位格式驗證。
  - 全勤獎金金額：非負整數。
  - 每小時管理成本：非負數字（可含小數）。
  - 目標毛利率：0-100 之間的數字。
  - 成功提示：「設定已更新」。
- 權限：
  - 非管理員無法進入；側欄入口隱藏。

### 通知（NotificationsBadge/List）

- 顯示位置：導覽列通知徽章或儀表板通知清單。
- 類型：任務逾期、應收逾期、工時缺填等（由系統提供，不需手動新增）。
- 操作：
  - 可關閉顯示（若屬自動消失型，狀態更新後自動隱藏）。
- 無障礙：徽章與清單項需有可見焦點與 aria-label。

---

## 前端驗證與顯示規則

- 帳號：英數字元；顯示「帳號已存在」等伺服器錯誤文案。
- 密碼：最小長度 6；無複雜度要求。
- Email：格式驗證。
- 必填欄位：姓名、性別、Email、到職日。
- 權限：非管理員隱藏管理相關操作與入口；強制導向「無權限」頁。
- 軟刪除/停用：以狀態徽章顯示，不提供永久刪除入口。

---

## 無障礙與國際化

- 互動元件提供可見焦點、鍵盤操作（Tab/Enter/Space）。
- 重要按鈕與狀態徽章提供 aria-label（例：「停用員工」「啟用員工」「危險設定確認」）。
- 文案可國際化：
  - 「無權限」「帳號或密碼錯誤」「帳號已鎖定」「停用員工」「已更新」「設定已更新」。

---

## 錯誤與提示文案（建議）

- 登入失敗：
  - 「帳號或密碼錯誤」
  - 「帳號已鎖定，請15分鐘後再試」
- 欄位驗證：
  - 「Email 格式錯誤」
  - 「密碼至少6個字元」
  - 「帳號已存在」
- 停用/啟用：
  - 停用確認：「停用後該員工無法登入，確定要停用嗎？」
  - 成功提示：「狀態已更新」

---

## 與《使用手冊》的對應

- 員工帳號管理：覆蓋新增必填欄位、編輯、重置密碼、停用帳號等 UI 與驗證。
- 權限總覽：非管理員不可存取員工資料與薪資等敏感資訊；UI 隱藏入口並在直連時顯示無權限。
- 重要提醒：危險設定以警告區塊與確認機制呈現；Email/性別/到職日等必填驗證。


