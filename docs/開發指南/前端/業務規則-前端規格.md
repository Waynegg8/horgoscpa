# 業務規則管理｜前端規格（UI/UX）

> 僅包含 UI、UX、操作流程、顯示邏輯與前端驗證；完全省略資料庫與 API 細節。

---

## 1. 目標與範圍
- 管理「國定假日」「假別類型」「服務項目」等規則設定
- 僅檢視「工作類型費率」（依法不可修改）
- 依角色顯示（小型事務所彈性）：
  - 員工：可維護國定假日、假別類型、服務項目；不可修改工作類型費率
  - 管理員：同上，另可管理僅管理員區塊（如：特休規則、週期類型，若開放）

---

## 2. 導覽與頁面架構
- 單一「業務規則」設定頁，使用分頁籤（Tabs）：
  - 國定假日
  - 假別類型
  - 服務項目
  - 工作類型費率（唯讀）
  - （選擇性）特休規則（僅管理員）
  - （選擇性）週期類型（僅管理員）
- 權限不足時：隱藏頁籤；若直入路由，顯示紅色訊息條『您沒有權限檢視此設定』

---

## 3. 國定假日（員工/管理員）
- 列表欄位：日期、名稱、是否補班日（是/否）、來源（系統/手動）
- 操作：新增、編輯、刪除、（僅管理員）批次匯入
- 新增/編輯表單欄位：
  - 日期（必填，日期選擇器，唯一）
  - 假日名稱（必填，最長 50 字）
  - 是否為補班日（勾選）
- UI 行為：
  - 新增成功 Toast『已新增假日』，列表即時更新
  - 日期重複：於欄位下方顯示『該日期已設定』
- 前端驗證：
  - 日期必填且有效；名稱必填 ≤ 50 字

---

## 4. 假別類型（員工/管理員）
- 列表欄位：名稱、年度額度、是否給薪、是否扣全勤、性別限制、狀態（啟用/停用）
- 操作：新增、編輯、啟用/停用
- 表單欄位：
  - 名稱（必填，最長 30 字）
  - 年度額度（數字或小數；可為空表示無固定額度）
  - 是否給薪（切換）
  - 是否扣全勤（切換）
  - 性別限制（下拉：無限制/男性/女性）
- 前端驗證：
  - 名稱必填 ≤ 30 字；年度額度若填寫需為 ≥ 0 的數字
- 列表交互：
  - 搜尋（名稱）、狀態篩選
  - 啟用/停用需二次確認（『確定要停用此假別？』）

---

## 5. 服務項目（員工/管理員）
- 列表（樹狀或扁平帶縮排）：名稱、父層、有無子項、排序
- 操作：新增、編輯、刪除（軟刪）、調整排序
- 表單欄位：
  - 服務名稱（必填，最長 50 字）
  - 父層服務（可選，限制兩層）
  - 描述（選填，最長 200 字）
- 前端驗證：
  - 名稱必填 ≤ 50 字；描述 ≤ 200 字
  - 父層選擇後若父層已有上層（即第三層）→ 顯示錯誤『僅允許兩層結構』並禁止送出
- 互動：
  - 刪除需二次確認；若有子項，提示『請先移除子項目』

---

## 6. 工作類型費率（唯讀）
- 列表欄位：工作類型名稱、費率倍數、說明（如：平日加班前2小時 1.34 倍）
- 提示：
  - 頂部藍色訊息條：『加班費率為勞基法規定，無法修改』
- 搜尋：依名稱過濾

---

## 7. （選擇性）特休規則（僅管理員）
- 列表欄位：最小月數、最大月數、天數、說明
- 操作：新增、編輯、刪除、恢復法定預設（按鈕，需二次確認）
- 前端驗證：月數/天數需為有效數字且範圍合理（min ≤ max）

---

## 8. （選擇性）週期類型（僅管理員）
- 列表欄位：名稱、是否循環、天數/月份間隔、排序、狀態
- 操作：新增、編輯、啟用/停用
- 前端驗證：
  - 名稱必填 ≤ 30 字
  - days_interval 或 months_interval 至少其一有值且為正數

---

## 9. 通用交互與狀態
- 搜尋/篩選：列表支援即時搜尋與狀態篩選
- 分頁：每頁 20 筆（可調整）
- 成功提示：Toast（新增/編輯/刪除/啟用/停用 成功）
- 錯誤提示：顯示後端 message，未知錯誤顯示『操作失敗，請稍後再試』
- 權限不足：顯示紅色訊息條『您沒有權限執行此操作』

---

## 10. 無障礙與可用性
- 表單 Enter 送出、Esc 關閉對話框
- 開啟對話框自動聚焦第一欄位
- 表單驗證失敗時聚焦第一個錯誤欄位

---

## 11. 業務需求對應（覆蓋檢核）
- 國定假日：員工/管理員可維護；欄位含日期/名稱/補班日
- 假別類型：員工/管理員可維護；可設定名稱、年度額度、給薪、扣全勤、性別限制
- 服務項目：員工/管理員可維護；限制最多兩層
- 工作類型費率：依法只讀，不提供修改入口
