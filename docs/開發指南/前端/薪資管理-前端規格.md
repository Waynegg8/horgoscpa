# 薪資管理｜前端規格（UI/UX）

> 僅包含 UI、UX、畫面顯示邏輯與前端驗證；完全省略後端與資料庫細節。

---

## 1. 目標與範圍
- 管理員計算月度薪資、設定薪資項目、管理年終獎金、匯出報表
- 員工無權限進入此模組（若直入路由顯示『您沒有權限存取此模組』訊息條）

---

## 2. 角色與可見性
- 員工：無權限；所有入口隱藏；直入顯示權限不足
- 管理員：可見以下分頁：
  - 薪資項目設定
  - 員工薪資設定
  - 績效獎金調整（月度）
  - 薪資計算
  - 年終獎金管理
  - 薪資報表

---

## 3. 導覽與頁面結構
- 單頁 Tabs：
  - 薪資項目設定｜員工薪資設定｜績效獎金調整｜薪資計算｜年終獎金｜薪資報表
- 全域元件：月份選擇（薪資計算/報表）、匯出（CSV/PDF，依策略）、載入狀態、錯誤訊息條

---

## 4. 主要畫面與元件

### 4.1 薪資項目設定（管理員）
- 列表欄位：項目代碼、項目名稱、類別（津貼/獎金/扣款）、經常性給與（是/否）、金額固定（是/否）、狀態
- 操作：新增、編輯、刪除（需二次確認）、啟用/停用
- 表單欄位：
  - 項目代碼（必填，英數大寫與底線，≤ 20）
  - 項目名稱（必填，≤ 50）
  - 類別（必選：津貼/獎金/扣款）
  - 經常性給與（切換；影響時薪計算的提示說明）
  - 金額固定（切換；用於說明與表單交互，不直接輸入金額）
  - 其他描述（選填，≤ 200）
- 前端驗證：代碼格式、名稱必填、類別必選
- 輔助提示：
  - 勾選「經常性給與」會計入時薪基準（影響加班費與成本分析）
  - 年終、三節等不屬於經常性給與

### 4.2 員工薪資設定（管理員）
- 流程：選擇員工 → 顯示基本資料與底薪 → 薪資項目清單（可加/改/移）
- 欄位：
  - 底薪（月薪，必填，正數）
  - 薪資項目（項目名稱、金額、備註、有效起日、生效範圍說明）
- 顯示：
  - 「經常性給與」標記，提示將計入時薪
  - 當月時薪試算（底薪+經常性給與合計 ÷ 240）
- 操作：儲存、取消；成功後 Toast『已儲存』
- 前端驗證：底薪/金額為正數；有效起日為合法日期

### 4.3 績效獎金調整（月度，管理員）
- 功能：按月份批次調整「績效獎金」金額（每人不同），影響該月時薪成本率
- 元件：
  - 月份選擇（YYYY-MM，必填）
  - 員工列表：姓名、預設績效、調整後、時薪影響（+/- 元/時）
  - 批次操作：儲存所有調整、全部恢復預設
  - 影響摘要：已調整人數、平均時薪影響、將影響之報表月
- 前端驗證：金額為數字且 ≥ 0；未變更不送出

### 4.4 薪資計算（管理員）
- 選項：
  - 計薪月份（必填）
  - 員工（可選；未選=計算全部）
- 操作：計算薪資 → 顯示進度 → 完成列表
- 列表欄位：姓名、底薪、津貼合計、獎金合計、加班費（分類小計）、總薪資、是否全勤
- 明細抽屜/頁：各項目組成與加班費分類、總工時/加班工時/加權工時、全勤判定原因
- 按鈕：匯出當月薪資（CSV/PDF）
- 空/錯誤：顯示明確訊息；保留可重試

### 4.5 年終獎金管理（管理員）
- 年度選擇（預設上一年）
- 統計卡：年終總額、人數、平均
- 員工列表：姓名、年終金額、發放日期、狀態（已發/未發）
- 表單：員工（必選）、歸屬年度（必填）、金額（必填）、實際發放日期（可選）、備註
- 前端驗證：年度/金額必填且合法；金額 ≥ 0

### 4.6 薪資報表（管理員）
- 報表類型：
  - 月度薪資明細（可篩選員工）
  - 年度薪資統計（圖表 + 表格）
- 輸出：CSV/PDF（按目前篩選）

---

## 5. 交互流程（UX）
- 新增/編輯薪資項目 → 前端驗證 → 儲存 → 列表更新
- 調整員工薪資 → 試算時薪 → 儲存 → 顯示成功提示
- 月度績效批次 → 編輯 → 儲存 → 顯示影響摘要
- 計算薪資 → 顯示進度/結果 → 可匯出 → 檢視明細
- 年終管理 → 變更金額/日期 → 即時更新列表與統計

---

## 6. 前端驗證與錯誤訊息
- 權限不足：『您沒有權限執行此操作』
- 必填未填：『此欄位為必填』
- 金額/底薪：『請輸入有效金額』
- 月份/日期：『請選擇有效日期』
- 匯出失敗：『匯出失敗，請稍後再試』

---

## 7. 狀態、樣式與可用性
- 金額本地化千分位；正負以顏色標示
- 選單/表單可鍵盤操作（Enter 送出、Esc 關閉）
- 列表支援分頁、即時搜尋（名稱/代碼）
- 重要說明以資訊條顯示（如：經常性給與會計入時薪）

---

## 8. 業務需求對應（覆蓋檢核）
- 角色：員工無權限；管理員可查看所有薪資、計算月度薪資、設定薪資項目、匯出報表
- 薪資組成：底薪/津貼/獎金/加班費（扣款暫不包含）
- 自由設定：支援新增項目、每人不同、月度績效調整
- 年終獎金：獨立管理，支援歸屬年度與實際發放日期
