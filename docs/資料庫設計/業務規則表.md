# æ¥­å‹™è¦å‰‡è¡¨

**åŒ…å«è¡¨æ ¼ï¼š** Holidays, LeaveTypes, OvertimeRates, AnnualLeaveRules, OtherLeaveRules, ServiceFrequencyTypes, WorkTypes, Services (8å€‹)  
**æœ€å¾Œæ›´æ–°ï¼š** 2025å¹´10æœˆ27æ—¥

---

## ğŸ“‹ ç›®éŒ„
- [Holidays - åœ‹å®šå‡æ—¥](#holidays---åœ‹å®šå‡æ—¥)
- [LeaveTypes - å‡åˆ¥é¡å‹](#leavetypes---å‡åˆ¥é¡å‹)
- [OvertimeRates - åŠ ç­è²»ç‡](#overtimerates---åŠ ç­è²»ç‡)
- [AnnualLeaveRules - ç‰¹ä¼‘è¦å‰‡](#annualleaverules---ç‰¹ä¼‘è¦å‰‡)
- [OtherLeaveRules - å…¶ä»–å‡æœŸè¦å‰‡](#otherleaverules---å…¶ä»–å‡æœŸè¦å‰‡)
- [ServiceFrequencyTypes - é€±æœŸé¡å‹](#servicefrequencytypes---é€±æœŸé¡å‹)
- [WorkTypes - å·¥ä½œé¡å‹](#worktypes---å·¥ä½œé¡å‹)
- [Services - æœå‹™é …ç›®](#services---æœå‹™é …ç›®)

---

## Holidays - åœ‹å®šå‡æ—¥

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE Holidays (
  holiday_id INTEGER PRIMARY KEY AUTOINCREMENT,
  holiday_date TEXT UNIQUE NOT NULL,
  name TEXT NOT NULL,
  is_compensatory_day_off BOOLEAN DEFAULT 0,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  is_deleted BOOLEAN DEFAULT 0
);
```

### ç´¢å¼•
```sql
CREATE UNIQUE INDEX idx_holidays_date ON Holidays(holiday_date);
CREATE INDEX idx_holidays_year ON Holidays(substr(holiday_date, 1, 4));
```

### èªªæ˜
- å½±éŸ¿åŠ æ¬Šå·¥æ™‚è¨ˆç®—ï¼ˆåœ‹å®šå‡æ—¥åŠ ç­ 2.0 å€ï¼‰
- å¯æ‰¹é‡å°å…¥/åŒ¯å‡º CSV
- æ¯å¹´éœ€æ›´æ–°

---

## LeaveTypes - å‡åˆ¥é¡å‹

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE LeaveTypes (
  leave_type_id INTEGER PRIMARY KEY AUTOINCREMENT,
  type_name TEXT UNIQUE NOT NULL,
  deduct_leave BOOLEAN DEFAULT 1,
  is_paid BOOLEAN DEFAULT 1,
  annual_quota REAL,
  description TEXT,
  is_enabled BOOLEAN DEFAULT 1,
  sort_order INTEGER DEFAULT 0,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  is_deleted BOOLEAN DEFAULT 0
);
```

### ç´¢å¼•
```sql
CREATE UNIQUE INDEX idx_leave_types_name ON LeaveTypes(type_name);
CREATE INDEX idx_leave_types_enabled ON LeaveTypes(is_enabled);
```

### é è¨­å‡åˆ¥é¡å‹
| å‡åˆ¥ | æ‰£å‡ | æœ‰è–ª | å¹´åº¦é¡åº¦ |
|------|------|------|---------|
| ç‰¹ä¼‘ | âœ… | âœ… | ä¾å¹´è³‡è¨ˆç®— |
| ç—…å‡ | âœ… | âœ… | 30å¤©/å¹´ |
| äº‹å‡ | âœ… | âŒ | 14å¤©/å¹´ |
| å©šå‡ | âœ… | âœ… | 8å¤©ï¼ˆäº‹ä»¶è§¸ç™¼ï¼‰|
| å–ªå‡ | âœ… | âœ… | ä¾é—œä¿‚ 3-8å¤© |
| ç”¢å‡ | âœ… | âœ… | 56å¤©ï¼ˆäº‹ä»¶è§¸ç™¼ï¼‰|
| é™ªç”¢å‡ | âœ… | âœ… | 7å¤©ï¼ˆäº‹ä»¶è§¸ç™¼ï¼‰|
| ç”¢æª¢å‡ | âœ… | âœ… | 7å¤©ï¼ˆäº‹ä»¶è§¸ç™¼ï¼‰|

---

## OvertimeRates - åŠ ç­è²»ç‡

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE OvertimeRates (
  rate_id INTEGER PRIMARY KEY AUTOINCREMENT,
  work_type_id INTEGER NOT NULL,
  rate_multiplier REAL NOT NULL,
  effective_date TEXT NOT NULL,
  is_current BOOLEAN DEFAULT 1,
  created_at TEXT DEFAULT (datetime('now')),
  
  FOREIGN KEY (work_type_id) REFERENCES WorkTypes(work_type_id)
);
```

### ç´¢å¼•
```sql
CREATE INDEX idx_overtime_rates_type ON OvertimeRates(work_type_id);
CREATE INDEX idx_overtime_rates_current ON OvertimeRates(is_current);
```

### æ³•å®šè²»ç‡
| å·¥ä½œé¡å‹ | è²»ç‡ |
|---------|------|
| æ­£å¸¸å·¥æ™‚ | 1.00 |
| å¹³æ—¥åŠ ç­ | 1.34 |
| ä¼‘æ¯æ—¥åŠ ç­ï¼ˆå‰2å°æ™‚ï¼‰| 1.34 |
| ä¼‘æ¯æ—¥åŠ ç­ï¼ˆç¬¬3å°æ™‚èµ·ï¼‰| 1.67 |
| åœ‹å®šå‡æ—¥åŠ ç­ | 2.00 |

---

## AnnualLeaveRules - ç‰¹ä¼‘è¦å‰‡

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE AnnualLeaveRules (
  rule_id INTEGER PRIMARY KEY AUTOINCREMENT,
  min_months INTEGER NOT NULL,
  max_months INTEGER NOT NULL,
  days INTEGER NOT NULL,
  description TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  is_deleted BOOLEAN DEFAULT 0
);
```

### æ³•å®šç‰¹ä¼‘è¦å‰‡
| å¹´è³‡ | æœ€å°æœˆæ•¸ | æœ€å¤§æœˆæ•¸ | å¤©æ•¸ |
|------|---------|---------|------|
| 6å€‹æœˆä»¥ä¸Šæœªæ»¿1å¹´ | 6 | 12 | 3 |
| 1å¹´ä»¥ä¸Šæœªæ»¿2å¹´ | 12 | 24 | 7 |
| 2å¹´ä»¥ä¸Šæœªæ»¿3å¹´ | 24 | 36 | 10 |
| 3å¹´ä»¥ä¸Šæœªæ»¿5å¹´ | 36 | 60 | 14 |
| 5å¹´ä»¥ä¸Šæœªæ»¿10å¹´ | 60 | 120 | 15 |
| 10å¹´ä»¥ä¸Š | 120 | 999 | 15+ (æ¯å¹´+1, æœ€é«˜30) |

---

## OtherLeaveRules - å…¶ä»–å‡æœŸè¦å‰‡

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE OtherLeaveRules (
  rule_id INTEGER PRIMARY KEY AUTOINCREMENT,
  leave_type_id INTEGER NOT NULL,
  event_type TEXT NOT NULL,
  days REAL NOT NULL,
  validity_days INTEGER DEFAULT 365,
  description TEXT,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  is_deleted BOOLEAN DEFAULT 0,
  
  FOREIGN KEY (leave_type_id) REFERENCES LeaveTypes(leave_type_id)
);
```

### æ³•å®šè¦å‰‡
| äº‹ä»¶é¡å‹ | å‡åˆ¥ | å¤©æ•¸ | æœ‰æ•ˆæœŸ |
|---------|------|------|--------|
| çµå©š | å©šå‡ | 8 | 1å¹´ |
| ç”Ÿè‚²ï¼ˆå¥³æ€§ï¼‰| ç”¢å‡ | 56 | å³æ™‚ |
| é…å¶ç”Ÿè‚² | é™ªç”¢å‡ | 7 | å‰å¾Œ15å¤© |
| çˆ¶æ¯/é…å¶/å­å¥³éä¸– | å–ªå‡ | 8 | 1å¹´ |
| ç¥–çˆ¶æ¯/é…å¶çˆ¶æ¯éä¸– | å–ªå‡ | 6 | 1å¹´ |
| æ›¾ç¥–çˆ¶æ¯/å…„å¼Ÿå§Šå¦¹/é…å¶ç¥–çˆ¶æ¯éä¸– | å–ªå‡ | 3 | 1å¹´ |

---

## ServiceFrequencyTypes - é€±æœŸé¡å‹

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE ServiceFrequencyTypes (
  frequency_id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT UNIQUE NOT NULL,
  days_interval INTEGER,
  months_interval INTEGER,
  is_recurring BOOLEAN DEFAULT 1,
  is_enabled BOOLEAN DEFAULT 1,
  sort_order INTEGER DEFAULT 0,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  is_deleted BOOLEAN DEFAULT 0
);
```

### é è¨­é€±æœŸé¡å‹
| åç¨± | å¤©æ•¸é–“éš” | æœˆæ•¸é–“éš” | æ˜¯å¦é€±æœŸæ€§ |
|------|---------|---------|-----------|
| å–®æ¬¡ | NULL | NULL | âŒ |
| æ¯æœˆ | 30 | 1 | âœ… |
| é›™æœˆ | 60 | 2 | âœ… |
| æ¯å­£ | 90 | 3 | âœ… |
| åŠå¹´ | 180 | 6 | âœ… |
| æ¯å¹´ | 365 | 12 | âœ… |

---

## WorkTypes - å·¥ä½œé¡å‹

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE WorkTypes (
  work_type_id INTEGER PRIMARY KEY AUTOINCREMENT,
  type_name TEXT UNIQUE NOT NULL,
  is_overtime BOOLEAN DEFAULT 0,
  description TEXT,
  sort_order INTEGER DEFAULT 0,
  created_at TEXT DEFAULT (datetime('now')),
  is_deleted BOOLEAN DEFAULT 0
);
```

### é è¨­å·¥ä½œé¡å‹
| é¡å‹ | æ˜¯å¦åŠ ç­ | è²»ç‡å€æ•¸ |
|------|---------|---------|
| æ­£å¸¸å·¥æ™‚ | âŒ | 1.00 |
| å¹³æ—¥åŠ ç­ | âœ… | 1.34 |
| ä¼‘æ¯æ—¥åŠ ç­ï¼ˆå‰2hï¼‰| âœ… | 1.34 |
| ä¼‘æ¯æ—¥åŠ ç­ï¼ˆ2hå¾Œï¼‰| âœ… | 1.67 |
| åœ‹å®šå‡æ—¥åŠ ç­ | âœ… | 2.00 |

---

## Services - æœå‹™é …ç›®

### è¡¨æ ¼å®šç¾©
```sql
CREATE TABLE Services (
  service_id INTEGER PRIMARY KEY AUTOINCREMENT,
  parent_service_id INTEGER,
  service_name TEXT NOT NULL,
  description TEXT,
  sort_order INTEGER DEFAULT 0,
  created_at TEXT DEFAULT (datetime('now')),
  updated_at TEXT DEFAULT (datetime('now')),
  created_by INTEGER,
  is_deleted BOOLEAN DEFAULT 0,
  
  FOREIGN KEY (parent_service_id) REFERENCES Services(service_id),
  FOREIGN KEY (created_by) REFERENCES Users(user_id)
);
```

### ç´¢å¼•
```sql
CREATE INDEX idx_services_parent ON Services(parent_service_id);
CREATE INDEX idx_services_name ON Services(service_name);
```

### å±¤ç´šçµæ§‹
- **ä¸»é …ç›®**: `parent_service_id = NULL`
- **å­é …ç›®**: `parent_service_id` æŒ‡å‘ä¸»é …ç›®
- **é™åˆ¶**: ä¸å…è¨±ä¸‰å±¤çµæ§‹

### å”¯ä¸€æ€§è¦å‰‡
- ä¸»é …ç›®åç¨±å…¨å±€å”¯ä¸€
- åŒä¸€ä¸»é …ç›®ä¸‹å­é …ç›®åç¨±å”¯ä¸€

---

## è¡¨æ ¼é—œè¯åœ–

```
Holidays (åœ‹å®šå‡æ—¥) â”€â”€â–º å½±éŸ¿åŠ æ¬Šå·¥æ™‚è¨ˆç®—

LeaveTypes (å‡åˆ¥é¡å‹)
  â”‚
  â”œâ”€â”€â–º LeaveBalances (å‡æœŸé¤˜é¡)
  â”œâ”€â”€â–º LeaveApplications (å‡æœŸç”³è«‹)
  â””â”€â”€â–º OtherLeaveRules (å…¶ä»–å‡æœŸè¦å‰‡)

WorkTypes (å·¥ä½œé¡å‹)
  â”‚
  â”œâ”€â”€â–º OvertimeRates (åŠ ç­è²»ç‡)
  â””â”€â”€â–º TimeLogs (å·¥æ™‚è¨˜éŒ„)

AnnualLeaveRules (ç‰¹ä¼‘è¦å‰‡) â”€â”€â–º è‡ªå‹•è¨ˆç®—ç‰¹ä¼‘é¤˜é¡

ServiceFrequencyTypes (é€±æœŸé¡å‹) â”€â”€â–º ClientServices (å®¢æˆ¶æœå‹™)

Services (æœå‹™é …ç›®)
  â”‚
  â”œâ”€â”€â–º ClientServices (å®¢æˆ¶æœå‹™)
  â””â”€â”€â–º TaskTemplates (ä»»å‹™æ¨¡æ¿)
```

---

## æ¥­å‹™è¦å‰‡èªªæ˜

### 1. æ‰€æœ‰è¦å‰‡å¯é…ç½®
- ç®¡ç†å“¡å¯é€éç¶²é ä»‹é¢èª¿æ•´
- æä¾›ã€Œæ¢å¾©æ³•å®šé è¨­å€¼ã€åŠŸèƒ½
- è¦å‰‡è®Šæ›´ç«‹å³ç”Ÿæ•ˆ

### 2. ç¦æ­¢ç¡¬ç·¨ç¢¼
- æ‰€æœ‰æ¥­å‹™è¦å‰‡å­˜å…¥è³‡æ–™åº«
- ä¸åœ¨ç¨‹å¼ç¢¼ä¸­å¯«æ­»æ•¸å€¼
- æ–¹ä¾¿æœªä¾†èª¿æ•´

### 3. æ­·å²è¨˜éŒ„ä¿ç•™
- åŠ ç­è²»ç‡ä½¿ç”¨ `is_current` æ¨™è¨˜
- ä¿ç•™æ­·å²è²»ç‡ä¾›æŸ¥è©¢
- æ–°è²»ç‡ä¸å½±éŸ¿æ­·å²è¨ˆç®—

---

## ğŸ”— ç›¸é—œæ–‡æª”

- **API è¦æ ¼ï¼š** [æ¥­å‹™è¦å‰‡API](../APIè¦æ ¼/æ¥­å‹™è¦å‰‡API.md)
- **åŠŸèƒ½æ¨¡å¡Šï¼š** [æ¥­å‹™è¦å‰‡ç®¡ç†](../åŠŸèƒ½æ¨¡å¡Š/02-æ¥­å‹™è¦å‰‡ç®¡ç†.md)
- **æŠ€è¡“è¦æ ¼ï¼š** [æ¥­å‹™è¦å‰‡æŠ€è¡“è¦æ ¼](../æŠ€è¡“è¦æ ¼/æ¥­å‹™è¦å‰‡/)

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025å¹´10æœˆ27æ—¥  
**æœ¬æ–‡æª”åˆä½µäº† 8 å€‹è³‡æ–™è¡¨æ–‡æª”**

