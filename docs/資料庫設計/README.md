# 資料庫設計總覽

**最後更新：** 2025年10月27日

---

## 目的

集中管理 D1 資料表的定義、關聯、索引與設計原則，作為資料層的單一事實來源（SSOT）。

---

## 結構與導覽

- 核心業務：`./核心業務/`
- 業務服務：`./業務服務/`
- 任務系統：`./任務系統/`
- 工時系統：`./工時系統/`
- 假期系統：`./假期系統/`
- 業務規則：`./業務規則/`
- 權限系統：`./權限系統/`
- 知識庫（統一命名，原「知識管理」合併於此）：`./知識庫/`
- 外部網站：`./外部網站/`
- 系統設定：`./系統設定/`
- 標準化擴展：`./標準化擴展/`
- 補休系統：`./補休系統/`

---

## 重要約定（減少重複）

- 單一來源：每個資料表的定義只存在於一個路徑。若需於其他分類出現，使用「索引頁」連結，而非複製一份。
- 命名統一：
  - 事件類型表以 `...Types` 結尾（例如：`LeaveEventTypes`）。
  - 論述性內容集中於 `知識庫/`，不再使用 `知識管理/`。
- 常用索引約定：
  - 交易/記錄型表：建立 `(foreign_id, date)` 複合索引。
  - 狀態/查詢高頻欄位：建立布林或狀態欄位索引（如 `is_deleted`, `is_published`）。

---

## 去重與收斂計畫

- `工時系統/TimeLogs.md` 為唯一來源；`核心業務/TimeLogs.md` 改為索引頁，僅鏈接至前者。
- `知識管理/` 內的表（如 `ClientSOPLinks.md`, `SOPDocuments.md`）以 `知識庫/` 版本為準；`知識管理/` 下文件將標註「重定向到 知識庫」。
- `業務規則/LeaveEvents.md` 若為「事件類型」，重命名為 `LeaveEventTypes.md` 並更新引用。

---

## 相關連結

- 架構設計：`../架構設計/`
- API 規格：`../API規格/`
- 功能模塊：`../功能模塊/`
