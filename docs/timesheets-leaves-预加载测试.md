# Timesheets & Leaves é¢„åŠ è½½æµ‹è¯•

## âœ… å·²ä¼˜åŒ–çš„å†…å®¹

### 1. æ•°æ®é¢„åŠ è½½ï¼ˆDataCacheï¼‰
```
P1ï¼ˆé«˜ä¼˜å…ˆçº§ï¼Œç™»å½•åç«‹å³åŠ è½½ï¼‰:
  âœ“ timesheets_recent: /timesheets?limit=30
  âœ“ leaves_recent: /leaves?perPage=30

P2ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰:
  âœ“ leaves_balances: /leaves/balances

P3ï¼ˆåå°åŠ è½½ï¼‰:
  âœ“ leaves_all: /leaves?perPage=100
  âœ“ leaves_pending: /leaves?perPage=50&status=pending
  âœ“ leaves_approved: /leaves?perPage=50&status=approved
```

### 2. Fetch æ‹¦æˆªå™¨æ˜ å°„
```javascript
'/timesheets?limit=30': 'timesheets_recent'
'/leaves?perPage=30': 'leaves_recent'
'/leaves/balances': 'leaves_balances'
```

### 3. HTML é¢„æ¸²æŸ“
- **timesheets.html**: âš¡ ä½¿ç”¨æ™ºèƒ½é¢„æ¸²æŸ“
- **leaves.html**: âš¡ ä½¿ç”¨æ™ºèƒ½é¢„æ¸²æŸ“

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯• 1: é¦–æ¬¡è®¿é—®ï¼ˆæ— ç¼“å­˜ï¼‰

1. **æ¸…é™¤æ‰€æœ‰ç¼“å­˜**:
   ```javascript
   localStorage.clear()
   ```

2. **ç™»å½•å¹¶ç­‰å¾…é¢„åŠ è½½**:
   - è§‚å¯Ÿæ§åˆ¶å° `[DataCache]` æ—¥å¿—
   - ç¡®è®¤ P1 æ•°æ®åŠ è½½å®Œæˆï¼ˆåŒ…å« timesheets_recent å’Œ leaves_recentï¼‰

3. **è®¿é—®å·¥æ—¶è¡¨é¡µé¢**:
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Timesheets] â„¹ æ— ç¼“å­˜ï¼Œæ­£å¸¸åŠ è½½`
   - ç­‰å¾…æ•°æ®æ¸²æŸ“ï¼ˆ3-5ç§’ï¼‰
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Timesheets] âœ“ é¢„æ¸²æŸ“å·²ä¿å­˜`

4. **è®¿é—®å‡æœŸé¡µé¢**:
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Leaves] â„¹ æ— ç¼“å­˜ï¼Œæ­£å¸¸åŠ è½½`
   - ç­‰å¾…æ•°æ®æ¸²æŸ“ï¼ˆ3-5ç§’ï¼‰
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Leaves] âœ“ é¢„æ¸²æŸ“å·²ä¿å­˜`

### æµ‹è¯• 2: ç¬¬äºŒæ¬¡è®¿é—®ï¼ˆæœ‰ç¼“å­˜ï¼‰

1. **è¿”å›ä»ªè¡¨æ¿**ï¼ˆä¸è¦åˆ·æ–°é¡µé¢ï¼‰

2. **å†æ¬¡è®¿é—®å·¥æ—¶è¡¨**:
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Timesheets] âš¡ ä½¿ç”¨é¢„æ¸²æŸ“ HTML`
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[FetchInterceptor] âš¡ ä½¿ç”¨ç¼“å­˜: timesheets_recent`
   - **é¢„æœŸæ•ˆæœ**: âš¡ **æé€Ÿæ˜¾ç¤ºï¼ˆ<100msï¼‰**

3. **å†æ¬¡è®¿é—®å‡æœŸé¡µé¢**:
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Leaves] âš¡ ä½¿ç”¨é¢„æ¸²æŸ“ HTML`
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[FetchInterceptor] âš¡ ä½¿ç”¨ç¼“å­˜: leaves_recent`
   - **é¢„æœŸæ•ˆæœ**: âš¡ **æé€Ÿæ˜¾ç¤ºï¼ˆ<100msï¼‰**

### æµ‹è¯• 3: åˆ·æ–°é¡µé¢ï¼ˆç¼“å­˜ä»åœ¨ï¼‰

1. **åœ¨å·¥æ—¶è¡¨é¡µé¢æŒ‰ F5 åˆ·æ–°**:
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Timesheets] âš¡ ä½¿ç”¨é¢„æ¸²æŸ“ HTML`
   - **é¢„æœŸæ•ˆæœ**: âš¡ **æé€Ÿæ˜¾ç¤ºï¼ˆ<100msï¼‰**

2. **åœ¨å‡æœŸé¡µé¢æŒ‰ F5 åˆ·æ–°**:
   - è§‚å¯Ÿæ§åˆ¶å°ï¼šåº”è¯¥æ˜¾ç¤º `[Leaves] âš¡ ä½¿ç”¨é¢„æ¸²æŸ“ HTML`
   - **é¢„æœŸæ•ˆæœ**: âš¡ **æé€Ÿæ˜¾ç¤ºï¼ˆ<100msï¼‰**

## ğŸ› é—®é¢˜æ’æŸ¥

### å¦‚æœå·¥æ—¶è¡¨è¿˜æ˜¯å¾ˆæ…¢:

1. **æ£€æŸ¥é¢„æ¸²æŸ“æ˜¯å¦ä¿å­˜æˆåŠŸ**:
   ```javascript
   window.Prerender.getStatus()
   // åº”è¯¥çœ‹åˆ° timesheets åœ¨åˆ—è¡¨ä¸­
   ```

2. **æ£€æŸ¥æ•°æ®ç¼“å­˜**:
   ```javascript
   window.DataCache.getStatus()
   // åº”è¯¥çœ‹åˆ° timesheets_recent å·²ç¼“å­˜
   ```

3. **æ£€æŸ¥æ‹¦æˆªå™¨**:
   ```javascript
   // åœ¨æ§åˆ¶å°è§‚å¯Ÿ fetch è¯·æ±‚
   // åº”è¯¥çœ‹åˆ° [FetchInterceptor] âš¡ ä½¿ç”¨ç¼“å­˜
   ```

### å¦‚æœå‡æœŸè¿˜æ˜¯å¾ˆæ…¢:

1. **æ£€æŸ¥é¢„æ¸²æŸ“**:
   ```javascript
   window.Prerender.getStatus()
   // åº”è¯¥çœ‹åˆ° leaves åœ¨åˆ—è¡¨ä¸­
   ```

2. **æ£€æŸ¥æ•°æ®ç¼“å­˜**:
   ```javascript
   window.DataCache.getStatus()
   // åº”è¯¥çœ‹åˆ° leaves_recent å·²ç¼“å­˜
   ```

3. **æ£€æŸ¥ localStorage å®¹é‡**:
   ```javascript
   window.Prerender.getStorageUsage()
   // ç¡®è®¤æ²¡æœ‰è¶…è¿‡å®¹é‡
   ```

## ğŸ“Š é¢„æœŸæ€§èƒ½æŒ‡æ ‡

| é¡µé¢ | é¦–æ¬¡è®¿é—® | ç¬¬äºŒæ¬¡è®¿é—® | åˆ·æ–°é¡µé¢ |
|------|---------|-----------|---------|
| **å·¥æ—¶è¡¨** | 3-5ç§’ | **<100ms** | **<100ms** |
| **å‡æœŸ** | 3-5ç§’ | **<100ms** | **<100ms** |

## ğŸš€ æ ¸å¿ƒä¼˜åŒ–ç‚¹

1. **æ•°æ®é¢„åŠ è½½**: ç™»å½•æ—¶ç«‹å³åŠ è½½ timesheets å’Œ leaves æ•°æ®ï¼ˆP1ï¼‰
2. **Fetch æ‹¦æˆª**: é¡µé¢è¯·æ±‚æ—¶ç›´æ¥ä»ç¼“å­˜è¯»å–æ•°æ®
3. **HTML é¢„æ¸²æŸ“**: é¦–æ¬¡æ¸²æŸ“åä¿å­˜ HTMLï¼Œç¬¬äºŒæ¬¡ç›´æ¥æ˜¾ç¤º
4. **æ™ºèƒ½æ—¶æœº**: 
   - é¦–æ¬¡è®¿é—®ï¼šæ­£å¸¸åŠ è½½ â†’ æ¸²æŸ“ â†’ ä¿å­˜ HTML
   - ç¬¬äºŒæ¬¡è®¿é—®ï¼šç«‹å³æ˜¾ç¤º HTML â†’ åå°æ›´æ–°ï¼ˆå¯é€‰ï¼‰

ç°åœ¨ï¼Œå·¥æ—¶å’Œå‡æœŸé¡µé¢åº”è¯¥åœ¨ç¬¬äºŒæ¬¡è®¿é—®æ—¶æé€Ÿæ˜¾ç¤ºï¼ğŸš€

