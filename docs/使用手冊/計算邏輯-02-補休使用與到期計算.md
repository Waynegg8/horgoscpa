# 計算邏輯｜補休使用與到期計算（3.2）

對應規格：後端 `docs/開發指南/後端/假期管理-後端規格.md`、`docs/開發指南/後端/工時管理-後端規格.md`

## 補休規則
1. 有效期：產生當月有效，次月 1 日歸 0
2. 使用順序：先進先出（FIFO）
3. 到期處理：未使用之補休自動轉換為加班費

---

## 完整範例：10月補休生命週期
```
=== 累積 ===
10/05（休息日）加班 4h → 補休 4h（分段倍率）
10/12（休息日）加班 3h → 補休 3h
10/18（平日晚）加班 2h → 補休 2h（1.34倍）
合計：9h（到期：10/31）

=== 使用 ===
10/25 請補休 3h → 先用 10/05 的 3h，餘 1h
剩餘：10/05 1h、10/12 3h、10/18 2h（共 6h）

=== 11/01 自動處理 ===
剩餘 6h 到期轉加班費。
時薪基準：39,800 ÷ 240 = 166 元/時（含經常性給與）
來源費率：
- 10/05 的 1h（取第3小時 1.67）
- 10/12 的 3h（分段：2h×1.34 + 1h×1.67）
- 10/18 的 2h（1.34）

加班費：
- 10/05：1 × 166 × 1.67 = 277
- 10/12：(2×166×1.34) + (1×166×1.67) = 722
- 10/18：2 × 166 × 1.34 = 445
合計：1,444 元 → 記入 11 月薪資
```
