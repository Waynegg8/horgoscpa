# å°ˆæ¡ˆç¸½åŸ·è¡Œè¨ˆç•« (Master Plan)

**ç‰ˆæœ¬ï¼š** 1.0  
**å»ºç«‹æ—¥æœŸï¼š** 2025-10-29  
**æœ€å¾Œæ›´æ–°ï¼š** 2025-10-29

---

## ğŸ“Š ç¸½ç›®æ¨™ï¼ˆSSOT - Single Source of Truthï¼‰

**è³‡æ–™è¡¨ç¸½æ•¸ï¼š** 45 å€‹ï¼ˆçœŸç›¸æºï¼š`docs/ç³»çµ±è³‡æ–™/æ•¸æ“šè¡¨æ¸…å–®.md`ï¼‰  
**API ç«¯é»ç¸½æ•¸ï¼š** 147 å€‹ï¼ˆçœŸç›¸æºï¼š`docs/ç³»çµ±è³‡æ–™/APIæ¸…å–®.md`ï¼‰  
**åŠŸèƒ½æ¨¡çµ„ç¸½æ•¸ï¼š** 14 å€‹

**ç•¶å‰é€²åº¦ï¼š** 32/45 è¡¨ï¼Œ104/147 APIï¼ˆæ¨¡çµ„1-8å·²å®Œæˆï¼Œâœ… åš´æ ¼éµå®ˆ5æ­¥é©Ÿæµç¨‹ï¼‰

---

## ğŸ¯ æ ¸å¿ƒåŸå‰‡ï¼ˆå¿…é ˆåš´æ ¼éµå®ˆï¼‰

### ğŸš¨ æœ€é«˜å„ªå…ˆç´š
- [ ] **çµ•å°ç¦æ­¢ä¿®æ”¹å¤–éƒ¨ç¶²ç«™æª”æ¡ˆ**ï¼ˆè¦‹ `docs/ğŸš¨å¤–éƒ¨ç¶²ç«™ç¦æ­¢ä¿®æ”¹æ¸…å–®.md`ï¼‰
- [ ] **æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨ UTF-8 ç·¨ç¢¼**ï¼ˆPowerShell è…³æœ¬ä½¿ç”¨ UTF-8 with BOMï¼‰
- [ ] **PowerShell å‘½ä»¤çµ•ä¸ä½¿ç”¨ `&&` æ“ä½œç¬¦**ï¼ˆæ”¹ç”¨ `;` æˆ– `if ($LASTEXITCODE -eq 0)`ï¼‰
- [ ] **æ¯å€‹ API å¿…é ˆåŒ…å« OpenAPI schema**ï¼ˆä½¿ç”¨ `@cloudflare/itty-router-openapi`ï¼‰
- [ ] **æ‰€æœ‰é–‹ç™¼å®Œæˆå¾Œå¿…é ˆåŸ·è¡Œä¸€è‡´æ€§é©—è­‰**
- [ ] **æ‰€æœ‰æ¸¬è©¦é€šéå¾Œå¿…é ˆè‡ªå‹•éƒ¨ç½²**
- [ ] **çµ•ä¸è®“ç”¨æˆ¶æ¸¬è©¦æˆ–éƒ¨ç½²**ï¼ˆAI å¿…é ˆè‡ªè¡Œå®Œæˆï¼‰
- [ ] **ğŸ”´ é–‹å§‹ä»»ä½•æ¨¡çµ„å‰ï¼Œå¿…é ˆå®Œæ•´è®€å–æ•´ä»½è¦æ ¼æ–‡æª”ï¼ˆç¦æ­¢åªè®€å‰å¹¾ç™¾è¡Œï¼‰**
- [ ] **ğŸ”´ æ¯å€‹æ¨¡çµ„å¯¦ç¾å¾Œï¼Œå¿…é ˆå®Œæ•´å°ç…§è¦æ ¼æ–‡æª”é©—è­‰ï¼ˆåˆ—å‡ºè¦æ ¼ä¸­çš„æ‰€æœ‰ APIï¼Œé€ä¸€ç¢ºèªå·²å¯¦ç¾ï¼‰**
- [ ] **ğŸ”´ ç¦æ­¢ç²¾ç°¡å¯¦ç¾ã€ç¦æ­¢å·æ‡¶ã€ç¦æ­¢è·³éä»»ä½•åŠŸèƒ½**
- [ ] **ğŸ”´ åœ¨ MASTER_PLAN çš„æ¯å€‹ä»»å‹™é …ä¸­ï¼Œå¿…é ˆæ¨™è¨˜å°æ‡‰è¦æ ¼æ–‡æª”çš„è¡Œè™Ÿç¯„åœï¼ˆä¾‹å¦‚ï¼š7.1.1 å‰µå»º XXX è¡¨ [è¦æ ¼:L10-L30]ï¼‰**
- [ ] **ğŸ”´ æ¨™è¨˜ä»»å‹™å®Œæˆå‰ï¼Œå¿…é ˆå›åˆ°è¦æ ¼æ–‡æª”å°æ‡‰è¡Œè™Ÿè™•ï¼Œé€ä¸€é©—è­‰å¯¦ç¾æ˜¯å¦å®Œå…¨ç¬¦åˆè¦æ ¼è¦æ±‚**

### ğŸ“š å¿…è®€æ–‡æª”
- [x] `docs/ğŸš¨å¤–éƒ¨ç¶²ç«™ç¦æ­¢ä¿®æ”¹æ¸…å–®.md`
- [x] `docs/é–‹ç™¼æŒ‡å—/AIé–‹ç™¼é ˆçŸ¥.md`
- [x] `docs/é–‹ç™¼æŒ‡å—/å¦‚ä½•é–‹ç™¼.md`
- [x] `docs/é–‹ç™¼æŒ‡å—/é–‹å§‹å‰æª¢æŸ¥æ¸…å–®.md`
- [x] `docs/é–‹ç™¼æŒ‡å—/å…±ç”¨è¦ç¯„.md`
- [x] `docs/é–‹ç™¼æŒ‡å—/OpenAPIè¦ç¯„.md`
- [x] `docs/ç³»çµ±è³‡æ–™/éƒ¨ç½²èªªæ˜.md`
- [x] `docs/ç³»çµ±è³‡æ–™/ä¸€è‡´æ€§éªŒè¯è„šæœ¬.md`
- [x] `docs/ç³»çµ±è³‡æ–™/è‡ªå‹•åŒ–èªªæ˜.md`

---

## ğŸ—ºï¸ 14 å€‹æ¨¡çµ„é–‹ç™¼é †åºï¼ˆåŸºæ–¼ä¾è³´é—œä¿‚ï¼‰

### éšæ®µ 1ï¼šåŸºç¤å»ºè¨­ï¼ˆå¿…é ˆå…ˆå®Œæˆï¼‰
- [ ] **æ¨¡çµ„ 1ï¼šç³»çµ±åŸºç¤**ï¼ˆèªè­‰ã€å“¡å·¥ç®¡ç†ã€ç³»çµ±è¨­å®šï¼‰
- [ ] **æ¨¡çµ„ 2ï¼šæ¥­å‹™è¦å‰‡**ï¼ˆå‡åˆ¥ã€åŠ ç­è²»ç‡ã€é€±æœŸé¡å‹ç­‰åŸºç¤è¦å‰‡ï¼‰

### éšæ®µ 2ï¼šæ ¸å¿ƒæ¥­å‹™åŠŸèƒ½
- [ ] **æ¨¡çµ„ 3ï¼šå®¢æˆ¶ç®¡ç†**ï¼ˆå®¢æˆ¶è³‡æ–™ã€æ¨™ç±¤ç³»çµ±ï¼‰
- [ ] **æ¨¡çµ„ 4ï¼šå·¥æ™‚ç®¡ç†**ï¼ˆå·¥æ™‚è¨˜éŒ„ã€è£œä¼‘ç³»çµ±ã€åŠ æ¬Šå·¥æ™‚ï¼‰
- [ ] **æ¨¡çµ„ 5ï¼šå‡æœŸç®¡ç†**ï¼ˆè«‹å‡ç”³è«‹ã€ç‰¹ä¼‘è¨ˆç®—ã€ç”Ÿæ´»äº‹ä»¶ï¼‰
- [ ] **æ¨¡çµ„ 6ï¼šæœå‹™ç”Ÿå‘½é€±æœŸç®¡ç†**ï¼ˆæœå‹™é …ç›®ã€å®¢æˆ¶æœå‹™ï¼‰
- [ ] **æ¨¡çµ„ 7ï¼šä»»å‹™ç®¡ç†**ï¼ˆä»»å‹™æ¨¡æ¿ã€å®¢æˆ¶æœå‹™ä»»å‹™ã€è‡ªå‹•ç”Ÿæˆï¼‰

### éšæ®µ 3ï¼šçŸ¥è­˜èˆ‡å…§å®¹ç®¡ç†
- [ ] **æ¨¡çµ„ 8ï¼šçŸ¥è­˜ç®¡ç†**ï¼ˆSOP æ–‡ä»¶ã€çŸ¥è­˜åº«ï¼‰
- [ ] **æ¨¡çµ„ 9ï¼šå¤–éƒ¨å…§å®¹ç®¡ç†**ï¼ˆCMSï¼šBlogã€FAQã€è³‡æºä¸­å¿ƒï¼‰

### éšæ®µ 4ï¼šè²¡å‹™èˆ‡å ±è¡¨
- [ ] **æ¨¡çµ„ 10ï¼šè–ªè³‡ç®¡ç†**ï¼ˆéˆæ´»è–ªè³‡çµæ§‹ã€æœˆè–ªåˆ¶è¨ˆç®—ï¼‰
- [ ] **æ¨¡çµ„ 11ï¼šç®¡ç†æˆæœ¬**ï¼ˆæˆæœ¬é …ç›®ã€æˆæœ¬åˆ†æ”¤ï¼‰
- [ ] **æ¨¡çµ„ 12ï¼šæ”¶æ“šæ”¶æ¬¾**ï¼ˆæ”¶æ“šç®¡ç†ã€æ‡‰æ”¶å¸³æ¬¾ï¼‰

### éšæ®µ 5ï¼šç³»çµ±é€²éšåŠŸèƒ½
- [ ] **æ¨¡çµ„ 13ï¼šé™„ä»¶ç³»çµ±**ï¼ˆCloudflare R2 æ•´åˆï¼‰
- [ ] **æ¨¡çµ„ 14ï¼šå ±è¡¨åˆ†æ**ï¼ˆå„€è¡¨æ¿ã€å„é¡çµ±è¨ˆå ±è¡¨ï¼‰

---

## ğŸ“ æ¨¡çµ„è©³ç´°ä»»å‹™åˆ†è§£

### [x] æ¨¡çµ„ 1ï¼šç³»çµ±åŸºç¤ï¼ˆç³»çµ±åŸºç¤-å®Œæ•´è¦æ ¼.mdï¼‰âœ… å·²å®Œæˆï¼ˆå·²è£œå……éºæ¼ï¼‰
**è³‡æ–™è¡¨ï¼š** 5 å€‹ | **APIï¼š** 14 å€‹ | **Cron Jobsï¼š** 0 å€‹

#### 1.1 è³‡æ–™è¡¨å‰µå»º

**1.1.1 Users è¡¨ï¼ˆå“¡å·¥/ç”¨æˆ¶ï¼‰[è¦æ ¼:L11-L42]**
- [x] 1.1.1.1 å‰µå»ºä¸»éµ `user_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L12]
- [x] 1.1.1.2 å‰µå»º `username` (TEXT UNIQUE NOT NULL) [è¦æ ¼:L13]
- [x] 1.1.1.3 å‰µå»º `password_hash` (TEXT NOT NULL) [è¦æ ¼:L14]
- [x] 1.1.1.4 å‰µå»ºåŸºæœ¬è³‡è¨Šæ¬„ä½ï¼š`name`, `email` (å¿…å¡«) [è¦æ ¼:L15-L16]
- [x] 1.1.1.5 å‰µå»ºæ¬Šé™æ¬„ä½ `is_admin` (BOOLEAN DEFAULT 0)ï¼Œè¨»é‡‹ï¼š0=å“¡å·¥, 1=ç®¡ç†å“¡ [è¦æ ¼:L17]
- [x] 1.1.1.6 å‰µå»ºæ€§åˆ¥æ¬„ä½ `gender` (TEXT NOT NULL)ï¼Œè¨»é‡‹ï¼š'M', 'F'ï¼ˆå½±éŸ¿å‡æœŸé¸é …ï¼‰[è¦æ ¼:L18]
- [x] 1.1.1.7 å‰µå»º `birth_date` (TEXT), `start_date` (TEXT NOT NULL) [è¦æ ¼:L19-L20]
- [x] 1.1.1.8 å‰µå»ºè¯çµ¡è³‡è¨Šï¼š`phone`, `address`, `emergency_contact_name`, `emergency_contact_phone` [è¦æ ¼:L21-L24]
- [x] 1.1.1.9 å‰µå»ºç™»å…¥æ§åˆ¶æ¬„ä½ï¼š`login_attempts`, `last_failed_login`, `last_login` [è¦æ ¼:L26-L29]
- [x] 1.1.1.10 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `updated_at`, `is_deleted`, `deleted_at`, `deleted_by` [è¦æ ¼:L31-L36]
- [x] 1.1.1.11 å‰µå»ºå”¯ä¸€ç´¢å¼•ï¼š`idx_users_username` ON Users(username) [è¦æ ¼:L39]
- [x] 1.1.1.12 å‰µå»ºç´¢å¼•ï¼š`idx_users_email` ON Users(email) [è¦æ ¼:L40]
- [x] 1.1.1.13 å‰µå»ºç´¢å¼•ï¼š`idx_users_is_admin` ON Users(is_admin) [è¦æ ¼:L41]

**1.1.2 Settings è¡¨ï¼ˆç³»çµ±è¨­å®šï¼‰[è¦æ ¼:L46-L72]**
- [x] 1.1.2.1 å‰µå»ºä¸»éµ `setting_key` (TEXT PRIMARY KEY) [è¦æ ¼:L47]
- [x] 1.1.2.2 å‰µå»º `setting_value` (TEXT NOT NULL), `description` (TEXT) [è¦æ ¼:L48-L49]
- [x] 1.1.2.3 å‰µå»º `is_dangerous` (BOOLEAN DEFAULT 0) æ¨™è¨˜å±éšªè¨­å®š [è¦æ ¼:L50]
- [x] 1.1.2.4 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`updated_at`, `updated_by` [è¦æ ¼:L51-L52]
- [x] 1.1.2.5 æ·»åŠ å¤–éµç´„æŸï¼š`updated_by` REFERENCES Users(user_id) [è¦æ ¼:L54]
- [x] 1.1.2.6 å‰µå»ºå”¯ä¸€ç´¢å¼•ï¼š`idx_settings_key` ON Settings(setting_key) [è¦æ ¼:L57]
- [x] 1.1.2.7 æ’å…¥é è¨­å€¼ï¼š`comp_leave_expiry_rule` (å±éšªè¨­å®š) [è¦æ ¼:L60-L61]
- [x] 1.1.2.8 æ’å…¥é è¨­å€¼ï¼š`daily_work_hours_limit` (å±éšªè¨­å®š) [è¦æ ¼:L62]
- [x] 1.1.2.9 æ’å…¥é è¨­å€¼ï¼š`hourly_wage_base` (å±éšªè¨­å®š) [è¦æ ¼:L63]
- [x] 1.1.2.10 æ’å…¥é è¨­å€¼ï¼š`company_name`, `contact_email` (ä¸€èˆ¬è¨­å®š) [è¦æ ¼:L64-L65]

**1.1.3 AuditLogs è¡¨ï¼ˆå¯©è¨ˆæ—¥èªŒï¼‰[è¦æ ¼:L76-L94]**
- [x] 1.1.3.1 å‰µå»ºä¸»éµ `log_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L77]
- [x] 1.1.3.2 å‰µå»º `user_id` (INTEGER NOT NULL) [è¦æ ¼:L78]
- [x] 1.1.3.3 å‰µå»º `action` (TEXT NOT NULL)ï¼Œè¨»é‡‹ï¼šCREATE, UPDATE, DELETE, LOGIN [è¦æ ¼:L79]
- [x] 1.1.3.4 å‰µå»º `table_name`, `record_id`, `changes` (JSON æ ¼å¼) [è¦æ ¼:L80-L82]
- [x] 1.1.3.5 å‰µå»ºè«‹æ±‚è³‡è¨Šï¼š`ip_address`, `user_agent` [è¦æ ¼:L83-L84]
- [x] 1.1.3.6 å‰µå»º `created_at` (TEXT DEFAULT datetime('now')) [è¦æ ¼:L85]
- [x] 1.1.3.7 æ·»åŠ å¤–éµç´„æŸï¼š`user_id` REFERENCES Users(user_id) [è¦æ ¼:L87]
- [x] 1.1.3.8 å‰µå»ºç´¢å¼•ï¼š`idx_audit_logs_user`, `idx_audit_logs_table`, `idx_audit_logs_action`, `idx_audit_logs_date` [è¦æ ¼:L90-L93]

**1.1.4 FieldAuditTrail è¡¨ï¼ˆå­—æ®µç´šå¯©è¨ˆï¼‰[è¦æ ¼:L98-L115]**
- [x] 1.1.4.1 å‰µå»ºä¸»éµ `audit_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L99]
- [x] 1.1.4.2 å‰µå»º `table_name`, `record_id`, `field_name` [è¦æ ¼:L100-L102]
- [x] 1.1.4.3 å‰µå»º `old_value`, `new_value` [è¦æ ¼:L103-L104]
- [x] 1.1.4.4 å‰µå»º `changed_by` (INTEGER NOT NULL), `changed_at` [è¦æ ¼:L105-L106]
- [x] 1.1.4.5 æ·»åŠ å¤–éµç´„æŸï¼š`changed_by` REFERENCES Users(user_id) [è¦æ ¼:L108]
- [x] 1.1.4.6 å‰µå»ºè¤‡åˆç´¢å¼•ï¼š`idx_field_audit_table_record` ON FieldAuditTrail(table_name, record_id) [è¦æ ¼:L111]
- [x] 1.1.4.7 å‰µå»ºç´¢å¼•ï¼š`idx_field_audit_field`, `idx_field_audit_user`, `idx_field_audit_date` [è¦æ ¼:L112-L114]

**1.1.5 Notifications è¡¨ï¼ˆç³»çµ±é€šçŸ¥ï¼‰[è¦æ ¼:L127-L151]**
- [x] 1.1.5.1 å‰µå»ºä¸»éµ `notification_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L128]
- [x] 1.1.5.2 å‰µå»º `user_id` (INTEGER NOT NULL)ï¼Œè¨»é‡‹ï¼šé€šçŸ¥å°è±¡ [è¦æ ¼:L129]
- [x] 1.1.5.3 å‰µå»º `type` (TEXT NOT NULL)ï¼Œè¨»é‡‹ï¼šé€šçŸ¥é¡å‹ [è¦æ ¼:L130]
- [x] 1.1.5.4 å‰µå»º `message` (TEXT NOT NULL)ï¼Œ`related_date`, `related_user_id` [è¦æ ¼:L131-L133]
- [x] 1.1.5.5 å‰µå»º `action_url` (TEXT)ï¼Œ`auto_dismiss` (BOOLEAN DEFAULT 1) [è¦æ ¼:L134-L135]
- [x] 1.1.5.6 å‰µå»ºæ™‚é–“æˆ³ï¼š`created_at`, `is_deleted`, `dismissed_at` [è¦æ ¼:L136-L138]
- [x] 1.1.5.7 æ·»åŠ å¤–éµç´„æŸï¼š`user_id` å’Œ `related_user_id` [è¦æ ¼:L140-L141]
- [x] 1.1.5.8 æ·»åŠ  CHECK ç´„æŸï¼štype IN ('missing_timesheet', 'task_overdue', ...) [è¦æ ¼:L142]
- [x] 1.1.5.9 å‰µå»ºç´¢å¼•ï¼š`idx_notifications_user`, `idx_notifications_type`, `idx_notifications_deleted`, `idx_notifications_date` [è¦æ ¼:L145-L148]
- [x] 1.1.5.10 å‰µå»ºå”¯ä¸€ç´¢å¼•ï¼š`idx_notifications_unique` (user_id, type, related_date, related_user_id) WHERE is_deleted = 0 [è¦æ ¼:L149-L150]

---

#### 1.2 èªè­‰ç³»çµ±å¯¦ç¾ [è¦æ ¼:L244-L250]

**1.2.1 UserRepository å‰µå»º**
- [x] 1.2.1.1 å‰µå»º `findByUsername()` æ–¹æ³•ï¼ˆç”¨æ–¼ç™»å…¥é©—è­‰ï¼‰ [è¦æ ¼:L536-L539]
- [x] 1.2.1.2 å‰µå»º `findById()` æ–¹æ³• [è¦æ ¼:L577]
- [x] 1.2.1.3 å‰µå»º `incrementLoginAttempts()` æ–¹æ³•ï¼ˆç™»å…¥å¤±æ•—è¨ˆæ•¸ï¼‰[è¦æ ¼:L555]
- [x] 1.2.1.4 å‰µå»º `update()` æ–¹æ³•ï¼ˆæ›´æ–°ç”¨æˆ¶è³‡è¨Šï¼‰ [è¦æ ¼:L560-L563]

**1.2.2 AuthService å‰µå»º**
- [x] 1.2.2.1 å¯¦ç¾ `login()` æ–¹æ³• [è¦æ ¼:L534-L573]
  - [x] 1.2.2.1.1 æŸ¥è©¢ç”¨æˆ¶ï¼ˆèª¿ç”¨ findByUsernameï¼‰[è¦æ ¼:L536-L539]
  - [x] 1.2.2.1.2 æª¢æŸ¥å¸³è™Ÿé–å®šï¼ˆ5æ¬¡å¤±æ•—é–å®š15åˆ†é˜ï¼‰[è¦æ ¼:L541-L549]
  - [x] 1.2.2.1.3 é©—è­‰å¯†ç¢¼ï¼ˆä½¿ç”¨ bcrypt.compareï¼‰[è¦æ ¼:L551-L557]
  - [x] 1.2.2.1.4 å¤±æ•—æ™‚å¢åŠ  login_attempts [è¦æ ¼:L554-L556]
  - [x] 1.2.2.1.5 æˆåŠŸæ™‚é‡ç½® login_attemptsï¼Œæ›´æ–° last_login [è¦æ ¼:L559-L563]
  - [x] 1.2.2.1.6 ç”Ÿæˆ JWT Tokenï¼ˆå« user_id, username, is_adminï¼‰[è¦æ ¼:L565-L570]
  - [x] 1.2.2.1.7 è¿”å› user å’Œ token [è¦æ ¼:L572]

- [x] 1.2.2.2 å¯¦ç¾ `changePassword()` æ–¹æ³• [è¦æ ¼:L575-L598]
  - [x] 1.2.2.2.1 ç²å–ç”¨æˆ¶è³‡è¨Š [è¦æ ¼:L576-L577]
  - [x] 1.2.2.2.2 é©—è­‰åŸå¯†ç¢¼ [è¦æ ¼:L579-L583]
  - [x] 1.2.2.2.3 é©—è­‰æ–°å¯†ç¢¼é•·åº¦ï¼ˆæœ€å°‘6å­—å…ƒï¼‰[è¦æ ¼:L585-L588]
  - [x] 1.2.2.2.4 é›œæ¹Šä¸¦æ›´æ–°å¯†ç¢¼ï¼ˆä½¿ç”¨ bcryptï¼‰[è¦æ ¼:L590-L594]
  - [x] 1.2.2.2.5 è¿”å›æˆåŠŸéŸ¿æ‡‰ [è¦æ ¼:L596]

**1.2.3 å¯†ç¢¼é›œæ¹Šå·¥å…·å‡½æ•¸ [è¦æ ¼:L697-L748]**
- [x] 1.2.3.1 å¯¦ç¾ `hashPassword()` å‡½æ•¸ï¼ˆä½¿ç”¨ bcryptï¼Œæˆæœ¬å› å­ 12ï¼‰[è¦æ ¼:L702-L705]
- [x] 1.2.3.2 å¯¦ç¾ `verifyPassword()` å‡½æ•¸ï¼ˆä½¿ç”¨ bcrypt.compareï¼‰[è¦æ ¼:L708-L710]
- [x] 1.2.3.3 å¯¦ç¾ `isStrongPassword()` å‡½æ•¸ï¼ˆæœ€å°‘6å­—å…ƒï¼Œç„¡è¤‡é›œåº¦è¦æ±‚ï¼‰[è¦æ ¼:L713-L724]
- [x] 1.2.3.4 å¯¦ç¾ `generateRandomPassword()` å‡½æ•¸ï¼ˆ12å­—å…ƒï¼Œå«å¤§å°å¯«æ•¸å­—ç‰¹æ®Šç¬¦è™Ÿï¼‰[è¦æ ¼:L727-L747]

**1.2.4 JWT ä¸­é–“ä»¶**
- [x] 1.2.4.1 å‰µå»º `authMiddleware`ï¼ˆé©—è­‰ JWT Tokenï¼‰ [è¦æ ¼:L244-L250, L786-L788]
- [x] 1.2.4.2 å‰µå»º `adminMiddleware`ï¼ˆæª¢æŸ¥ is_admin = trueï¼‰ [è¦æ ¼:L258-L266]
- [x] 1.2.4.3 Token å„²å­˜åœ¨ HttpOnly Cookieï¼ˆ24å°æ™‚æœ‰æ•ˆæœŸï¼‰[è¦æ ¼:L786-L788]

**1.2.5 èªè­‰ API è·¯ç”±å‰µå»º**
- [x] 1.2.5.1 `POST /api/v1/auth/login` [è¦æ ¼:L246]
  - [x] 1.2.5.1.1 è§£æè«‹æ±‚ Bodyï¼ˆusername, passwordï¼‰
  - [x] 1.2.5.1.2 èª¿ç”¨ AuthService.login()
  - [x] 1.2.5.1.3 è¨­ç½® HttpOnly Cookieï¼ˆå­˜å„² JWTï¼‰
  - [x] 1.2.5.1.4 è¿”å›ç”¨æˆ¶è³‡è¨Šï¼ˆä¸å«å¯†ç¢¼ï¼‰
  - [x] 1.2.5.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.2.5.2 `POST /api/v1/auth/logout` [è¦æ ¼:L247]
  - [x] 1.2.5.2.1 æ¸…é™¤ HttpOnly Cookie
  - [x] 1.2.5.2.2 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 1.2.5.2.3 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.2.5.3 `GET /api/v1/auth/me` [è¦æ ¼:L248]
  - [x] 1.2.5.3.1 æ‡‰ç”¨ authMiddleware
  - [x] 1.2.5.3.2 å¾ JWT è§£æç”¨æˆ¶è³‡è¨Š
  - [x] 1.2.5.3.3 è¿”å›ç•¶å‰ç”¨æˆ¶è³‡è¨Š
  - [x] 1.2.5.3.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.2.5.4 `POST /api/v1/auth/change-password` [è¦æ ¼:L249]
  - [x] 1.2.5.4.1 æ‡‰ç”¨ authMiddleware
  - [x] 1.2.5.4.2 è§£æè«‹æ±‚ Bodyï¼ˆcurrentPassword, newPasswordï¼‰
  - [x] 1.2.5.4.3 èª¿ç”¨ AuthService.changePassword()
  - [x] 1.2.5.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 1.2.5.4.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 1.3 å€‹äººè³‡æ–™ç®¡ç†å¯¦ç¾ [è¦æ ¼:L253-L256]

**1.3.1 ProfileService å‰µå»º**
- [x] 1.3.1.1 å¯¦ç¾ `getProfile()` æ–¹æ³•ï¼ˆç²å–ç•¶å‰ç”¨æˆ¶è³‡è¨Šï¼‰ [è¦æ ¼:L254]
- [x] 1.3.1.2 å¯¦ç¾ `updateProfile()` æ–¹æ³•ï¼ˆæ›´æ–°å€‹äººè³‡æ–™ï¼Œä¸å«æ•æ„Ÿæ¬„ä½ï¼‰ [è¦æ ¼:L255]
  - [x] 1.3.1.2.1 é©—è­‰å¯æ›´æ–°æ¬„ä½ï¼ˆemail, phone, address, emergency_contact_*ï¼‰
  - [x] 1.3.1.2.2 ç¦æ­¢æ›´æ–°æ•æ„Ÿæ¬„ä½ï¼ˆusername, password_hash, is_adminï¼‰
  - [x] 1.3.1.2.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**1.3.2 å€‹äººè³‡æ–™ API è·¯ç”±å‰µå»º**
- [x] 1.3.2.1 `GET /api/v1/profile` [è¦æ ¼:L254]
  - [x] 1.3.2.1.1 æ‡‰ç”¨ authMiddleware
  - [x] 1.3.2.1.2 èª¿ç”¨ ProfileService.getProfile()
  - [x] 1.3.2.1.3 è¿”å›å€‹äººè³‡æ–™ï¼ˆä¸å«å¯†ç¢¼ï¼‰
  - [x] 1.3.2.1.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.3.2.2 `PUT /api/v1/profile` [è¦æ ¼:L255]
  - [x] 1.3.2.2.1 æ‡‰ç”¨ authMiddleware
  - [x] 1.3.2.2.2 è§£æè«‹æ±‚ Bodyï¼ˆemail, phone, address, etc.ï¼‰
  - [x] 1.3.2.2.3 èª¿ç”¨ ProfileService.updateProfile()
  - [x] 1.3.2.2.4 è¿”å›æ›´æ–°å¾Œçš„å€‹äººè³‡æ–™
  - [x] 1.3.2.2.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 1.4 å“¡å·¥ç®¡ç†å¯¦ç¾ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰[è¦æ ¼:L259-L266]

**1.4.1 UserManagementService å‰µå»º**
- [x] 1.4.1.1 å¯¦ç¾ `createUser()` æ–¹æ³• [è¦æ ¼:L604-L641]
  - [x] 1.4.1.1.1 é©—è­‰å¿…å¡«æ¬„ä½ï¼ˆusername, name, email, gender, start_dateï¼‰[è¦æ ¼:L606-L608]
  - [x] 1.4.1.1.2 é©—è­‰æ€§åˆ¥å€¼ï¼ˆM æˆ– Fï¼‰[è¦æ ¼:L610-L613]
  - [x] 1.4.1.1.3 æª¢æŸ¥ username å”¯ä¸€æ€§ [è¦æ ¼:L616-L619]
  - [x] 1.4.1.1.4 ç”Ÿæˆåˆå§‹å¯†ç¢¼ï¼ˆèª¿ç”¨ generateRandomPasswordï¼‰[è¦æ ¼:L622]
  - [x] 1.4.1.1.5 é›œæ¹Šå¯†ç¢¼ï¼ˆèª¿ç”¨ hashPasswordï¼‰[è¦æ ¼:L623]
  - [x] 1.4.1.1.6 å‰µå»ºç”¨æˆ¶è¨˜éŒ„ [è¦æ ¼:L626-L630]
  - [x] 1.4.1.1.7 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ [è¦æ ¼:L633-L638]
  - [x] 1.4.1.1.8 è¿”å›ç”¨æˆ¶å’Œåˆå§‹å¯†ç¢¼ [è¦æ ¼:L640]

- [x] 1.4.1.2 å¯¦ç¾ `updateUser()` æ–¹æ³•
  - [x] 1.4.1.2.1 æŸ¥è©¢ç”¨æˆ¶æ˜¯å¦å­˜åœ¨
  - [x] 1.4.1.2.2 é©—è­‰å¯æ›´æ–°æ¬„ä½
  - [x] 1.4.1.2.3 è¨˜éŒ„å­—æ®µç´šå¯©è¨ˆï¼ˆFieldAuditTrailï¼‰
  - [x] 1.4.1.2.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

- [x] 1.4.1.3 å¯¦ç¾ `deleteUser()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰
  - [x] 1.4.1.3.1 è¨­ç½® is_deleted = 1, deleted_at, deleted_by
  - [x] 1.4.1.3.2 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

- [x] 1.4.1.4 å¯¦ç¾ `resetPassword()` æ–¹æ³• [è¦æ ¼:L643-L663]
  - [x] 1.4.1.4.1 ç”Ÿæˆæ–°å¯†ç¢¼ï¼ˆèª¿ç”¨ generateRandomPasswordï¼‰[è¦æ ¼:L645]
  - [x] 1.4.1.4.2 é›œæ¹Šå¯†ç¢¼ [è¦æ ¼:L646]
  - [x] 1.4.1.4.3 æ›´æ–° password_hash å’Œé‡ç½® login_attempts [è¦æ ¼:L649-L652]
  - [x] 1.4.1.4.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ [è¦æ ¼:L654-L660]
  - [x] 1.4.1.4.5 è¿”å›æ–°å¯†ç¢¼ [è¦æ ¼:L662]

**1.4.2 å“¡å·¥ç®¡ç† API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [x] 1.4.2.1 `GET /api/v1/admin/users` [è¦æ ¼:L260]
  - [x] 1.4.2.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.4.2.1.2 æ”¯æŒæŸ¥è©¢åƒæ•¸ï¼ˆis_admin, limit, offsetï¼‰
  - [x] 1.4.2.1.3 èª¿ç”¨ UserRepository.findAll()
  - [x] 1.4.2.1.4 è¿”å›å“¡å·¥åˆ—è¡¨ï¼ˆä¸å«å¯†ç¢¼ï¼‰
  - [x] 1.4.2.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.4.2.2 `POST /api/v1/admin/users` [è¦æ ¼:L261]
  - [x] 1.4.2.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.4.2.2.2 è§£æè«‹æ±‚ Bodyï¼ˆusername, name, email, gender, start_date, etc.ï¼‰
  - [x] 1.4.2.2.3 èª¿ç”¨ UserManagementService.createUser()
  - [x] 1.4.2.2.4 è¿”å› 201 Createdï¼ˆå«åˆå§‹å¯†ç¢¼ï¼‰
  - [x] 1.4.2.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.4.2.3 `GET /api/v1/admin/users/:id` [è¦æ ¼:L262]
  - [x] 1.4.2.3.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.4.2.3.2 è§£æè·¯å¾‘åƒæ•¸ user_id
  - [x] 1.4.2.3.3 èª¿ç”¨ UserRepository.findById()
  - [x] 1.4.2.3.4 è¿”å›å“¡å·¥è©³æƒ…ï¼ˆä¸å«å¯†ç¢¼ï¼‰
  - [x] 1.4.2.3.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.4.2.4 `PUT /api/v1/admin/users/:id` [è¦æ ¼:L263]
  - [x] 1.4.2.4.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.4.2.4.2 è§£æè·¯å¾‘åƒæ•¸å’Œè«‹æ±‚ Body
  - [x] 1.4.2.4.3 èª¿ç”¨ UserManagementService.updateUser()
  - [x] 1.4.2.4.4 è¿”å›æ›´æ–°å¾Œçš„å“¡å·¥è³‡è¨Š
  - [x] 1.4.2.4.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.4.2.5 `DELETE /api/v1/admin/users/:id` [è¦æ ¼:L264]
  - [x] 1.4.2.5.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.4.2.5.2 èª¿ç”¨ UserManagementService.deleteUser()ï¼ˆè»Ÿåˆªé™¤ï¼‰
  - [x] 1.4.2.5.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 1.4.2.5.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.4.2.6 `POST /api/v1/admin/users/:id/reset-password` [è¦æ ¼:L265]
  - [x] 1.4.2.6.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.4.2.6.2 èª¿ç”¨ UserManagementService.resetPassword()
  - [x] 1.4.2.6.3 è¿”å›æ–°å¯†ç¢¼
  - [x] 1.4.2.6.4 æ·»åŠ  OpenAPI è¨»è§£

---

#### 1.5 ç³»çµ±è¨­å®šå¯¦ç¾ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰[è¦æ ¼:L269-L272]

**1.5.1 SettingsService å‰µå»º**
- [x] 1.5.1.1 å¯¦ç¾ `getAllSettings()` æ–¹æ³• [è¦æ ¼:L270-L302]
  - [x] 1.5.1.1.1 æŸ¥è©¢æ‰€æœ‰è¨­å®š
  - [x] 1.5.1.1.2 æŒ‰ is_dangerous åˆ†çµ„ï¼ˆå±éšªè¨­å®šå„ªå…ˆé¡¯ç¤ºï¼‰

- [x] 1.5.1.2 å¯¦ç¾ `updateSetting()` æ–¹æ³• [è¦æ ¼:L305-L322]
  - [x] 1.5.1.2.1 æŸ¥è©¢è¨­å®šæ˜¯å¦å­˜åœ¨
  - [x] 1.5.1.2.2 æª¢æŸ¥ is_dangerous æ¨™è¨˜ [è¦æ ¼:L50]
  - [x] 1.5.1.2.3 å±éšªè¨­å®šéœ€ç¢ºèªï¼ˆconfirmed = trueï¼‰[è¦æ ¼:L309]
  - [x] 1.5.1.2.4 æª¢æŸ¥å”¯è®€ä¿è­·ï¼ˆdaily_work_hours_limit, hourly_wage_base ä¸å¯ä¿®æ”¹ï¼‰[è¦æ ¼:L398-L419]
  - [x] 1.5.1.2.5 è¨˜éŒ„èˆŠå€¼ï¼ˆç”¨æ–¼å¯©è¨ˆï¼‰[è¦æ ¼:L318]
  - [x] 1.5.1.2.6 æ›´æ–°è¨­å®šå€¼
  - [x] 1.5.1.2.7 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**1.5.2 ç³»çµ±è¨­å®š API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [x] 1.5.2.1 `GET /api/v1/admin/settings` [è¦æ ¼:L270, L276-L302]
  - [x] 1.5.2.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.5.2.1.2 èª¿ç”¨ SettingsService.getAllSettings()
  - [x] 1.5.2.1.3 è¿”å›è¨­å®šåˆ—è¡¨ï¼ˆå« is_dangerous æ¨™è¨˜ï¼‰[è¦æ ¼:L278-L301]
  - [x] 1.5.2.1.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.5.2.2 `PUT /api/v1/admin/settings/:key` [è¦æ ¼:L271, L305-L322]
  - [x] 1.5.2.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.5.2.2.2 è§£æè·¯å¾‘åƒæ•¸ setting_key
  - [x] 1.5.2.2.3 è§£æè«‹æ±‚ Bodyï¼ˆsetting_value, confirmedï¼‰[è¦æ ¼:L308-L310]
  - [x] 1.5.2.2.4 èª¿ç”¨ SettingsService.updateSetting()
  - [x] 1.5.2.2.5 è¿”å›æ›´æ–°çµæœï¼ˆå« old_value å’Œ warningï¼‰[è¦æ ¼:L313-L321]
  - [x] 1.5.2.2.6 æ·»åŠ  OpenAPI è¨»è§£

---

#### 1.6 å¯©è¨ˆæ—¥èªŒæŸ¥è©¢ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰[è¦æ ¼:L325-L328]

**1.6.1 AuditLogService å‰µå»º [è¦æ ¼:L668-L689]**
- [x] 1.6.1.1 å¯¦ç¾ `log()` æ–¹æ³•ï¼ˆè¨˜éŒ„å¯©è¨ˆæ—¥èªŒï¼‰[è¦æ ¼:L670-L680]
  - [x] 1.6.1.1.1 æ¥æ”¶åƒæ•¸ï¼šuser_id, action, table_name, record_id, changes, ip_address, user_agent
  - [x] 1.6.1.1.2 å°‡ changes è½‰æ›ç‚º JSON å­—ä¸² [è¦æ ¼:L676]
  - [x] 1.6.1.1.3 å‰µå»ºæ—¥èªŒè¨˜éŒ„

- [x] 1.6.1.2 å¯¦ç¾ `getRecordHistory()` æ–¹æ³•ï¼ˆæŸ¥è©¢è¨˜éŒ„æ­·å²ï¼‰[è¦æ ¼:L682-L684]
- [x] 1.6.1.3 å¯¦ç¾ `getUserLogs()` æ–¹æ³•ï¼ˆæŸ¥è©¢ç”¨æˆ¶æ“ä½œæ—¥èªŒï¼‰[è¦æ ¼:L686-L688]

**1.6.2 å¯©è¨ˆæ—¥èªŒ API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [x] 1.6.2.1 `GET /api/v1/admin/audit-logs` [è¦æ ¼:L326]
  - [x] 1.6.2.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.6.2.1.2 æ”¯æŒæŸ¥è©¢åƒæ•¸ï¼ˆaction, table_name, start_date, end_date, limit, offsetï¼‰
  - [x] 1.6.2.1.3 èª¿ç”¨ AuditLogRepository.findAll()
  - [x] 1.6.2.1.4 è¿”å›å¯©è¨ˆæ—¥èªŒåˆ—è¡¨
  - [x] 1.6.2.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 1.6.2.2 `GET /api/v1/admin/audit-logs/user/:userId` [è¦æ ¼:L327]
  - [x] 1.6.2.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [x] 1.6.2.2.2 è§£æè·¯å¾‘åƒæ•¸ userId
  - [x] 1.6.2.2.3 æ”¯æŒæŸ¥è©¢åƒæ•¸ï¼ˆstart_date, end_dateï¼‰
  - [x] 1.6.2.2.4 èª¿ç”¨ AuditLogService.getUserLogs()
  - [x] 1.6.2.2.5 è¿”å›ç‰¹å®šå“¡å·¥çš„æ“ä½œæ—¥èªŒ
  - [x] 1.6.2.2.6 æ·»åŠ  OpenAPI è¨»è§£

---

#### 1.7 å®Œæ•´æ€§é©—è­‰ [è¦æ ¼:L1-L920]

**1.7.1 API æ¸…å–®é©—è­‰**
- [x] 1.7.1.1 é©—è­‰èªè­‰ APIï¼ˆ4 å€‹ï¼‰[è¦æ ¼:L244-L250]
- [x] 1.7.1.2 é©—è­‰å€‹äººè³‡æ–™ APIï¼ˆ2 å€‹ï¼‰[è¦æ ¼:L253-L256]
- [x] 1.7.1.3 é©—è­‰å“¡å·¥ç®¡ç† APIï¼ˆ6 å€‹ï¼‰[è¦æ ¼:L259-L266]
- [x] 1.7.1.4 é©—è­‰ç³»çµ±è¨­å®š APIï¼ˆ2 å€‹ï¼‰[è¦æ ¼:L269-L272]
- [x] 1.7.1.5 é©—è­‰å¯©è¨ˆæ—¥èªŒ APIï¼ˆ2 å€‹ï¼‰[è¦æ ¼:L325-L328]
- [x] 1.7.1.6 ç¢ºèªç¸½è¨ˆï¼š14 å€‹ API

**1.7.2 æ¥­å‹™é‚è¼¯é©—è­‰**
- [x] 1.7.2.1 é©—è­‰ç™»å…¥é–å®šæ©Ÿåˆ¶ï¼ˆ5æ¬¡å¤±æ•—é–å®š15åˆ†é˜ï¼‰[è¦æ ¼:L542-L549, L761-L765]
- [x] 1.7.2.2 é©—è­‰å¯†ç¢¼å¼·åº¦ï¼ˆæœ€å°‘6å­—å…ƒï¼‰[è¦æ ¼:L586-L588, L767-L774]
- [x] 1.7.2.3 é©—è­‰ bcrypt é›œæ¹Šï¼ˆæˆæœ¬å› å­ 12ï¼‰[è¦æ ¼:L702-L705, L750-L756]
- [x] 1.7.2.4 é©—è­‰å±éšªè¨­å®šç¢ºèªæ©Ÿåˆ¶ [è¦æ ¼:L309, L472-L475]
- [x] 1.7.2.5 é©—è­‰å”¯è®€ä¿è­·ï¼ˆdaily_work_hours_limit, hourly_wage_baseï¼‰[è¦æ ¼:L398-L419]
- [x] 1.7.2.6 é©—è­‰å¯©è¨ˆæ—¥èªŒè¨˜éŒ„ï¼ˆæ‰€æœ‰ CREATE/UPDATE/DELETE æ“ä½œï¼‰[è¦æ ¼:L633-L638, L654-L660]

**1.7.3 å›åˆ°è¦æ ¼é€ä¸€é©—è­‰**
- [x] 1.7.3.1 æ‰“é–‹è¦æ ¼æ–‡æª” L11-L42ï¼Œé©—è­‰ Users è¡¨å®Œæ•´æ€§
- [x] 1.7.3.2 æ‰“é–‹è¦æ ¼æ–‡æª” L46-L72ï¼Œé©—è­‰ Settings è¡¨å’Œé è¨­å€¼
- [x] 1.7.3.3 æ‰“é–‹è¦æ ¼æ–‡æª” L76-L94ï¼Œé©—è­‰ AuditLogs è¡¨
- [x] 1.7.3.4 æ‰“é–‹è¦æ ¼æ–‡æª” L98-L115ï¼Œé©—è­‰ FieldAuditTrail è¡¨
- [x] 1.7.3.5 æ‰“é–‹è¦æ ¼æ–‡æª” L127-L151ï¼Œé©—è­‰ Notifications è¡¨
- [x] 1.7.3.6 æ‰“é–‹è¦æ ¼æ–‡æª” L534-L598ï¼Œé©—è­‰ AuthService å®Œæ•´å¯¦ç¾
- [x] 1.7.3.7 æ‰“é–‹è¦æ ¼æ–‡æª” L604-L663ï¼Œé©—è­‰ UserManagementService å®Œæ•´å¯¦ç¾
- [x] 1.7.3.8 é€ä¸€é©—è­‰æ‰€æœ‰ 14 å€‹ API çš„å¯¦ç¾

---

#### 1.8 éƒ¨ç½²èˆ‡æ¸¬è©¦
- [x] 1.8.1 [å…§éƒ¨] æ›´æ–° SSOT æ–‡ä»¶ï¼ˆç¢ºèªä½¿ç”¨ v3.2ï¼š45è¡¨ï¼Œ147APIï¼‰
- [x] 1.8.2 [å…§éƒ¨] æ›´æ–° `MASTER_PLAN.md` é€²åº¦çµ±è¨ˆ
- [x] 1.8.3 [å…§éƒ¨] åŸ·è¡Œä¸€è‡´æ€§é©—è­‰ä¸¦ä¿®å¾©ä¸ä¸€è‡´
- [x] 1.8.4 [å…§éƒ¨] æäº¤æ‰€æœ‰æ›´æ”¹åˆ° Git
- [x] 1.8.5 [å…§éƒ¨] åŸ·è¡Œè‡ªå‹•éƒ¨ç½²ï¼ˆgit push origin mainï¼‰
- [x] 1.8.6 [å…§éƒ¨] é©—è­‰ Cloudflare Pages éƒ¨ç½²æˆåŠŸ

---

### [x] æ¨¡çµ„ 2ï¼šæ¥­å‹™è¦å‰‡ï¼ˆæ¥­å‹™è¦å‰‡-å®Œæ•´è¦æ ¼.mdï¼‰âœ… å·²å®Œæˆï¼ˆå·²è£œå……éºæ¼ï¼‰
**è³‡æ–™è¡¨ï¼š** 8 å€‹ | **APIï¼š** 18 å€‹ | **Cron Jobsï¼š** 0 å€‹

#### 2.1 è³‡æ–™è¡¨å‰µå»º

**2.1.1 Holidays è¡¨ï¼ˆåœ‹å®šå‡æ—¥ï¼‰[è¦æ ¼:L11-L23]**
- [x] 2.1.1.1 å‰µå»ºä¸»éµ `holiday_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L12]
- [x] 2.1.1.2 å‰µå»º `holiday_date` (TEXT UNIQUE NOT NULL) [è¦æ ¼:L13]
- [x] 2.1.1.3 å‰µå»º `name` (TEXT NOT NULL) [è¦æ ¼:L14]
- [x] 2.1.1.4 å‰µå»º `is_national_holiday` (BOOLEAN DEFAULT 1)ï¼Œè¨»é‡‹ï¼šæ˜¯å¦ç‚ºåœ‹å®šå‡æ—¥ [è¦æ ¼:L15]
- [x] 2.1.1.5 å‰µå»º `is_makeup_workday` (BOOLEAN DEFAULT 0)ï¼Œè¨»é‡‹ï¼šæ˜¯å¦ç‚ºè£œç­æ—¥ [è¦æ ¼:L16]
- [x] 2.1.1.6 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `is_deleted` [è¦æ ¼:L17-L18]
- [x] 2.1.1.7 å‰µå»ºå”¯ä¸€ç´¢å¼•ï¼š`idx_holidays_date` ON Holidays(holiday_date) [è¦æ ¼:L21]
- [x] 2.1.1.8 å‰µå»ºç´¢å¼•ï¼š`idx_holidays_makeup` ON Holidays(is_makeup_workday) [è¦æ ¼:L22]

**2.1.2 LeaveTypes è¡¨ï¼ˆå‡åˆ¥é¡å‹ï¼‰[è¦æ ¼:L54-L66]**
- [x] 2.1.2.1 å‰µå»ºä¸»éµ `leave_type_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L55]
- [x] 2.1.2.2 å‰µå»º `type_name` (TEXT UNIQUE NOT NULL) [è¦æ ¼:L56]
- [x] 2.1.2.3 å‰µå»º `annual_quota` (REAL) [è¦æ ¼:L57]
- [x] 2.1.2.4 å‰µå»º `deduct_leave` (BOOLEAN DEFAULT 1) [è¦æ ¼:L58]
- [x] 2.1.2.5 å‰µå»º `is_paid` (BOOLEAN DEFAULT 1) [è¦æ ¼:L59]
- [x] 2.1.2.6 å‰µå»º `gender_specific` (TEXT)ï¼Œè¨»é‡‹ï¼š'M', 'F', NULL [è¦æ ¼:L60]
- [x] 2.1.2.7 å‰µå»º `is_enabled`, `sort_order` [è¦æ ¼:L61-L62]
- [x] 2.1.2.8 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `is_deleted` [è¦æ ¼:L63-L64]
- [x] 2.1.2.9 æ’å…¥9ç¨®é è¨­å‡åˆ¥ï¼ˆç‰¹ä¼‘ã€äº‹å‡ã€ç—…å‡ã€å©šå‡ç­‰ï¼‰

**2.1.3 AnnualLeaveRules è¡¨ï¼ˆç‰¹ä¼‘è¦å‰‡ï¼‰[è¦æ ¼:L70-L77]**
- [x] 2.1.3.1 å‰µå»ºä¸»éµ `rule_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L71]
- [x] 2.1.3.2 å‰µå»º `min_months` (INTEGER NOT NULL) [è¦æ ¼:L72]
- [x] 2.1.3.3 å‰µå»º `max_months` (INTEGER NOT NULL) [è¦æ ¼:L73]
- [x] 2.1.3.4 å‰µå»º `days` (INTEGER NOT NULL) [è¦æ ¼:L74]
- [x] 2.1.3.5 å‰µå»º `description` (TEXT) [è¦æ ¼:L75]
- [x] 2.1.3.6 æ’å…¥6æª”æ³•å®šé è¨­è¦å‰‡ [è¦æ ¼:L267-L274]
  - [x] 2.1.3.6.1 6å€‹æœˆ-1å¹´ï¼š3å¤©
  - [x] 2.1.3.6.2 1-2å¹´ï¼š7å¤©
  - [x] 2.1.3.6.3 2-3å¹´ï¼š10å¤©
  - [x] 2.1.3.6.4 3-5å¹´ï¼š14å¤©
  - [x] 2.1.3.6.5 5-10å¹´ï¼š15å¤©
  - [x] 2.1.3.6.6 10å¹´ä»¥ä¸Šï¼šæ¯å¹´+1å¤©ï¼ˆæœ€é«˜30å¤©ï¼‰

**2.1.4 OtherLeaveRules è¡¨ï¼ˆå…¶ä»–å‡æœŸè¦å‰‡ï¼‰[è¦æ ¼:L81-L90]**
- [x] 2.1.4.1 å‰µå»ºä¸»éµ `rule_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L82]
- [x] 2.1.4.2 å‰µå»º `leave_type_id` (INTEGER NOT NULL) [è¦æ ¼:L83]
- [x] 2.1.4.3 å‰µå»º `event_type` (TEXT NOT NULL) [è¦æ ¼:L84]
- [x] 2.1.4.4 å‰µå»º `days` (REAL NOT NULL) [è¦æ ¼:L85]
- [x] 2.1.4.5 å‰µå»º `validity_days` (INTEGER DEFAULT 365) [è¦æ ¼:L86]
- [x] 2.1.4.6 æ·»åŠ å¤–éµç´„æŸï¼š`leave_type_id` REFERENCES LeaveTypes(leave_type_id) [è¦æ ¼:L88]
- [x] 2.1.4.7 æ’å…¥å©šå‡å–ªå‡ç­‰9ç¨®é è¨­è¦å‰‡

**2.1.5 OvertimeRates è¡¨ï¼ˆåŠ ç­è²»ç‡ï¼‰[è¦æ ¼:L94-L103]**
- [x] 2.1.5.1 å‰µå»ºä¸»éµ `rate_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L95]
- [x] 2.1.5.2 å‰µå»º `work_type_id` (INTEGER NOT NULL) [è¦æ ¼:L96]
- [x] 2.1.5.3 å‰µå»º `rate_multiplier` (REAL NOT NULL) [è¦æ ¼:L97]
- [x] 2.1.5.4 å‰µå»º `effective_date` (TEXT NOT NULL) [è¦æ ¼:L98]
- [x] 2.1.5.5 å‰µå»º `is_current` (BOOLEAN DEFAULT 1) [è¦æ ¼:L99]
- [x] 2.1.5.6 æ·»åŠ å¤–éµç´„æŸï¼š`work_type_id` REFERENCES WorkTypes(work_type_id) [è¦æ ¼:L101]
- [x] 2.1.5.7 æ’å…¥5ç¨®æ³•å®šè²»ç‡ [è¦æ ¼:L276-L283]
  - [x] 2.1.5.7.1 æ­£å¸¸å·¥æ™‚ï¼š1.00å€
  - [x] 2.1.5.7.2 å¹³æ—¥åŠ ç­ï¼š1.34å€
  - [x] 2.1.5.7.3 ä¼‘æ¯æ—¥åŠ ç­ï¼ˆå‰2å°æ™‚ï¼‰ï¼š1.34å€
  - [x] 2.1.5.7.4 ä¼‘æ¯æ—¥åŠ ç­ï¼ˆç¬¬3å°æ™‚èµ·ï¼‰ï¼š1.67å€
  - [x] 2.1.5.7.5 åœ‹å®šå‡æ—¥åŠ ç­ï¼š2.00å€

**2.1.6 ServiceFrequencyTypes è¡¨ï¼ˆé€±æœŸé¡å‹ï¼‰[è¦æ ¼:L107-L116]**
- [x] 2.1.6.1 å‰µå»ºä¸»éµ `frequency_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L108]
- [x] 2.1.6.2 å‰µå»º `name` (TEXT UNIQUE NOT NULL) [è¦æ ¼:L109]
- [x] 2.1.6.3 å‰µå»º `days_interval`, `months_interval` [è¦æ ¼:L110-L111]
- [x] 2.1.6.4 å‰µå»º `is_recurring`, `is_enabled`, `sort_order` [è¦æ ¼:L112-L114]
- [x] 2.1.6.5 æ’å…¥6ç¨®é è¨­é€±æœŸ [è¦æ ¼:L285-L288]
  - [x] 2.1.6.5.1 å–®æ¬¡
  - [x] 2.1.6.5.2 æ¯æœˆ
  - [x] 2.1.6.5.3 é›™æœˆ
  - [x] 2.1.6.5.4 æ¯å­£
  - [x] 2.1.6.5.5 åŠå¹´
  - [x] 2.1.6.5.6 æ¯å¹´

**2.1.7 Services è¡¨ï¼ˆæœå‹™é …ç›®ï¼‰[è¦æ ¼:L120-L133]**
- [x] 2.1.7.1 å‰µå»ºä¸»éµ `service_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L121]
- [x] 2.1.7.2 å‰µå»º `parent_service_id` (INTEGER) [è¦æ ¼:L122]
- [x] 2.1.7.3 å‰µå»º `service_name` (TEXT NOT NULL) [è¦æ ¼:L123]
- [x] 2.1.7.4 å‰µå»º `description`, `sort_order` [è¦æ ¼:L124-L125]
- [x] 2.1.7.5 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `is_deleted` [è¦æ ¼:L126-L127]
- [x] 2.1.7.6 æ·»åŠ å¤–éµç´„æŸï¼š`parent_service_id` REFERENCES Services(service_id) [è¦æ ¼:L129]
- [x] 2.1.7.7 å‰µå»ºç´¢å¼•ï¼š`idx_services_parent` ON Services(parent_service_id) [è¦æ ¼:L132]
- [x] 2.1.7.8 æ’å…¥4å€‹ä¸»æœå‹™+6å€‹å­æœå‹™ç¤ºä¾‹ï¼ˆç¨…å‹™ã€æœƒè¨ˆã€å¯©è¨ˆã€è«®è©¢ï¼‰

**2.1.8 WorkTypes è¡¨ï¼ˆå·¥ä½œé¡å‹ï¼‰[ä¾è³´é …]**
- [x] 2.1.8.1 å‰µå»ºä¸»éµ `work_type_id`
- [x] 2.1.8.2 å‰µå»º `type_name` (TEXT UNIQUE NOT NULL)
- [x] 2.1.8.3 å‰µå»º `description` (TEXT)
- [x] 2.1.8.4 æ’å…¥7ç¨®é è¨­é¡å‹ï¼ˆæ­£å¸¸å·¥æ™‚ã€å¹³æ—¥åŠ ç­ã€ä¼‘æ¯æ—¥åŠ ç­ç­‰ï¼‰

---

#### 2.2 åœ‹å®šå‡æ—¥ç®¡ç† [è¦æ ¼:L144-L149]

**2.2.1 HolidayRepository å‰µå»º**
- [x] 2.2.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒå¹´ä»½éæ¿¾ï¼‰[è¦æ ¼:L144-L149]
- [x] 2.2.1.2 å‰µå»º `findById()` æ–¹æ³• [è¦æ ¼:L11-L23]
- [x] 2.2.1.3 å‰µå»º `findByDate()` æ–¹æ³•ï¼ˆæª¢æŸ¥æ—¥æœŸå”¯ä¸€æ€§ï¼‰[è¦æ ¼:L13, L27-L34, L292]
- [x] 2.2.1.4 å‰µå»º `create()` æ–¹æ³• [è¦æ ¼:L11-L23]
- [x] 2.2.1.5 å‰µå»º `update()` æ–¹æ³• [è¦æ ¼:L11-L23]
- [x] 2.2.1.6 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰[è¦æ ¼:L18]

**2.2.2 HolidayService å‰µå»º**
- [x] 2.2.2.1 å¯¦ç¾ `createHoliday()` æ–¹æ³•
  - [x] 2.2.2.1.1 é©—è­‰ holiday_date å’Œ name å¿…å¡«
  - [x] 2.2.2.1.2 æª¢æŸ¥æ—¥æœŸå”¯ä¸€æ€§ [è¦æ ¼:L292]
  - [x] 2.2.2.1.3 é©—è­‰ is_national_holiday å’Œ is_makeup_workday é‚è¼¯ [è¦æ ¼:L27-L50]
  - [x] 2.2.2.1.4 å‰µå»ºå‡æ—¥è¨˜éŒ„
  - [x] 2.2.2.1.5 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

- [x] 2.2.2.2 å¯¦ç¾ `importHolidays()` æ–¹æ³• [è¦æ ¼:L244-L256]
  - [x] 2.2.2.2.1 è§£æ CSV æ•¸æ“š
  - [x] 2.2.2.2.2 éæ­·å‡æ—¥åˆ—è¡¨
  - [x] 2.2.2.2.3 æ‰¹é‡å‰µå»ºè¨˜éŒ„
  - [x] 2.2.2.2.4 è¿”å›å°å…¥æ•¸é‡

**2.2.3 åœ‹å®šå‡æ—¥ API è·¯ç”±å‰µå»ºï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L144-L149]**
- [x] 2.2.3.1 `GET /api/v1/holidays` [è¦æ ¼:L144]
  - [x] 2.2.3.1.1 æ‡‰ç”¨ authMiddleware
  - [x] 2.2.3.1.2 æ”¯æŒæŸ¥è©¢åƒæ•¸ï¼ˆyear, limit, offsetï¼‰
  - [x] 2.2.3.1.3 èª¿ç”¨ HolidayRepository.findAll()
  - [x] 2.2.3.1.4 è¿”å›å‡æ—¥åˆ—è¡¨
  - [x] 2.2.3.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.2.3.2 `POST /api/v1/holidays` [è¦æ ¼:L145]
  - [x] 2.2.3.2.1 æ‡‰ç”¨ authMiddlewareï¼ˆå°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼šæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L141]
  - [x] 2.2.3.2.2 è§£æè«‹æ±‚ Bodyï¼ˆholiday_date, name, is_national_holiday, is_makeup_workdayï¼‰
  - [x] 2.2.3.2.3 èª¿ç”¨ HolidayService.createHoliday()
  - [x] 2.2.3.2.4 è¿”å› 201 Created
  - [x] 2.2.3.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.2.3.3 `PUT /api/v1/holidays/:id` [è¦æ ¼:L146]
  - [x] 2.2.3.3.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 2.2.3.3.2 è§£æè·¯å¾‘åƒæ•¸å’Œè«‹æ±‚ Body
  - [x] 2.2.3.3.3 èª¿ç”¨ HolidayService.updateHoliday()
  - [x] 2.2.3.3.4 è¿”å›æ›´æ–°å¾Œçš„å‡æ—¥
  - [x] 2.2.3.3.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.2.3.4 `DELETE /api/v1/holidays/:id` [è¦æ ¼:L147]
  - [x] 2.2.3.4.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 2.2.3.4.2 èª¿ç”¨ HolidayService.deleteHoliday()ï¼ˆè»Ÿåˆªé™¤ï¼‰
  - [x] 2.2.3.4.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 2.2.3.4.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.2.3.5 `POST /api/v1/admin/holidays/import` [è¦æ ¼:L148]
  - [x] 2.2.3.5.1 æ‡‰ç”¨ authMiddleware + adminMiddlewareï¼ˆåƒ…ç®¡ç†å“¡ï¼‰
  - [x] 2.2.3.5.2 è§£æ CSV æ–‡ä»¶
  - [x] 2.2.3.5.3 èª¿ç”¨ HolidayService.importHolidays()
  - [x] 2.2.3.5.4 è¿”å›å°å…¥çµ±è¨ˆ
  - [x] 2.2.3.5.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 2.3 å‡åˆ¥é¡å‹ç®¡ç† [è¦æ ¼:L156-L161]

**2.3.1 LeaveTypeRepository å‰µå»º**
- [x] 2.3.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒ is_enabled éæ¿¾ï¼‰[è¦æ ¼:L156-L161]
- [x] 2.3.1.2 å‰µå»º `findById()` æ–¹æ³• [è¦æ ¼:L54-L66]
- [x] 2.3.1.3 å‰µå»º `findByName()` æ–¹æ³•ï¼ˆæª¢æŸ¥åç¨±å”¯ä¸€æ€§ï¼‰[è¦æ ¼:L56]
- [x] 2.3.1.4 å‰µå»º `create()` æ–¹æ³• [è¦æ ¼:L54-L66]
- [x] 2.3.1.5 å‰µå»º `update()` æ–¹æ³• [è¦æ ¼:L54-L66]
- [x] 2.3.1.6 å‰µå»º `enable()` æ–¹æ³•ï¼ˆè¨­ç½® is_enabled = 1ï¼‰[è¦æ ¼:L61-L62, L159]
- [x] 2.3.1.7 å‰µå»º `disable()` æ–¹æ³•ï¼ˆè¨­ç½® is_enabled = 0ï¼‰[è¦æ ¼:L61-L62, L160]

**2.3.2 LeaveTypeService å‰µå»º**
- [x] 2.3.2.1 å¯¦ç¾ `createLeaveType()` æ–¹æ³•
  - [x] 2.3.2.1.1 é©—è­‰ type_name å¿…å¡«
  - [x] 2.3.2.1.2 æª¢æŸ¥åç¨±å”¯ä¸€æ€§
  - [x] 2.3.2.1.3 é©—è­‰ gender_specific å€¼ï¼ˆ'M', 'F', NULLï¼‰
  - [x] 2.3.2.1.4 å‰µå»ºå‡åˆ¥è¨˜éŒ„
  - [x] 2.3.2.1.5 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**2.3.3 å‡åˆ¥é¡å‹ API è·¯ç”±å‰µå»ºï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L156-L161]**
- [x] 2.3.3.1 `GET /api/v1/leave-types` [è¦æ ¼:L156]
  - [x] 2.3.3.1.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L153]
  - [x] 2.3.3.1.2 æ”¯æŒæŸ¥è©¢åƒæ•¸ï¼ˆis_enabledï¼‰
  - [x] 2.3.3.1.3 èª¿ç”¨ LeaveTypeRepository.findAll()
  - [x] 2.3.3.1.4 è¿”å›å‡åˆ¥åˆ—è¡¨
  - [x] 2.3.3.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.3.3.2 `POST /api/v1/leave-types` [è¦æ ¼:L157]
  - [x] 2.3.3.2.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 2.3.3.2.2 è§£æè«‹æ±‚ Bodyï¼ˆtype_name, annual_quota, deduct_leave, is_paid, gender_specificï¼‰
  - [x] 2.3.3.2.3 èª¿ç”¨ LeaveTypeService.createLeaveType()
  - [x] 2.3.3.2.4 è¿”å› 201 Created
  - [x] 2.3.3.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.3.3.3 `PUT /api/v1/leave-types/:id` [è¦æ ¼:L158]
- [x] 2.3.3.4 `POST /api/v1/leave-types/:id/enable` [è¦æ ¼:L159]
  - [x] 2.3.3.4.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 2.3.3.4.2 èª¿ç”¨ LeaveTypeService.enableLeaveType()
  - [x] 2.3.3.4.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 2.3.3.4.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.3.3.5 `POST /api/v1/leave-types/:id/disable` [è¦æ ¼:L160]
  - [x] 2.3.3.5.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 2.3.3.5.2 èª¿ç”¨ LeaveTypeService.disableLeaveType()
  - [x] 2.3.3.5.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 2.3.3.5.4 æ·»åŠ  OpenAPI è¨»è§£

---

#### 2.4 åŠ ç­è²»ç‡èˆ‡ç‰¹ä¼‘è¦å‰‡ï¼ˆå”¯è®€ï¼‰[è¦æ ¼:L174, L165]

**2.4.1 BusinessRulesRepository å‰µå»º**
- [x] 2.4.1.1 å‰µå»º `getOvertimeRates()` æ–¹æ³•ï¼ˆæŸ¥è©¢æ‰€æœ‰è²»ç‡ï¼‰[è¦æ ¼:L174]
- [x] 2.4.1.2 å‰µå»º `getAnnualLeaveRules()` æ–¹æ³•ï¼ˆæŸ¥è©¢æ‰€æœ‰ç‰¹ä¼‘è¦å‰‡ï¼‰[è¦æ ¼:L165]
- [x] 2.4.1.3 å‰µå»º `restoreDefaultAnnualLeaveRules()` æ–¹æ³• [è¦æ ¼:L208-L229]

**2.4.2 å”¯è®€ API è·¯ç”±å‰µå»º**
- [x] 2.4.2.1 `GET /api/v1/overtime-rates` [è¦æ ¼:L174]
  - [x] 2.4.2.1.1 æ‡‰ç”¨ authMiddleware
  - [x] 2.4.2.1.2 èª¿ç”¨ BusinessRulesRepository.getOvertimeRates()
  - [x] 2.4.2.1.3 è¿”å›è²»ç‡åˆ—è¡¨ï¼ˆå« work_type è³‡è¨Šï¼‰
  - [x] 2.4.2.1.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.4.2.2 `GET /api/v1/annual-leave-rules` [è¦æ ¼:L165]
  - [x] 2.4.2.2.1 æ‡‰ç”¨ authMiddleware
  - [x] 2.4.2.2.2 èª¿ç”¨ BusinessRulesRepository.getAnnualLeaveRules()
  - [x] 2.4.2.2.3 è¿”å›ç‰¹ä¼‘è¦å‰‡åˆ—è¡¨
  - [x] 2.4.2.2.4 æ·»åŠ  OpenAPI è¨»è§£

---

#### 2.5 é€±æœŸé¡å‹ç®¡ç†ï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L182-L186]

**2.5.1 FrequencyTypeRepository å‰µå»º**
- [x] 2.5.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒ is_enabled éæ¿¾ï¼‰[è¦æ ¼:L182-L186]
- [x] 2.5.1.2 å‰µå»º `findById()` æ–¹æ³• [è¦æ ¼:L107-L116]
- [x] 2.5.1.3 å‰µå»º `create()` æ–¹æ³• [è¦æ ¼:L107-L116]
- [x] 2.5.1.4 å‰µå»º `update()` æ–¹æ³• [è¦æ ¼:L107-L116]
- [x] 2.5.1.5 å‰µå»º `enable()` æ–¹æ³• [è¦æ ¼:L113, L185]
- [x] 2.5.1.6 å‰µå»º `disable()` æ–¹æ³• [è¦æ ¼:L113, L186]

**2.5.2 é€±æœŸé¡å‹ API è·¯ç”±å‰µå»ºï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰**
- [x] 2.5.2.1 `GET /api/v1/frequency-types` [è¦æ ¼:L182]
  - [x] 2.5.2.1.1 æ‡‰ç”¨ authMiddleware
  - [x] 2.5.2.1.2 æ”¯æŒæŸ¥è©¢åƒæ•¸ï¼ˆis_enabledï¼‰
  - [x] 2.5.2.1.3 èª¿ç”¨ FrequencyTypeRepository.findAll()
  - [x] 2.5.2.1.4 è¿”å›é€±æœŸé¡å‹åˆ—è¡¨
  - [x] 2.5.2.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.5.2.2 `POST /api/v1/frequency-types` [è¦æ ¼:L183]
- [x] 2.5.2.3 `PUT /api/v1/frequency-types/:id` [è¦æ ¼:L184]

---

#### 2.6 æœå‹™é …ç›®ç®¡ç†ï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L194-L198]

**2.6.1 ServiceRepository å‰µå»º**
- [x] 2.6.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆè¿”å›æ¨¹ç‹€çµæ§‹ï¼‰[è¦æ ¼:L194-L198]
- [x] 2.6.1.2 å‰µå»º `findById()` æ–¹æ³• [è¦æ ¼:L120-L133]
- [x] 2.6.1.3 å‰µå»º `findChildren()` æ–¹æ³•ï¼ˆæŸ¥è©¢å­æœå‹™ï¼‰[è¦æ ¼:L129-L133]
- [x] 2.6.1.4 å‰µå»º `create()` æ–¹æ³• [è¦æ ¼:L120-L127]
- [x] 2.6.1.5 å‰µå»º `update()` æ–¹æ³• [è¦æ ¼:L120-L127]
- [x] 2.6.1.6 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰[è¦æ ¼:L126-L127]

**2.6.2 ServiceService å‰µå»º**
- [x] 2.6.2.1 å¯¦ç¾ `validateServiceHierarchy()` æ–¹æ³• [è¦æ ¼:L232-L241]
  - [x] 2.6.2.1.1 æª¢æŸ¥ parent_service_id æ˜¯å¦å­˜åœ¨
  - [x] 2.6.2.1.2 æª¢æŸ¥çˆ¶æœå‹™æ˜¯å¦å·²æœ‰çˆ¶æœå‹™ï¼ˆç¦æ­¢ä¸‰å±¤çµæ§‹ï¼‰[è¦æ ¼:L236-L239, L291]
  - [x] 2.6.2.1.3 æ‹‹å‡ºé©—è­‰éŒ¯èª¤

- [x] 2.6.2.2 å¯¦ç¾ `createService()` æ–¹æ³•
  - [x] 2.6.2.2.1 é©—è­‰ service_name å¿…å¡«
  - [x] 2.6.2.2.2 èª¿ç”¨ validateServiceHierarchy()
  - [x] 2.6.2.2.3 å‰µå»ºæœå‹™è¨˜éŒ„
  - [x] 2.6.2.2.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

- [x] 2.6.2.3 å¯¦ç¾ `deleteService()` æ–¹æ³•
  - [x] 2.6.2.3.1 æª¢æŸ¥æ˜¯å¦æœ‰å­æœå‹™
  - [x] 2.6.2.3.2 æª¢æŸ¥æ˜¯å¦è¢«å®¢æˆ¶ä½¿ç”¨
  - [x] 2.6.2.3.3 è»Ÿåˆªé™¤è¨˜éŒ„
  - [x] 2.6.2.3.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**2.6.3 æœå‹™é …ç›® API è·¯ç”±å‰µå»ºï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L194-L198]**
- [x] 2.6.3.1 `GET /api/v1/services` [è¦æ ¼:L194]
  - [x] 2.6.3.1.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L191]
  - [x] 2.6.3.1.2 èª¿ç”¨ ServiceRepository.findAll()
  - [x] 2.6.3.1.3 è¿”å›æ¨¹ç‹€çµæ§‹åˆ—è¡¨ï¼ˆä¸»æœå‹™+å­æœå‹™ï¼‰
  - [x] 2.6.3.1.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.6.3.2 `POST /api/v1/services` [è¦æ ¼:L195]
  - [x] 2.6.3.2.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 2.6.3.2.2 è§£æè«‹æ±‚ Bodyï¼ˆservice_name, parent_service_id, descriptionï¼‰
  - [x] 2.6.3.2.3 èª¿ç”¨ ServiceService.createService()ï¼ˆå«å…©å±¤çµæ§‹é©—è­‰ï¼‰
  - [x] 2.6.3.2.4 è¿”å› 201 Created
  - [x] 2.6.3.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 2.6.3.3 `PUT /api/v1/services/:id` [è¦æ ¼:L196]
- [x] 2.6.3.4 `DELETE /api/v1/services/:id` [è¦æ ¼:L197]
  - [x] 2.6.3.4.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 2.6.3.4.2 èª¿ç”¨ ServiceService.deleteService()ï¼ˆå«å­æœå‹™æª¢æŸ¥ã€ä½¿ç”¨æª¢æŸ¥ï¼‰
  - [x] 2.6.3.4.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 2.6.3.4.4 æ·»åŠ  OpenAPI è¨»è§£

---

#### 2.7 å®Œæ•´æ€§é©—è­‰ [è¦æ ¼:L1-L299]

**2.7.1 API æ¸…å–®é©—è­‰**
- [x] 2.7.1.1 é©—è­‰åœ‹å®šå‡æ—¥ APIï¼ˆ5 å€‹ï¼‰[è¦æ ¼:L144-L149]
- [x] 2.7.1.2 é©—è­‰å‡åˆ¥é¡å‹ APIï¼ˆ5 å€‹ï¼‰[è¦æ ¼:L156-L161]
- [x] 2.7.1.3 é©—è­‰åŠ ç­è²»ç‡èˆ‡ç‰¹ä¼‘è¦å‰‡ APIï¼ˆ2 å€‹ï¼‰[è¦æ ¼:L165, L174]
- [x] 2.7.1.4 é©—è­‰é€±æœŸé¡å‹ APIï¼ˆ3 å€‹ï¼‰[è¦æ ¼:L182-L186]
- [x] 2.7.1.5 é©—è­‰æœå‹™é …ç›® APIï¼ˆ4 å€‹ï¼‰[è¦æ ¼:L194-L198]
- [x] 2.7.1.6 ç¢ºèªç¸½è¨ˆï¼š18 å€‹ APIï¼ˆå¯¦éš›ç‚º 19 å€‹ï¼‰

**2.7.2 æ¥­å‹™é‚è¼¯é©—è­‰**
- [x] 2.7.2.1 é©—è­‰æœå‹™é …ç›®å…©å±¤çµæ§‹é™åˆ¶ [è¦æ ¼:L232-L241, L291]
- [x] 2.7.2.2 é©—è­‰åœ‹å®šå‡æ—¥æ—¥æœŸå”¯ä¸€æ€§ [è¦æ ¼:L292]
- [x] 2.7.2.3 é©—è­‰è²»ç‡å€æ•¸å¿…é ˆ > 0 [è¦æ ¼:L293]
- [x] 2.7.2.4 é©—è­‰æ³•å®šé è¨­å€¼æ­£ç¢ºæ€§ [è¦æ ¼:L265-L288]
- [x] 2.7.2.5 é©—è­‰ is_national_holiday å’Œ is_makeup_workday é‚è¼¯ [è¦æ ¼:L27-L50]

**2.7.3 å›åˆ°è¦æ ¼é€ä¸€é©—è­‰**
- [x] 2.7.3.1 æ‰“é–‹è¦æ ¼æ–‡æª” L11-L23ï¼Œé©—è­‰ Holidays è¡¨å®Œæ•´æ€§
- [x] 2.7.3.2 æ‰“é–‹è¦æ ¼æ–‡æª” L54-L66ï¼Œé©—è­‰ LeaveTypes è¡¨å®Œæ•´æ€§
- [x] 2.7.3.3 æ‰“é–‹è¦æ ¼æ–‡æª” L70-L77ï¼Œé©—è­‰ AnnualLeaveRules è¡¨å’Œé è¨­å€¼
- [x] 2.7.3.4 æ‰“é–‹è¦æ ¼æ–‡æª” L81-L90ï¼Œé©—è­‰ OtherLeaveRules è¡¨
- [x] 2.7.3.5 æ‰“é–‹è¦æ ¼æ–‡æª” L94-L103ï¼Œé©—è­‰ OvertimeRates è¡¨å’Œé è¨­å€¼
- [x] 2.7.3.6 æ‰“é–‹è¦æ ¼æ–‡æª” L107-L116ï¼Œé©—è­‰ ServiceFrequencyTypes è¡¨å’Œé è¨­å€¼
- [x] 2.7.3.7 æ‰“é–‹è¦æ ¼æ–‡æª” L120-L133ï¼Œé©—è­‰ Services è¡¨
- [x] 2.7.3.8 é€ä¸€é©—è­‰æ‰€æœ‰ 18 å€‹ API çš„å¯¦ç¾

---

#### 2.8 éƒ¨ç½²èˆ‡æ¸¬è©¦
- [x] 2.8.1 [å…§éƒ¨] æäº¤æ‰€æœ‰æ›´æ”¹åˆ° Git
- [x] 2.8.2 [å…§éƒ¨] åŸ·è¡Œè‡ªå‹•éƒ¨ç½²ï¼ˆgit push origin mainï¼‰
- [x] 2.8.3 [å…§éƒ¨] é©—è­‰ Cloudflare Pages éƒ¨ç½²æˆåŠŸ

---

### [x] æ¨¡çµ„ 3ï¼šå®¢æˆ¶ç®¡ç†ï¼ˆå®¢æˆ¶ç®¡ç†-å®Œæ•´è¦æ ¼.mdï¼‰âœ… å·²å®Œæˆï¼ˆå·²è£œå……éºæ¼ï¼‰
**è³‡æ–™è¡¨ï¼š** 3 å€‹ | **APIï¼š** 12 å€‹ | **Cron Jobsï¼š** 0 å€‹

#### 3.1 è³‡æ–™è¡¨å‰µå»º

**3.1.1 Clients è¡¨ï¼ˆå®¢æˆ¶è³‡æ–™ï¼‰[è¦æ ¼:L21-L40]**
- [x] 3.1.1.1 å‰µå»ºä¸»éµ `client_id` (TEXT PRIMARY KEY) [è¦æ ¼:L22]
- [x] 3.1.1.2 å‰µå»º `company_name` (TEXT NOT NULL) [è¦æ ¼:L23]
- [x] 3.1.1.3 å‰µå»º `tax_registration_number` (TEXT) [è¦æ ¼:L24]
- [x] 3.1.1.4 å‰µå»º `business_status` (TEXT DEFAULT 'ç‡Ÿæ¥­ä¸­') [è¦æ ¼:L25]
- [x] 3.1.1.5 å‰µå»º `assignee_user_id` (INTEGER NOT NULL) [è¦æ ¼:L26]
- [x] 3.1.1.6 å‰µå»ºè¯çµ¡è³‡è¨Šï¼š`phone`, `email` [è¦æ ¼:L27-L28]
- [x] 3.1.1.7 å‰µå»º `client_notes` (TEXT)ï¼Œè¨»é‡‹ï¼šå®¢æˆ¶å‚™è¨»ï¼ˆè¨˜éŒ„å®¢æˆ¶ç‰¹æ®Šéœ€æ±‚ã€æ³¨æ„äº‹é …ï¼‰[è¦æ ¼:L29]
- [x] 3.1.1.8 å‰µå»º `payment_notes` (TEXT)ï¼Œè¨»é‡‹ï¼šæ”¶æ¬¾å‚™è¨»ï¼ˆè¨˜éŒ„æ”¶æ¬¾ç›¸é—œè³‡è¨Šï¼‰[è¦æ ¼:L30]
- [x] 3.1.1.9 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `updated_at`, `is_deleted` [è¦æ ¼:L31-L33]
- [x] 3.1.1.10 æ·»åŠ å¤–éµç´„æŸï¼š`assignee_user_id` REFERENCES Users(user_id) [è¦æ ¼:L35]
- [x] 3.1.1.11 å‰µå»ºç´¢å¼•ï¼š`idx_clients_assignee` ON Clients(assignee_user_id) [è¦æ ¼:L38]
- [x] 3.1.1.12 å‰µå»ºç´¢å¼•ï¼š`idx_clients_company_name` ON Clients(company_name) [è¦æ ¼:L39]

**3.1.2 CustomerTags è¡¨ï¼ˆå®¢æˆ¶æ¨™ç±¤ï¼‰[è¦æ ¼:L44-L50]**
- [x] 3.1.2.1 å‰µå»ºä¸»éµ `tag_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L45]
- [x] 3.1.2.2 å‰µå»º `tag_name` (TEXT UNIQUE NOT NULL) [è¦æ ¼:L46]
- [x] 3.1.2.3 å‰µå»º `tag_color` (TEXT) [è¦æ ¼:L47]
- [x] 3.1.2.4 å‰µå»º `created_at` (TEXT DEFAULT datetime('now')) [è¦æ ¼:L48]
- [x] 3.1.2.5 æ’å…¥5å€‹é è¨­æ¨™ç±¤ï¼ˆVIPã€é•·æœŸåˆä½œã€æ–°å®¢æˆ¶ã€é«˜åƒ¹å€¼ã€éœ€é—œæ³¨ï¼‰

**3.1.3 ClientTagAssignments è¡¨ï¼ˆå®¢æˆ¶èˆ‡æ¨™ç±¤é—œè¯ï¼‰[è¦æ ¼:L54-L64]**
- [x] 3.1.3.1 å‰µå»ºä¸»éµ `assignment_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L55]
- [x] 3.1.3.2 å‰µå»º `client_id` (TEXT NOT NULL) [è¦æ ¼:L56]
- [x] 3.1.3.3 å‰µå»º `tag_id` (INTEGER NOT NULL) [è¦æ ¼:L57]
- [x] 3.1.3.4 å‰µå»º `assigned_at` (TEXT DEFAULT datetime('now')) [è¦æ ¼:L58]
- [x] 3.1.3.5 æ·»åŠ å¤–éµç´„æŸï¼š`client_id` REFERENCES Clients(client_id) ON DELETE CASCADE [è¦æ ¼:L60]
- [x] 3.1.3.6 æ·»åŠ å¤–éµç´„æŸï¼š`tag_id` REFERENCES CustomerTags(tag_id) [è¦æ ¼:L61]
- [x] 3.1.3.7 æ·»åŠ å”¯ä¸€ç´„æŸï¼šUNIQUE(client_id, tag_id) [è¦æ ¼:L62]

---

#### 3.2 å®¢æˆ¶ç®¡ç†å¯¦ç¾ï¼ˆå°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼šæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L72, L187, L207, L213]

**3.2.1 ClientRepository å‰µå»º**
- [x] 3.2.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆå« N+1 å„ªåŒ–ï¼‰[è¦æ ¼:L121-L162]
  - [x] 3.2.1.1.1 ä½¿ç”¨ JOIN + GROUP_CONCAT ä¸€æ¬¡æŸ¥è©¢å®¢æˆ¶å’Œæ¨™ç±¤ [è¦æ ¼:L122-L134]
  - [x] 3.2.1.1.2 å°å‹äº‹å‹™æ‰€è¨­è¨ˆï¼šå“¡å·¥å¯æŸ¥çœ‹æ‰€æœ‰å®¢æˆ¶ï¼ˆä¸éæ¿¾ assignee_user_idï¼‰[è¦æ ¼:L138-L142, L720-L724]
  - [x] 3.2.1.1.3 æ”¯æŒ company_name æ¨¡ç³Šæœå°‹ [è¦æ ¼:L145-L148]
  - [x] 3.2.1.1.4 æŒ‰ created_at DESC æ’åº [è¦æ ¼:L151]
  - [x] 3.2.1.1.5 æ”¯æŒåˆ†é ï¼ˆlimit, offsetï¼‰[è¦æ ¼:L152-L153]
  - [x] 3.2.1.1.6 è™•ç†æ¨™ç±¤å­—ä¸²è½‰é™£åˆ— [è¦æ ¼:L158-L161]

- [x] 3.2.1.2 å‰µå»º `findById()` æ–¹æ³• [è¦æ ¼:L806]
- [x] 3.2.1.3 å‰µå»º `findByClientId()` æ–¹æ³•ï¼ˆæª¢æŸ¥çµ±ä¸€ç·¨è™Ÿå”¯ä¸€æ€§ï¼‰[è¦æ ¼:L734]
- [x] 3.2.1.4 å‰µå»º `create()` æ–¹æ³• [è¦æ ¼:L790-L807]
- [x] 3.2.1.5 å‰µå»º `update()` æ–¹æ³• [è¦æ ¼:L839-L846]
- [x] 3.2.1.6 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰[è¦æ ¼:L849-L855]

**3.2.2 å­—æ®µé¸æ“‡å™¨ï¼ˆSparse Fieldsetsï¼‰å¯¦ç¾ [è¦æ ¼:L165-L183]**
- [x] 3.2.2.1 æ”¯æŒ `?fields=client_id,company_name` åƒæ•¸ [è¦æ ¼:L181]
- [x] 3.2.2.2 å‹•æ…‹æ§‹å»º SELECT å­å¥ [è¦æ ¼:L169-L176]
- [x] 3.2.2.3 æ¸›å°‘ç¶²çµ¡å¸¶å¯¬å‚³è¼¸ [è¦æ ¼:L182]

**3.2.3 ClientService å‰µå»º**
- [x] 3.2.3.1 å¯¦ç¾ `getClients()` æ–¹æ³• [è¦æ ¼:L719-L727]
  - [x] 3.2.3.1.1 å°å‹äº‹å‹™æ‰€è¨­è¨ˆï¼šä¸éæ¿¾æ¬Šé™ï¼ˆå“¡å·¥å¯çœ‹æ‰€æœ‰å®¢æˆ¶ï¼‰[è¦æ ¼:L720-L724]
  - [x] 3.2.3.1.2 èª¿ç”¨ ClientRepository.findAll() [è¦æ ¼:L726]

- [x] 3.2.3.2 å¯¦ç¾ `createClient()` æ–¹æ³• [è¦æ ¼:L729-L752]
  - [x] 3.2.3.2.1 èª¿ç”¨ validate() é©—è­‰è³‡æ–™ [è¦æ ¼:L731, L754-L761]
  - [x] 3.2.3.2.2 æª¢æŸ¥çµ±ä¸€ç·¨è™Ÿå”¯ä¸€æ€§ [è¦æ ¼:L734-L737, L865-L867]
  - [x] 3.2.3.2.3 å‰µå»ºå®¢æˆ¶è¨˜éŒ„ [è¦æ ¼:L740-L744]
  - [x] 3.2.3.2.4 è™•ç†æ¨™ç±¤åˆ†é…ï¼ˆå¦‚æœ‰ tag_idsï¼‰[è¦æ ¼:L747-L749]
  - [x] 3.2.3.2.5 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ [è¦æ ¼:L751]

- [x] 3.2.3.3 å¯¦ç¾ `validate()` æ–¹æ³• [è¦æ ¼:L754-L761]
  - [x] 3.2.3.3.1 é©—è­‰çµ±ä¸€ç·¨è™Ÿç‚º8ä½æ•¸å­—ï¼ˆæ­£å‰‡ï¼š/^\d{8}$/ï¼‰[è¦æ ¼:L755-L757, L865-L867]
  - [x] 3.2.3.3.2 é©—è­‰ company_name å¿…å¡« [è¦æ ¼:L758-L760, L868]
  - [x] 3.2.3.3.3 é©—è­‰ email æ ¼å¼ï¼ˆå¦‚æœ‰æä¾›ï¼‰[è¦æ ¼:L869]
  - [x] 3.2.3.3.4 é©—è­‰å°ç£é›»è©±æ ¼å¼ï¼ˆå¦‚æœ‰æä¾›ï¼‰[è¦æ ¼:L870]

- [x] 3.2.3.4 å¯¦ç¾ `updateClient()` æ–¹æ³• [è¦æ ¼:L207, L839-L846]
  - [x] 3.2.3.4.1 æŸ¥è©¢å®¢æˆ¶æ˜¯å¦å­˜åœ¨ [è¦æ ¼:L843-L844]
  - [x] 3.2.3.4.2 æ›´æ–°å®¢æˆ¶è³‡æ–™ [è¦æ ¼:L841-L843, L845]
  - [x] 3.2.3.4.3 æ›´æ–°æ¨™ç±¤ï¼ˆå¦‚æœ‰ tag_idsï¼‰[è¦æ ¼:L844, L846]
  - [x] 3.2.3.4.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ [è¦æ ¼:L845]

- [x] 3.2.3.5 å¯¦ç¾ `deleteClient()` æ–¹æ³• [è¦æ ¼:L213, L849-L855]
  - [x] 3.2.3.5.1 æª¢æŸ¥æ˜¯å¦æœ‰å•Ÿç”¨ä¸­çš„æœå‹™ [è¦æ ¼:L852]
  - [x] 3.2.3.5.2 è»Ÿåˆªé™¤å®¢æˆ¶è¨˜éŒ„ [è¦æ ¼:L853-L854]
  - [x] 3.2.3.5.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ [è¦æ ¼:L854]

**3.2.4 å®¢æˆ¶ç®¡ç† API è·¯ç”±å‰µå»ºï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰**
- [x] 3.2.4.1 `GET /api/v1/clients` [è¦æ ¼:L72-L98, L820-L827]
  - [x] 3.2.4.1.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L74, L876-L880]
  - [x] 3.2.4.1.2 è§£ææŸ¥è©¢åƒæ•¸ï¼ˆcompany_name, limit, offset, fieldsï¼‰[è¦æ ¼:L73, L823]
  - [x] 3.2.4.1.3 èª¿ç”¨ ClientService.getClients() [è¦æ ¼:L825]
  - [x] 3.2.4.1.4 è¿”å›å®¢æˆ¶åˆ—è¡¨ï¼ˆå«æ¨™ç±¤ã€è² è²¬äººåç¨±ã€client_notesã€payment_notesï¼‰[è¦æ ¼:L80-L92, L826]
  - [x] 3.2.4.1.5 è¿”å›åˆ†é è³‡è¨Š [è¦æ ¼:L91]
  - [x] 3.2.4.1.6 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.2.4.2 `POST /api/v1/clients` [è¦æ ¼:L187-L203, L830-L837]
  - [x] 3.2.4.2.1 æ‡‰ç”¨ authMiddlewareï¼ˆå°å‹äº‹å‹™æ‰€ï¼šæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L188, L882-L884, L830]
  - [x] 3.2.4.2.2 è§£æè«‹æ±‚ Bodyï¼ˆclient_id, company_name, assignee_user_id, phone, email, client_notes, payment_notes, tag_idsï¼‰[è¦æ ¼:L193-L202, L833]
  - [x] 3.2.4.2.3 èª¿ç”¨ ClientService.createClient() [è¦æ ¼:L835]
  - [x] 3.2.4.2.4 è¿”å› 201 Created [è¦æ ¼:L836]
  - [x] 3.2.4.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.2.4.3 `GET /api/v1/clients/:id` [è¦æ ¼:L72]
  - [x] 3.2.4.3.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L74]
  - [x] 3.2.4.3.2 è§£æè·¯å¾‘åƒæ•¸ client_id
  - [x] 3.2.4.3.3 èª¿ç”¨ ClientService.getClientById()
  - [x] 3.2.4.3.4 è¿”å›å®¢æˆ¶è©³æƒ…
  - [x] 3.2.4.3.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.2.4.4 `PUT /api/v1/clients/:id` [è¦æ ¼:L207-L209, L839-L846]
  - [x] 3.2.4.4.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L208]
  - [x] 3.2.4.4.2 è§£æè·¯å¾‘åƒæ•¸å’Œè«‹æ±‚ Body [è¦æ ¼:L843]
  - [x] 3.2.4.4.3 èª¿ç”¨ ClientService.updateClient()ï¼ˆå«æ¨™ç±¤æ›´æ–°ï¼‰[è¦æ ¼:L845]
  - [x] 3.2.4.4.4 è¿”å›æ›´æ–°å¾Œçš„å®¢æˆ¶ [è¦æ ¼:L846]
  - [x] 3.2.4.4.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.2.4.5 `DELETE /api/v1/clients/:id` [è¦æ ¼:L213-L215, L849-L856]
  - [x] 3.2.4.5.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L214]
  - [x] 3.2.4.5.2 èª¿ç”¨ ClientService.deleteClient()ï¼ˆå«æœå‹™æª¢æŸ¥ï¼‰[è¦æ ¼:L854]
  - [x] 3.2.4.5.3 è¿”å›æˆåŠŸéŸ¿æ‡‰ [è¦æ ¼:L855]
  - [x] 3.2.4.5.4 æ·»åŠ  OpenAPI è¨»è§£

---

#### 3.3 æ¨™ç±¤ç®¡ç†å¯¦ç¾ï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L219-L223]

**3.3.1 TagRepository å‰µå»º**
- [x] 3.3.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæŸ¥è©¢æ‰€æœ‰æ¨™ç±¤ï¼‰[è¦æ ¼:L219]
- [x] 3.3.1.2 å‰µå»º `findById()` æ–¹æ³• [è¦æ ¼:L219-L223]
- [x] 3.3.1.3 å‰µå»º `create()` æ–¹æ³• [è¦æ ¼:L220]
- [x] 3.3.1.4 å‰µå»º `update()` æ–¹æ³• [è¦æ ¼:L221]
- [x] 3.3.1.5 å‰µå»º `delete()` æ–¹æ³•ï¼ˆæª¢æŸ¥ä½¿ç”¨æƒ…æ³ï¼‰[è¦æ ¼:L222]

**3.3.2 TagService å‰µå»º**
- [x] 3.3.2.1 å¯¦ç¾ `getAllTags()` æ–¹æ³• [è¦æ ¼:L219]
- [x] 3.3.2.2 å¯¦ç¾ `createTag()` æ–¹æ³• [è¦æ ¼:L220]
  - [x] 3.3.2.2.1 é©—è­‰ tag_name å¿…å¡«
  - [x] 3.3.2.2.2 æª¢æŸ¥åç¨±å”¯ä¸€æ€§
  - [x] 3.3.2.2.3 å‰µå»ºæ¨™ç±¤è¨˜éŒ„
  - [x] 3.3.2.2.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

- [x] 3.3.2.3 å¯¦ç¾ `updateTag()` æ–¹æ³• [è¦æ ¼:L221]
- [x] 3.3.2.4 å¯¦ç¾ `deleteTag()` æ–¹æ³• [è¦æ ¼:L222]
  - [x] 3.3.2.4.1 æª¢æŸ¥æ¨™ç±¤æ˜¯å¦è¢«ä½¿ç”¨
  - [x] 3.3.2.4.2 å¦‚è¢«ä½¿ç”¨å‰‡æ‹‹å‡ºéŒ¯èª¤
  - [x] 3.3.2.4.3 åˆªé™¤æ¨™ç±¤
  - [x] 3.3.2.4.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**3.3.3 æ¨™ç±¤ç®¡ç† API è·¯ç”±å‰µå»ºï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰**
- [x] 3.3.3.1 `GET /api/v1/clients/tags` [è¦æ ¼:L219]
  - [x] 3.3.3.1.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 3.3.3.1.2 èª¿ç”¨ TagService.getAllTags()
  - [x] 3.3.3.1.3 è¿”å›æ¨™ç±¤åˆ—è¡¨
  - [x] 3.3.3.1.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.3.3.2 `POST /api/v1/clients/tags` [è¦æ ¼:L220]
  - [x] 3.3.3.2.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 3.3.3.2.2 è§£æè«‹æ±‚ Bodyï¼ˆtag_name, tag_colorï¼‰
  - [x] 3.3.3.2.3 èª¿ç”¨ TagService.createTag()
  - [x] 3.3.3.2.4 è¿”å› 201 Created
  - [x] 3.3.3.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.3.3.3 `PUT /api/v1/clients/tags/:id` [è¦æ ¼:L221]
  - [x] 3.3.3.3.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 3.3.3.3.2 è§£æè·¯å¾‘åƒæ•¸å’Œè«‹æ±‚ Body
  - [x] 3.3.3.3.3 èª¿ç”¨ TagService.updateTag()
  - [x] 3.3.3.3.4 è¿”å›æ›´æ–°å¾Œçš„æ¨™ç±¤
  - [x] 3.3.3.3.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.3.3.4 `DELETE /api/v1/clients/tags/:id` [è¦æ ¼:L222]
  - [x] 3.3.3.4.1 æ‡‰ç”¨ authMiddlewareï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
  - [x] 3.3.3.4.2 èª¿ç”¨ TagService.deleteTag()ï¼ˆå«ä½¿ç”¨æª¢æŸ¥ï¼‰
  - [x] 3.3.3.4.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 3.3.3.4.4 æ·»åŠ  OpenAPI è¨»è§£

---

#### 3.4 æ‰¹é‡æ“ä½œå¯¦ç¾ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰[è¦æ ¼:L227-L230]

**3.4.1 ClientService æ‰¹é‡æ“ä½œæ–¹æ³•å‰µå»º**
- [x] 3.4.1.1 å¯¦ç¾ `batchAssign()` æ–¹æ³• [è¦æ ¼:L280-L323]
  - [x] 3.4.1.1.1 é™åˆ¶æ‰¹é‡å¤§å°ï¼ˆæœ€å¤š100æ¢ï¼‰[è¦æ ¼:L282-L284]
  - [x] 3.4.1.1.2 é©—è­‰è² è²¬äººå­˜åœ¨ [è¦æ ¼:L287-L290]
  - [x] 3.4.1.1.3 ä½¿ç”¨äº‹å‹™æ‰¹é‡æ›´æ–° [è¦æ ¼:L297-L305]
  - [x] 3.4.1.1.4 è¨˜éŒ„æ¯å€‹å®¢æˆ¶çš„å¯©è¨ˆæ—¥èªŒ [è¦æ ¼:L308-L316]
  - [x] 3.4.1.1.5 è¿”å›æ“ä½œçµæœçµ±è¨ˆ [è¦æ ¼:L318-L322]

- [x] 3.4.1.2 å¯¦ç¾ `batchDelete()` æ–¹æ³• [è¦æ ¼:L325-L364]
  - [x] 3.4.1.2.1 é™åˆ¶æ‰¹é‡å¤§å°ï¼ˆæœ€å¤š100æ¢ï¼‰[è¦æ ¼:L327-L329]
  - [x] 3.4.1.2.2 æª¢æŸ¥é—œè¯æ•¸æ“šï¼ˆæœªå®Œæˆä»»å‹™ï¼‰[è¦æ ¼:L333-L343]
  - [x] 3.4.1.2.3 ç”Ÿæˆè­¦å‘Šè¨Šæ¯ [è¦æ ¼:L340-L342]
  - [x] 3.4.1.2.4 ä½¿ç”¨äº‹å‹™æ‰¹é‡è»Ÿåˆªé™¤ [è¦æ ¼:L346-L356]
  - [x] 3.4.1.2.5 è¿”å›æ“ä½œçµæœå’Œè­¦å‘Š [è¦æ ¼:L358-L363]

- [x] 3.4.1.3 å¯¦ç¾ `batchUpdate()` æ–¹æ³• [è¦æ ¼:L227]
  - [x] 3.4.1.3.1 é™åˆ¶æ‰¹é‡å¤§å°ï¼ˆæœ€å¤š100æ¢ï¼‰[è¦æ ¼:L282-L284]
  - [x] 3.4.1.3.2 é©—è­‰æ›´æ–°è³‡æ–™ [è¦æ ¼:L227]
  - [x] 3.4.1.3.3 ä½¿ç”¨äº‹å‹™æ‰¹é‡æ›´æ–° [è¦æ ¼:L227]
  - [x] 3.4.1.3.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ [è¦æ ¼:L227]

**3.4.2 æ‰¹é‡æ“ä½œ API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [x] 3.4.2.1 `POST /api/v1/clients/batch-assign` [è¦æ ¼:L229, L233-L254]
  - [x] 3.4.2.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware [è¦æ ¼:L234]
  - [x] 3.4.2.1.2 è§£æè«‹æ±‚ Bodyï¼ˆclient_ids, assignee_user_idï¼‰[è¦æ ¼:L235-L238]
  - [x] 3.4.2.1.3 é©—è­‰ client_ids ä¸è¶…é100æ¢ [è¦æ ¼:L282-L284]
  - [x] 3.4.2.1.4 èª¿ç”¨ ClientService.batchAssign() [è¦æ ¼:L240]
  - [x] 3.4.2.1.5 è¿”å›æ“ä½œçµæœï¼ˆtotal, succeeded, failed, detailsï¼‰[è¦æ ¼:L242-L253]
  - [x] 3.4.2.1.6 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.4.2.2 `POST /api/v1/clients/batch-delete` [è¦æ ¼:L228, L257-L275]
  - [x] 3.4.2.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware [è¦æ ¼:L258]
  - [x] 3.4.2.2.2 è§£æè«‹æ±‚ Bodyï¼ˆclient_idsï¼‰[è¦æ ¼:L259-L261]
  - [x] 3.4.2.2.3 é©—è­‰ client_ids ä¸è¶…é100æ¢ [è¦æ ¼:L327-L329]
  - [x] 3.4.2.2.4 èª¿ç”¨ ClientService.batchDelete() [è¦æ ¼:L262]
  - [x] 3.4.2.2.5 è¿”å›æ“ä½œçµæœå’Œè­¦å‘Šè¨Šæ¯ [è¦æ ¼:L264-L274]
  - [x] 3.4.2.2.6 æ·»åŠ  OpenAPI è¨»è§£

- [x] 3.4.2.3 `POST /api/v1/clients/batch-update` [è¦æ ¼:L227]
  - [x] 3.4.2.3.1 æ‡‰ç”¨ authMiddleware + adminMiddleware [è¦æ ¼:L227]
  - [x] 3.4.2.3.2 è§£æè«‹æ±‚ Bodyï¼ˆclient_ids, updatesï¼‰[è¦æ ¼:L227]
  - [x] 3.4.2.3.3 é©—è­‰ client_ids ä¸è¶…é100æ¢ [è¦æ ¼:L282-L284]
  - [x] 3.4.2.3.4 èª¿ç”¨ ClientService.batchUpdate() [è¦æ ¼:L227]
  - [x] 3.4.2.3.5 è¿”å›æ“ä½œçµæœ [è¦æ ¼:L227]
  - [x] 3.4.2.3.6 æ·»åŠ  OpenAPI è¨»è§£

---

#### 3.5 å®Œæ•´æ€§é©—è­‰ [è¦æ ¼:L1-L924]

**3.5.1 API æ¸…å–®é©—è­‰**
- [x] 3.5.1.1 é©—è­‰å®¢æˆ¶ç®¡ç† APIï¼ˆ5 å€‹ï¼‰[è¦æ ¼:L72, L187, L207, L213]
- [x] 3.5.1.2 é©—è­‰æ¨™ç±¤ç®¡ç† APIï¼ˆ4 å€‹ï¼‰[è¦æ ¼:L219-L223]
- [x] 3.5.1.3 é©—è­‰æ‰¹é‡æ“ä½œ APIï¼ˆ3 å€‹ï¼‰[è¦æ ¼:L227-L230]
- [x] 3.5.1.4 ç¢ºèªç¸½è¨ˆï¼š12 å€‹ API

**3.5.2 æ¥­å‹™é‚è¼¯é©—è­‰**
- [x] 3.5.2.1 é©—è­‰çµ±ä¸€ç·¨è™Ÿ8ä½æ•¸å­—è¦å‰‡ [è¦æ ¼:L755-L757, L865-L867]
- [x] 3.5.2.2 é©—è­‰ N+1 æŸ¥è©¢å„ªåŒ–ï¼ˆJOIN + GROUP_CONCATï¼‰[è¦æ ¼:L100-L162]
- [x] 3.5.2.3 é©—è­‰å­—æ®µé¸æ“‡å™¨åŠŸèƒ½ [è¦æ ¼:L165-L183]
- [x] 3.5.2.4 é©—è­‰å°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼ˆå“¡å·¥å¯çœ‹æ‰€æœ‰å®¢æˆ¶ï¼‰[è¦æ ¼:L720-L724, L876-L880]
- [x] 3.5.2.5 é©—è­‰æ‰¹é‡æ“ä½œ100æ¢ä¸Šé™ [è¦æ ¼:L282-L284]
- [x] 3.5.2.6 é©—è­‰ client_notes å’Œ payment_notes å…©å€‹å‚™è¨»æ¬„ä½ [è¦æ ¼:L29-L30, L94-L97]

**3.5.3 æ¸¬è©¦æ¡ˆä¾‹åŸ·è¡Œ**
- [x] 3.5.3.1 æ¸¬è©¦æ–°å¢å®¢æˆ¶æˆåŠŸ [è¦æ ¼:L895-L903]
- [x] 3.5.3.2 æ¸¬è©¦çµ±ä¸€ç·¨è™Ÿé‡è¤‡ [è¦æ ¼:L906-L909]
- [x] 3.5.3.3 æ¸¬è©¦å“¡å·¥å¯çœ‹æ‰€æœ‰å®¢æˆ¶ [è¦æ ¼:L912-L919]

**3.5.4 å›åˆ°è¦æ ¼é€ä¸€é©—è­‰**
- [x] 3.5.4.1 æ‰“é–‹è¦æ ¼æ–‡æª” L21-L40ï¼Œé©—è­‰ Clients è¡¨å®Œæ•´æ€§
- [x] 3.5.4.2 æ‰“é–‹è¦æ ¼æ–‡æª” L44-L50ï¼Œé©—è­‰ CustomerTags è¡¨å®Œæ•´æ€§
- [x] 3.5.4.3 æ‰“é–‹è¦æ ¼æ–‡æª” L54-L64ï¼Œé©—è­‰ ClientTagAssignments è¡¨å®Œæ•´æ€§
- [x] 3.5.4.4 æ‰“é–‹è¦æ ¼æ–‡æª” L100-L162ï¼Œé©—è­‰ N+1 æŸ¥è©¢å„ªåŒ–å¯¦ç¾
- [x] 3.5.4.5 æ‰“é–‹è¦æ ¼æ–‡æª” L280-L364ï¼Œé©—è­‰æ‰¹é‡æ“ä½œå¯¦ç¾
- [x] 3.5.4.6 é€ä¸€é©—è­‰æ‰€æœ‰ 12 å€‹ API çš„å¯¦ç¾

---

#### 3.6 éƒ¨ç½²èˆ‡æ¸¬è©¦
- [x] 3.6.1 [å…§éƒ¨] æäº¤æ‰€æœ‰æ›´æ”¹åˆ° Git
- [x] 3.6.2 [å…§éƒ¨] åŸ·è¡Œè‡ªå‹•éƒ¨ç½²ï¼ˆgit push origin mainï¼‰
- [x] 3.6.3 [å…§éƒ¨] é©—è­‰ Cloudflare Pages éƒ¨ç½²æˆåŠŸ

---

### [x] æ¨¡çµ„ 4ï¼šå·¥æ™‚ç®¡ç†ï¼ˆå·¥æ™‚ç®¡ç†-å®Œæ•´è¦æ ¼.mdï¼‰âœ… å·²å®Œæˆï¼ˆå·²è£œå……éºæ¼ï¼‰
**è³‡æ–™è¡¨ï¼š** 4 å€‹ï¼ˆå« CronJobExecutionsï¼‰| **APIï¼š** 10 å€‹ | **Cron Jobsï¼š** 2 å€‹

#### 4.1 è³‡æ–™è¡¨å‰µå»º

**4.1.1 TimeLogs è¡¨ï¼ˆå·¥æ™‚è¨˜éŒ„ï¼‰[è¦æ ¼:L11-L40]**
- [x] 4.1.1.1 å‰µå»ºä¸»éµ `log_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L12]
- [x] 4.1.1.2 å‰µå»º `user_id` (INTEGER NOT NULL) [è¦æ ¼:L13]
- [x] 4.1.1.3 å‰µå»º `work_date` (TEXT NOT NULL)ï¼Œæ ¼å¼ YYYY-MM-DD [è¦æ ¼:L14]
- [x] 4.1.1.4 å‰µå»º `client_id` (TEXT)ï¼Œå·¥ä½œæ™‚å¡«å¯« [è¦æ ¼:L15]
- [x] 4.1.1.5 å‰µå»º `service_id` (INTEGER)ï¼Œæœå‹™é …ç›® [è¦æ ¼:L16]
- [x] 4.1.1.6 å‰µå»º `work_type_id` (INTEGER NOT NULL)ï¼Œå·¥ä½œé¡å‹ [è¦æ ¼:L17]
- [x] 4.1.1.7 å‰µå»º `hours` (REAL NOT NULL)ï¼Œå¯¦éš›å·¥æ™‚ [è¦æ ¼:L18]
- [x] 4.1.1.8 å‰µå»º `weighted_hours` (REAL)ï¼ŒåŠ æ¬Šå·¥æ™‚ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰[è¦æ ¼:L19]
- [x] 4.1.1.9 å‰µå»º `leave_type_id` (INTEGER)ï¼Œè«‹å‡æ™‚å¡«å¯« [è¦æ ¼:L20]
- [x] 4.1.1.10 å‰µå»º `notes` (TEXT) [è¦æ ¼:L21]
- [x] 4.1.1.11 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `updated_at`, `is_deleted`, `deleted_at`, `deleted_by` [è¦æ ¼:L22-L26]
- [x] 4.1.1.12 æ·»åŠ å¤–éµç´„æŸï¼š5å€‹å¤–éµï¼ˆuser_id, client_id, service_id, work_type_id, leave_type_idï¼‰[è¦æ ¼:L28-L33]
- [x] 4.1.1.13 å‰µå»ºç´¢å¼•ï¼š`idx_timelogs_user_date` [è¦æ ¼:L36]
- [x] 4.1.1.14 å‰µå»ºç´¢å¼•ï¼š`idx_timelogs_client` [è¦æ ¼:L37]
- [x] 4.1.1.15 å‰µå»ºç´¢å¼•ï¼š`idx_timelogs_client_date` å®¢æˆ¶æˆæœ¬åˆ†æå°ˆç”¨ [è¦æ ¼:L38]
- [x] 4.1.1.16 å‰µå»ºç´¢å¼•ï¼š`idx_timelogs_date` æ—¥æœŸç¯„åœæŸ¥è©¢å°ˆç”¨ [è¦æ ¼:L39]

**4.1.2 WorkTypes è¡¨ï¼ˆå·¥ä½œé¡å‹ï¼‰[è¦æ ¼:L64-L86]**
- [x] 4.1.2.1 å·²åœ¨æ¨¡çµ„ 2 å‰µå»ºï¼ˆå…±11ç¨®å·¥ä½œé¡å‹ï¼‰[è¦æ ¼:L74-L85]
- [x] 4.1.2.2 é©—è­‰åŒ…å«åœ‹å®šå‡æ—¥/ä¾‹å‡æ—¥ç‰¹æ®Šé¡å‹ï¼ˆwork_type_id 7, 10ï¼‰[è¦æ ¼:L81, L84]

**4.1.3 CompensatoryLeave è¡¨ï¼ˆè£œä¼‘é¤˜é¡ï¼‰[è¦æ ¼:L91-L114]**
- [x] 4.1.3.1 å‰µå»ºä¸»éµ `compe_leave_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L92]
- [x] 4.1.3.2 å‰µå»º `user_id` (INTEGER NOT NULL) [è¦æ ¼:L93]
- [x] 4.1.3.3 å‰µå»º `hours_earned` (REAL NOT NULL)ï¼Œç´¯ç©çš„è£œä¼‘æ™‚æ•¸ [è¦æ ¼:L94]
- [x] 4.1.3.4 å‰µå»º `hours_remaining` (REAL NOT NULL)ï¼Œå‰©é¤˜è£œä¼‘æ™‚æ•¸ [è¦æ ¼:L95]
- [x] 4.1.3.5 å‰µå»º `earned_date` (TEXT NOT NULL)ï¼Œç´¯ç©æ—¥æœŸï¼ˆFIFOæ’åºç”¨ï¼‰[è¦æ ¼:L96]
- [x] 4.1.3.6 å‰µå»º `expiry_date` (TEXT NOT NULL)ï¼Œåˆ°æœŸæ—¥ï¼ˆç•¶æœˆæœ‰æ•ˆï¼Œæ¬¡æœˆ1æ—¥æ­¸0ï¼‰[è¦æ ¼:L97]
- [x] 4.1.3.7 å‰µå»º `source_timelog_id` (INTEGER)ï¼Œä¾†æºå·¥æ™‚è¨˜éŒ„ [è¦æ ¼:L98]
- [x] 4.1.3.8 å‰µå»º `status` (TEXT DEFAULT 'active')ï¼Œç‹€æ…‹ï¼šactive/expired/used/converted [è¦æ ¼:L99]
- [x] 4.1.3.9 å‰µå»ºè½‰æ›æ¬„ä½ï¼š`converted_to_payment`, `conversion_date`, `conversion_rate` [è¦æ ¼:L100-L102]
- [x] 4.1.3.10 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `is_deleted` [è¦æ ¼:L103-L104]
- [x] 4.1.3.11 æ·»åŠ å¤–éµç´„æŸï¼š2å€‹å¤–éµï¼ˆuser_id, source_timelog_idï¼‰[è¦æ ¼:L106-L107]
- [x] 4.1.3.12 å‰µå»ºç´¢å¼•ï¼š4å€‹ç´¢å¼•ï¼ˆuser, status, expiry, earned_dateï¼‰[è¦æ ¼:L110-L113]

**4.1.4 CompensatoryLeaveUsage è¡¨ï¼ˆè£œä¼‘ä½¿ç”¨è¨˜éŒ„ï¼‰[è¦æ ¼:L118-L134]**
- [x] 4.1.4.1 å‰µå»ºä¸»éµ `usage_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L119]
- [x] 4.1.4.2 å‰µå»º `compe_leave_id` (INTEGER NOT NULL) [è¦æ ¼:L120]
- [x] 4.1.4.3 å‰µå»º `leave_application_id` (INTEGER)ï¼Œé—œè¯è«‹å‡ç”³è«‹ [è¦æ ¼:L121]
- [x] 4.1.4.4 å‰µå»º `timelog_id` (INTEGER)ï¼Œé—œè¯å·¥æ™‚è¨˜éŒ„ [è¦æ ¼:L122]
- [x] 4.1.4.5 å‰µå»º `hours_used` (REAL NOT NULL) [è¦æ ¼:L123]
- [x] 4.1.4.6 å‰µå»º `used_date` (TEXT NOT NULL) [è¦æ ¼:L124]
- [x] 4.1.4.7 å‰µå»º `created_at` [è¦æ ¼:L125]
- [x] 4.1.4.8 æ·»åŠ å¤–éµç´„æŸï¼š3å€‹å¤–éµï¼ˆcompe_leave_id, leave_application_id, timelog_idï¼‰[è¦æ ¼:L127-L129]
- [x] 4.1.4.9 å‰µå»ºç´¢å¼•ï¼š2å€‹ç´¢å¼•ï¼ˆcompe_leave_id, used_dateï¼‰[è¦æ ¼:L132-L133]

**4.1.5 CronJobExecutions è¡¨ï¼ˆCron åŸ·è¡Œè¨˜éŒ„ï¼‰**
- [x] 4.1.5.1 å‰µå»ºä¸»éµ `execution_id`
- [x] 4.1.5.2 å‰µå»º `job_name`, `executed_at`, `status`, `error_message`
- [x] 4.1.5.3 ç”¨æ–¼å†ªç­‰æ€§ä¿è­·

---

#### 4.2 å·¥æ™‚ç®¡ç†å¯¦ç¾ [è¦æ ¼:L142, L149]

**4.2.1 TimeLogRepository å‰µå»º**
- [x] 4.2.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒæ—¥æœŸç¯„åœã€å“¡å·¥éæ¿¾ï¼‰
- [x] 4.2.1.2 å‰µå»º `findById()` æ–¹æ³•
- [x] 4.2.1.3 å‰µå»º `findByDateRange()` æ–¹æ³•
- [x] 4.2.1.4 å‰µå»º `create()` æ–¹æ³•
- [x] 4.2.1.5 å‰µå»º `update()` æ–¹æ³•
- [x] 4.2.1.6 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰

**4.2.2 TimeLogService å‰µå»º**
- [x] 4.2.2.1 å¯¦ç¾ `getTimeLogs()` æ–¹æ³• [è¦æ ¼:L487-L494]
  - [x] 4.2.2.1.1 å“¡å·¥åªèƒ½çœ‹è‡ªå·±ï¼ˆæ¬Šé™éæ¿¾ï¼‰[è¦æ ¼:L489-L491]
  - [x] 4.2.2.1.2 ç®¡ç†å“¡å¯çœ‹æ‰€æœ‰äºº
  - [x] 4.2.2.1.3 èª¿ç”¨ TimeLogRepository.findAll()

- [x] 4.2.2.2 å¯¦ç¾ `createTimeLog()` æ–¹æ³• [è¦æ ¼:L496-L573]
  - [x] 4.2.2.2.1 é©—è­‰å“¡å·¥åªèƒ½æ–°å¢è‡ªå·±çš„å·¥æ™‚ [è¦æ ¼:L498-L500]
  - [x] 4.2.2.2.2 é©—è­‰å·¥æ™‚ç¯„åœï¼ˆ0-12å°æ™‚ï¼‰[è¦æ ¼:L502-L505, L679-L680]
  - [x] 4.2.2.2.3 é©—è­‰å·¥æ™‚ç²¾åº¦ï¼ˆå¿…é ˆæ˜¯0.5çš„å€æ•¸ï¼‰[è¦æ ¼:L507-L510, L682]
  - [x] 4.2.2.2.4 æª¢æŸ¥è£œç­æ—¥é©—è­‰ï¼ˆä¸å¯é¸ä¼‘æ¯æ—¥åŠ ç­ï¼‰[è¦æ ¼:L512-L527, L685-L695]
  - [x] 4.2.2.2.5 åœ‹å®šå‡æ—¥/ä¾‹å‡æ—¥8å°æ™‚å…§ä¸Šé™é©—è­‰ [è¦æ ¼:L529-L535]
  - [x] 4.2.2.2.6 è¨ˆç®—åŠ æ¬Šå·¥æ™‚ï¼ˆåœ‹å®šå‡æ—¥ç‰¹æ®Šè¦å‰‡ï¼‰[è¦æ ¼:L537-L547, L760-L791]
  - [x] 4.2.2.2.7 å‰µå»ºå·¥æ™‚è¨˜éŒ„
  - [x] 4.2.2.2.8 è‡ªå‹•ç§»é™¤å·¥æ™‚ç¼ºå¡«æé†’ [è¦æ ¼:L552-L553, L607-L628]
  - [x] 4.2.2.2.9 è‡ªå‹•ç”¢ç”Ÿè£œä¼‘ï¼ˆåœ‹å®šå‡æ—¥çµ±ä¸€8å°æ™‚ï¼‰[è¦æ ¼:L555-L570, L793-L820]
  - [x] 4.2.2.2.10 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

- [x] 4.2.2.3 å¯¦ç¾ `generateCompLeave()` æ–¹æ³• [è¦æ ¼:L579-L602]
  - [x] 4.2.2.3.1 è¨ˆç®—åˆ°æœŸæ—¥ï¼ˆå¾ Settings è®€å–è¦å‰‡ï¼‰[è¦æ ¼:L586, L831-L876]
  - [x] 4.2.2.3.2 å‰µå»ºè£œä¼‘è¨˜éŒ„
  - [x] 4.2.2.3.3 å„²å­˜åŸå§‹è²»ç‡ï¼ˆé¿å…å›æº¯æŸ¥è©¢ï¼‰[è¦æ ¼:L600]

- [x] 4.2.2.4 å¯¦ç¾ `calculateWeightedHours()` æ–¹æ³• [è¦æ ¼:L659-L671]
  - [x] 4.2.2.4.1 æŸ¥è©¢æ—¥æœŸç¯„åœå…§çš„å·¥æ™‚è¨˜éŒ„
  - [x] 4.2.2.4.2 ç´¯åŠ å¯¦éš›å·¥æ™‚å’ŒåŠ æ¬Šå·¥æ™‚
  - [x] 4.2.2.4.3 è¿”å›çµ±è¨ˆçµæœ

**4.2.3 å·¥æ™‚ç®¡ç† API è·¯ç”±å‰µå»º**
- [x] 4.2.3.1 `GET /api/v1/timelogs` [è¦æ ¼:L142-L145]
  - [x] 4.2.3.1.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.2.3.1.2 è§£ææŸ¥è©¢åƒæ•¸ï¼ˆstart_date, end_date, user_idï¼‰[è¦æ ¼:L143]
  - [x] 4.2.3.1.3 èª¿ç”¨ TimeLogService.getTimeLogs()ï¼ˆå«æ¬Šé™éæ¿¾ï¼‰
  - [x] 4.2.3.1.4 è¿”å›å·¥æ™‚åˆ—è¡¨
  - [x] 4.2.3.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 4.2.3.2 `POST /api/v1/timelogs` [è¦æ ¼:L149-L173]
  - [x] 4.2.3.2.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.2.3.2.2 è§£æè«‹æ±‚ Bodyï¼ˆwork_date, client_id, service_id, work_type_id, hours, leave_type_id, notesï¼‰[è¦æ ¼:L155-L173]
  - [x] 4.2.3.2.3 èª¿ç”¨ TimeLogService.createTimeLog()ï¼ˆå«æ‰€æœ‰é©—è­‰ï¼‰
  - [x] 4.2.3.2.4 è¿”å› 201 Created
  - [x] 4.2.3.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 4.2.3.3 `PUT /api/v1/timelogs/:id`
  - [x] 4.2.3.3.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.2.3.3.2 è§£æè·¯å¾‘åƒæ•¸å’Œè«‹æ±‚ Body
  - [x] 4.2.3.3.3 èª¿ç”¨ TimeLogService.updateTimeLog()
  - [x] 4.2.3.3.4 é‡æ–°è¨ˆç®—åŠ æ¬Šå·¥æ™‚
  - [x] 4.2.3.3.5 è¿”å›æ›´æ–°å¾Œçš„å·¥æ™‚
  - [x] 4.2.3.3.6 æ·»åŠ  OpenAPI è¨»è§£

- [x] 4.2.3.4 `DELETE /api/v1/timelogs/:id`
  - [x] 4.2.3.4.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.2.3.4.2 èª¿ç”¨ TimeLogService.deleteTimeLog()ï¼ˆè»Ÿåˆªé™¤ï¼‰
  - [x] 4.2.3.4.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 4.2.3.4.4 æ·»åŠ  OpenAPI è¨»è§£

- [x] 4.2.3.5 `POST /api/v1/weighted-hours/calculate` [è¦æ ¼:L177-L298]
  - [x] 4.2.3.5.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.2.3.5.2 è§£æè«‹æ±‚ Bodyï¼ˆuser_id, start_date, end_dateï¼‰[è¦æ ¼:L182-L186]
  - [x] 4.2.3.5.3 èª¿ç”¨ TimeLogService.calculateWeightedHours()
  - [x] 4.2.3.5.4 è¿”å›çµ±è¨ˆçµæœï¼ˆtotal_hours, weighted_hours, breakdownï¼‰[è¦æ ¼:L287-L297]
  - [x] 4.2.3.5.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 4.3 è£œä¼‘ç³»çµ±å¯¦ç¾ [è¦æ ¼:L190-L194, L235-L283]

**4.3.1 CompensatoryLeaveService å‰µå»º**
- [x] 4.3.1.1 å¯¦ç¾ `getCompensatoryLeaveBalance()` æ–¹æ³• [è¦æ ¼:L197-L233]
  - [x] 4.3.1.1.1 æŸ¥è©¢ç”¨æˆ¶å¯ç”¨è£œä¼‘ï¼ˆstatus=active, hours_remaining>0, expiry_date>=nowï¼‰
  - [x] 4.3.1.1.2 æŒ‰ earned_date ASC æ’åºï¼ˆFIFOï¼‰
  - [x] 4.3.1.1.3 è¨ˆç®—ç¸½å¯ç”¨æ™‚æ•¸
  - [x] 4.3.1.1.4 ç¯©é¸å³å°‡åˆ°æœŸçš„è£œä¼‘ï¼ˆ5å¤©å…§ï¼‰[è¦æ ¼:L224-L230]
  - [x] 4.3.1.1.5 è¨ˆç®—åˆ°æœŸå¤©æ•¸
  - [x] 4.3.1.1.6 è¿”å›é¤˜é¡è©³æƒ…

- [x] 4.3.1.2 å¯¦ç¾ `useCompensatoryLeave()` æ–¹æ³•ï¼ˆFIFOï¼‰[è¦æ ¼:L935-L1013]
  - [x] 4.3.1.2.1 æŸ¥è©¢å¯ç”¨è£œä¼‘ï¼ˆæŒ‰ earned_date ASC æ’åºï¼‰[è¦æ ¼:L938-L945]
  - [x] 4.3.1.2.2 æª¢æŸ¥å¯ç”¨è£œä¼‘æ˜¯å¦è¶³å¤  [è¦æ ¼:L952-L961]
  - [x] 4.3.1.2.3 æŒ‰ FIFO é †åºæ‰£é™¤è£œä¼‘ [è¦æ ¼:L963-L1005]
  - [x] 4.3.1.2.4 æ›´æ–°è£œä¼‘é¤˜é¡ï¼ˆstatus: activeâ†’usedï¼‰[è¦æ ¼:L973-L981]
  - [x] 4.3.1.2.5 è¨˜éŒ„ä½¿ç”¨æ­·å²åˆ° CompensatoryLeaveUsage [è¦æ ¼:L984-L996]
  - [x] 4.3.1.2.6 è¿”å›ä½¿ç”¨è©³æƒ…å’Œå‰©é¤˜ç¸½è¨ˆ [è¦æ ¼:L1007-L1011]

- [x] 4.3.1.3 å¯¦ç¾ `convertToPayment()` æ–¹æ³• [è¦æ ¼:L264-L283]
  - [x] 4.3.1.3.1 æŸ¥è©¢æŒ‡å®šè£œä¼‘è¨˜éŒ„
  - [x] 4.3.1.3.2 ç²å–ç•¶å‰è²»ç‡ï¼ˆæˆ–ä½¿ç”¨å„²å­˜çš„ conversion_rateï¼‰
  - [x] 4.3.1.3.3 è¨ˆç®—åŠ ç­è²»é‡‘é¡ï¼ˆhours * rate_multiplierï¼‰[è¦æ ¼:L276]
  - [x] 4.3.1.3.4 æ›´æ–°è£œä¼‘ç‹€æ…‹ç‚º converted
  - [x] 4.3.1.3.5 è¨˜éŒ„è½‰æ›è³‡è¨Šï¼ˆconversion_date, conversion_rateï¼‰
  - [x] 4.3.1.3.6 è¿”å›è½‰æ›çµæœ [è¦æ ¼:L271-L282]

- [x] 4.3.1.4 å¯¦ç¾ `getCompensatoryLeaveHistory()` æ–¹æ³• [è¦æ ¼:L1019-L1043]
  - [x] 4.3.1.4.1 æŸ¥è©¢è£œä¼‘ä½¿ç”¨æ­·å²ï¼ˆJOIN CompensatoryLeaveUsage, LeaveApplications, LeaveTypesï¼‰[è¦æ ¼:L1021-L1039]
  - [x] 4.3.1.4.2 æŒ‰ earned_date DESC, used_date DESC æ’åº [è¦æ ¼:L1039]
  - [x] 4.3.1.4.3 è¿”å›æ­·å²è¨˜éŒ„

**4.3.2 è£œä¼‘ API è·¯ç”±å‰µå»º**
- [x] 4.3.2.1 `GET /api/v1/compensatory-leave` [è¦æ ¼:L190, L197-L233]
  - [x] 4.3.2.1.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.3.2.1.2 è§£ææŸ¥è©¢åƒæ•¸ï¼ˆuser_idï¼‰[è¦æ ¼:L198]
  - [x] 4.3.2.1.3 èª¿ç”¨ CompensatoryLeaveService.getCompensatoryLeaveBalance()
  - [x] 4.3.2.1.4 è¿”å›é¤˜é¡è©³æƒ…ï¼ˆtotal_hours, details, expiring_soonï¼‰[è¦æ ¼:L201-L232]
  - [x] 4.3.2.1.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 4.3.2.2 `POST /api/v1/compensatory-leave/use` [è¦æ ¼:L191, L237-L260]
  - [x] 4.3.2.2.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.3.2.2.2 è§£æè«‹æ±‚ Bodyï¼ˆuser_id, hours, use_date, leave_application_idï¼‰[è¦æ ¼:L238-L243]
  - [x] 4.3.2.2.3 èª¿ç”¨ CompensatoryLeaveService.useCompensatoryLeave()ï¼ˆFIFOï¼‰
  - [x] 4.3.2.2.4 è¿”å›ä½¿ç”¨è©³æƒ… [è¦æ ¼:L246-L259]
  - [x] 4.3.2.2.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 4.3.2.3 `POST /api/v1/compensatory-leave/convert` [è¦æ ¼:L192, L264-L283]
  - [x] 4.3.2.3.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.3.2.3.2 è§£æè«‹æ±‚ Bodyï¼ˆcompe_leave_ids, conversion_rateï¼‰[è¦æ ¼:L265-L268]
  - [x] 4.3.2.3.3 èª¿ç”¨ CompensatoryLeaveService.convertToPayment()
  - [x] 4.3.2.3.4 è¿”å›è½‰æ›çµæœ [è¦æ ¼:L271-L282]
  - [x] 4.3.2.3.5 æ·»åŠ  OpenAPI è¨»è§£

- [x] 4.3.2.4 `GET /api/v1/compensatory-leave/history` [è¦æ ¼:L193, L1019-L1043]
  - [x] 4.3.2.4.1 æ‡‰ç”¨ authMiddleware
  - [x] 4.3.2.4.2 è§£ææŸ¥è©¢åƒæ•¸ï¼ˆuser_id, start_date, end_dateï¼‰
  - [x] 4.3.2.4.3 èª¿ç”¨ CompensatoryLeaveService.getCompensatoryLeaveHistory()
  - [x] 4.3.2.4.4 è¿”å›æ­·å²è¨˜éŒ„
  - [x] 4.3.2.4.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 4.4 Cron Job å¯¦ç¾

**4.4.1 è£œä¼‘åˆ°æœŸè½‰æ› Cron Job [è¦æ ¼:L882-L929]**
- [x] 4.4.1.1 é…ç½® Cron è§¸ç™¼æ™‚é–“ï¼šæ¯æœˆ 1 æ—¥ 00:00 [è¦æ ¼:L881]
- [x] 4.4.1.2 å¯¦ç¾ `monthlyCompensatoryLeaveExpiration()` [è¦æ ¼:L882-L929]
  - [x] 4.4.1.2.1 æŸ¥è©¢æ˜¨å¤©ï¼ˆä¸Šæœˆæœ€å¾Œä¸€å¤©ï¼‰åˆ°æœŸçš„è£œä¼‘ [è¦æ ¼:L888-L894]
  - [x] 4.4.1.2.2 éæ­·æ‰€æœ‰åˆ°æœŸè£œä¼‘ [è¦æ ¼:L896]
  - [x] 4.4.1.2.3 ç²å–ç•¶å‰è²»ç‡ [è¦æ ¼:L898]
  - [x] 4.4.1.2.4 æ›´æ–°è£œä¼‘ç‹€æ…‹ç‚º converted [è¦æ ¼:L901-L908]
  - [x] 4.4.1.2.5 è¨˜éŒ„åˆ°è–ªè³‡ç³»çµ± [è¦æ ¼:L911-L918]
  - [x] 4.4.1.2.6 é€šçŸ¥å“¡å·¥ [è¦æ ¼:L921-L925]
  - [x] 4.4.1.2.7 è¨˜éŒ„åŸ·è¡Œæ—¥èªŒ [è¦æ ¼:L928]

- [x] 4.4.1.3 å¯¦ç¾å†ªç­‰æ€§ä¿è­·ï¼ˆCronJobExecutions è¡¨ï¼‰
  - [x] 4.4.1.3.1 æª¢æŸ¥æ˜¯å¦å·²åŸ·è¡Œï¼ˆé¿å…é‡è¤‡ï¼‰
  - [x] 4.4.1.3.2 è¨˜éŒ„åŸ·è¡Œç‹€æ…‹ï¼ˆsuccess/failedï¼‰
  - [x] 4.4.1.3.3 è¨˜éŒ„éŒ¯èª¤è¨Šæ¯ï¼ˆå¦‚æœ‰å¤±æ•—ï¼‰

- [x] 4.4.1.4 å¯¦ç¾å¤±æ•—é€šçŸ¥æ©Ÿåˆ¶
  - [x] 4.4.1.4.1 æ•ç²åŸ·è¡ŒéŒ¯èª¤
  - [x] 4.4.1.4.2 é€šçŸ¥æ‰€æœ‰ç®¡ç†å“¡
  - [x] 4.4.1.4.3 è¨˜éŒ„è©³ç´°éŒ¯èª¤æ—¥èªŒ

**4.4.2 å·¥æ™‚å¡«å¯«æé†’ Cron Job [è¦æ ¼:L1056-L1183]**
- [x] 4.4.2.1 é…ç½® Cron è§¸ç™¼æ™‚é–“ï¼šæ¯å¤© 08:30ï¼ˆé€±ä¸€è‡³é€±äº”ï¼‰[è¦æ ¼:L1050]
- [x] 4.4.2.2 å¯¦ç¾ `checkMissingTimesheets()` [è¦æ ¼:L1056-L1163]
  - [x] 4.4.2.2.1 è¨ˆç®—æ˜¨å¤©æ—¥æœŸ [è¦æ ¼:L1057-L1059]
  - [x] 4.4.2.2.2 æ’é™¤é€±æœ« [è¦æ ¼:L1063-L1066]
  - [x] 4.4.2.2.3 æª¢æŸ¥æ˜¯å¦ç‚ºåœ‹å®šå‡æ—¥ï¼ˆè·³éï¼‰[è¦æ ¼:L1069-L1076]
  - [x] 4.4.2.2.4 æŸ¥è©¢æ‰€æœ‰å“¡å·¥ [è¦æ ¼:L1079-L1081]
  - [x] 4.4.2.2.5 æª¢æŸ¥æ¯å€‹å“¡å·¥çš„å·¥æ™‚è¨˜éŒ„ [è¦æ ¼:L1086-L1090]
  - [x] 4.4.2.2.6 æª¢æŸ¥æ¯å€‹å“¡å·¥çš„è«‹å‡è¨˜éŒ„ [è¦æ ¼:L1093-L1098]
  - [x] 4.4.2.2.7 å¦‚ç„¡å·¥æ™‚ä¹Ÿç„¡è«‹å‡ï¼Œå‰µå»ºæé†’ [è¦æ ¼:L1101-L1125]
  - [x] 4.4.2.2.8 é€šçŸ¥æ‰€æœ‰ç®¡ç†å“¡ï¼ˆå½™ç¸½æé†’ï¼‰[è¦æ ¼:L1130-L1159]
  - [x] 4.4.2.2.9 è¨˜éŒ„åŸ·è¡Œæ—¥èªŒ [è¦æ ¼:L1162]

- [x] 4.4.2.3 å¯¦ç¾è‡ªå‹•æ¶ˆé™¤æ©Ÿåˆ¶ [è¦æ ¼:L607-L628, L1170-L1182]
  - [x] 4.4.2.3.1 è§¸ç™¼æ™‚æ©Ÿï¼šå“¡å·¥æ–°å¢å·¥æ™‚æ™‚ [è¦æ ¼:L607, L1168]
  - [x] 4.4.2.3.2 ç§»é™¤å“¡å·¥è‡ªå·±çš„æé†’ [è¦æ ¼:L610-L617]
  - [x] 4.4.2.3.3 ç§»é™¤ç®¡ç†å“¡é—œæ–¼è©²å“¡å·¥çš„æé†’ [è¦æ ¼:L620-L627]
  - [x] 4.4.2.3.4 æ›´æ–°ç®¡ç†å“¡å½™ç¸½æé†’ [è¦æ ¼:L1181]

**4.4.3 è£œä¼‘åˆ°æœŸæé†’ï¼ˆæ¯æ—¥åŸ·è¡Œï¼‰[è¦æ ¼:L1188-L1228]**
- [x] 4.4.3.1 é…ç½® Cron è§¸ç™¼æ™‚é–“ï¼šæ¯å¤©åŸ·è¡Œ
- [x] 4.4.3.2 å¯¦ç¾ `sendCompLeaveExpiryReminders()` [è¦æ ¼:L1188-L1228]
  - [x] 4.4.3.2.1 è¨ˆç®—5å¤©å¾Œæ—¥æœŸ [è¦æ ¼:L1189-L1191]
  - [x] 4.4.3.2.2 æŸ¥è©¢å³å°‡åˆ°æœŸçš„è£œä¼‘ [è¦æ ¼:L1193-L1202]
  - [x] 4.4.3.2.3 æª¢æŸ¥æ˜¯å¦å·²æœ‰æé†’ï¼ˆé¿å…é‡è¤‡ï¼‰[è¦æ ¼:L1206-L1212]
  - [x] 4.4.3.2.4 å‰µå»ºåˆ°æœŸæé†’ï¼ˆauto_dismiss=1ï¼‰[è¦æ ¼:L1214-L1226]

---

#### 4.5 å®Œæ•´æ€§é©—è­‰ [è¦æ ¼:L1-L1282]

**4.5.1 API æ¸…å–®é©—è­‰**
- [x] 4.5.1.1 é©—è­‰å·¥æ™‚ç®¡ç† APIï¼ˆ5 å€‹ï¼‰[è¦æ ¼:L142, L149, L177]
- [x] 4.5.1.2 é©—è­‰è£œä¼‘ç®¡ç† APIï¼ˆ4 å€‹ï¼‰[è¦æ ¼:L190-L193]
- [x] 4.5.1.3 é©—è­‰ Cron Jobsï¼ˆ2 å€‹ï¼‰[è¦æ ¼:L881, L1050]
- [x] 4.5.1.4 ç¢ºèªç¸½è¨ˆï¼š10 å€‹ APIï¼Œ2 å€‹ Cron Jobs

**4.5.2 æ¥­å‹™é‚è¼¯é©—è­‰**
- [x] 4.5.2.1 é©—è­‰å·¥æ™‚ç²¾åº¦ï¼ˆ0.5å€æ•¸ï¼‰[è¦æ ¼:L507-L510, L682]
- [x] 4.5.2.2 é©—è­‰æ¯æ—¥ä¸Šé™ï¼ˆ12å°æ™‚ï¼‰[è¦æ ¼:L502-L505, L679-L680]
- [x] 4.5.2.3 é©—è­‰è£œç­æ—¥è¦å‰‡ï¼ˆä¸å¯é¸ä¼‘æ¯æ—¥åŠ ç­ï¼‰[è¦æ ¼:L512-L527, L685-L695]
- [x] 4.5.2.4 é©—è­‰åœ‹å®šå‡æ—¥/ä¾‹å‡æ—¥ç‰¹æ®Šè¦å‰‡ï¼ˆ8å°æ™‚çµ±ä¸€è¨ˆç®—ï¼‰[è¦æ ¼:L529-L547, L729-L752, L760-L820]
- [x] 4.5.2.5 é©—è­‰è£œä¼‘ FIFO ä½¿ç”¨é‚è¼¯ [è¦æ ¼:L935-L1013]
- [x] 4.5.2.6 é©—è­‰è£œä¼‘åˆ°æœŸè½‰æ›é‚è¼¯ [è¦æ ¼:L879-L929]
- [x] 4.5.2.7 é©—è­‰å·¥æ™‚å¡«å¯«æé†’é‚è¼¯ [è¦æ ¼:L1056-L1163]

**4.5.3 æ¸¬è©¦æ¡ˆä¾‹åŸ·è¡Œ**
- [x] 4.5.3.1 æ¸¬è©¦æ–°å¢å·¥æ™‚æˆåŠŸ [è¦æ ¼:L1252-L1260]
- [x] 4.5.3.2 æ¸¬è©¦å“¡å·¥åªèƒ½çœ‹è‡ªå·± [è¦æ ¼:L1263-L1269]
- [x] 4.5.3.3 æ¸¬è©¦åŠ æ¬Šå·¥æ™‚è¨ˆç®—æ­£ç¢º [è¦æ ¼:L1272-L1275]

**4.5.4 å›åˆ°è¦æ ¼é€ä¸€é©—è­‰**
- [x] 4.5.4.1 æ‰“é–‹è¦æ ¼æ–‡æª” L11-L40ï¼Œé©—è­‰ TimeLogs è¡¨å®Œæ•´æ€§
- [x] 4.5.4.2 æ‰“é–‹è¦æ ¼æ–‡æª” L91-L114ï¼Œé©—è­‰ CompensatoryLeave è¡¨å®Œæ•´æ€§
- [x] 4.5.4.3 æ‰“é–‹è¦æ ¼æ–‡æª” L496-L573ï¼Œé©—è­‰ createTimeLog å®Œæ•´é‚è¼¯
- [x] 4.5.4.4 æ‰“é–‹è¦æ ¼æ–‡æª” L935-L1013ï¼Œé©—è­‰ FIFO ä½¿ç”¨é‚è¼¯
- [x] 4.5.4.5 æ‰“é–‹è¦æ ¼æ–‡æª” L882-L929ï¼Œé©—è­‰åˆ°æœŸè½‰æ›é‚è¼¯
- [x] 4.5.4.6 æ‰“é–‹è¦æ ¼æ–‡æª” L1056-L1163ï¼Œé©—è­‰å·¥æ™‚æé†’é‚è¼¯
- [x] 4.5.4.7 é€ä¸€é©—è­‰æ‰€æœ‰ 10 å€‹ API å’Œ 2 å€‹ Cron Jobs çš„å¯¦ç¾

---

#### 4.6 éƒ¨ç½²èˆ‡æ¸¬è©¦
- [x] 4.6.1 [å…§éƒ¨] æäº¤æ‰€æœ‰æ›´æ”¹åˆ° Git
- [x] 4.6.2 [å…§éƒ¨] åŸ·è¡Œè‡ªå‹•éƒ¨ç½²ï¼ˆgit push origin mainï¼‰
- [x] 4.6.3 [å…§éƒ¨] é©—è­‰ Cloudflare Pages éƒ¨ç½²æˆåŠŸ

---

### [x] æ¨¡çµ„ 5ï¼šå‡æœŸç®¡ç†ï¼ˆå‡æœŸç®¡ç†-å®Œæ•´è¦æ ¼.mdï¼‰âœ… å·²å®Œæˆ
**è³‡æ–™è¡¨ï¼š** 3 å€‹ï¼ˆæ–°å¢ï¼Œå…¶ä»–å·²åœ¨æ¨¡çµ„1-2ï¼‰| **APIï¼š** 7 å€‹ | **Cron Jobsï¼š** 1 å€‹

#### 5.1 è³‡æ–™è¡¨å‰µå»º
- [x] 5.1.1 å‰µå»º `LeaveApplications` è¡¨ï¼ˆå‡æœŸç”³è«‹ï¼Œå«ç”Ÿç†å‡ä½µå…¥ç—…å‡æ¬„ä½ï¼‰[è¦æ ¼:L9-L36, L38-L44]
- [x] 5.1.2 å‰µå»º `AnnualLeaveBalance` è¡¨ï¼ˆç‰¹ä¼‘é¤˜é¡ï¼Œç´¯ç©åˆ¶ï¼šå»å¹´å‰©é¤˜+ä»Šå¹´æ–°å¢ï¼‰[è¦æ ¼:L101-L120]
- [x] 5.1.3 å‰µå»º `LifeEventLeaveGrants` è¡¨ï¼ˆç”Ÿæ´»äº‹ä»¶å‡æœŸé¡åº¦ï¼Œå«æœ‰æ•ˆæœŸè¿½è¹¤ï¼‰[è¦æ ¼:L144-L183]
- [x] 5.1.4 `CronJobExecutions` è¡¨ï¼ˆå·²åœ¨æ¨¡çµ„4å‰µå»ºï¼‰[è¦æ ¼:L185-L205]
- [x] 5.1.5 `Notifications` è¡¨ï¼ˆå·²åœ¨æ¨¡çµ„1å‰µå»ºï¼‰[è¦æ ¼:L207-L220]

#### 5.2 å‡æœŸç®¡ç† API
- [x] 5.2.1 `POST /api/v1/leave/applications` [è¦æ ¼:L235-L239, L397-L449]
  - [x] 5.2.1.1 é©—è­‰æ€§åˆ¥é™åˆ¶ï¼ˆå¥³æ€§é™å®š/ç”·æ€§é™å®šï¼‰[è¦æ ¼:L401-L403]
  - [x] 5.2.1.2 é©—è­‰æ—¥æœŸèˆ‡é‡ç–Š [è¦æ ¼:L404-L419]
  - [x] 5.2.1.3 ç”Ÿç†å‡ç¬¬4æ—¥èµ·ä½µå…¥ç—…å‡ï¼Œä¸¦æª¢æŸ¥ç—…å‡é¤˜é¡ [è¦æ ¼:L421-L449]
  - [x] 5.2.1.4 è¨˜éŒ„ç”³è«‹èˆ‡å¯©è¨ˆæ—¥èªŒ

- [x] 5.2.2 `GET /api/v1/leave/balance`ï¼ˆæŸ¥è©¢ç‰¹ä¼‘/ç—…å‡/ç”Ÿæ´»äº‹ä»¶é¤˜é¡ï¼‰[è¦æ ¼:L251-L276]
  - [x] 5.2.2.1 è¨ˆç®—ç‰¹ä¼‘ç´¯ç©ï¼ˆå»å¹´éå»¶ + ä»Šå¹´æ‡‰å¾—ï¼‰[è¦æ ¼:L634-L708]
  - [x] 5.2.2.2 ç—…å‡é¤˜é¡ï¼ˆå«ç”Ÿç†å‡ç¬¬4æ—¥èµ·ä½µå…¥ç—…å‡ï¼‰[è¦æ ¼:L834-L879]
  - [x] 5.2.2.3 ç”Ÿæ´»äº‹ä»¶é¤˜é¡èˆ‡æœ‰æ•ˆæœŸ [è¦æ ¼:L901-L943]

- [x] 5.2.3 `GET /api/v1/leave/available-types`ï¼ˆä¾æ€§åˆ¥éæ¿¾ï¼‰[è¦æ ¼:L279-L318, L1038]

#### 5.3 ç”Ÿæ´»äº‹ä»¶ç®¡ç† API
- [x] 5.3.1 `POST /api/v1/leave/life-events`ï¼ˆç™»è¨˜å©šå‡ã€å–ªå‡ç­‰ï¼Œè‡ªå‹•è¨ˆç®—æœ‰æ•ˆæœŸï¼‰[è¦æ ¼:L320-L332, L144-L183]

#### 5.4 Cron Job ç®¡ç† APIï¼ˆç®¡ç†å“¡å°ˆç”¨ï¼‰
- [x] 5.4.1 `POST /api/v1/admin/cron/execute`ï¼ˆæ‰‹å‹•è§¸ç™¼å¹´åˆæ›´æ–°ï¼‰[è¦æ ¼:L334-L346]
- [x] 5.4.2 `GET /api/v1/admin/cron/history`ï¼ˆæŸ¥è©¢åŸ·è¡Œæ­·å²ï¼‰[è¦æ ¼:L362-L391]

#### 5.5 Cron Job å¯¦ç¾
- [x] 5.5.1 é…ç½®ç‰¹ä¼‘å¹´åˆæ›´æ–°æ’ç¨‹ï¼ˆæ¯å¹´1æœˆ1æ—¥ 00:00ï¼‰[è¦æ ¼:L708]
- [x] 5.5.2 å¯¦ç¾ç‰¹ä¼‘ç´¯ç©é‚è¼¯ï¼ˆå»å¹´å‰©é¤˜ + ä»Šå¹´æ‡‰å¾—ï¼Œç´¯ç©åˆ¶ï¼‰[è¦æ ¼:L634-L708]
- [x] 5.5.3 å†ªç­‰æ€§ä¿è­·ï¼šä½¿ç”¨ `CronJobExecutions`ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰[è¦æ ¼:L185-L205]
- [x] 5.5.4 å¤±æ•—è¨˜éŒ„èˆ‡é€šçŸ¥æ©Ÿåˆ¶ï¼ˆéŒ¯èª¤è¨Šæ¯èˆ‡å‘Šè­¦ï¼‰[è¦æ ¼:L810]

#### 5.6 å‰ç«¯å¯¦ç¾ï¼ˆæš«ç·©ï¼‰
- [ ] 5.6.1 å¯¦ç¾ `LeavePage.vue` çµ„ä»¶
- [ ] 5.6.2 å¯¦ç¾ `LeaveForm.vue` çµ„ä»¶
- [ ] 5.6.3 å¯¦ç¾å‡æœŸé¤˜é¡é¡¯ç¤ºå…ƒä»¶
- [ ] 5.6.4 å¯¦ç¾ç”Ÿæ´»äº‹ä»¶ç™»è¨˜è¡¨å–®

#### 5.7 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [x] 5.7.1 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰å‡æœŸç®¡ç†åŠŸèƒ½ï¼ˆé‚è¼¯é©—è­‰é€šéï¼‰
- [x] 5.7.2 [å…§éƒ¨] æ¸¬è©¦ç‰¹ä¼‘ç´¯ç©é‚è¼¯ï¼ˆå·²å®Œæ•´å¯¦ç¾ï¼‰
- [x] 5.7.3 [å…§éƒ¨] Cron Job å·²å¯¦ç¾ï¼ˆé…ç½®åœ¨ wrangler.jsoncï¼‰
- [x] 5.7.4 [å…§éƒ¨] æº–å‚™åŸ·è¡Œä¸€è‡´æ€§é©—è­‰
- [x] 5.7.5 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

### [x] æ¨¡çµ„ 6ï¼šæœå‹™ç”Ÿå‘½é€±æœŸç®¡ç†ï¼ˆæœå‹™ç”Ÿå‘½é€±æœŸç®¡ç†.mdï¼‰âœ… å·²å®Œæˆ
**è³‡æ–™è¡¨ï¼š** 2 å€‹ | **APIï¼š** 4 å€‹ | **Cron Jobsï¼š** 0 å€‹

#### 6.1 è³‡æ–™è¡¨å‰µå»º
- [x] 6.1.1 `ClientServices` ç‹€æ…‹æ¬„ä½æ“´å……ï¼ˆstatusã€suspended_atã€resumed_atã€suspension_reasonã€auto_renewï¼‰[è¦æ ¼:L9-L20]
  - [x] 6.1.1.1 æ–°å¢æ¬„ä½ `status` TEXT DEFAULT 'active'ï¼ˆactive/suspended/expired/cancelledï¼‰[è¦æ ¼:L13-L15]
  - [x] 6.1.1.2 æ–°å¢æ¬„ä½ `suspended_at`ï¼ˆæš«åœæ™‚é–“ï¼‰[è¦æ ¼:L16]
  - [x] 6.1.1.3 æ–°å¢æ¬„ä½ `resumed_at`ï¼ˆæ¢å¾©æ™‚é–“ï¼‰[è¦æ ¼:L17]
  - [x] 6.1.1.4 æ–°å¢æ¬„ä½ `suspension_reason`ï¼ˆæš«åœåŸå› ï¼‰[è¦æ ¼:L18]
  - [x] 6.1.1.5 æ–°å¢æ¬„ä½ `auto_renew` BOOLEAN DEFAULT 1ï¼ˆè‡ªå‹•çºŒç´„ï¼‰[è¦æ ¼:L19-L20]

- [x] 6.1.2 å‰µå»º `ServiceChangeHistory` è¡¨ï¼ˆæœå‹™è®Šæ›´æ­·å²ï¼‰[è¦æ ¼:L22-L41]
  - [x] 6.1.2.1 ä¸»éµ `change_id` [è¦æ ¼:L26]
  - [x] 6.1.2.2 é—œè¯æ¬„ä½ï¼š`client_service_id`, `changed_by` [è¦æ ¼:L27, L30]
  - [x] 6.1.2.3 ç‹€æ…‹èˆ‡æ™‚é–“ï¼š`old_status`, `new_status`, `changed_at` [è¦æ ¼:L28-L31]
  - [x] 6.1.2.4 åŸå› èˆ‡å‚™è¨»ï¼š`reason`, `notes` [è¦æ ¼:L32-L33]
  - [x] 6.1.2.5 å¤–éµï¼šFKâ†’ClientServices(client_service_id), Users(user_id) [è¦æ ¼:L35-L37]
  - [x] 6.1.2.6 ç´¢å¼•ï¼š`idx_service_change_service`, `idx_service_change_date` [è¦æ ¼:L39-L41]

#### 6.2 æœå‹™ç”Ÿå‘½é€±æœŸç®¡ç† API
- [x] 6.2.1 `POST /api/v1/client-services/:id/suspend`ï¼ˆæš«åœæœå‹™ï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L47-L75]
  - [x] 6.2.1.1 æ¥æ”¶ reasonã€notes [è¦æ ¼:L56-L62]
  - [x] 6.2.1.2 æ›´æ–° ClientServices.status='suspended' ä¸¦è¨˜éŒ„ suspended_at [è¦æ ¼:L166-L173]
  - [x] 6.2.1.3 è¨˜éŒ„ ServiceChangeHistory è®Šæ›´æ­·å² [è¦æ ¼:L175-L192]
  - [x] 6.2.1.4 æš«åœç›¸é—œæœªå®Œæˆä»»å‹™ï¼ˆActiveTasksï¼‰[è¦æ ¼:L194-L201]
  - [x] 6.2.1.5 ç™¼é€é€šçŸ¥ï¼ˆservice_suspendedï¼‰[è¦æ ¼:L203-L209]

- [x] 6.2.2 `POST /api/v1/client-services/:id/resume`ï¼ˆæ¢å¾©æœå‹™ï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L77-L104]
  - [x] 6.2.2.1 æ¥æ”¶ notes [è¦æ ¼:L86-L91]
  - [x] 6.2.2.2 æ›´æ–° ClientServices.status='active' ä¸¦è¨˜éŒ„ resumed_at [è¦æ ¼:L229-L237]
  - [x] 6.2.2.3 è¨˜éŒ„ ServiceChangeHistory è®Šæ›´æ­·å² [è¦æ ¼:L239-L254]
  - [x] 6.2.2.4 æ¢å¾©ç›¸é—œä»»å‹™ï¼ˆpendingï¼‰[è¦æ ¼:L256-L262]
  - [x] 6.2.2.5 ç™¼é€é€šçŸ¥ï¼ˆservice_resumedï¼‰[è¦æ ¼:L264-L270]

- [x] 6.2.3 `POST /api/v1/client-services/:id/cancel`ï¼ˆå–æ¶ˆæœå‹™ï¼Œç®¡ç†å“¡ï¼‰[è¦æ ¼:L106-L121]
  - [x] 6.2.3.1 æ¥æ”¶ reasonã€cancel_pending_tasks [è¦æ ¼:L115-L121]
  - [x] 6.2.3.2 æ›´æ–° ClientServices.status='cancelled' ä¸¦è¨˜éŒ„ cancelled_at/by [è¦æ ¼:L286-L293]
  - [x] 6.2.3.3 è¨˜éŒ„ ServiceChangeHistory è®Šæ›´æ­·å² [è¦æ ¼:L295-L310]
  - [x] 6.2.3.4 å–æ¶ˆæœªå®Œæˆä»»å‹™ï¼ˆå¯é¸ï¼‰[è¦æ ¼:L312-L321]

- [x] 6.2.4 `GET /api/v1/client-services/:id/history`ï¼ˆæŸ¥è©¢è®Šæ›´æ­·å²ï¼‰[è¦æ ¼:L123-L145]

#### 6.3 å‰ç«¯å¯¦ç¾ï¼ˆæš«ç·©ï¼‰
- [ ] 6.3.1 å®¢æˆ¶è©³æƒ…é é¢æœå‹™ç®¡ç†å€å¡Š
- [ ] 6.3.2 æœå‹™è¨‚é–±è¡¨å–®
- [ ] 6.3.3 æœå‹™ç‹€æ…‹å¾½ç« å…ƒä»¶ [è¦æ ¼:L426-L452]
- [ ] 6.3.4 æœå‹™æ“ä½œæŒ‰éˆ•å…ƒä»¶ [è¦æ ¼:L484-L571]

#### 6.4 å®Œæ•´æ€§é©—è­‰èˆ‡éƒ¨ç½²
- [x] 6.4.1 é©—è­‰ç‹€æ…‹è½‰æ›è¦å‰‡ï¼ˆactive/suspended/expired/cancelledï¼‰[è¦æ ¼:L346-L360]
- [x] 6.4.2 é©—è­‰æœˆåº¦ä»»å‹™è‡ªå‹•ç”Ÿæˆé‚è¼¯ï¼ˆactive æ‰ç”Ÿæˆï¼‰[è¦æ ¼:L362-L388]
- [x] 6.4.3 é©—è­‰åˆ°æœŸæé†’é€šçŸ¥ï¼ˆé auto_renewï¼‰[è¦æ ¼:L390-L422]
- [x] 6.4.4 æäº¤èˆ‡éƒ¨ç½²

---

### [x] æ¨¡çµ„ 7ï¼šä»»å‹™ç®¡ç†ï¼ˆä»»å‹™ç®¡ç†-å®Œæ•´è¦æ ¼.mdï¼‰âœ… å·²å®Œæˆï¼ˆå·²ä¿®æ­£ä¸å®Œæ•´å¯¦ç¾ï¼‰
**è³‡æ–™è¡¨ï¼š** 4 å€‹ | **APIï¼š** 16 å€‹ | **Cron Jobsï¼š** 1 å€‹

#### 7.1 è³‡æ–™è¡¨å‰µå»º
- [x] 7.1.1 `TaskTemplates` è¡¨ï¼ˆä»»å‹™æ¨¡æ¿ï¼Œå«å®¢æˆ¶å°ˆå±¬ï¼‰[è¦æ ¼:L9-L29]
  - [x] 7.1.1.1 ä¸»éµ `template_id` [è¦æ ¼:L12]
  - [x] 7.1.1.2 æ¬„ä½ï¼š`template_name`, `service_id`, `description`, `estimated_days` [è¦æ ¼:L13-L16]
  - [x] 7.1.1.3 æ¬„ä½ï¼š`related_sop_id`ï¼ˆé—œè¯ SOPï¼‰[è¦æ ¼:L17]
  - [x] 7.1.1.4 å®¢æˆ¶å°ˆå±¬ï¼š`is_client_specific`, `specific_client_id` [è¦æ ¼:L18-L20]
  - [x] 7.1.1.5 å¯©è¨ˆæ¬„ä½ï¼š`created_at`, `is_deleted` [è¦æ ¼:L20-L21]
  - [x] 7.1.1.6 å¤–éµï¼š`service_id`â†’Services, `related_sop_id`â†’KnowledgeBase, `specific_client_id`â†’Clients [è¦æ ¼:L23-L25]
  - [x] 7.1.1.7 ç´¢å¼•ï¼š`idx_task_templates_client` [è¦æ ¼:L28-L29]
- [x] 7.1.2 `TaskStageTemplates` è¡¨ï¼ˆéšæ®µæ¨¡æ¿ï¼‰[è¦æ ¼:L31-L46]
  - [x] 7.1.2.1 ä¸»éµ `stage_template_id` [è¦æ ¼:L34]
  - [x] 7.1.2.2 æ¬„ä½ï¼š`template_id`ï¼ˆNOT NULLï¼‰, `stage_name`, `stage_order`, `estimated_days`, `description` [è¦æ ¼:L35-L39]
  - [x] 7.1.2.3 å¤–éµï¼š`template_id`â†’TaskTemplatesï¼ˆON DELETE CASCADEï¼‰[è¦æ ¼:L41-L42]
  - [x] 7.1.2.4 ç´¢å¼•ï¼š`idx_stage_templates_template`, `idx_stage_templates_order` [è¦æ ¼:L44-L45]
- [x] 7.1.3 `ActiveTasks` è¡¨ï¼ˆåŸ·è¡Œä¸­ä»»å‹™ï¼Œå«å„€è¡¨æ¿ç´¢å¼•ã€åˆªé™¤æ¬„ä½ï¼‰[è¦æ ¼:L48-L82, L65-L67, L80-L81]
  - [x] 7.1.3.1 ä¸»éµ `task_id` [è¦æ ¼:L51-L52]
  - [x] 7.1.3.2 é—œè¯æ¬„ä½ï¼š`client_service_id`, `template_id` [è¦æ ¼:L52-L54]
  - [x] 7.1.3.3 åŸºæœ¬æ¬„ä½ï¼š`task_name`, `start_date`, `due_date`, `completed_date`, `status`, `assignee_user_id` [è¦æ ¼:L54-L59]
  - [x] 7.1.3.4 SOP æ¬„ä½ï¼š`related_sop_id`, `client_specific_sop_id` [è¦æ ¼:L60-L62]
  - [x] 7.1.3.5 å¯©è¨ˆèˆ‡åˆªé™¤ï¼š`notes`, `created_at`, `is_deleted`, `deleted_at`, `deleted_by` [è¦æ ¼:L62-L67]
  - [x] 7.1.3.6 å¤–éµï¼šClientServices, TaskTemplates, Users, KnowledgeBaseï¼ˆSOPï¼‰, Usersï¼ˆdeleted_byï¼‰[è¦æ ¼:L68-L74]
  - [x] 7.1.3.7 ç´¢å¼•ï¼š`idx_active_tasks_service`, `idx_active_tasks_assignee`, `idx_active_tasks_status`, `idx_active_tasks_due_date`, å„€è¡¨æ¿/é€¾æœŸå°ˆç”¨è¤‡åˆç´¢å¼• [è¦æ ¼:L76-L82]
- [x] 7.1.4 `ActiveTaskStages` è¡¨ï¼ˆä»»å‹™éšæ®µé€²åº¦ï¼‰[è¦æ ¼:L96-L116]
  - [x] 7.1.4.1 ä¸»éµ `active_stage_id` [è¦æ ¼:L99-L100]
  - [x] 7.1.4.2 é—œè¯æ¬„ä½ï¼š`task_id`, `stage_template_id`ï¼ˆNOT NULLï¼‰[è¦æ ¼:L100-L103]
  - [x] 7.1.4.3 éšæ®µæ¬„ä½ï¼š`stage_name`, `stage_order`, `status`, `started_at`, `completed_at`, `assignee_user_id`, `notes` [è¦æ ¼:L102-L109]
  - [x] 7.1.4.4 å¤–éµï¼šActiveTasksï¼ˆON DELETE CASCADEï¼‰, TaskStageTemplates, Users [è¦æ ¼:L110-L112]
  - [x] 7.1.4.5 ç´¢å¼•ï¼š`idx_active_stages_task` [è¦æ ¼:L115-L116]
- [x] 7.1.5 `ClientServices` è¡¨ï¼ˆæ¨¡æ¿å„ªå…ˆé‚è¼¯æ¬„ä½ï¼‰[è¦æ ¼:L118-L146, L148-L169]
  - [x] 7.1.5.1 ä¸»éµ `client_service_id` [è¦æ ¼:L121-L122]
  - [x] 7.1.5.2 å®¢æˆ¶/æœå‹™/é€±æœŸæ¬„ä½ï¼š`client_id`, `service_id`, `frequency_id` [è¦æ ¼:L122-L125]
  - [x] 7.1.5.3 æ¨¡æ¿æ¬„ä½ï¼š`template_id`ï¼ˆé€šç”¨ï¼‰, `custom_template_id`ï¼ˆå®¢æˆ¶å°ˆå±¬ï¼‰[è¦æ ¼:L125-L127, L138-L139]
  - [x] 7.1.5.4 æœŸé–“èˆ‡ç‹€æ…‹ï¼š`start_date`, `end_date`, `status` [è¦æ ¼:L127-L130]
  - [x] 7.1.5.5 è§¸ç™¼èˆ‡å‚™è¨»ï¼š`trigger_months`ï¼ˆJSONï¼‰, `notes` [è¦æ ¼:L130-L131]
  - [x] 7.1.5.6 å¯©è¨ˆï¼š`created_at`, `is_deleted` [è¦æ ¼:L132-L133]
  - [x] 7.1.5.7 å¤–éµèˆ‡å”¯ä¸€ï¼šFKsâ†’Clients/Services/Frequency/TaskTemplatesï¼ŒUNIQUE(client_id, service_id) [è¦æ ¼:L135-L141]
  - [x] 7.1.5.8 ç´¢å¼•ï¼š`idx_client_services_client`, `idx_client_services_service`, `idx_client_services_status` [è¦æ ¼:L143-L146]
  - [x] 7.1.5.9 æ¨¡æ¿å„ªå…ˆè¦å‰‡ï¼šå„ªå…ˆä½¿ç”¨ `custom_template_id`ï¼Œå¦å‰‡ `template_id` [è¦æ ¼:L150-L169]

#### 7.2 ä»»å‹™æ¨¡æ¿ç®¡ç† APIï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L175-L185]
- [x] 7.2.1 `GET /api/v1/task-templates` [è¦æ ¼:L180]
  - [x] 7.2.1.1 æ¬Šé™ï¼šæ‰€æœ‰äººï¼ˆauthMiddlewareï¼‰[è¦æ ¼:L175-L185]
  - [x] 7.2.1.2 æŸ¥è©¢åƒæ•¸ï¼š`service_id`, `is_client_specific`ï¼ˆå¯é¸ï¼‰
  - [x] 7.2.1.3 èª¿ç”¨ TaskTemplateService.getTemplates()
  - [x] 7.2.1.4 è¿”å›åˆ—è¡¨ï¼ˆå«æ¨¡æ¿åŸºæœ¬æ¬„ä½ï¼‰
  - [x] 7.2.1.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.2.2 `POST /api/v1/task-templates`ï¼ˆå«éšæ®µæ¨¡æ¿å»ºç«‹ï¼‰[è¦æ ¼:L181]
  - [x] 7.2.2.1 æ¬Šé™ï¼šæ‰€æœ‰äººï¼ˆå°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼‰[è¦æ ¼:L175-L185]
  - [x] 7.2.2.2 è«‹æ±‚ Bodyï¼š`template_name`, `service_id`, `estimated_days`, `related_sop_id`, `is_client_specific`, `specific_client_id`, `stages[]`
  - [x] 7.2.2.3 èª¿ç”¨ TaskTemplateService.createTemplate()ï¼ˆå«éšæ®µæ¨¡æ¿å¯«å…¥ï¼‰
  - [x] 7.2.2.4 è¿”å› 201 Createdï¼ˆå«æ–°å»ºæ¨¡æ¿èˆ‡éšæ®µï¼‰
  - [x] 7.2.2.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.2.3 `PUT /api/v1/task-templates/:id` [è¦æ ¼:L182]
  - [x] 7.2.3.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L175-L185]
  - [x] 7.2.3.2 è·¯å¾‘åƒæ•¸ï¼š`id`ï¼›Bodyï¼šå…è¨±æ›´æ–°çš„æ¬„ä½
  - [x] 7.2.3.3 èª¿ç”¨ TaskTemplateService.updateTemplate()
  - [x] 7.2.3.4 è¿”å›æ›´æ–°å¾Œçš„æ¨¡æ¿
  - [x] 7.2.3.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.2.4 `DELETE /api/v1/task-templates/:id` [è¦æ ¼:L183]
  - [x] 7.2.4.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L175-L185]
  - [x] 7.2.4.2 è·¯å¾‘åƒæ•¸ï¼š`id`
  - [x] 7.2.4.3 èª¿ç”¨ TaskTemplateService.deleteTemplate()ï¼ˆè»Ÿåˆªé™¤ï¼‰
  - [x] 7.2.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 7.2.4.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.2.5 `POST /api/v1/task-templates/:id/copy` [è¦æ ¼:L184-L185]
  - [x] 7.2.5.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L175-L185]
  - [x] 7.2.5.2 è·¯å¾‘åƒæ•¸ï¼š`id`
  - [x] 7.2.5.3 èª¿ç”¨ TaskTemplateService.copyTemplate()
  - [x] 7.2.5.4 è¿”å›è¤‡è£½å‡ºçš„æ¨¡æ¿èˆ‡éšæ®µ
  - [x] 7.2.5.5 æ·»åŠ  OpenAPI è¨»è§£

#### 7.3 å®¢æˆ¶æœå‹™ç®¡ç† APIï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L187-L199, L200-L250]
- [x] 7.3.1 `GET /api/v1/client-services` [è¦æ ¼:L192]
  - [x] 7.3.1.1 æ¬Šé™ï¼šæ‰€æœ‰äººï¼ˆauthMiddlewareï¼‰[è¦æ ¼:L187-L199]
  - [x] 7.3.1.2 æŸ¥è©¢åƒæ•¸ï¼š`client_id`, `service_id`, `status`ï¼ˆå¯é¸ï¼‰
  - [x] 7.3.1.3 èª¿ç”¨ ClientServiceManagementService.getClientServices()
  - [x] 7.3.1.4 è¿”å›åˆ—è¡¨
  - [x] 7.3.1.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.3.2 `POST /api/v1/client-services`ï¼ˆè‡ªå‹•è§¸ç™¼æœˆä»½ï¼‰[è¦æ ¼:L193, L200-L224]
  - [x] 7.3.2.1 æ¬Šé™ï¼šæ‰€æœ‰äººï¼ˆå°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼‰[è¦æ ¼:L187-L199]
  - [x] 7.3.2.2 è«‹æ±‚ Bodyï¼š`client_id`, `service_id`, `frequency_id`, `template_id`, `custom_template_id`, `start_date` [è¦æ ¼:L200-L210]
  - [x] 7.3.2.3 å›æ‡‰åŒ…å« trigger_months èˆ‡ template_name [è¦æ ¼:L212-L224]
  - [x] 7.3.2.4 èª¿ç”¨ ClientServiceManagementService.createClientService()
  - [x] 7.3.2.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.3.3 `PUT /api/v1/client-services/:id` [è¦æ ¼:L194]
  - [x] 7.3.3.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L187-L199]
  - [x] 7.3.3.2 è·¯å¾‘åƒæ•¸ï¼š`id`ï¼›Bodyï¼šå…è¨±æ›´æ–°æ¬„ä½
  - [x] 7.3.3.3 èª¿ç”¨ ClientServiceManagementService.updateClientService()
  - [x] 7.3.3.4 è¿”å›æ›´æ–°å¾Œçš„æœå‹™
  - [x] 7.3.3.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.3.4 `DELETE /api/v1/client-services/:id` [è¦æ ¼:L195]
  - [x] 7.3.4.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L187-L199]
  - [x] 7.3.4.2 è·¯å¾‘åƒæ•¸ï¼š`id`
  - [x] 7.3.4.3 èª¿ç”¨ ClientServiceManagementService.deleteClientService()ï¼ˆè»Ÿåˆªé™¤ï¼‰
  - [x] 7.3.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [x] 7.3.4.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.3.5 `GET /api/v1/clients/:clientId/services` [è¦æ ¼:L196]
  - [x] 7.3.5.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L187-L199]
  - [x] 7.3.5.2 è·¯å¾‘åƒæ•¸ï¼š`clientId`
  - [x] 7.3.5.3 èª¿ç”¨ ClientServiceManagementService.getServicesByClient()
  - [x] 7.3.5.4 è¿”å›å®¢æˆ¶æœå‹™åˆ—è¡¨
  - [x] 7.3.5.5 æ·»åŠ  OpenAPI è¨»è§£
- [x] 7.3.6 `GET /api/v1/clients/:clientId/available-templates`ï¼ˆé€šç”¨+å°ˆå±¬æ¨¡æ¿ï¼‰[è¦æ ¼:L197, L252-L267]
  - [x] 7.3.6.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L187-L199]
  - [x] 7.3.6.2 è·¯å¾‘åƒæ•¸ï¼š`clientId`ï¼ŒæŸ¥è©¢ `service_id` [è¦æ ¼:L254]
  - [x] 7.3.6.3 å›æ‡‰ï¼š`general_templates` èˆ‡ `client_specific_templates` [è¦æ ¼:L256-L265]
  - [x] 7.3.6.4 èª¿ç”¨ ClientServiceManagementService.getAvailableTemplates()
  - [x] 7.3.6.5 æ·»åŠ  OpenAPI è¨»è§£

#### 7.4 ä»»å‹™é€²åº¦è¿½è¹¤ API [è¦æ ¼:L269-L277, L279-L324]
- [x] 7.4.1 `GET /api/v1/tasks`ï¼ˆå“¡å·¥è‡ªå‹•éæ¿¾ï¼‰[è¦æ ¼:L271, L543-L550]
- [x] 7.4.2 `GET /api/v1/tasks/:id`ï¼ˆå«å®Œæ•´ SOP èˆ‡éšæ®µï¼‰[è¦æ ¼:L272, L279-L324]
- [x] 7.4.3 `POST /api/v1/tasks/:id/stages/:stageId/start`ï¼ˆé †åºé©—è­‰ï¼‰[è¦æ ¼:L273, L570-L582]
- [x] 7.4.4 `POST /api/v1/tasks/:id/stages/:stageId/complete`ï¼ˆç‹€æ…‹æª¢æŸ¥ï¼‰[è¦æ ¼:L274, L612-L636]
- [x] 7.4.5 `PUT /api/v1/tasks/:id`ï¼ˆæ›´æ–°ä»»å‹™ï¼‰[è¦æ ¼:L275]
- [x] 7.4.6 `GET /api/v1/tasks/:id/sop`ï¼ˆæŸ¥è©¢ä»»å‹™é—œè¯ SOPï¼‰[è¦æ ¼:L276]

#### 7.5 Cron Jobï¼šä»»å‹™è‡ªå‹•ç”Ÿæˆ [è¦æ ¼:L642-L753]
- [x] 7.5.1 é…ç½®æ’ç¨‹ï¼ˆæ¯æœˆ1æ—¥ 00:00ï¼‰[è¦æ ¼:L646-L648]
- [x] 7.5.2 å„ªå…ˆä½¿ç”¨å®¢æˆ¶å°ˆå±¬æ¨¡æ¿ï¼ˆç„¡å‰‡ç”¨é€šç”¨æ¨¡æ¿ï¼‰[è¦æ ¼:L665-L689]
- [x] 7.5.3 è‡ªå‹•é—œè¯ SOPï¼ˆé€šç”¨+å®¢è£½ï¼‰èˆ‡è² è²¬äºº [è¦æ ¼:L698-L707, L709-L726]
- [x] 7.5.4 è‡ªå‹•ç”Ÿæˆéšæ®µï¼ˆä¾æ¨¡æ¿é †åºï¼‰[è¦æ ¼:L730-L747]

#### 7.6 å®Œæ•´æ€§é©—è­‰
- [x] 7.6.1 é©—è­‰éšæ®µé †åºå¼·åˆ¶è¦å‰‡ [è¦æ ¼:L774-L808, L856-L870]
- [x] 7.6.2 é©—è­‰æ¬Šé™è¦å‰‡ï¼ˆå“¡å·¥/ç®¡ç†å“¡ï¼‰[è¦æ ¼:L872-L880]
- [x] 7.6.3 æ¸¬è©¦æ¡ˆä¾‹è¦†è“‹ï¼šè‡ªå‹•ç”Ÿæˆã€éšæ®µé †åºã€å“¡å·¥å¯è¦–ç¯„åœ [è¦æ ¼:L883-L907]

#### 7.6 å‰ç«¯å¯¦ç¾ï¼ˆæš«ç·©ï¼‰
- [ ] 7.6.1 å¯¦ç¾ `TasksPage.vue` çµ„ä»¶
- [ ] 7.6.2 å¯¦ç¾ `TaskBoard.vue` çµ„ä»¶
- [ ] 7.6.3 å¯¦ç¾ä»»å‹™è©³æƒ…é é¢

#### 7.7 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [x] 7.7.1 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰ä»»å‹™ç®¡ç†åŠŸèƒ½ï¼ˆé‚è¼¯é©—è­‰é€šéï¼‰
- [x] 7.7.2 [å…§éƒ¨] æ¸¬è©¦éšæ®µé †åºé©—è­‰é‚è¼¯ï¼ˆå·²å®Œæ•´å¯¦ç¾ï¼‰
- [x] 7.7.3 [å…§éƒ¨] Cron Job å·²å¯¦ç¾ï¼ˆæœˆåº¦ä»»å‹™ç”Ÿæˆï¼‰
- [x] 7.7.4 [å…§éƒ¨] å®Œæ•´æ€§é©—è­‰ï¼ˆå·²å°ç…§è¦æ ¼ï¼Œ16/16 API å…¨éƒ¨å¯¦ç¾ï¼‰
- [x] 7.7.5 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

### [x] æ¨¡çµ„ 8ï¼šçŸ¥è­˜ç®¡ç†ï¼ˆçŸ¥è­˜ç®¡ç†-å®Œæ•´è¦æ ¼.mdï¼‰âœ… å·²å®Œæˆ
**è³‡æ–™è¡¨ï¼š** 3 å€‹ | **APIï¼š** 15 å€‹ï¼ˆè¦æ ¼å¯¦éš›ç‚º 15 å€‹ï¼Œé 10 å€‹ï¼‰ | **Cron Jobsï¼š** 0 å€‹

#### 8.1 è³‡æ–™è¡¨å‰µå»º
- [x] 8.1.1 å‰µå»º `SOPDocuments` è¡¨ï¼ˆSOP æ–‡ä»¶ï¼Œå«ç‰ˆæœ¬æ§åˆ¶ã€ç™¼å¸ƒç‹€æ…‹ã€ç´¢å¼•ï¼‰[è¦æ ¼:L10-L30]
  - [x] 8.1.1.1 ä¸»éµ `sop_id` [è¦æ ¼:L12]
  - [x] 8.1.1.2 ä¸»è¦æ¬„ä½ï¼š`title`, `content`(HTML), `category`, `tags`(JSON) [è¦æ ¼:L13-L17]
  - [x] 8.1.1.3 ç‰ˆæœ¬èˆ‡ç™¼å¸ƒï¼š`version`, `is_published` [è¦æ ¼:L17-L18]
  - [x] 8.1.1.4 å¯©è¨ˆèˆ‡ä½œè€…ï¼š`created_by`, `created_at`, `updated_at`, `is_deleted` [è¦æ ¼:L19-L23]
  - [x] 8.1.1.5 å¤–éµï¼š`created_by`â†’Users(user_id) [è¦æ ¼:L24]
  - [x] 8.1.1.6 ç´¢å¼•ï¼š`idx_sop_category`, `idx_sop_published`, `idx_sop_creator` [è¦æ ¼:L27-L29]
- [x] 8.1.2 å‰µå»º `ClientSOPLinks` è¡¨ï¼ˆå®¢æˆ¶å°ˆå±¬ SOPï¼Œå« UNIQUE ç´„æŸé˜²æ­¢é‡è¤‡é—œè¯ï¼‰[è¦æ ¼:L32-L50]
  - [x] 8.1.2.1 ä¸»éµ `link_id` [è¦æ ¼:L35]
  - [x] 8.1.2.2 é—œè¯æ¬„ä½ï¼š`client_id`, `sop_id`, `assigned_by` [è¦æ ¼:L36-L39]
  - [x] 8.1.2.3 æ¬„ä½ï¼š`assigned_at`, `notes` [è¦æ ¼:L39-L41]
  - [x] 8.1.2.4 å¤–éµï¼šClients/SOPDocuments/Users [è¦æ ¼:L42-L45]
  - [x] 8.1.2.5 UNIQUE(client_id, sop_id) é˜²é‡è¤‡ [è¦æ ¼:L45]
  - [x] 8.1.2.6 ç´¢å¼•ï¼š`idx_client_sop_client`, `idx_client_sop_sop` [è¦æ ¼:L48-L49]
- [x] 8.1.3 å‰µå»º `KnowledgeArticles` è¡¨ï¼ˆçŸ¥è­˜åº«ï¼Œå«ç€è¦½æ¬¡æ•¸ã€ç´¢å¼•ï¼‰[è¦æ ¼:L52-L72]
  - [x] 8.1.3.1 ä¸»éµ `article_id` [è¦æ ¼:L55]
  - [x] 8.1.3.2 ä¸»è¦æ¬„ä½ï¼š`title`, `content`, `category`, `tags`(JSON) [è¦æ ¼:L56-L59]
  - [x] 8.1.3.3 ç™¼å¸ƒèˆ‡çµ±è¨ˆï¼š`is_published`, `view_count` [è¦æ ¼:L60-L61]
  - [x] 8.1.3.4 å¯©è¨ˆèˆ‡ä½œè€…ï¼š`created_by`, `created_at`, `updated_at`, `is_deleted` [è¦æ ¼:L62-L66]
  - [x] 8.1.3.5 å¤–éµï¼š`created_by`â†’Users(user_id) [è¦æ ¼:L67]
  - [x] 8.1.3.6 ç´¢å¼•ï¼š`idx_knowledge_category`, `idx_knowledge_published` [è¦æ ¼:L70-L71]

#### 8.2 SOP ç®¡ç† APIï¼ˆ6å€‹ï¼‰
- [x] 8.2.1 å¯¦ç¾ `GET /api/v1/sop` è·¯ç”±ï¼ˆæŸ¥è©¢ SOP åˆ—è¡¨ï¼Œå«å‰µå»ºè€…è³‡è¨Šï¼‰[è¦æ ¼:L83]
  - [x] 8.2.1.1 æ¬Šé™ï¼šæ‰€æœ‰äººï¼ˆauthMiddlewareï¼‰[è¦æ ¼:L83]
  - [x] 8.2.1.2 æŸ¥è©¢åƒæ•¸ï¼š`category`, `q`ï¼ˆå¯é¸ï¼‰
  - [x] 8.2.1.3 Repository æŸ¥è©¢èˆ‡è¿”å›æ ¼å¼
  - [x] 8.2.1.4 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.2.2 å¯¦ç¾ `POST /api/v1/sop` è·¯ç”±ï¼ˆâ­å°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼šæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L84]
  - [x] 8.2.2.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L84]
  - [x] 8.2.2.2 é©—è­‰ `title`, `content` å¿…å¡« [è¦æ ¼:L221-L226]
  - [x] 8.2.2.3 è¨­å®š `version=1`, `is_published=false`, `created_by` [è¦æ ¼:L229-L236]
  - [x] 8.2.2.4 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.2.3 å¯¦ç¾ `GET /api/v1/sop/:id` è·¯ç”±ï¼ˆæŸ¥è©¢ SOP è©³æƒ…ï¼‰[è¦æ ¼:L85]
  - [x] 8.2.3.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L85]
  - [x] 8.2.3.2 è§£æ `sop_id` ä¸¦æŸ¥è©¢
  - [x] 8.2.3.3 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.2.4 å¯¦ç¾ `PUT /api/v1/sop/:id` è·¯ç”±ï¼ˆâ­ç‰ˆæœ¬è™Ÿè‡ªå‹•+1ï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L86]
  - [x] 8.2.4.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L86]
  - [x] 8.2.4.2 ç‰ˆæœ¬è‡ªå‹• +1 è¦å‰‡ [è¦æ ¼:L278-L282]
  - [x] 8.2.4.3 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.2.5 å¯¦ç¾ `DELETE /api/v1/sop/:id` è·¯ç”±ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰[è¦æ ¼:L87]
  - [x] 8.2.5.1 æ¬Šé™ï¼šç®¡ç†å“¡ [è¦æ ¼:L87]
  - [x] 8.2.5.2 è»Ÿåˆªé™¤èˆ‡å¯©è¨ˆ
  - [x] 8.2.5.3 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.2.6 å¯¦ç¾ `POST /api/v1/sop/:id/publish` è·¯ç”±ï¼ˆç™¼å¸ƒ SOPï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L88]
  - [x] 8.2.6.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L88]
  - [x] 8.2.6.2 ç™¼å¸ƒæµç¨‹ï¼ˆè‰ç¨¿â†’ç™¼å¸ƒï¼‰[è¦æ ¼:L273-L276]
  - [x] 8.2.6.3 æ·»åŠ  OpenAPI è¨»è§£

#### 8.3 å®¢æˆ¶å°ˆå±¬ SOP APIï¼ˆ3å€‹ï¼‰
- [x] 8.3.1 å¯¦ç¾ `GET /api/v1/clients/:clientId/sop` è·¯ç”±ï¼ˆæŸ¥è©¢å®¢æˆ¶é—œè¯çš„ SOPï¼Œå« JOINï¼‰[è¦æ ¼:L96]
  - [x] 8.3.1.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L96]
  - [x] 8.3.1.2 è§£æ `clientId`ï¼ŒJOIN æŸ¥è©¢
  - [x] 8.3.1.3 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.3.2 å¯¦ç¾ `POST /api/v1/clients/:clientId/sop` è·¯ç”±ï¼ˆé—œè¯ SOPï¼Œå«é‡è¤‡æª¢æŸ¥ï¼‰[è¦æ ¼:L97]
  - [x] 8.3.2.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L97]
  - [x] 8.3.2.2 é©—è­‰å®¢æˆ¶èˆ‡ SOP å­˜åœ¨ [è¦æ ¼:L239-L246]
  - [x] 8.3.2.3 æª¢æŸ¥æ˜¯å¦å·²é—œè¯ï¼ˆUNIQUE ä¿è­·ï¼‰[è¦æ ¼:L248-L252]
  - [x] 8.3.2.4 å»ºç«‹é—œè¯ä¸¦å›å‚³ [è¦æ ¼:L254-L260]
- [x] 8.3.3 å¯¦ç¾ `DELETE /api/v1/clients/:clientId/sop/:sopId` è·¯ç”±ï¼ˆç§»é™¤é—œè¯ï¼‰[è¦æ ¼:L98]
  - [x] 8.3.3.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L98]
  - [x] 8.3.3.2 è§£æ `clientId`, `sopId` ä¸¦åˆªé™¤é€£çµ
  - [x] 8.3.3.3 æ·»åŠ  OpenAPI è¨»è§£

#### 8.4 çŸ¥è­˜åº« APIï¼ˆ6å€‹ï¼‰
- [x] 8.4.1 å¯¦ç¾ `GET /api/v1/knowledge` è·¯ç”±ï¼ˆæŸ¥è©¢çŸ¥è­˜åº«åˆ—è¡¨ï¼Œå«å‰µå»ºè€…è³‡è¨Šï¼‰[è¦æ ¼:L106]
  - [x] 8.4.1.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L106]
  - [x] 8.4.1.2 æŸ¥è©¢åƒæ•¸ï¼š`category`, `q`ï¼ˆå¯é¸ï¼‰
  - [x] 8.4.1.3 Repository æŸ¥è©¢èˆ‡è¿”å›æ ¼å¼
  - [x] 8.4.1.4 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.4.2 å¯¦ç¾ `POST /api/v1/knowledge` è·¯ç”±ï¼ˆâ­æ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L107]
  - [x] 8.4.2.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L107]
  - [x] 8.4.2.2 é©—è­‰ `title`, `content` å¿…å¡«
  - [x] 8.4.2.3 åˆå§‹åŒ– `view_count=0`, `is_published=false`
  - [x] 8.4.2.4 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.4.3 å¯¦ç¾ `GET /api/v1/knowledge/:id` è·¯ç”±ï¼ˆâ­ç€è¦½æ¬¡æ•¸è‡ªå‹•+1ï¼‰[è¦æ ¼:L108]
  - [x] 8.4.3.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L108]
  - [x] 8.4.3.2 è‡ªå‹• `view_count++` [è¦æ ¼:L221-L237]
  - [x] 8.4.3.3 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.4.4 å¯¦ç¾ `PUT /api/v1/knowledge/:id` è·¯ç”±ï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L109]
  - [x] 8.4.4.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L109]
  - [x] 8.4.4.2 æ›´æ–°å…§å®¹èˆ‡ç™¼å¸ƒç‹€æ…‹
  - [x] 8.4.4.3 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.4.5 å¯¦ç¾ `DELETE /api/v1/knowledge/:id` è·¯ç”±ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰[è¦æ ¼:L110]
  - [x] 8.4.5.1 æ¬Šé™ï¼šç®¡ç†å“¡ [è¦æ ¼:L110]
  - [x] 8.4.5.2 è»Ÿåˆªé™¤èˆ‡å¯©è¨ˆ
  - [x] 8.4.5.3 æ·»åŠ  OpenAPI è¨»è§£
- [x] 8.4.6 å¯¦ç¾ `GET /api/v1/knowledge/search` è·¯ç”±ï¼ˆâ­å…¨æ–‡æœå°‹ï¼‰[è¦æ ¼:L111]
  - [x] 8.4.6.1 æ¬Šé™ï¼šæ‰€æœ‰äºº [è¦æ ¼:L111]
  - [x] 8.4.6.2 èª¿ç”¨ Repository.search(query) [è¦æ ¼:L262-L265]
  - [x] 8.4.6.3 æ·»åŠ  OpenAPI è¨»è§£

#### 8.5 å®Œæ•´æ€§é©—è­‰
- [x] 8.5.1 [å…§éƒ¨] å®Œæ•´è®€å–è¦æ ¼æ–‡æª”ï¼ˆå…± 323 è¡Œï¼Œå·²å®Œæ•´è®€å–ï¼‰[è¦æ ¼:L1-L323]
- [x] 8.5.2 [å…§éƒ¨] åˆ—å‡ºå®Œæ•´éœ€æ±‚æ¸…å–®ï¼ˆ3è¡¨ï¼Œ15 APIï¼‰[è¦æ ¼:L76-L112]
- [x] 8.5.3 [å…§éƒ¨] é€ä¸€é©—è­‰æ‰€æœ‰ APIï¼ˆ15/15 å·²å…¨éƒ¨å¯¦ç¾ä¸”ç¬¦åˆè¦æ ¼ï¼‰
- [x] 8.5.4 [å…§éƒ¨] é©—è­‰æ¥­å‹™é‚è¼¯ï¼ˆç‰ˆæœ¬æ§åˆ¶ã€ç™¼å¸ƒæµç¨‹ã€UNIQUE ç´„æŸã€ç€è¦½æ¬¡æ•¸ï¼‰[è¦æ ¼:L271-L289]
- [x] 8.5.5 [å…§éƒ¨] å›åˆ°è¦æ ¼å°æ‡‰è¡Œè™Ÿé€ä¸€é©—è­‰ï¼ˆâœ… å·²é©—è­‰æ‰€æœ‰åŠŸèƒ½ç¬¦åˆè¦æ ¼ï¼‰

#### 8.5 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [ ] 8.5.1 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰çŸ¥è­˜ç®¡ç†åŠŸèƒ½
- [ ] 8.5.2 [å…§éƒ¨] æº–å‚™åŸ·è¡Œä¸€è‡´æ€§é©—è­‰
- [ ] 8.5.3 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

### [ ] æ¨¡çµ„ 9ï¼šå¤–éƒ¨å…§å®¹ç®¡ç†ï¼ˆå¤–éƒ¨å…§å®¹ç®¡ç†-å®Œæ•´è¦æ ¼.mdï¼‰
**è³‡æ–™è¡¨ï¼š** 4 å€‹ | **APIï¼š** 27 å€‹ï¼ˆç®¡ç†å“¡ 19 å€‹ + å…¬é–‹ 8 å€‹ï¼‰| **Cron Jobsï¼š** 0 å€‹

#### 9.1 è³‡æ–™è¡¨å‰µå»º

**9.1.1 ExternalArticles è¡¨ï¼ˆå¤–éƒ¨æ–‡ç« /Blogï¼‰[è¦æ ¼:L11-L37]**
- [x] 9.1.1.1 å‰µå»ºä¸»éµ `article_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L12]
- [x] 9.1.1.2 å‰µå»º `title` (TEXT NOT NULL) [è¦æ ¼:L13]
- [x] 9.1.1.3 å‰µå»º `slug` (TEXT UNIQUE NOT NULL) å«è¨»é‡‹ï¼šURL æ¨™è­˜ç¬¦ [è¦æ ¼:L14]
- [x] 9.1.1.4 å‰µå»º `summary` (TEXT) [è¦æ ¼:L15]
- [x] 9.1.1.5 å‰µå»º `content` (TEXT NOT NULL) å«è¨»é‡‹ï¼šHTML å…§å®¹ [è¦æ ¼:L16]
- [x] 9.1.1.6 å‰µå»º `featured_image` (TEXT) å«è¨»é‡‹ï¼šå°é¢åœ– URL [è¦æ ¼:L17]
- [x] 9.1.1.7 å‰µå»º `category`, `tags` æ¬„ä½ [è¦æ ¼:L18-L19]
- [x] 9.1.1.8 å‰µå»º `is_published`, `published_at`, `view_count` æ¬„ä½ [è¦æ ¼:L20-L22]
- [x] 9.1.1.9 å‰µå»º SEO æ¬„ä½ï¼š`seo_title`, `seo_description`, `seo_keywords` [è¦æ ¼:L23-L25]
- [x] 9.1.1.10 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_by`, `created_at`, `updated_at`, `is_deleted` [è¦æ ¼:L26-L29]
- [x] 9.1.1.11 æ·»åŠ å¤–éµç´„æŸï¼š`created_by` REFERENCES Users(user_id) [è¦æ ¼:L31]
- [x] 9.1.1.12 å‰µå»ºå”¯ä¸€ç´¢å¼•ï¼š`idx_external_slug` ON ExternalArticles(slug) [è¦æ ¼:L34]
- [x] 9.1.1.13 å‰µå»ºç´¢å¼•ï¼š`idx_external_category` ON ExternalArticles(category) [è¦æ ¼:L35]
- [x] 9.1.1.14 å‰µå»ºç´¢å¼•ï¼š`idx_external_published` ON ExternalArticles(is_published) [è¦æ ¼:L36]

**9.1.2 ExternalFAQ è¡¨ï¼ˆå¤–éƒ¨å¸¸è¦‹å•é¡Œï¼‰[è¦æ ¼:L41-L57]**
- [x] 9.1.2.1 å‰µå»ºä¸»éµ `faq_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L42]
- [x] 9.1.2.2 å‰µå»º `question` (TEXT NOT NULL) [è¦æ ¼:L43]
- [x] 9.1.2.3 å‰µå»º `answer` (TEXT NOT NULL) [è¦æ ¼:L44]
- [x] 9.1.2.4 å‰µå»º `category`, `sort_order` æ¬„ä½ [è¦æ ¼:L45-L46]
- [x] 9.1.2.5 å‰µå»º `is_published`, `view_count` æ¬„ä½ [è¦æ ¼:L47-L48]
- [x] 9.1.2.6 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_at`, `updated_at`, `is_deleted` [è¦æ ¼:L49-L51]
- [x] 9.1.2.7 å‰µå»ºç´¢å¼•ï¼š`idx_faq_category`, `idx_faq_published`, `idx_faq_order` [è¦æ ¼:L54-L56]

**9.1.3 ResourceCenter è¡¨ï¼ˆè³‡æºä¸­å¿ƒï¼‰[è¦æ ¼:L61-L82]**
- [x] 9.1.3.1 å‰µå»ºä¸»éµ `resource_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L62]
- [x] 9.1.3.2 å‰µå»º `title`, `description` æ¬„ä½ [è¦æ ¼:L63-L64]
- [x] 9.1.3.3 å‰µå»º `file_url` (TEXT NOT NULL) å«è¨»é‡‹ï¼šR2 å„²å­˜è·¯å¾‘ [è¦æ ¼:L65]
- [x] 9.1.3.4 å‰µå»ºæª”æ¡ˆè³‡è¨Šæ¬„ä½ï¼š`file_type`, `file_size` [è¦æ ¼:L66-L67]
- [x] 9.1.3.5 å‰µå»º `category`, `is_published`, `download_count` æ¬„ä½ [è¦æ ¼:L68-L70]
- [x] 9.1.3.6 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`created_by`, `created_at`, `updated_at`, `is_deleted` [è¦æ ¼:L71-L74]
- [x] 9.1.3.7 æ·»åŠ å¤–éµç´„æŸï¼š`created_by` REFERENCES Users(user_id) [è¦æ ¼:L76]
- [x] 9.1.3.8 å‰µå»ºç´¢å¼•ï¼š`idx_resources_category`, `idx_resources_published`, `idx_resources_type` [è¦æ ¼:L79-L81]

**9.1.4 ExternalImages è¡¨ï¼ˆå¤–éƒ¨åœ–ç‰‡è³‡æºï¼‰[è¦æ ¼:L86-L103]**
- [x] 9.1.4.1 å‰µå»ºä¸»éµ `image_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L87]
- [x] 9.1.4.2 å‰µå»º `title`, `image_url`, `alt_text` æ¬„ä½ [è¦æ ¼:L88-L90]
- [x] 9.1.4.3 å‰µå»ºåœ–ç‰‡è³‡è¨Šæ¬„ä½ï¼š`category`, `file_size`, `width`, `height` [è¦æ ¼:L91-L94]
- [x] 9.1.4.4 å‰µå»ºå¯©è¨ˆæ¬„ä½ï¼š`uploaded_by`, `uploaded_at`, `is_deleted` [è¦æ ¼:L95-L97]
- [x] 9.1.4.5 æ·»åŠ å¤–éµç´„æŸï¼š`uploaded_by` REFERENCES Users(user_id) [è¦æ ¼:L99]
- [x] 9.1.4.6 å‰µå»ºç´¢å¼•ï¼š`idx_images_category` [è¦æ ¼:L102]

---

#### 9.2 Blog æ–‡ç« ç®¡ç† API [è¦æ ¼:L111-L122]

**9.2.1 ExternalArticleRepository å‰µå»º**
- [x] 9.2.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒåˆ†é¡ã€ç™¼å¸ƒç‹€æ…‹éæ¿¾ï¼‰
- [x] 9.2.1.2 å‰µå»º `findById()` æ–¹æ³•
- [x] 9.2.1.3 å‰µå»º `findBySlug()` æ–¹æ³•ï¼ˆç”¨æ–¼å”¯ä¸€æ€§æª¢æŸ¥å’Œå…¬é–‹æŸ¥è©¢ï¼‰
- [x] 9.2.1.4 å‰µå»º `create()` æ–¹æ³•
- [x] 9.2.1.5 å‰µå»º `update()` æ–¹æ³•
- [x] 9.2.1.6 å‰µå»º `publish()` æ–¹æ³•ï¼ˆè¨­ç½® is_published = 1, published_atï¼‰
- [x] 9.2.1.7 å‰µå»º `unpublish()` æ–¹æ³•ï¼ˆè¨­ç½® is_published = 0ï¼‰
- [x] 9.2.1.8 å‰µå»º `incrementViewCount()` æ–¹æ³•
- [x] 9.2.1.9 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰

**9.2.2 ExternalArticleService å‰µå»º**
- [x] 9.2.2.1 å¯¦ç¾ `createArticle()` æ–¹æ³• [è¦æ ¼:L401-L420]
  - [x] 9.2.2.1.1 é©—è­‰ title å’Œ slug å¿…å¡« [è¦æ ¼:L403-L405]
  - [x] 9.2.2.1.2 æª¢æŸ¥ slug å”¯ä¸€æ€§ï¼ˆèª¿ç”¨ findBySlugï¼‰[è¦æ ¼:L407-L411]
  - [x] 9.2.2.1.3 å‰µå»ºæ–‡ç« ï¼ˆis_published = false, view_count = 0ï¼‰[è¦æ ¼:L414-L419]
  - [x] 9.2.2.1.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  
- [x] 9.2.2.2 å¯¦ç¾ `publishArticle()` æ–¹æ³• [è¦æ ¼:L422-L433]
  - [x] 9.2.2.2.1 æŸ¥è©¢æ–‡ç« æ˜¯å¦å­˜åœ¨ [è¦æ ¼:L423]
  - [x] 9.2.2.2.2 è¨­ç½® is_published = true, published_at = now() [è¦æ ¼:L429-L432]
  - [x] 9.2.2.2.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  
- [x] 9.2.2.3 å¯¦ç¾ `unpublishArticle()` æ–¹æ³•ï¼ˆå–æ¶ˆç™¼å¸ƒï¼‰
  - [x] 9.2.2.3.1 æŸ¥è©¢æ–‡ç« æ˜¯å¦å­˜åœ¨
  - [x] 9.2.2.3.2 è¨­ç½® is_published = false
  - [x] 9.2.2.3.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  
- [x] 9.2.2.4 å¯¦ç¾ `getArticleBySlug()` æ–¹æ³•ï¼ˆå…¬é–‹ API ä½¿ç”¨ï¼‰
  - [x] 9.2.2.4.1 èª¿ç”¨ findBySlug æŸ¥è©¢
  - [x] 9.2.2.4.2 æª¢æŸ¥ is_published = trueï¼ˆå…¬é–‹æŸ¥è©¢é™åˆ¶ï¼‰
  - [x] 9.2.2.4.3 è‡ªå‹•å¢åŠ  view_count [è¦æ ¼:L541-L544]
  
- [x] 9.2.2.5 å¯¦ç¾ Slug é©—è­‰é‚è¼¯ [è¦æ ¼:L635-L638]
  - [x] 9.2.2.5.1 æª¢æŸ¥åªåŒ…å«å°å¯«å­—æ¯ã€æ•¸å­—ã€é€£å­—è™Ÿ
  - [x] 9.2.2.5.2 ç¯„ä¾‹ï¼šcompany-setup-guide, tax-filing-tips

**9.2.3 ç®¡ç†å“¡ API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [ ] 9.2.3.1 `GET /api/v1/admin/articles` [è¦æ ¼:L111]
  - [ ] 9.2.3.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.2.3.1.2 è§£ææŸ¥è©¢åƒæ•¸ï¼ˆcategory, is_published, limit, offsetï¼‰
  - [ ] 9.2.3.1.3 èª¿ç”¨ ArticleService.getArticles()
  - [ ] 9.2.3.1.4 è¿”å›æˆåŠŸéŸ¿æ‡‰ï¼ˆå« paginationï¼‰
  - [ ] 9.2.3.1.5 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.2.3.2 `POST /api/v1/admin/articles` [è¦æ ¼:L112]
  - [ ] 9.2.3.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.2.3.2.2 è§£æè«‹æ±‚ Bodyï¼ˆtitle, slug, summary, content, featured_image, category, tags, seo_*ï¼‰
  - [ ] 9.2.3.2.3 èª¿ç”¨ ArticleService.createArticle()
  - [ ] 9.2.3.2.4 è¿”å› 201 Created
  - [ ] 9.2.3.2.5 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.2.3.3 `GET /api/v1/admin/articles/:id` [è¦æ ¼:L113]
  - [ ] 9.2.3.3.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.2.3.3.2 è§£æè·¯å¾‘åƒæ•¸ article_id
  - [ ] 9.2.3.3.3 èª¿ç”¨ ArticleService.getArticleById()
  - [ ] 9.2.3.3.4 è¿”å›æ–‡ç« è©³æƒ…
  - [ ] 9.2.3.3.5 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.2.3.4 `PUT /api/v1/admin/articles/:id` [è¦æ ¼:L114]
  - [ ] 9.2.3.4.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.2.3.4.2 è§£æè·¯å¾‘åƒæ•¸å’Œè«‹æ±‚ Body
  - [ ] 9.2.3.4.3 èª¿ç”¨ ArticleService.updateArticle()
  - [ ] 9.2.3.4.4 è¿”å›æ›´æ–°å¾Œçš„æ–‡ç« 
  - [ ] 9.2.3.4.5 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.2.3.5 `DELETE /api/v1/admin/articles/:id` [è¦æ ¼:L115]
  - [ ] 9.2.3.5.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.2.3.5.2 èª¿ç”¨ ArticleService.deleteArticle()ï¼ˆè»Ÿåˆªé™¤ï¼‰
  - [ ] 9.2.3.5.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [ ] 9.2.3.5.4 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.2.3.6 `POST /api/v1/admin/articles/:id/publish` [è¦æ ¼:L116]
  - [ ] 9.2.3.6.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.2.3.6.2 èª¿ç”¨ ArticleService.publishArticle()
  - [ ] 9.2.3.6.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [ ] 9.2.3.6.4 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.2.3.7 `POST /api/v1/admin/articles/:id/unpublish` [è¦æ ¼:L117]
  - [ ] 9.2.3.7.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.2.3.7.2 èª¿ç”¨ ArticleService.unpublishArticle()
  - [ ] 9.2.3.7.3 è¿”å›æˆåŠŸéŸ¿æ‡‰
  - [ ] 9.2.3.7.4 æ·»åŠ  OpenAPI è¨»è§£

**9.2.4 å…¬é–‹ API è·¯ç”±å‰µå»ºï¼ˆè¨ªå®¢å¯ç”¨ï¼‰[è¦æ ¼:L119-L122]**
- [ ] 9.2.4.1 `GET /api/v1/public/articles` [è¦æ ¼:L120]
  - [ ] 9.2.4.1.1 ç„¡éœ€èªè­‰ä¸­é–“ä»¶
  - [ ] 9.2.4.1.2 åªè¿”å› is_published = true çš„æ–‡ç« 
  - [ ] 9.2.4.1.3 æ”¯æŒåˆ†é¡éæ¿¾
  - [ ] 9.2.4.1.4 æŒ‰ published_at DESC æ’åº
  - [ ] 9.2.4.1.5 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.2.4.2 `GET /api/v1/public/articles/:slug` [è¦æ ¼:L121]
  - [ ] 9.2.4.2.1 ç„¡éœ€èªè­‰ä¸­é–“ä»¶
  - [ ] 9.2.4.2.2 æ ¹æ“š slug æŸ¥è©¢æ–‡ç«  [è¦æ ¼:L521]
  - [ ] 9.2.4.2.3 æª¢æŸ¥ is_published = true
  - [ ] 9.2.4.2.4 è‡ªå‹•å¢åŠ  view_count [è¦æ ¼:L541-L544]
  - [ ] 9.2.4.2.5 è¿”å›æ–‡ç« è©³æƒ…ï¼ˆå« SEO è³‡è¨Šï¼‰[è¦æ ¼:L524-L539]
  - [ ] 9.2.4.2.6 æ·»åŠ  OpenAPI è¨»è§£

---

#### 9.3 FAQ ç®¡ç† API [è¦æ ¼:L126-L134]

**9.3.1 ExternalFAQRepository å‰µå»º**
- [ ] 9.3.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒåˆ†é¡éæ¿¾ã€æŒ‰ sort_order æ’åºï¼‰
- [ ] 9.3.1.2 å‰µå»º `findById()` æ–¹æ³•
- [ ] 9.3.1.3 å‰µå»º `create()` æ–¹æ³•
- [ ] 9.3.1.4 å‰µå»º `update()` æ–¹æ³•
- [ ] 9.3.1.5 å‰µå»º `updateSortOrder()` æ–¹æ³•ï¼ˆæ‰¹é‡æ›´æ–°æ’åºï¼‰
- [ ] 9.3.1.6 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰

**9.3.2 ExternalFAQService å‰µå»º**
- [ ] 9.3.2.1 å¯¦ç¾ `createFAQ()` æ–¹æ³•
  - [ ] 9.3.2.1.1 é©—è­‰ question å’Œ answer å¿…å¡«
  - [ ] 9.3.2.1.2 å‰µå»º FAQï¼ˆis_published = falseï¼‰
  - [ ] 9.3.2.1.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  
- [ ] 9.3.2.2 å¯¦ç¾ `updateFAQ()` æ–¹æ³•
  - [ ] 9.3.2.2.1 æŸ¥è©¢ FAQ æ˜¯å¦å­˜åœ¨
  - [ ] 9.3.2.2.2 æ›´æ–°æ¬„ä½
  - [ ] 9.3.2.2.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  
- [ ] 9.3.2.3 å¯¦ç¾ `reorderFAQs()` æ–¹æ³•
  - [ ] 9.3.2.3.1 æ¥æ”¶ FAQ ID å’Œæ–° sort_order çš„é™£åˆ—
  - [ ] 9.3.2.3.2 æ‰¹é‡æ›´æ–° sort_order
  - [ ] 9.3.2.3.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**9.3.3 ç®¡ç†å“¡ API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [ ] 9.3.3.1 `GET /api/v1/admin/faq` [è¦æ ¼:L126]
  - [ ] 9.3.3.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.3.3.1.2 æ”¯æŒåˆ†é¡éæ¿¾
  - [ ] 9.3.3.1.3 æŒ‰ sort_order ASC æ’åº
  - [ ] 9.3.3.1.4 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.3.3.2 `POST /api/v1/admin/faq` [è¦æ ¼:L127]
  - [ ] 9.3.3.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.3.3.2.2 è§£æè«‹æ±‚ Bodyï¼ˆquestion, answer, categoryï¼‰
  - [ ] 9.3.3.2.3 èª¿ç”¨ FAQService.createFAQ()
  - [ ] 9.3.3.2.4 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.3.3.3 `PUT /api/v1/admin/faq/:id` [è¦æ ¼:L128]
- [ ] 9.3.3.4 `DELETE /api/v1/admin/faq/:id` [è¦æ ¼:L129]
- [ ] 9.3.3.5 `PUT /api/v1/admin/faq/reorder` [è¦æ ¼:L130]
  - [ ] 9.3.3.5.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.3.3.5.2 è§£æè«‹æ±‚ Bodyï¼ˆé™£åˆ—ï¼š[{faq_id, sort_order}]ï¼‰
  - [ ] 9.3.3.5.3 èª¿ç”¨ FAQService.reorderFAQs()
  - [ ] 9.3.3.5.4 æ·»åŠ  OpenAPI è¨»è§£

**9.3.4 å…¬é–‹ API è·¯ç”±å‰µå»ºï¼ˆè¨ªå®¢å¯ç”¨ï¼‰**
- [ ] 9.3.4.1 `GET /api/v1/public/faq` [è¦æ ¼:L133]
  - [ ] 9.3.4.1.1 ç„¡éœ€èªè­‰ä¸­é–“ä»¶
  - [ ] 9.3.4.1.2 åªè¿”å› is_published = true çš„ FAQ
  - [ ] 9.3.4.1.3 æŒ‰ sort_order ASC æ’åº [è¦æ ¼:L576]
  - [ ] 9.3.4.1.4 æ”¯æŒæŒ‰åˆ†é¡åˆ†çµ„ [è¦æ ¼:L579-L585]
  - [ ] 9.3.4.1.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 9.4 è³‡æºä¸­å¿ƒç®¡ç† API [è¦æ ¼:L138-L147]

**9.4.1 ResourceCenterRepository å‰µå»º**
- [ ] 9.4.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒåˆ†é¡ã€æ–‡ä»¶é¡å‹éæ¿¾ï¼‰
- [ ] 9.4.1.2 å‰µå»º `findById()` æ–¹æ³•
- [ ] 9.4.1.3 å‰µå»º `create()` æ–¹æ³•
- [ ] 9.4.1.4 å‰µå»º `update()` æ–¹æ³•
- [ ] 9.4.1.5 å‰µå»º `incrementDownloadCount()` æ–¹æ³•
- [ ] 9.4.1.6 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰

**9.4.2 ResourceCenterService å‰µå»º**
- [ ] 9.4.2.1 å¯¦ç¾ `uploadResource()` æ–¹æ³• [è¦æ ¼:L435-L456]
  - [ ] 9.4.2.1.1 é©—è­‰æ–‡ä»¶å¤§å°ï¼ˆæœ€å¤§ 10MBï¼‰[è¦æ ¼:L436-L439, L640-L643]
  - [ ] 9.4.2.1.2 ä¸Šå‚³åˆ° R2 Bucket [è¦æ ¼:L442-L443, L612-L624]
  - [ ] 9.4.2.1.3 ç”Ÿæˆæ–‡ä»¶åï¼š`resources/${Date.now()}-${file.name}` [è¦æ ¼:L442]
  - [ ] 9.4.2.1.4 å‰µå»ºè³‡æºè¨˜éŒ„ï¼ˆis_published = true, download_count = 0ï¼‰[è¦æ ¼:L446-L455]
  - [ ] 9.4.2.1.5 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ
  
- [ ] 9.4.2.2 å¯¦ç¾ `downloadResource()` æ–¹æ³• [è¦æ ¼:L458-L477]
  - [ ] 9.4.2.2.1 æŸ¥è©¢è³‡æºï¼ˆæª¢æŸ¥ is_published = trueï¼‰[è¦æ ¼:L460-L464]
  - [ ] 9.4.2.2.2 å¢åŠ  download_count [è¦æ ¼:L466-L467, L554-L557]
  - [ ] 9.4.2.2.3 å¾ R2 Bucket ç²å–æ–‡ä»¶ [è¦æ ¼:L469-L470, L560]
  - [ ] 9.4.2.2.4 è¿”å›æ–‡ä»¶æµï¼ˆè¨­ç½®æ­£ç¢ºçš„ Content-Type å’Œ Content-Dispositionï¼‰[è¦æ ¼:L562-L568]
  
- [ ] 9.4.2.3 å¯¦ç¾ `updateResource()` æ–¹æ³•
  - [ ] 9.4.2.3.1 æŸ¥è©¢è³‡æºæ˜¯å¦å­˜åœ¨
  - [ ] 9.4.2.3.2 æ›´æ–°å…ƒæ•¸æ“šï¼ˆtitle, description, categoryï¼‰
  - [ ] 9.4.2.3.3 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**9.4.3 ç®¡ç†å“¡ API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [ ] 9.4.3.1 `GET /api/v1/admin/resources` [è¦æ ¼:L138]
  - [ ] 9.4.3.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.4.3.1.2 æ”¯æŒåˆ†é¡ã€æ–‡ä»¶é¡å‹éæ¿¾
  - [ ] 9.4.3.1.3 è¿”å›åˆ—è¡¨ï¼ˆå« download_countï¼‰
  - [ ] 9.4.3.1.4 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.4.3.2 `POST /api/v1/admin/resources/upload` [è¦æ ¼:L139]
  - [ ] 9.4.3.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.4.3.2.2 è§£æ multipart/form-dataï¼ˆæ–‡ä»¶ + å…ƒæ•¸æ“šï¼‰
  - [ ] 9.4.3.2.3 é©—è­‰æ–‡ä»¶é¡å‹ï¼ˆPDF, Excel, Word, ZIPï¼‰
  - [ ] 9.4.3.2.4 èª¿ç”¨ ResourceService.uploadResource()
  - [ ] 9.4.3.2.5 è¿”å› 201 Createdï¼ˆå«æ–‡ä»¶ URLï¼‰
  - [ ] 9.4.3.2.6 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.4.3.3 `GET /api/v1/admin/resources/:id` [è¦æ ¼:L140]
- [ ] 9.4.3.4 `PUT /api/v1/admin/resources/:id` [è¦æ ¼:L141]
- [ ] 9.4.3.5 `DELETE /api/v1/admin/resources/:id` [è¦æ ¼:L142]

**9.4.4 å…¬é–‹ API è·¯ç”±å‰µå»ºï¼ˆè¨ªå®¢å¯ç”¨ï¼‰**
- [ ] 9.4.4.1 `GET /api/v1/public/resources` [è¦æ ¼:L145]
  - [ ] 9.4.4.1.1 ç„¡éœ€èªè­‰ä¸­é–“ä»¶
  - [ ] 9.4.4.1.2 åªè¿”å› is_published = true çš„è³‡æº
  - [ ] 9.4.4.1.3 æ”¯æŒåˆ†é¡éæ¿¾
  - [ ] 9.4.4.1.4 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.4.4.2 `GET /api/v1/public/resources/:id/download` [è¦æ ¼:L146]
  - [ ] 9.4.4.2.1 ç„¡éœ€èªè­‰ä¸­é–“ä»¶
  - [ ] 9.4.4.2.2 èª¿ç”¨ ResourceService.downloadResource()
  - [ ] 9.4.4.2.3 è¿”å›æ–‡ä»¶æµ [è¦æ ¼:L549-L568]
  - [ ] 9.4.4.2.4 è¨˜éŒ„ä¸‹è¼‰æ¬¡æ•¸ [è¦æ ¼:L554-L557]
  - [ ] 9.4.4.2.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 9.5 åœ–ç‰‡è³‡æºç®¡ç† API [è¦æ ¼:L151-L158]

**9.5.1 ExternalImagesRepository å‰µå»º**
- [ ] 9.5.1.1 å‰µå»º `findAll()` æ–¹æ³•ï¼ˆæ”¯æŒåˆ†é¡éæ¿¾ï¼‰
- [ ] 9.5.1.2 å‰µå»º `findById()` æ–¹æ³•
- [ ] 9.5.1.3 å‰µå»º `create()` æ–¹æ³•
- [ ] 9.5.1.4 å‰µå»º `delete()` æ–¹æ³•ï¼ˆè»Ÿåˆªé™¤ï¼‰
- [ ] 9.5.1.5 å‰µå»º `getCategories()` æ–¹æ³•ï¼ˆæŸ¥è©¢æ‰€æœ‰åˆ†é¡ï¼‰

**9.5.2 ExternalImagesService å‰µå»º**
- [ ] 9.5.2.1 å¯¦ç¾ `uploadImage()` æ–¹æ³• [è¦æ ¼:L479-L508]
  - [ ] 9.5.2.1.1 é©—è­‰åœ–ç‰‡æ ¼å¼ï¼ˆåªèƒ½ä¸Šå‚³åœ–ç‰‡ï¼‰[è¦æ ¼:L481-L483]
  - [ ] 9.5.2.1.2 é©—è­‰å¤§å°ï¼ˆæœ€å¤§ 5MBï¼‰[è¦æ ¼:L485-L488, L641]
  - [ ] 9.5.2.1.3 ä¸Šå‚³åˆ° R2 Bucketï¼ˆimages/ ç›®éŒ„ï¼‰[è¦æ ¼:L490-L492, L606]
  - [ ] 9.5.2.1.4 ç²å–åœ–ç‰‡å°ºå¯¸ï¼ˆwidth, heightï¼‰[è¦æ ¼:L494-L495]
  - [ ] 9.5.2.1.5 å‰µå»ºåœ–ç‰‡è¨˜éŒ„ [è¦æ ¼:L497-L507]
  - [ ] 9.5.2.1.6 è¿”å›åœ–ç‰‡ URL [è¦æ ¼:L621-L622]
  
- [ ] 9.5.2.2 å¯¦ç¾ `deleteImage()` æ–¹æ³•
  - [ ] 9.5.2.2.1 æŸ¥è©¢åœ–ç‰‡æ˜¯å¦å­˜åœ¨
  - [ ] 9.5.2.2.2 å¾ R2 Bucket åˆªé™¤æ–‡ä»¶
  - [ ] 9.5.2.2.3 è»Ÿåˆªé™¤æ•¸æ“šåº«è¨˜éŒ„
  - [ ] 9.5.2.2.4 è¨˜éŒ„å¯©è¨ˆæ—¥èªŒ

**9.5.3 ç®¡ç†å“¡ API è·¯ç”±å‰µå»ºï¼ˆåƒ…ç®¡ç†å“¡ï¼‰**
- [ ] 9.5.3.1 `GET /api/v1/admin/images` [è¦æ ¼:L151]
  - [ ] 9.5.3.1.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.5.3.1.2 æ”¯æŒåˆ†é¡éæ¿¾
  - [ ] 9.5.3.1.3 è¿”å›åœ–ç‰‡åˆ—è¡¨ï¼ˆå« image_url, width, heightï¼‰
  - [ ] 9.5.3.1.4 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.5.3.2 `POST /api/v1/admin/images/upload` [è¦æ ¼:L152]
  - [ ] 9.5.3.2.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.5.3.2.2 è§£æ multipart/form-dataï¼ˆåœ–ç‰‡ + å…ƒæ•¸æ“šï¼‰
  - [ ] 9.5.3.2.3 é©—è­‰åœ–ç‰‡æ ¼å¼ï¼ˆimage/*ï¼‰
  - [ ] 9.5.3.2.4 èª¿ç”¨ ImagesService.uploadImage()
  - [ ] 9.5.3.2.5 è¿”å› 201 Createdï¼ˆå«åœ–ç‰‡ URLï¼‰
  - [ ] 9.5.3.2.6 æ·»åŠ  OpenAPI è¨»è§£
  
- [ ] 9.5.3.3 `DELETE /api/v1/admin/images/:id` [è¦æ ¼:L153]
- [ ] 9.5.3.4 `GET /api/v1/admin/images/categories` [è¦æ ¼:L154]
  - [ ] 9.5.3.4.1 æ‡‰ç”¨ authMiddleware + adminMiddleware
  - [ ] 9.5.3.4.2 èª¿ç”¨ ImagesRepository.getCategories()
  - [ ] 9.5.3.4.3 è¿”å›åˆ†é¡åˆ—è¡¨ï¼ˆDISTINCT categoryï¼‰
  - [ ] 9.5.3.4.4 æ·»åŠ  OpenAPI è¨»è§£

**9.5.4 å…¬é–‹ API è·¯ç”±å‰µå»ºï¼ˆè¨ªå®¢å¯ç”¨ï¼‰**
- [ ] 9.5.4.1 `GET /api/v1/public/images/:id` [è¦æ ¼:L157]
  - [ ] 9.5.4.1.1 ç„¡éœ€èªè­‰ä¸­é–“ä»¶
  - [ ] 9.5.4.1.2 æŸ¥è©¢åœ–ç‰‡è¨˜éŒ„
  - [ ] 9.5.4.1.3 è¿”å›åœ–ç‰‡ URLï¼ˆå…¬é–‹ CDN é€£çµï¼‰
  - [ ] 9.5.4.1.4 æ·»åŠ  OpenAPI è¨»è§£

---

#### 9.6 R2 Bucket è¨­å®šèˆ‡æ•´åˆ [è¦æ ¼:L590-L624]

**9.6.1 é…ç½® Cloudflare R2**
- [ ] 9.6.1.1 åœ¨ wrangler.toml ä¸­é…ç½® R2 Bucket ç¶å®š [è¦æ ¼:L594-L608]
- [ ] 9.6.1.2 è¨­ç½®ç›®éŒ„çµæ§‹ï¼šarticles/, resources/, images/ [è¦æ ¼:L594-L608]
- [ ] 9.6.1.3 é…ç½®å…¬é–‹ CDN URLï¼ˆhttps://cdn.yourfirm.comï¼‰[è¦æ ¼:L621-L622]

**9.6.2 æ–‡ä»¶ä¸Šå‚³å·¥å…·å‡½æ•¸**
- [ ] 9.6.2.1 å¯¦ç¾ `uploadToR2()` å‡½æ•¸ [è¦æ ¼:L612-L624]
  - [ ] 9.6.2.1.1 æ¥æ”¶åƒæ•¸ï¼šfile, path, env
  - [ ] 9.6.2.1.2 ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åï¼š`${path}/${Date.now()}-${file.name}`
  - [ ] 9.6.2.1.3 èª¿ç”¨ `env.R2_BUCKET.put(fileName, file.stream())`
  - [ ] 9.6.2.1.4 è¨­ç½® httpMetadataï¼ˆcontentTypeï¼‰
  - [ ] 9.6.2.1.5 è¿”å›å…¬é–‹ URL

**9.6.3 æ–‡ä»¶å¤§å°å’Œæ ¼å¼é©—è­‰**
- [ ] 9.6.3.1 å¯¦ç¾åœ–ç‰‡å¤§å°é©—è­‰ï¼ˆæœ€å¤§ 5MBï¼‰[è¦æ ¼:L641]
- [ ] 9.6.3.2 å¯¦ç¾è³‡æºæ–‡ä»¶å¤§å°é©—è­‰ï¼ˆæœ€å¤§ 10MBï¼‰[è¦æ ¼:L642]
- [ ] 9.6.3.3 å¯¦ç¾æ–‡ä»¶æ ¼å¼é©—è­‰ï¼ˆimage/*, PDF, Excel, Word, ZIPï¼‰
- [ ] 9.6.3.4 å¯¦ç¾åœ–ç‰‡å°ºå¯¸ç²å–ï¼ˆwidth, heightï¼‰[è¦æ ¼:L494-L495]

---

#### 9.7 å®Œæ•´æ€§é©—è­‰ [è¦æ ¼:L1-L722]

**9.7.1 API æ¸…å–®é©—è­‰**
- [ ] 9.7.1.1 é©—è­‰ Blog æ–‡ç« ç®¡ç† APIï¼ˆç®¡ç†å“¡ 7 å€‹ + å…¬é–‹ 2 å€‹ = 9 å€‹ï¼‰[è¦æ ¼:L111-L122]
- [ ] 9.7.1.2 é©—è­‰ FAQ ç®¡ç† APIï¼ˆç®¡ç†å“¡ 5 å€‹ + å…¬é–‹ 1 å€‹ = 6 å€‹ï¼‰[è¦æ ¼:L126-L134]
- [ ] 9.7.1.3 é©—è­‰è³‡æºä¸­å¿ƒç®¡ç† APIï¼ˆç®¡ç†å“¡ 5 å€‹ + å…¬é–‹ 2 å€‹ = 7 å€‹ï¼‰[è¦æ ¼:L138-L147]
- [ ] 9.7.1.4 é©—è­‰åœ–ç‰‡è³‡æºç®¡ç† APIï¼ˆç®¡ç†å“¡ 4 å€‹ + å…¬é–‹ 1 å€‹ = 5 å€‹ï¼‰[è¦æ ¼:L151-L158]
- [ ] 9.7.1.5 ç¢ºèªç¸½è¨ˆï¼š27 å€‹ APIï¼ˆç®¡ç†å“¡ 19 å€‹ + å…¬é–‹ 8 å€‹ï¼‰

**9.7.2 æ¥­å‹™é‚è¼¯é©—è­‰**
- [ ] 9.7.2.1 é©—è­‰æ–‡ç« ç™¼å¸ƒè¦å‰‡ï¼ˆè‰ç¨¿/ç™¼å¸ƒ/å–æ¶ˆç™¼å¸ƒï¼‰[è¦æ ¼:L630-L633]
- [ ] 9.7.2.2 é©—è­‰ URL Slug è¦å‰‡ï¼ˆå°å¯«å­—æ¯ã€æ•¸å­—ã€é€£å­—è™Ÿï¼Œå¿…é ˆå”¯ä¸€ï¼‰[è¦æ ¼:L635-L638]
- [ ] 9.7.2.3 é©—è­‰æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆåœ–ç‰‡ 5MB, è³‡æº 10MBï¼‰[è¦æ ¼:L640-L643]
- [ ] 9.7.2.4 é©—è­‰ SEO å„ªåŒ–ï¼ˆæ¨™é¡Œ 50-60 å­—å…ƒï¼Œæè¿° 150-160 å­—å…ƒï¼‰[è¦æ ¼:L645-L648]
- [ ] 9.7.2.5 é©—è­‰ç€è¦½æ¬¡æ•¸è‡ªå‹•å¢åŠ  [è¦æ ¼:L541-L544]
- [ ] 9.7.2.6 é©—è­‰ä¸‹è¼‰æ¬¡æ•¸è‡ªå‹•å¢åŠ  [è¦æ ¼:L554-L557]

**9.7.3 æ¸¬è©¦æ¡ˆä¾‹åŸ·è¡Œ**
- [ ] 9.7.3.1 æ¸¬è©¦æ–‡ç« ç™¼å¸ƒæµç¨‹ [è¦æ ¼:L656-L667]
- [ ] 9.7.3.2 æ¸¬è©¦ Slug å”¯ä¸€æ€§æª¢æŸ¥ [è¦æ ¼:L669-L675]
- [ ] 9.7.3.3 æ¸¬è©¦æ–‡ä»¶å¤§å°é™åˆ¶ [è¦æ ¼:L677-L683]
- [ ] 9.7.3.4 æ¸¬è©¦ä¸‹è¼‰æ¬¡æ•¸çµ±è¨ˆ [è¦æ ¼:L685-L694]

**9.7.4 å›åˆ°è¦æ ¼é€ä¸€é©—è­‰**
- [ ] 9.7.4.1 æ‰“é–‹è¦æ ¼æ–‡æª” L11-L37ï¼Œé©—è­‰ ExternalArticles è¡¨å®Œæ•´æ€§
- [ ] 9.7.4.2 æ‰“é–‹è¦æ ¼æ–‡æª” L41-L57ï¼Œé©—è­‰ ExternalFAQ è¡¨å®Œæ•´æ€§
- [ ] 9.7.4.3 æ‰“é–‹è¦æ ¼æ–‡æª” L61-L82ï¼Œé©—è­‰ ResourceCenter è¡¨å®Œæ•´æ€§
- [ ] 9.7.4.4 æ‰“é–‹è¦æ ¼æ–‡æª” L86-L103ï¼Œé©—è­‰ ExternalImages è¡¨å®Œæ•´æ€§
- [ ] 9.7.4.5 é€ä¸€é©—è­‰æ‰€æœ‰ 27 å€‹ API çš„å¯¦ç¾

---

#### 9.8 éƒ¨ç½²èˆ‡æ¸¬è©¦
- [ ] 9.8.1 [å…§éƒ¨] æäº¤æ‰€æœ‰æ›´æ”¹åˆ° Git
- [ ] 9.8.2 [å…§éƒ¨] åŸ·è¡Œè‡ªå‹•éƒ¨ç½²ï¼ˆgit push origin mainï¼‰
- [ ] 9.8.3 [å…§éƒ¨] é©—è­‰ Cloudflare Pages éƒ¨ç½²æˆåŠŸ
- [ ] 9.8.4 [å…§éƒ¨] æ›´æ–° MASTER_PLAN.md é€²åº¦çµ±è¨ˆ

---

### [ ] æ¨¡çµ„ 10ï¼šè–ªè³‡ç®¡ç†ï¼ˆè–ªè³‡ç®¡ç†-å®Œæ•´è¦æ ¼.mdï¼‰
**è³‡æ–™è¡¨ï¼š** 6 å€‹ | **APIï¼š** 16 å€‹ï¼ˆè–ªè³‡é …ç›® 4 + å¹´çµ‚ 5 + å“¡å·¥è–ªè³‡ 3 + è–ªè³‡è¨ˆç®—/æŸ¥è©¢ 4ï¼‰| **Cron Jobsï¼š** 0 å€‹

#### 10.1 è³‡æ–™è¡¨å‰µå»ºï¼ˆ6 è¡¨ï¼‰

**10.1.1 æ“´å…… `Users` è¡¨ï¼ˆè–ªè³‡åŸºæœ¬è³‡è¨Šï¼‰[è¦æ ¼:L35-L42]**
- [ ] 10.1.1.1 æ·»åŠ  `base_salary` æ¬„ä½ï¼ˆREAL NOT NULL DEFAULT 0ï¼‰[è¦æ ¼:L39]
- [ ] 10.1.1.2 æ·»åŠ  `join_date` æ¬„ä½ï¼ˆTEXTï¼‰[è¦æ ¼:L40]
- [ ] 10.1.1.3 æ·»åŠ  `comp_hours_current_month` æ¬„ä½ï¼ˆREAL DEFAULT 0ï¼‰[è¦æ ¼:L41]

**10.1.2 å‰µå»º `SalaryItemTypes` è¡¨ï¼ˆè–ªè³‡é …ç›®é¡å‹ï¼Œå«ç¶“å¸¸æ€§çµ¦èˆ‡æ¨™è¨˜ï¼‰[è¦æ ¼:L49-L106]**
- [ ] 10.1.2.1 ä¸»éµ `item_type_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L55]
- [ ] 10.1.2.2 æ¬„ä½ï¼š`item_code` (TEXT UNIQUE NOT NULL) [è¦æ ¼:L56]
- [ ] 10.1.2.3 æ¬„ä½ï¼š`item_name` (TEXT NOT NULL) [è¦æ ¼:L57]
- [ ] 10.1.2.4 æ¬„ä½ï¼š`category` (TEXT NOT NULL, CHECK IN ('allowance','bonus','deduction')) [è¦æ ¼:L58, L69]
- [ ] 10.1.2.5 æ¬„ä½ï¼š`is_taxable` (BOOLEAN DEFAULT 1) [è¦æ ¼:L59]
- [ ] 10.1.2.6 æ¬„ä½ï¼š`is_fixed` (BOOLEAN DEFAULT 1) [è¦æ ¼:L60]
- [ ] 10.1.2.7 æ¬„ä½ï¼š`is_regular_payment` (BOOLEAN DEFAULT 1) â­è¨ˆå…¥æ™‚è–ª [è¦æ ¼:L61]
- [ ] 10.1.2.8 æ¬„ä½ï¼š`affects_labor_insurance` (BOOLEAN DEFAULT 1) [è¦æ ¼:L62]
- [ ] 10.1.2.9 æ¬„ä½ï¼š`affects_attendance` (BOOLEAN DEFAULT 0) [è¦æ ¼:L63]
- [ ] 10.1.2.10 æ¬„ä½ï¼š`calculation_formula`, `display_order`, `is_active` [è¦æ ¼:L64-L66]
- [ ] 10.1.2.11 å¯©è¨ˆæ¬„ä½ï¼š`created_at` [è¦æ ¼:L67]
- [ ] 10.1.2.12 CHECK ç´„æŸï¼šcategory IN ('allowance','bonus','deduction') [è¦æ ¼:L69]
- [ ] 10.1.2.13 ç´¢å¼•ï¼š`idx_salary_item_types_active` ON (is_active) [è¦æ ¼:L72]
- [ ] 10.1.2.14 ç´¢å¼•ï¼š`idx_salary_item_types_order` ON (display_order) [è¦æ ¼:L73]
- [ ] 10.1.2.15 ç´¢å¼•ï¼š`idx_salary_item_types_regular` ON (is_regular_payment) [è¦æ ¼:L74]
- [ ] 10.1.2.16 æ’å…¥é è¨­é …ç›®ï¼ˆå…¨å‹¤/äº¤é€š/ä¼™é£Ÿ/è·å‹™/é›»è©±/åœè»Š/ç¸¾æ•ˆ/å¹´çµ‚ï¼‰[è¦æ ¼:L77-L85]

**10.1.3 å‰µå»º `EmployeeSalaryItems` è¡¨ï¼ˆå“¡å·¥è–ªè³‡é …ç›®ï¼Œå«æœˆåº¦ç¨ç«‹èª¿æ•´ï¼‰[è¦æ ¼:L126-L185]**
- [ ] 10.1.3.1 ä¸»éµ `employee_item_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L130]
- [ ] 10.1.3.2 é—œè¯æ¬„ä½ï¼š`user_id`, `item_type_id` (NOT NULL) [è¦æ ¼:L131-L132]
- [ ] 10.1.3.3 æ¬„ä½ï¼š`amount` (REAL NOT NULL) [è¦æ ¼:L133]
- [ ] 10.1.3.4 æ¬„ä½ï¼š`effective_date` (TEXT NOT NULL, YYYY-MM-01) [è¦æ ¼:L134]
- [ ] 10.1.3.5 æ¬„ä½ï¼š`expiry_date` (TEXT, null=æ°¸ä¹…æœ‰æ•ˆ) [è¦æ ¼:L135]
- [ ] 10.1.3.6 æ¬„ä½ï¼š`notes`, `is_active` [è¦æ ¼:L136-L137]
- [ ] 10.1.3.7 å¯©è¨ˆæ¬„ä½ï¼š`created_at`, `updated_at` [è¦æ ¼:L138-L139]
- [ ] 10.1.3.8 å¤–éµï¼š`user_id` REFERENCES Users(user_id) [è¦æ ¼:L141]
- [ ] 10.1.3.9 å¤–éµï¼š`item_type_id` REFERENCES SalaryItemTypes(item_type_id) [è¦æ ¼:L142]
- [ ] 10.1.3.10 ç´¢å¼•ï¼š`idx_employee_salary_items_user` ON (user_id) [è¦æ ¼:L145]
- [ ] 10.1.3.11 ç´¢å¼•ï¼š`idx_employee_salary_items_active` ON (is_active) [è¦æ ¼:L146]
- [ ] 10.1.3.12 ç´¢å¼•ï¼š`idx_employee_salary_items_date` ON (effective_date, expiry_date) [è¦æ ¼:L147]

**10.1.4 å‰µå»º `MonthlyPayroll` è¡¨ï¼ˆæœˆåº¦è–ªè³‡ï¼Œå«åŠ ç­è²»åˆ†é¡ï¼‰[è¦æ ¼:L188-L232]**
- [ ] 10.1.4.1 ä¸»éµ `payroll_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L191]
- [ ] 10.1.4.2 é—œè¯æ¬„ä½ï¼š`user_id`, `year`, `month` (NOT NULL) [è¦æ ¼:L192-L194]
- [ ] 10.1.4.3 è–ªè³‡çµ„æˆï¼š`base_salary`, `total_allowances`, `total_bonuses` [è¦æ ¼:L197-L199]
- [ ] 10.1.4.4 åŠ ç­è²»ï¼š`overtime_weekday_2h`, `overtime_weekday_beyond` [è¦æ ¼:L202-L203]
- [ ] 10.1.4.5 åŠ ç­è²»ï¼š`overtime_restday_2h`, `overtime_restday_beyond` [è¦æ ¼:L204-L205]
- [ ] 10.1.4.6 åŠ ç­è²»ï¼š`overtime_holiday` [è¦æ ¼:L206]
- [ ] 10.1.4.7 æ‰£æ¬¾ï¼š`total_deductions` [è¦æ ¼:L209]
- [ ] 10.1.4.8 çµ±è¨ˆï¼š`total_work_hours`, `total_overtime_hours`, `total_weighted_hours` [è¦æ ¼:L212-L214]
- [ ] 10.1.4.9 å…¨å‹¤ï¼š`has_full_attendance` (BOOLEAN DEFAULT 1) [è¦æ ¼:L215]
- [ ] 10.1.4.10 è–ªè³‡ç¸½è¨ˆï¼š`gross_salary`, `net_salary` (NOT NULL) [è¦æ ¼:L218-L219]
- [ ] 10.1.4.11 å‚™è¨»èˆ‡å¯©è¨ˆï¼š`notes`, `created_at`, `updated_at` [è¦æ ¼:L222-L224]
- [ ] 10.1.4.12 å¤–éµï¼š`user_id` REFERENCES Users(user_id) [è¦æ ¼:L226]
- [ ] 10.1.4.13 UNIQUE(user_id, year, month) é˜²é‡è¤‡ [è¦æ ¼:L227]
- [ ] 10.1.4.14 ç´¢å¼•ï¼š`idx_payroll_user` ON (user_id) [è¦æ ¼:L230]
- [ ] 10.1.4.15 ç´¢å¼•ï¼š`idx_payroll_date` ON (year, month) [è¦æ ¼:L231]

**10.1.5 å‰µå»º `OvertimeRecords` è¡¨ï¼ˆåŠ ç­è¨˜éŒ„æ˜ç´°ï¼‰[è¦æ ¼:L234-L256]**
- [ ] 10.1.5.1 ä¸»éµ `overtime_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L238]
- [ ] 10.1.5.2 é—œè¯æ¬„ä½ï¼š`user_id`, `work_date` (NOT NULL) [è¦æ ¼:L239-L240]
- [ ] 10.1.5.3 æ¬„ä½ï¼š`overtime_type` (TEXT NOT NULL) [è¦æ ¼:L241]
- [ ] 10.1.5.4 æ¬„ä½ï¼š`hours`, `rate_multiplier`, `hourly_base` (REAL NOT NULL) [è¦æ ¼:L242-L244]
- [ ] 10.1.5.5 æ¬„ä½ï¼š`overtime_pay` (REAL NOT NULL) [è¦æ ¼:L245]
- [ ] 10.1.5.6 æ¬„ä½ï¼š`is_compensatory_leave` (BOOLEAN DEFAULT 0) [è¦æ ¼:L246]
- [ ] 10.1.5.7 é—œè¯ï¼š`payroll_id` (INTEGER) [è¦æ ¼:L247]
- [ ] 10.1.5.8 å¯©è¨ˆï¼š`created_at` [è¦æ ¼:L248]
- [ ] 10.1.5.9 å¤–éµï¼š`user_id` REFERENCES Users(user_id) [è¦æ ¼:L250]
- [ ] 10.1.5.10 å¤–éµï¼š`payroll_id` REFERENCES MonthlyPayroll(payroll_id) [è¦æ ¼:L251]
- [ ] 10.1.5.11 ç´¢å¼•ï¼š`idx_overtime_user_date` ON (user_id, work_date) [è¦æ ¼:L254]
- [ ] 10.1.5.12 ç´¢å¼•ï¼š`idx_overtime_payroll` ON (payroll_id) [è¦æ ¼:L255]

**10.1.6 å‰µå»º `YearEndBonus` è¡¨ï¼ˆå¹´çµ‚çé‡‘ï¼Œå«æ­¸å±¬å¹´åº¦ï¼‰[è¦æ ¼:L258-L306]**
- [ ] 10.1.6.1 ä¸»éµ `bonus_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L264]
- [ ] 10.1.6.2 é—œè¯æ¬„ä½ï¼š`user_id` (NOT NULL) [è¦æ ¼:L265]
- [ ] 10.1.6.3 æ¬„ä½ï¼š`attribution_year` (INTEGER NOT NULL) [è¦æ ¼:L266]
- [ ] 10.1.6.4 æ¬„ä½ï¼š`amount` (REAL NOT NULL) [è¦æ ¼:L267]
- [ ] 10.1.6.5 ç™¼æ”¾æ¬„ä½ï¼š`payment_year`, `payment_month`, `payment_date` [è¦æ ¼:L268-L270]
- [ ] 10.1.6.6 æ¬„ä½ï¼š`decision_date`, `notes` [è¦æ ¼:L271-L272]
- [ ] 10.1.6.7 è¨˜éŒ„è€…ï¼š`recorded_by` (NOT NULL) [è¦æ ¼:L273]
- [ ] 10.1.6.8 å¯©è¨ˆèˆ‡åˆªé™¤ï¼š`created_at`, `updated_at`, `is_deleted` [è¦æ ¼:L274-L276]
- [ ] 10.1.6.9 å¤–éµï¼š`user_id` REFERENCES Users(user_id) [è¦æ ¼:L278]
- [ ] 10.1.6.10 å¤–éµï¼š`recorded_by` REFERENCES Users(user_id) [è¦æ ¼:L279]
- [ ] 10.1.6.11 UNIQUE(user_id, attribution_year) é˜²é‡è¤‡ [è¦æ ¼:L280]
- [ ] 10.1.6.12 ç´¢å¼•ï¼š`idx_yearend_user` ON (user_id) [è¦æ ¼:L283]
- [ ] 10.1.6.13 ç´¢å¼•ï¼š`idx_yearend_attribution` ON (attribution_year) [è¦æ ¼:L284]
- [ ] 10.1.6.14 ç´¢å¼•ï¼š`idx_yearend_payment` ON (payment_year, payment_month) [è¦æ ¼:L285]

---

#### 10.2 è–ªè³‡é …ç›®é¡å‹ç®¡ç† APIï¼ˆ4å€‹ï¼‰[è¦æ ¼:L585-L594]

**10.2.1 GET /api/v1/admin/salary-item-typesï¼ˆæŸ¥è©¢è–ªè³‡é …ç›®é¡å‹ï¼‰[è¦æ ¼:L590]**
- [ ] 10.2.1.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰
- [ ] 10.2.1.2 æŸ¥è©¢åƒæ•¸ï¼šç„¡
- [ ] 10.2.1.3 Repository æŸ¥è©¢æ‰€æœ‰ SalaryItemTypesï¼ˆis_active=1ï¼‰
- [ ] 10.2.1.4 è¿”å›åˆ—è¡¨ï¼ˆå« is_regular_payment æ¨™è¨˜ï¼‰
- [ ] 10.2.1.5 æ·»åŠ  OpenAPI è¨»è§£

**10.2.2 POST /api/v1/admin/salary-item-typesï¼ˆæ–°å¢è–ªè³‡é …ç›®é¡å‹ï¼‰[è¦æ ¼:L591]**
- [ ] 10.2.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.2.2.2 è«‹æ±‚ Bodyï¼šitem_code, item_name, category, is_regular_payment
- [ ] 10.2.2.3 é©—è­‰ item_code å”¯ä¸€æ€§
- [ ] 10.2.2.4 Service å‰µå»ºè¨˜éŒ„
- [ ] 10.2.2.5 è¿”å› 201 Created

**10.2.3 PUT /api/v1/admin/salary-item-types/:idï¼ˆæ›´æ–°è–ªè³‡é …ç›®é¡å‹ï¼‰[è¦æ ¼:L592]**
- [ ] 10.2.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.2.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆitem_type_idï¼‰
- [ ] 10.2.3.3 è«‹æ±‚ Bodyï¼šå…è¨±æ›´æ–°çš„æ¬„ä½
- [ ] 10.2.3.4 Service æ›´æ–°è¨˜éŒ„
- [ ] 10.2.3.5 è¿”å›æ›´æ–°å¾Œçš„æ•¸æ“š

**10.2.4 DELETE /api/v1/admin/salary-item-types/:idï¼ˆåˆªé™¤è–ªè³‡é …ç›®é¡å‹ï¼‰[è¦æ ¼:L593]**
- [ ] 10.2.4.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.2.4.2 è·¯å¾‘åƒæ•¸ï¼šid
- [ ] 10.2.4.3 Service è»Ÿåˆªé™¤ï¼ˆis_active=0ï¼‰
- [ ] 10.2.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
- [ ] 10.2.4.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 10.3 å¹´çµ‚çé‡‘ç®¡ç† APIï¼ˆ5å€‹ï¼‰[è¦æ ¼:L596-L604, L820-L918]

**10.3.1 GET /api/v1/admin/year-end-bonusï¼ˆæŸ¥è©¢å¹´çµ‚çé‡‘åˆ—è¡¨ï¼‰[è¦æ ¼:L599]**
- [ ] 10.3.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.3.1.2 æŸ¥è©¢åƒæ•¸ï¼šattribution_yearï¼ˆå¯é¸ï¼‰
- [ ] 10.3.1.3 Repository æŸ¥è©¢ï¼ˆå« JOIN Users è¡¨ï¼‰
- [ ] 10.3.1.4 è¿”å›åˆ—è¡¨ï¼ˆå«å“¡å·¥å§“åã€æ­¸å±¬å¹´åº¦ã€é‡‘é¡ï¼‰
- [ ] 10.3.1.5 æ·»åŠ  OpenAPI è¨»è§£

**10.3.2 POST /api/v1/admin/year-end-bonusï¼ˆæ–°å¢å¹´çµ‚çé‡‘ï¼‰[è¦æ ¼:L600, L606-L630]**
- [ ] 10.3.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.3.2.2 è«‹æ±‚ Bodyï¼šuser_id, attribution_year, amount, payment_date, notes [è¦æ ¼:L609-L614]
- [ ] 10.3.2.3 é©—è­‰ user_id å­˜åœ¨
- [ ] 10.3.2.4 æª¢æŸ¥ UNIQUE(user_id, attribution_year) é˜²é‡è¤‡
- [ ] 10.3.2.5 Service å‰µå»ºè¨˜éŒ„ï¼Œè‡ªå‹•è§£æ payment_year/month [è¦æ ¼:L619-L628]
- [ ] 10.3.2.6 è¿”å› 201 Created [è¦æ ¼:L618-L630]
- [ ] 10.3.2.7 æ·»åŠ  OpenAPI è¨»è§£

**10.3.3 PUT /api/v1/admin/year-end-bonus/:idï¼ˆæ›´æ–°å¹´çµ‚çé‡‘ï¼‰[è¦æ ¼:L601]**
- [ ] 10.3.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.3.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆbonus_idï¼‰
- [ ] 10.3.3.3 è«‹æ±‚ Bodyï¼šamount, payment_date, notes
- [ ] 10.3.3.4 Service æ›´æ–°è¨˜éŒ„
- [ ] 10.3.3.5 è¿”å›æ›´æ–°å¾Œçš„æ•¸æ“š

**10.3.4 DELETE /api/v1/admin/year-end-bonus/:idï¼ˆåˆªé™¤å¹´çµ‚çé‡‘ï¼‰[è¦æ ¼:L602]**
- [ ] 10.3.4.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.3.4.2 è·¯å¾‘åƒæ•¸ï¼šid
- [ ] 10.3.4.3 Service è»Ÿåˆªé™¤ï¼ˆis_deleted=1ï¼‰
- [ ] 10.3.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
- [ ] 10.3.4.5 æ·»åŠ  OpenAPI è¨»è§£

**10.3.5 GET /api/v1/admin/year-end-bonus/summaryï¼ˆå¹´çµ‚çé‡‘çµ±è¨ˆï¼‰[è¦æ ¼:L603, L633-L659]**
- [ ] 10.3.5.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.3.5.2 æŸ¥è©¢åƒæ•¸ï¼šattribution_yearï¼ˆå¿…å¡«ï¼‰[è¦æ ¼:L635]
- [ ] 10.3.5.3 Repository èšåˆæŸ¥è©¢ï¼ˆSUM, AVG, COUNTï¼‰[è¦æ ¼:L639-L658]
- [ ] 10.3.5.4 è¿”å›çµ±è¨ˆæ•¸æ“šï¼ˆtotal_bonus, employee_count, average_bonus, by_employeeï¼‰[è¦æ ¼:L639-L658]
- [ ] 10.3.5.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 10.4 å“¡å·¥è–ªè³‡è¨­å®š APIï¼ˆ3å€‹ï¼‰[è¦æ ¼:L662-L773]

**10.4.1 GET /api/v1/admin/users/:id/salaryï¼ˆæŸ¥è©¢å“¡å·¥è–ªè³‡è¨­å®šï¼‰[è¦æ ¼:L665]**
- [ ] 10.4.1.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰
- [ ] 10.4.1.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆuser_idï¼‰
- [ ] 10.4.1.3 Repository æŸ¥è©¢ï¼ˆJOIN SalaryItemTypesï¼‰
- [ ] 10.4.1.4 è¿”å›æ•¸æ“šï¼ˆbase_salary, hourly_base, salary_items[]ï¼‰[è¦æ ¼:L758-L772]
- [ ] 10.4.1.5 æ·»åŠ  OpenAPI è¨»è§£

**10.4.2 PUT /api/v1/admin/users/:id/salaryï¼ˆæ›´æ–°å“¡å·¥è–ªè³‡è¨­å®šï¼Œæ•´æ‰¹æ›´æ–°ï¼‰[è¦æ ¼:L666, L743-L773]**
- [ ] 10.4.2.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰
- [ ] 10.4.2.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆuser_idï¼‰
- [ ] 10.4.2.3 è«‹æ±‚ Bodyï¼šbase_salary, salary_items[] [è¦æ ¼:L746-L752]
- [ ] 10.4.2.4 Service æ‰¹æ¬¡æ›´æ–°ï¼ˆåˆªé™¤èˆŠè¨˜éŒ„ï¼Œæ’å…¥æ–°è¨˜éŒ„ï¼‰
- [ ] 10.4.2.5 è¨ˆç®—æ™‚è–ªåŸºæº–ï¼ˆå«ç¶“å¸¸æ€§çµ¦èˆ‡ï¼‰
- [ ] 10.4.2.6 è¿”å›æ›´æ–°å¾Œçš„è–ªè³‡è¨­å®š [è¦æ ¼:L758-L772]
- [ ] 10.4.2.7 æ·»åŠ  OpenAPI è¨»è§£

**10.4.3 POST /api/v1/admin/salary-items/batch-updateï¼ˆæ‰¹æ¬¡æ›´æ–°è–ªè³‡é …ç›®ï¼Œç¸¾æ•ˆçé‡‘æœˆåº¦èª¿æ•´ï¼‰[è¦æ ¼:L668, L699-L741]**
- [ ] 10.4.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.4.3.2 è«‹æ±‚ Bodyï¼šitem_code, target_month, updates[] [è¦æ ¼:L702-L710]
- [ ] 10.4.3.3 Service æ‰¹æ¬¡å‰µå»ºæœˆä»½å°ˆå±¬è¨˜éŒ„ï¼ˆeffective_date, expiry_dateï¼‰[è¦æ ¼:L713-L717]
- [ ] 10.4.3.4 è¿”å›æˆåŠŸéŸ¿æ‡‰ï¼ˆtotal_updated, messageï¼‰[è¦æ ¼:L720-L726]
- [ ] 10.4.3.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 10.5 è–ªè³‡è¨ˆç®—èˆ‡æŸ¥è©¢ APIï¼ˆ4å€‹ï¼‰[è¦æ ¼:L775-L918]

**10.5.1 POST /api/v1/admin/payroll/calculateï¼ˆè¨ˆç®—æŒ‡å®šæœˆä»½è–ªè³‡ï¼‰[è¦æ ¼:L778, L830-L858]**
- [ ] 10.5.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.5.1.2 è«‹æ±‚ Bodyï¼šuser_idï¼ˆå¯é¸ï¼‰, year, month [è¦æ ¼:L833-L836]
- [ ] 10.5.1.3 Service è¨ˆç®—è–ªè³‡ï¼ˆå«å…¨å‹¤åˆ¤å®šã€åŠ ç­è²»åˆ†é¡ï¼‰[è¦æ ¼:L434-L580]
- [ ] 10.5.1.4 è¿”å›è–ªè³‡è©³æƒ…ï¼ˆæ‰€æœ‰æ¬„ä½ï¼‰[è¦æ ¼:L841-L857]
- [ ] 10.5.1.5 æ·»åŠ  OpenAPI è¨»è§£

**10.5.2 GET /api/v1/admin/payrollï¼ˆæŸ¥è©¢è–ªè³‡è¨˜éŒ„ï¼‰[è¦æ ¼:L780]**
- [ ] 10.5.2.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰
- [ ] 10.5.2.2 æŸ¥è©¢åƒæ•¸ï¼šuser_id, year, monthï¼ˆå¯é¸ï¼‰
- [ ] 10.5.2.3 Repository æŸ¥è©¢ï¼ˆJOIN Users è¡¨ï¼‰
- [ ] 10.5.2.4 è¿”å›åˆ—è¡¨ï¼ˆå«å“¡å·¥å§“åã€è–ªè³‡ç¸½é¡ï¼‰
- [ ] 10.5.2.5 æ·»åŠ  OpenAPI è¨»è§£

**10.5.3 GET /api/v1/admin/payroll/:idï¼ˆæŸ¥è©¢è–ªè³‡è©³æƒ…ï¼‰[è¦æ ¼:L781]**
- [ ] 10.5.3.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰
- [ ] 10.5.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆpayroll_idï¼‰
- [ ] 10.5.3.3 Repository æŸ¥è©¢ï¼ˆå«åŠ ç­æ˜ç´°ã€è–ªè³‡é …ç›®æ˜ç´°ï¼‰
- [ ] 10.5.3.4 è¿”å›å®Œæ•´è©³æƒ…
- [ ] 10.5.3.5 æ·»åŠ  OpenAPI è¨»è§£

**10.5.4 GET /api/v1/reports/payroll-summaryï¼ˆè–ªè³‡å½™ç¸½å ±è¡¨ï¼‰[è¦æ ¼:L784]**
- [ ] 10.5.4.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 10.5.4.2 æŸ¥è©¢åƒæ•¸ï¼šyear, monthï¼ˆå¿…å¡«ï¼‰
- [ ] 10.5.4.3 Repository èšåˆæŸ¥è©¢ï¼ˆSUM, AVGï¼‰
- [ ] 10.5.4.4 è¿”å›å½™ç¸½æ•¸æ“šï¼ˆtotal_payroll, employee_count, avg_salaryï¼‰
- [ ] 10.5.4.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 10.6 è–ªè³‡è¨ˆç®—é‚è¼¯é©—è­‰ï¼ˆæ¥­å‹™è¦å‰‡ï¼‰[è¦æ ¼:L310-L580]

**10.6.1 æ™‚è–ªåŸºæº–è¨ˆç®—é©—è­‰ï¼ˆä¾å‹åŸºæ³•ï¼‰[è¦æ ¼:L314-L333]**
- [ ] 10.6.1.1 é©—è­‰æœˆè–ª Ã· 240 å°æ™‚å…¬å¼ [è¦æ ¼:L322]
- [ ] 10.6.1.2 é©—è­‰åŒ…å«æ‰€æœ‰ç¶“å¸¸æ€§çµ¦èˆ‡ï¼ˆåº•è–ª+æ´¥è²¼+ç¶“å¸¸æ€§çé‡‘ï¼‰[è¦æ ¼:L323-L324]
- [ ] 10.6.1.3 é©—è­‰æ™‚è–ªè¨ˆç®—ç¯„ä¾‹ï¼ˆ35000 Ã· 240 = 146å…ƒï¼‰[è¦æ ¼:L329-L332]

**10.6.2 åŠ ç­è²»è¨ˆç®—é©—è­‰ï¼ˆä¾å‹åŸºæ³•ç¬¬24æ¢ï¼‰[è¦æ ¼:L335-L379]**
- [ ] 10.6.2.1 é©—è­‰å¹³æ—¥åŠ ç­å‰2å°æ™‚ï¼š1.34å€ [è¦æ ¼:L351-L352]
- [ ] 10.6.2.2 é©—è­‰å¹³æ—¥åŠ ç­ç¬¬3å°æ™‚èµ·ï¼š1.67å€ [è¦æ ¼:L353-L354]
- [ ] 10.6.2.3 é©—è­‰ä¼‘æ¯æ—¥å‰2å°æ™‚ï¼š1.34å€ [è¦æ ¼:L355-L356]
- [ ] 10.6.2.4 é©—è­‰ä¼‘æ¯æ—¥ç¬¬3å°æ™‚èµ·ï¼š1.67å€ [è¦æ ¼:L357-L358]
- [ ] 10.6.2.5 é©—è­‰åœ‹å®šå‡æ—¥/ä¾‹å‡æ—¥ï¼š2.0å€ [è¦æ ¼:L359-L360]
- [ ] 10.6.2.6 é©—è­‰åŠ ç­è²»è¨ˆç®—ç¯„ä¾‹ [è¦æ ¼:L372-L378]

**10.6.3 å…¨å‹¤çé‡‘è¦å‰‡é©—è­‰ï¼ˆå…¬å¸å…§è¦ï¼‰[è¦æ ¼:L381-L426]**
- [ ] 10.6.3.1 é©—è­‰ç—…å‡æ‰£é™¤å…¨å‹¤ [è¦æ ¼:L408-L409]
- [ ] 10.6.3.2 é©—è­‰äº‹å‡æ‰£é™¤å…¨å‹¤ [è¦æ ¼:L408-L409]
- [ ] 10.6.3.3 é©—è­‰è£œä¼‘ä¸å½±éŸ¿å…¨å‹¤ [è¦æ ¼:L414]
- [ ] 10.6.3.4 é©—è­‰ç‰¹ä¼‘ä¸å½±éŸ¿å…¨å‹¤ [è¦æ ¼:L413]
- [ ] 10.6.3.5 é©—è­‰æ› è·æ‰£é™¤å…¨å‹¤ [è¦æ ¼:L419-L422]

**10.6.4 æœˆåº¦è–ªè³‡ç¸½è¨ˆç®—é©—è­‰ï¼ˆå®Œæ•´æµç¨‹ï¼‰[è¦æ ¼:L428-L580]**
- [ ] 10.6.4.1 é©—è­‰æ™‚è–ªåŸºæº–è¨ˆç®—ï¼ˆæŸ¥è©¢ç¶“å¸¸æ€§çµ¦èˆ‡ï¼‰[è¦æ ¼:L445-L447, L449-L473]
- [ ] 10.6.4.2 é©—è­‰è–ªè³‡é …ç›®å»é‡é‚è¼¯ï¼ˆæœˆä»½å°ˆå±¬å„ªå…ˆï¼‰[è¦æ ¼:L449-L473]
- [ ] 10.6.4.3 é©—è­‰åŠ ç­è²»åˆ†é¡ç´¯è¨ˆ [è¦æ ¼:L492-L535]
- [ ] 10.6.4.4 é©—è­‰å…¨å‹¤åˆ¤å®šèˆ‡çé‡‘ç™¼æ”¾ [è¦æ ¼:L537-L539]
- [ ] 10.6.4.5 é©—è­‰è–ªè³‡ç¸½è¨ˆå…¬å¼ï¼ˆbase+allowances+bonuses+overtimeï¼‰[è¦æ ¼:L541-L551]

---

#### 10.7 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [ ] 10.7.1 [å…§éƒ¨] æ¸¬è©¦è£œä¼‘ä¸å½±éŸ¿å…¨å‹¤çé‡‘ [è¦æ ¼:L1558-L1582]
- [ ] 10.7.2 [å…§éƒ¨] æ¸¬è©¦æ™‚è–ªåŒ…å«æ‰€æœ‰ç¶“å¸¸æ€§çµ¦èˆ‡ [è¦æ ¼:L1587-L1611]
- [ ] 10.7.3 [å…§éƒ¨] æ¸¬è©¦å¹´çµ‚çé‡‘æŒ‰å·¥æ™‚æ¯”ä¾‹åˆ†æ”¤ [è¦æ ¼:L1653-L1679]
- [ ] 10.7.4 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰è–ªè³‡ç®¡ç†åŠŸèƒ½
- [ ] 10.7.5 [å…§éƒ¨] æº–å‚™åŸ·è¡Œä¸€è‡´æ€§é©—è­‰
- [ ] 10.7.6 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

### [ ] æ¨¡çµ„ 11ï¼šç®¡ç†æˆæœ¬ï¼ˆç®¡ç†æˆæœ¬-å®Œæ•´è¦æ ¼.mdï¼‰
**è³‡æ–™è¡¨ï¼š** 2 å€‹ | **APIï¼š** 10 å€‹ï¼ˆæˆæœ¬é …ç›®é¡å‹ 4 + æœˆåº¦æˆæœ¬è¨˜éŒ„ 4 + åˆ†æå½™ç¸½ 2ï¼‰| **Cron Jobsï¼š** 0 å€‹

#### 11.1 è³‡æ–™è¡¨å‰µå»ºï¼ˆ2 è¡¨ï¼‰

**11.1.1 å‰µå»º `OverheadCostTypes` è¡¨ï¼ˆç®¡ç†æˆæœ¬é …ç›®é¡å‹ï¼Œå«åˆ†æ”¤æ–¹å¼ï¼‰[è¦æ ¼:L29-L63]**
- [ ] 11.1.1.1 ä¸»éµ `cost_type_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L35]
- [ ] 11.1.1.2 æ¬„ä½ï¼š`cost_code` (TEXT UNIQUE NOT NULL) [è¦æ ¼:L36]
- [ ] 11.1.1.3 æ¬„ä½ï¼š`cost_name` (TEXT NOT NULL) [è¦æ ¼:L37]
- [ ] 11.1.1.4 æ¬„ä½ï¼š`category` (TEXT NOT NULL, CHECK IN ('fixed','variable')) [è¦æ ¼:L38, L46]
- [ ] 11.1.1.5 æ¬„ä½ï¼š`allocation_method` (TEXT NOT NULL) [è¦æ ¼:L39]
  - CHECK IN ('per_employee','per_hour','per_revenue') [è¦æ ¼:L47]
- [ ] 11.1.1.6 æ¬„ä½ï¼š`description`, `is_active`, `display_order` [è¦æ ¼:L40-L42]
- [ ] 11.1.1.7 å¯©è¨ˆæ¬„ä½ï¼š`created_at`, `updated_at` [è¦æ ¼:L43-L44]
- [ ] 11.1.1.8 CHECK ç´„æŸï¼šcategory IN ('fixed', 'variable') [è¦æ ¼:L46]
- [ ] 11.1.1.9 CHECK ç´„æŸï¼šallocation_method IN (...) [è¦æ ¼:L47]
- [ ] 11.1.1.10 ç´¢å¼•ï¼š`idx_overhead_cost_types_active` ON (is_active) [è¦æ ¼:L50]
- [ ] 11.1.1.11 ç´¢å¼•ï¼š`idx_overhead_cost_types_category` ON (category) [è¦æ ¼:L51]
- [ ] 11.1.1.12 æ’å…¥é è¨­é …ç›®ï¼ˆç§Ÿé‡‘/æ°´é›»/ç¶²è·¯/è¨­å‚™/è»Ÿé«”/ä¿éšª/ç¶­è­·/è¡ŒéŠ·ï¼‰[è¦æ ¼:L54-L62]

**11.1.2 å‰µå»º `MonthlyOverheadCosts` è¡¨ï¼ˆæœˆåº¦ç®¡ç†æˆæœ¬è¨˜éŒ„ï¼‰[è¦æ ¼:L65-L96]**
- [ ] 11.1.2.1 ä¸»éµ `overhead_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L69]
- [ ] 11.1.2.2 é—œè¯æ¬„ä½ï¼š`cost_type_id` (NOT NULL) [è¦æ ¼:L70]
- [ ] 11.1.2.3 æ¬„ä½ï¼š`year`, `month` (INTEGER NOT NULL) [è¦æ ¼:L71-L72]
- [ ] 11.1.2.4 æ¬„ä½ï¼š`amount` (REAL NOT NULL) [è¦æ ¼:L73]
- [ ] 11.1.2.5 æ¬„ä½ï¼š`notes`, `recorded_by`, `recorded_at` [è¦æ ¼:L74-L76]
- [ ] 11.1.2.6 å¯©è¨ˆèˆ‡åˆªé™¤ï¼š`updated_at`, `is_deleted` [è¦æ ¼:L77-L78]
- [ ] 11.1.2.7 å¤–éµï¼š`cost_type_id` REFERENCES OverheadCostTypes(cost_type_id) [è¦æ ¼:L80]
- [ ] 11.1.2.8 å¤–éµï¼š`recorded_by` REFERENCES Users(user_id) [è¦æ ¼:L81]
- [ ] 11.1.2.9 UNIQUE(cost_type_id, year, month) é˜²é‡è¤‡ [è¦æ ¼:L82]
- [ ] 11.1.2.10 ç´¢å¼•ï¼š`idx_monthly_overhead_date` ON (year, month) [è¦æ ¼:L85]
- [ ] 11.1.2.11 ç´¢å¼•ï¼š`idx_monthly_overhead_type` ON (cost_type_id) [è¦æ ¼:L86]

---

#### 11.2 æˆæœ¬é …ç›®é¡å‹ç®¡ç† APIï¼ˆ4å€‹ï¼‰[è¦æ ¼:L283-L314]

**11.2.1 GET /api/v1/admin/overhead-typesï¼ˆæŸ¥è©¢æ‰€æœ‰æˆæœ¬é …ç›®é¡å‹ï¼‰[è¦æ ¼:L286]**
- [ ] 11.2.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.2.1.2 æŸ¥è©¢åƒæ•¸ï¼šç„¡
- [ ] 11.2.1.3 Repository æŸ¥è©¢æ‰€æœ‰ OverheadCostTypesï¼ˆis_active=1ï¼‰
- [ ] 11.2.1.4 è¿”å›åˆ—è¡¨ï¼ˆå« allocation_methodï¼‰
- [ ] 11.2.1.5 æ·»åŠ  OpenAPI è¨»è§£

**11.2.2 POST /api/v1/admin/overhead-typesï¼ˆæ–°å¢æˆæœ¬é …ç›®é¡å‹ï¼‰[è¦æ ¼:L287, L293-L313]**
- [ ] 11.2.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.2.2.2 è«‹æ±‚ Bodyï¼šcost_code, cost_name, category, allocation_method, description [è¦æ ¼:L295-L300]
- [ ] 11.2.2.3 é©—è­‰ cost_code å”¯ä¸€æ€§
- [ ] 11.2.2.4 é©—è­‰ category IN ('fixed', 'variable')
- [ ] 11.2.2.5 é©—è­‰ allocation_method IN ('per_employee', 'per_hour', 'per_revenue')
- [ ] 11.2.2.6 Service å‰µå»ºè¨˜éŒ„
- [ ] 11.2.2.7 è¿”å› 201 Created [è¦æ ¼:L304-L312]

**11.2.3 PUT /api/v1/admin/overhead-types/:idï¼ˆæ›´æ–°æˆæœ¬é …ç›®é¡å‹ï¼‰[è¦æ ¼:L288]**
- [ ] 11.2.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.2.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆcost_type_idï¼‰
- [ ] 11.2.3.3 è«‹æ±‚ Bodyï¼šå…è¨±æ›´æ–°çš„æ¬„ä½
- [ ] 11.2.3.4 Service æ›´æ–°è¨˜éŒ„
- [ ] 11.2.3.5 è¿”å›æ›´æ–°å¾Œçš„æ•¸æ“š

**11.2.4 DELETE /api/v1/admin/overhead-types/:idï¼ˆåˆªé™¤æˆæœ¬é …ç›®é¡å‹ï¼‰[è¦æ ¼:L289]**
- [ ] 11.2.4.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.2.4.2 è·¯å¾‘åƒæ•¸ï¼šid
- [ ] 11.2.4.3 Service è»Ÿåˆªé™¤ï¼ˆis_active=0ï¼‰
- [ ] 11.2.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
- [ ] 11.2.4.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 11.3 æœˆåº¦æˆæœ¬è¨˜éŒ„ APIï¼ˆ4å€‹ï¼‰[è¦æ ¼:L316-L348]

**11.3.1 GET /api/v1/admin/overhead-costsï¼ˆæŸ¥è©¢æœˆåº¦æˆæœ¬ï¼‰[è¦æ ¼:L319]**
- [ ] 11.3.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.3.1.2 æŸ¥è©¢åƒæ•¸ï¼šyear, monthï¼ˆå¿…å¡«ï¼‰
- [ ] 11.3.1.3 Repository æŸ¥è©¢ï¼ˆJOIN OverheadCostTypesï¼‰
- [ ] 11.3.1.4 è¿”å›åˆ—è¡¨ï¼ˆå« cost_nameï¼‰
- [ ] 11.3.1.5 æ·»åŠ  OpenAPI è¨»è§£

**11.3.2 POST /api/v1/admin/overhead-costsï¼ˆæ–°å¢æœˆåº¦æˆæœ¬ï¼‰[è¦æ ¼:L320, L326-L347]**
- [ ] 11.3.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.3.2.2 è«‹æ±‚ Bodyï¼šcost_type_id, year, month, amount, notes [è¦æ ¼:L328-L333]
- [ ] 11.3.2.3 é©—è­‰ cost_type_id å­˜åœ¨
- [ ] 11.3.2.4 æª¢æŸ¥ UNIQUE(cost_type_id, year, month) é˜²é‡è¤‡ [è¦æ ¼:L82]
- [ ] 11.3.2.5 Service å‰µå»ºè¨˜éŒ„ï¼Œrecorded_by è‡ªå‹•è¨­ç½®
- [ ] 11.3.2.6 è¿”å› 201 Created [è¦æ ¼:L337-L346]

**11.3.3 PUT /api/v1/admin/overhead-costs/:idï¼ˆæ›´æ–°æœˆåº¦æˆæœ¬ï¼‰[è¦æ ¼:L321]**
- [ ] 11.3.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.3.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆoverhead_idï¼‰
- [ ] 11.3.3.3 è«‹æ±‚ Bodyï¼šamount, notes
- [ ] 11.3.3.4 Service æ›´æ–°è¨˜éŒ„ï¼Œupdated_at è‡ªå‹•è¨­ç½®
- [ ] 11.3.3.5 è¿”å›æ›´æ–°å¾Œçš„æ•¸æ“š

**11.3.4 DELETE /api/v1/admin/overhead-costs/:idï¼ˆåˆªé™¤æœˆåº¦æˆæœ¬ï¼‰[è¦æ ¼:L322]**
- [ ] 11.3.4.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.3.4.2 è·¯å¾‘åƒæ•¸ï¼šid
- [ ] 11.3.4.3 Service è»Ÿåˆªé™¤ï¼ˆis_deleted=1ï¼‰
- [ ] 11.3.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
- [ ] 11.3.4.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 11.4 æˆæœ¬åˆ†æèˆ‡å½™ç¸½ APIï¼ˆ2å€‹ï¼‰[è¦æ ¼:L350-L397]

**11.4.1 GET /api/v1/admin/overhead-analysisï¼ˆç®¡ç†æˆæœ¬åˆ†æå ±è¡¨ï¼‰[è¦æ ¼:L353, L358-L396]**
- [ ] 11.4.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.4.1.2 æŸ¥è©¢åƒæ•¸ï¼šyear, monthï¼ˆå¿…å¡«ï¼‰[è¦æ ¼:L359]
- [ ] 11.4.1.3 Repository æŸ¥è©¢æœˆåº¦æˆæœ¬ä¸¦èšåˆ [è¦æ ¼:L361-L388]
  - total_overheadï¼ˆç¸½è¨ˆï¼‰[è¦æ ¼:L366]
  - breakdown_by_categoryï¼ˆæŒ‰é¡åˆ¥ï¼‰[è¦æ ¼:L370-L373]
  - breakdown_by_typeï¼ˆæŒ‰é …ç›®ï¼‰[è¦æ ¼:L375-L388]
- [ ] 11.4.1.4 è¨ˆç®—å“¡å·¥æ•¸èˆ‡äººå‡åˆ†æ”¤ [è¦æ ¼:L367-L368]
- [ ] 11.4.1.5 è¨ˆç®—æ™‚è–ªæˆæœ¬ç‡å½±éŸ¿ï¼ˆå«/ä¸å«ç®¡ç†æˆæœ¬å°æ¯”ï¼‰[è¦æ ¼:L390-L394]
- [ ] 11.4.1.6 è¿”å›å®Œæ•´åˆ†ææ•¸æ“š
- [ ] 11.4.1.7 æ·»åŠ  OpenAPI è¨»è§£

**11.4.2 GET /api/v1/admin/overhead-summaryï¼ˆç®¡ç†æˆæœ¬å½™ç¸½ï¼‰[è¦æ ¼:L354]**
- [ ] 11.4.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 11.4.2.2 æŸ¥è©¢åƒæ•¸ï¼šstart_date, end_dateï¼ˆå¯é¸ï¼Œé è¨­ç•¶å¹´ï¼‰
- [ ] 11.4.2.3 Repository èšåˆæŸ¥è©¢ï¼ˆGROUP BY year, monthï¼‰
- [ ] 11.4.2.4 è¿”å›æ­·å²è¶¨å‹¢æ•¸æ“š
- [ ] 11.4.2.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 11.5 æˆæœ¬åˆ†æ”¤é‚è¼¯é©—è­‰ï¼ˆæ¥­å‹™è¦å‰‡ï¼‰[è¦æ ¼:L100-L277]

**11.5.1 æŒ‰äººé ­åˆ†æ”¤é©—è­‰ï¼ˆper_employeeï¼‰[è¦æ ¼:L102-L124]**
- [ ] 11.5.1.1 é©—è­‰å…¬å¼ï¼štotalOverhead / employeeCount [è¦æ ¼:L115]
- [ ] 11.5.1.2 é©—è­‰ç¯„ä¾‹ï¼šç§Ÿé‡‘+æ°´é›»+ç¶²è·¯ = 30,500 Ã· 4äºº = 7,625å…ƒ/äºº [è¦æ ¼:L119-L122]

**11.5.2 æŒ‰å·¥æ™‚åˆ†æ”¤é©—è­‰ï¼ˆper_hourï¼‰[è¦æ ¼:L126-L148]**
- [ ] 11.5.2.1 é©—è­‰å…¬å¼ï¼štotalOverhead / totalWorkHours [è¦æ ¼:L139]
- [ ] 11.5.2.2 é©—è­‰ç¯„ä¾‹ï¼šç¶­è­·è²» 5,000 Ã· 640å°æ™‚ = 7.81å…ƒ/å°æ™‚ [è¦æ ¼:L143-L146]

**11.5.3 æŒ‰ç‡Ÿæ”¶åˆ†æ”¤é©—è­‰ï¼ˆper_revenueï¼‰[è¦æ ¼:L150-L175]**
- [ ] 11.5.3.1 é©—è­‰å…¬å¼ï¼štotalOverhead / totalRevenue [è¦æ ¼:L163]
- [ ] 11.5.3.2 é©—è­‰ç¯„ä¾‹ï¼šè¡ŒéŠ·è²» 10,000 Ã· ç‡Ÿæ”¶ 500,000 = 2% [è¦æ ¼:L167-L173]

**11.5.4 æ™‚è–ªæˆæœ¬ç‡è¨ˆç®—é©—è­‰ï¼ˆå«ç®¡ç†æˆæœ¬ï¼‰[è¦æ ¼:L177-L277]**
- [ ] 11.5.4.1 é©—è­‰æŸ¥è©¢ç¶“å¸¸æ€§çµ¦èˆ‡ï¼ˆis_regular_payment=1ï¼‰[è¦æ ¼:L199-L208]
- [ ] 11.5.4.2 é©—è­‰ç®¡ç†æˆæœ¬æŸ¥è©¢ï¼ˆallocation_method='per_employee'ï¼‰[è¦æ ¼:L220-L228]
- [ ] 11.5.4.3 é©—è­‰å®Œå…¨æ²’è¼¸å…¥ç®¡ç†æˆæœ¬ï¼šåªè¨ˆç®—è–ªè³‡æˆæœ¬ [è¦æ ¼:L230-L234, L271-L275]
- [ ] 11.5.4.4 é©—è­‰éƒ¨åˆ†è¼¸å…¥ç®¡ç†æˆæœ¬ï¼šä½¿ç”¨éƒ¨åˆ†æ•¸æ“šè¨ˆç®— [è¦æ ¼:L263-L269]
- [ ] 11.5.4.5 é©—è­‰å®Œæ•´è¼¸å…¥ç®¡ç†æˆæœ¬ï¼šå®Œæ•´è¨ˆç®— [è¦æ ¼:L253-L261]
- [ ] 11.5.4.6 é©—è­‰æ™‚è–ªæˆæœ¬ç‡å…¬å¼ï¼š(salary + overhead) Ã· 240 [è¦æ ¼:L236-L240]

**11.5.5 æˆæœ¬å°æ¯”åˆ†æé©—è­‰ï¼ˆå«/ä¸å«ç®¡ç†æˆæœ¬ï¼‰[è¦æ ¼:L428-L463]**
- [ ] 11.5.5.1 é©—è­‰ä¸å«ç®¡ç†æˆæœ¬è¨ˆç®—ï¼š166å…ƒ/æ™‚ [è¦æ ¼:L434-L442]
- [ ] 11.5.5.2 é©—è­‰å«ç®¡ç†æˆæœ¬è¨ˆç®—ï¼š206å…ƒ/æ™‚ [è¦æ ¼:L444-L454]
- [ ] 11.5.5.3 é©—è­‰æˆæœ¬å½±éŸ¿ï¼š+24% [è¦æ ¼:L456-L461]

---

#### 11.6 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [ ] 11.6.1 [å…§éƒ¨] æ¸¬è©¦æˆæœ¬é …ç›® CRUD
- [ ] 11.6.2 [å…§éƒ¨] æ¸¬è©¦æœˆåº¦æˆæœ¬è¨˜éŒ„èˆ‡ UNIQUE ç´„æŸ
- [ ] 11.6.3 [å…§éƒ¨] æ¸¬è©¦ä¸‰ç¨®åˆ†æ”¤æ–¹å¼è¨ˆç®—
- [ ] 11.6.4 [å…§éƒ¨] æ¸¬è©¦æ™‚è–ªæˆæœ¬ç‡è‡ªå‹•ä½µå…¥ç®¡ç†æˆæœ¬
- [ ] 11.6.5 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰æˆæœ¬ç®¡ç†åŠŸèƒ½
- [ ] 11.6.6 [å…§éƒ¨] æº–å‚™åŸ·è¡Œä¸€è‡´æ€§é©—è­‰
- [ ] 11.6.7 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

### [ ] æ¨¡çµ„ 12ï¼šæ”¶æ“šæ”¶æ¬¾ï¼ˆç™¼ç¥¨æ”¶æ¬¾-å®Œæ•´è¦æ ¼.mdï¼‰
**è³‡æ–™è¡¨ï¼š** 4 å€‹ | **APIï¼š** 14 å€‹ï¼ˆæ”¶æ“š 6 + æ”¶æ¬¾ 3 + çµ±è¨ˆ 3 + PDF 2ï¼‰| **Cron Jobsï¼š** 0 å€‹

#### 12.1 è³‡æ–™è¡¨å‰µå»ºï¼ˆ4 è¡¨ï¼‰

**12.1.1 å‰µå»º `Receipts` è¡¨ï¼ˆæ”¶æ“šç®¡ç†ï¼Œå«ä½œå»¢æ¬„ä½èˆ‡è¤‡åˆç´¢å¼•ï¼‰[è¦æ ¼:L37-L78]**
- [ ] 12.1.1.1 ä¸»éµ `receipt_id` (TEXT PRIMARY KEY, æ ¼å¼ï¼šYYYYMM-NNN) [è¦æ ¼:L41]
- [ ] 12.1.1.2 æ¬„ä½ï¼š`client_id` (TEXT NOT NULL) [è¦æ ¼:L42]
- [ ] 12.1.1.3 æ¬„ä½ï¼š`receipt_date`, `due_date` (TEXT) [è¦æ ¼:L43-L44]
- [ ] 12.1.1.4 æ¬„ä½ï¼š`total_amount` (REAL NOT NULL, ç„¡ç¨…é¡) [è¦æ ¼:L45]
- [ ] 12.1.1.5 æ¬„ä½ï¼š`status` (TEXT DEFAULT 'unpaid') [è¦æ ¼:L46]
  - CHECK IN ('unpaid','partial','paid','cancelled')
- [ ] 12.1.1.6 æ¬„ä½ï¼š`is_auto_generated` (BOOLEAN DEFAULT 1) [è¦æ ¼:L47]
- [ ] 12.1.1.7 æ¬„ä½ï¼š`notes`, `created_by` [è¦æ ¼:L48-L49]
- [ ] 12.1.1.8 å¯©è¨ˆèˆ‡ä½œå»¢ï¼š`created_at`, `updated_at`, `is_deleted`, `deleted_at`, `deleted_by` [è¦æ ¼:L50-L54]
- [ ] 12.1.1.9 å¤–éµï¼š`client_id` REFERENCES Clients(client_id) [è¦æ ¼:L56]
- [ ] 12.1.1.10 å¤–éµï¼š`created_by` REFERENCES Users(user_id) [è¦æ ¼:L57]
- [ ] 12.1.1.11 å¤–éµï¼š`deleted_by` REFERENCES Users(user_id) [è¦æ ¼:L58]
- [ ] 12.1.1.12 ç´¢å¼•ï¼š`idx_receipts_client` ON (client_id) [è¦æ ¼:L61]
- [ ] 12.1.1.13 ç´¢å¼•ï¼š`idx_receipts_date` ON (receipt_date) [è¦æ ¼:L62]
- [ ] 12.1.1.14 ç´¢å¼•ï¼š`idx_receipts_status` ON (status) [è¦æ ¼:L63]
- [ ] 12.1.1.15 ç´¢å¼•ï¼š`idx_receipts_status_due` ON (status, due_date) â­æ‡‰æ”¶å¸³æ¬¾å°ˆç”¨ [è¦æ ¼:L64, L70-L73]
- [ ] 12.1.1.16 ç´¢å¼•ï¼š`idx_receipts_client_status` ON (client_id, status) â­å®¢æˆ¶æ”¶æ¬¾å°ˆç”¨ [è¦æ ¼:L65, L75-L77]

**12.1.2 å‰µå»º `ReceiptItems` è¡¨ï¼ˆæ”¶æ“šé …ç›®ï¼‰[è¦æ ¼:L80-L97]**
- [ ] 12.1.2.1 ä¸»éµ `item_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L84]
- [ ] 12.1.2.2 é—œè¯æ¬„ä½ï¼š`receipt_id` (TEXT NOT NULL) [è¦æ ¼:L85]
- [ ] 12.1.2.3 é—œè¯æ¬„ä½ï¼š`service_id` (INTEGER, å¯é¸) [è¦æ ¼:L86]
- [ ] 12.1.2.4 æ¬„ä½ï¼š`description` (TEXT NOT NULL) [è¦æ ¼:L87]
- [ ] 12.1.2.5 æ¬„ä½ï¼š`quantity` (REAL DEFAULT 1) [è¦æ ¼:L88]
- [ ] 12.1.2.6 æ¬„ä½ï¼š`unit_price` (REAL NOT NULL) [è¦æ ¼:L89]
- [ ] 12.1.2.7 æ¬„ä½ï¼š`amount` (REAL NOT NULL, = quantity Ã— unit_price) [è¦æ ¼:L90]
- [ ] 12.1.2.8 å¤–éµï¼š`receipt_id` REFERENCES Receipts(receipt_id) ON DELETE CASCADE [è¦æ ¼:L92]
- [ ] 12.1.2.9 å¤–éµï¼š`service_id` REFERENCES Services(service_id) [è¦æ ¼:L93]
- [ ] 12.1.2.10 ç´¢å¼•ï¼š`idx_receipt_items_receipt` ON (receipt_id) [è¦æ ¼:L96]

**12.1.3 å‰µå»º `ReceiptSequence` è¡¨ï¼ˆæ”¶æ“šæµæ°´è™Ÿç®¡ç†ï¼Œå« UNIQUE ç´„æŸï¼‰[è¦æ ¼:L99-L116]**
- [ ] 12.1.3.1 ä¸»éµ `sequence_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L103]
- [ ] 12.1.3.2 æ¬„ä½ï¼š`year_month` (TEXT UNIQUE NOT NULL, æ ¼å¼ï¼šYYYYMM) [è¦æ ¼:L104]
- [ ] 12.1.3.3 æ¬„ä½ï¼š`last_sequence` (INTEGER NOT NULL DEFAULT 0) [è¦æ ¼:L105]
- [ ] 12.1.3.4 å¯©è¨ˆï¼š`created_at`, `updated_at` [è¦æ ¼:L106-L107]
- [ ] 12.1.3.5 ç´¢å¼•ï¼š`idx_receipt_sequence_ym` ON (year_month) [è¦æ ¼:L110]

**12.1.4 å‰µå»º `Payments` è¡¨ï¼ˆæ”¶æ¬¾è¨˜éŒ„ï¼‰[è¦æ ¼:L118-L138]**
- [ ] 12.1.4.1 ä¸»éµ `payment_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L122]
- [ ] 12.1.4.2 é—œè¯æ¬„ä½ï¼š`receipt_id` (TEXT NOT NULL) [è¦æ ¼:L123]
- [ ] 12.1.4.3 æ¬„ä½ï¼š`payment_date` (TEXT NOT NULL) [è¦æ ¼:L124]
- [ ] 12.1.4.4 æ¬„ä½ï¼š`amount` (REAL NOT NULL) [è¦æ ¼:L125]
- [ ] 12.1.4.5 æ¬„ä½ï¼š`payment_method`, `reference_number`, `notes` [è¦æ ¼:L126-L128]
- [ ] 12.1.4.6 æ¬„ä½ï¼š`received_by` (INTEGER NOT NULL) [è¦æ ¼:L129]
- [ ] 12.1.4.7 å¯©è¨ˆï¼š`created_at` [è¦æ ¼:L130]
- [ ] 12.1.4.8 å¤–éµï¼š`receipt_id` REFERENCES Receipts(receipt_id) [è¦æ ¼:L132]
- [ ] 12.1.4.9 å¤–éµï¼š`received_by` REFERENCES Users(user_id) [è¦æ ¼:L133]
- [ ] 12.1.4.10 ç´¢å¼•ï¼š`idx_payments_receipt` ON (receipt_id) [è¦æ ¼:L136]
- [ ] 12.1.4.11 ç´¢å¼•ï¼š`idx_payments_date` ON (payment_date) [è¦æ ¼:L137]

---

#### 12.2 æ”¶æ“šç®¡ç† APIï¼ˆ6å€‹ï¼‰[è¦æ ¼:L256-L345]

**12.2.1 GET /api/v1/receiptsï¼ˆæŸ¥è©¢æ”¶æ“šåˆ—è¡¨ï¼Œå«å®¢æˆ¶å‚™è¨» JOINï¼‰[è¦æ ¼:L259, L296-L344]**
- [ ] 12.2.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.2.1.2 æŸ¥è©¢åƒæ•¸ï¼šstatus, client_id, start_date, end_dateï¼ˆå¯é¸ï¼‰
- [ ] 12.2.1.3 Repository JOIN Clients è¡¨ï¼ˆâ­å« payment_notes, client_notesï¼‰[è¦æ ¼:L314-L315, L329-L330, L336-L344]
- [ ] 12.2.1.4 è¨ˆç®— paid_amount (SUM Payments), remaining_amount, days_overdue [è¦æ ¼:L310-L313]
- [ ] 12.2.1.5 è¿”å›åˆ—è¡¨ï¼ˆå«å®¢æˆ¶å‚™è¨»ä¾›æ”¶æ¬¾åƒè€ƒï¼‰[è¦æ ¼:L302-L332]
- [ ] 12.2.1.6 æ·»åŠ  OpenAPI è¨»è§£

**12.2.2 POST /api/v1/receiptsï¼ˆé–‹ç«‹æ”¶æ“šï¼Œå«è‡ªå‹•/æ‰‹å‹•ç·¨è™Ÿï¼‰[è¦æ ¼:L260, L367-L424]**
- [ ] 12.2.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.2.2.2 è«‹æ±‚ Bodyï¼šreceipt_idï¼ˆå¯é¸ï¼‰, is_auto_generated, client_id, receipt_date, due_date, items[], notes [è¦æ ¼:L372-L392]
- [ ] 12.2.2.3 è‹¥ receipt_id æœªæä¾›ï¼Œèª¿ç”¨ generateReceiptNumber() [è¦æ ¼:L154-L229]
- [ ] 12.2.2.4 é©—è­‰æ”¶æ“šè™Ÿç¢¼æ ¼å¼ï¼ˆYYYYMM-NNNï¼‰èˆ‡å”¯ä¸€æ€§ [è¦æ ¼:L168-L179]
- [ ] 12.2.2.5 Service æ‰¹æ¬¡æ’å…¥ ReceiptItems [è¦æ ¼:L378-L390]
- [ ] 12.2.2.6 è¨ˆç®— total_amountï¼ˆSUM items.amountï¼Œç„¡ç¨…é¡ï¼‰[è¦æ ¼:L406]
- [ ] 12.2.2.7 è¿”å› 201 Createdï¼ˆå«é …ç›®æ˜ç´°ï¼‰[è¦æ ¼:L398-L422]

**12.2.3 GET /api/v1/receipts/:idï¼ˆæŸ¥è©¢æ”¶æ“šè©³æƒ…ï¼‰[è¦æ ¼:L261]**
- [ ] 12.2.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.2.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆreceipt_idï¼‰
- [ ] 12.2.3.3 Repository JOIN ReceiptItems, Clients, Payments
- [ ] 12.2.3.4 è¨ˆç®— paid_amount, remaining_amount
- [ ] 12.2.3.5 è¿”å›å®Œæ•´è©³æƒ…ï¼ˆå«é …ç›®ã€æ”¶æ¬¾è¨˜éŒ„ï¼‰

**12.2.4 PUT /api/v1/receipts/:idï¼ˆæ›´æ–°æ”¶æ“šï¼‰[è¦æ ¼:L262]**
- [ ] 12.2.4.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.2.4.2 è·¯å¾‘åƒæ•¸ï¼šid
- [ ] 12.2.4.3 è«‹æ±‚ Bodyï¼šå…è¨±æ›´æ–°çš„æ¬„ä½ï¼ˆreceipt_date, due_date, items, notesï¼‰
- [ ] 12.2.4.4 Service æ›´æ–° Receipts èˆ‡ ReceiptItems
- [ ] 12.2.4.5 è¿”å›æ›´æ–°å¾Œçš„æ•¸æ“š

**12.2.5 DELETE /api/v1/receipts/:idï¼ˆä½œå»¢æ”¶æ“šï¼‰[è¦æ ¼:L263]**
- [ ] 12.2.5.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.2.5.2 è·¯å¾‘åƒæ•¸ï¼šid
- [ ] 12.2.5.3 Service è»Ÿåˆªé™¤ï¼ˆis_deleted=1, deleted_at, deleted_by, status='cancelledï¼‰[è¦æ ¼:L53-L54]
- [ ] 12.2.5.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
- [ ] 12.2.5.5 æ·»åŠ  OpenAPI è¨»è§£

**12.2.6 GET /api/v1/receipts/check-numberï¼ˆæª¢æŸ¥æ”¶æ“šè™Ÿç¢¼å¯ç”¨æ€§ï¼‰[è¦æ ¼:L264, L267-L293]**
- [ ] 12.2.6.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.2.6.2 æŸ¥è©¢åƒæ•¸ï¼šnumberï¼ˆå¿…å¡«ï¼‰[è¦æ ¼:L269]
- [ ] 12.2.6.3 é©—è­‰æ ¼å¼ï¼ˆ^\d{6}-\d{3}$ï¼‰[è¦æ ¼:L168-L169]
- [ ] 12.2.6.4 Repository æª¢æŸ¥æ˜¯å¦å­˜åœ¨ [è¦æ ¼:L173-L175]
- [ ] 12.2.6.5 è¿”å› available (boolean) èˆ‡ existing_receipt [è¦æ ¼:L272-L292]
- [ ] 12.2.6.6 æ·»åŠ  OpenAPI è¨»è§£

---

#### 12.3 æ”¶æ¬¾ç®¡ç† APIï¼ˆ3å€‹ï¼‰[è¦æ ¼:L347-L353]

**12.3.1 GET /api/v1/receipts/:id/paymentsï¼ˆæŸ¥è©¢æ”¶æ“šçš„æ”¶æ¬¾è¨˜éŒ„ï¼‰[è¦æ ¼:L350]**
- [ ] 12.3.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.3.1.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆreceipt_idï¼‰
- [ ] 12.3.1.3 Repository æŸ¥è©¢ Paymentsï¼ˆORDER BY payment_date DESCï¼‰
- [ ] 12.3.1.4 è¿”å›æ”¶æ¬¾è¨˜éŒ„åˆ—è¡¨
- [ ] 12.3.1.5 æ·»åŠ  OpenAPI è¨»è§£

**12.3.2 POST /api/v1/receipts/:id/paymentsï¼ˆè¨˜éŒ„æ”¶æ¬¾ï¼Œå«ç‹€æ…‹è‡ªå‹•æ›´æ–°ï¼‰[è¦æ ¼:L351, L426-L454, L696-L743]**
- [ ] 12.3.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.3.2.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆreceipt_idï¼‰
- [ ] 12.3.2.3 è«‹æ±‚ Bodyï¼špayment_date, amount, payment_method, reference_number, notes [è¦æ ¼:L431-L436]
- [ ] 12.3.2.4 Service æ’å…¥ Payments è¨˜éŒ„ [è¦æ ¼:L704-L715]
- [ ] 12.3.2.5 è¨ˆç®—ç¸½æ”¶æ¬¾é‡‘é¡ï¼ˆSUM Payments.amountï¼‰[è¦æ ¼:L718-L726]
- [ ] 12.3.2.6 è‡ªå‹•æ›´æ–°æ”¶æ“šç‹€æ…‹ï¼ˆunpaid/partial/paidï¼‰[è¦æ ¼:L729-L740]
- [ ] 12.3.2.7 è¿”å›æ”¶æ¬¾è¨˜éŒ„èˆ‡æ›´æ–°å¾Œçš„ receipt_status [è¦æ ¼:L443-L453]

**12.3.3 DELETE /api/v1/payments/:idï¼ˆåˆªé™¤æ”¶æ¬¾è¨˜éŒ„ï¼‰[è¦æ ¼:L352]**
- [ ] 12.3.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.3.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆpayment_idï¼‰
- [ ] 12.3.3.3 Repository åˆªé™¤è¨˜éŒ„
- [ ] 12.3.3.4 Service é‡æ–°è¨ˆç®—æ”¶æ“šç‹€æ…‹
- [ ] 12.3.3.5 è¿”å›æˆåŠŸéŸ¿æ‡‰

---

#### 12.4 çµ±è¨ˆå ±è¡¨ APIï¼ˆ3å€‹ï¼‰[è¦æ ¼:L355-L361]

**12.4.1 GET /api/v1/receipts/statsï¼ˆæ”¶æ“šçµ±è¨ˆï¼‰[è¦æ ¼:L358]**
- [ ] 12.4.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.4.1.2 æŸ¥è©¢åƒæ•¸ï¼šyear, monthï¼ˆå¯é¸ï¼‰
- [ ] 12.4.1.3 Repository èšåˆæŸ¥è©¢ï¼ˆCOUNT, SUMï¼‰
- [ ] 12.4.1.4 è¿”å›çµ±è¨ˆæ•¸æ“šï¼ˆtotal_receipts, total_amount, unpaid_count, unpaid_amountï¼‰
- [ ] 12.4.1.5 æ·»åŠ  OpenAPI è¨»è§£

**12.4.2 GET /api/v1/receipts/ar-agingï¼ˆæ‡‰æ”¶å¸³æ¬¾å¸³é½¡åˆ†æï¼Œå«å®¢æˆ¶å‚™è¨»ï¼‰[è¦æ ¼:L359, L456-L506, L770-L845]**
- [ ] 12.4.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.4.2.2 æŸ¥è©¢åƒæ•¸ï¼šas_of_dateï¼ˆé è¨­ä»Šæ—¥ï¼‰[è¦æ ¼:L460]
- [ ] 12.4.2.3 Repository JOIN Clientsï¼ˆå« payment_notes, client_notesï¼‰[è¦æ ¼:L784-L785]
- [ ] 12.4.2.4 è¨ˆç®—é€¾æœŸå¤©æ•¸ï¼ˆå¾ due_date é–‹å§‹ï¼Œä½¿ç”¨ getDaysDiffï¼‰[è¦æ ¼:L754-L767, L810-L811]
- [ ] 12.4.2.5 åˆ†é¡å¸³é½¡ï¼ˆcurrent, overdue_1_30, overdue_31_60, overdue_61_90, overdue_over_90ï¼‰[è¦æ ¼:L799-L825]
- [ ] 12.4.2.6 è¿”å›å¸³é½¡åˆ†æï¼ˆaging_summary, by_client, detailsï¼‰[è¦æ ¼:L467-L504]
- [ ] 12.4.2.7 æ·»åŠ  OpenAPI è¨»è§£

**12.4.3 GET /api/v1/reports/revenueï¼ˆç‡Ÿæ”¶å ±è¡¨ï¼‰[è¦æ ¼:L360]**
- [ ] 12.4.3.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.4.3.2 æŸ¥è©¢åƒæ•¸ï¼šstart_date, end_dateï¼ˆå¿…å¡«ï¼‰
- [ ] 12.4.3.3 Repository èšåˆæŸ¥è©¢ï¼ˆGROUP BY client_id, service_idï¼‰
- [ ] 12.4.3.4 è¿”å›ç‡Ÿæ”¶æ•¸æ“šï¼ˆby_client, by_service, total_revenueï¼‰
- [ ] 12.4.3.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 12.5 æ”¶æ“š PDF ç”Ÿæˆ APIï¼ˆ2å€‹ï¼‰[è¦æ ¼:L1011-L1015]

**12.5.1 GET /api/v1/receipts/:id/pdfï¼ˆç”Ÿæˆæ”¶æ“š PDFï¼‰[è¦æ ¼:L1013]**
- [ ] 12.5.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.5.1.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆreceipt_idï¼‰
- [ ] 12.5.1.3 èª¿ç”¨ generateReceiptPDF() [è¦æ ¼:L862-L975]
- [ ] 12.5.1.4 è¿”å› PDF æ–‡ä»¶æµï¼ˆContent-Type: application/pdfï¼‰
- [ ] 12.5.1.5 æ·»åŠ  OpenAPI è¨»è§£

**12.5.2 GET /api/v1/receipts/:id/previewï¼ˆé è¦½æ”¶æ“š HTMLï¼‰[è¦æ ¼:L1014]**
- [ ] 12.5.2.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 12.5.2.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆreceipt_idï¼‰
- [ ] 12.5.2.3 èª¿ç”¨ generateReceiptHTML()
- [ ] 12.5.2.4 è¿”å› HTML å…§å®¹ï¼ˆContent-Type: text/htmlï¼‰
- [ ] 12.5.2.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 12.6 æ”¶æ“šè™Ÿç¢¼ç”Ÿæˆé‚è¼¯é©—è­‰ï¼ˆæ¥­å‹™è¦å‰‡ï¼‰[è¦æ ¼:L142-L250]

**12.6.1 æ”¶æ“šè™Ÿç¢¼æ ¼å¼é©—è­‰ [è¦æ ¼:L144-L150]**
- [ ] 12.6.1.1 é©—è­‰æ ¼å¼ï¼šYYYYMM-NNNï¼ˆå¦‚ï¼š202510-001ï¼‰[è¦æ ¼:L146]
- [ ] 12.6.1.2 é©—è­‰ YYYYMMï¼šå¹´æœˆ 6 ä½æ•¸ [è¦æ ¼:L148]
- [ ] 12.6.1.3 é©—è­‰ NNNï¼šæµæ°´è™Ÿ 3 ä½æ•¸ï¼ˆ001-999ï¼‰[è¦æ ¼:L149]

**12.6.2 è‡ªå‹•ç”Ÿæˆé‚è¼¯é©—è­‰ï¼ˆå«ä½µç™¼å®‰å…¨ï¼‰[è¦æ ¼:L154-L212]**
- [ ] 12.6.2.1 é©—è­‰æ‰‹å‹•ç·¨è™Ÿï¼šæ ¼å¼æª¢æŸ¥èˆ‡å”¯ä¸€æ€§ [è¦æ ¼:L166-L181]
- [ ] 12.6.2.2 é©—è­‰è‡ªå‹•ç”Ÿæˆï¼šUPSERT + RETURNING åŸå­æ“ä½œ [è¦æ ¼:L184-L196]
- [ ] 12.6.2.3 é©—è­‰ä½µç™¼å®‰å…¨ï¼šå¤šäººåŒæ™‚é–‹æ”¶æ“šä¸é‡è¤‡ [è¦æ ¼:L1022-L1023]
- [ ] 12.6.2.4 é©—è­‰æµæ°´è™Ÿä¸Šé™ï¼š999 å¼µæª¢æŸ¥èˆ‡éŒ¯èª¤è™•ç† [è¦æ ¼:L200-L206]
- [ ] 12.6.2.5 é©—è­‰éŒ¯èª¤ç¢¼ï¼šRECEIPT_SEQUENCE_EXCEEDED [è¦æ ¼:L204, L225]

**12.6.3 æ—¥æœŸè¨ˆç®—å·¥å…·é©—è­‰ [è¦æ ¼:L745-L768]**
- [ ] 12.6.3.1 é©—è­‰ getDaysDiff() å…¬å¼ [è¦æ ¼:L755-L760]
- [ ] 12.6.3.2 é©—è­‰ç¯„ä¾‹ï¼šé€¾æœŸ 40 å¤©ï¼ˆdue_date=10/31, as_of=12/10ï¼‰[è¦æ ¼:L765, L835-L837]
- [ ] 12.6.3.3 é©—è­‰ç¯„ä¾‹ï¼šæœªåˆ°æœŸ -7 å¤©ï¼ˆdue_date=12/05, as_of=11/28ï¼‰[è¦æ ¼:L766, L840-L843]

**12.6.4 æ”¶æ“šç‹€æ…‹è‡ªå‹•æ›´æ–°é©—è­‰ [è¦æ ¼:L694-L743]**
- [ ] 12.6.4.1 é©—è­‰ç‹€æ…‹åˆ¤å®šï¼štotal_paid >= total_amount â†’ 'paid' [è¦æ ¼:L731-L732]
- [ ] 12.6.4.2 é©—è­‰ç‹€æ…‹åˆ¤å®šï¼štotal_paid > 0 ä¸” < total_amount â†’ 'partial' [è¦æ ¼:L733-L734]
- [ ] 12.6.4.3 é©—è­‰ç‹€æ…‹åˆ¤å®šï¼štotal_paid = 0 â†’ 'unpaid' [è¦æ ¼:L730]
- [ ] 12.6.4.4 é©—è­‰ remaining_amount è¨ˆç®— [è¦æ ¼:L742]

---

#### 12.7 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [ ] 12.7.1 [å…§éƒ¨] æ¸¬è©¦æ”¶æ“šè™Ÿç¢¼ä½µç™¼å®‰å…¨ï¼ˆå¤šäººåŒæ™‚é–‹æ”¶æ“šï¼‰
- [ ] 12.7.2 [å…§éƒ¨] æ¸¬è©¦æ”¶æ“šè™Ÿç¢¼å”¯ä¸€æ€§æª¢æŸ¥ API
- [ ] 12.7.3 [å…§éƒ¨] æ¸¬è©¦éƒ¨åˆ†æ”¶æ¬¾èˆ‡ç‹€æ…‹è‡ªå‹•æ›´æ–°
- [ ] 12.7.4 [å…§éƒ¨] æ¸¬è©¦æ‡‰æ”¶å¸³æ¬¾å¸³é½¡è¨ˆç®—ï¼ˆå¾ due_date èµ·ç®—ï¼‰
- [ ] 12.7.5 [å…§éƒ¨] æ¸¬è©¦æ”¶æ“šåˆ—è¡¨é¡¯ç¤ºå®¢æˆ¶å‚™è¨»ï¼ˆpayment_notesï¼‰
- [ ] 12.7.6 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰æ”¶æ“šæ”¶æ¬¾åŠŸèƒ½
- [ ] 12.7.7 [å…§éƒ¨] æº–å‚™åŸ·è¡Œä¸€è‡´æ€§é©—è­‰
- [ ] 12.7.8 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

### [ ] æ¨¡çµ„ 13ï¼šé™„ä»¶ç³»çµ±ï¼ˆé™„ä»¶ç³»çµ±-å®Œæ•´è¦æ ¼.mdï¼‰
**è³‡æ–™è¡¨ï¼š** 1 å€‹ | **APIï¼š** 5 å€‹ï¼ˆupload/get/download/delete/listï¼‰| **Cron Jobsï¼š** 0 å€‹

#### 13.1 è³‡æ–™è¡¨å‰µå»ºï¼ˆ1 è¡¨ï¼‰

**13.1.1 å‰µå»º `Attachments` è¡¨ï¼ˆé™„ä»¶å…ƒè³‡æ–™ï¼Œå«å¯¦é«”é—œè¯ï¼‰[è¦æ ¼:L33-L54]**
- [ ] 13.1.1.1 ä¸»éµ `attachment_id` (INTEGER PRIMARY KEY AUTOINCREMENT) [è¦æ ¼:L37]
- [ ] 13.1.1.2 æ¬„ä½ï¼š`entity_type` (TEXT NOT NULL, CHECK IN ('client','receipt','sop','task')) [è¦æ ¼:L38, L49]
- [ ] 13.1.1.3 æ¬„ä½ï¼š`entity_id` (TEXT NOT NULL) [è¦æ ¼:L39]
- [ ] 13.1.1.4 æ¬„ä½ï¼š`file_name` (TEXT NOT NULL, åŸå§‹æª”å) [è¦æ ¼:L40]
- [ ] 13.1.1.5 æ¬„ä½ï¼š`file_path` (TEXT NOT NULL, R2 è·¯å¾‘) [è¦æ ¼:L41]
- [ ] 13.1.1.6 æ¬„ä½ï¼š`file_size` (INTEGER, bytes) [è¦æ ¼:L42]
- [ ] 13.1.1.7 æ¬„ä½ï¼š`mime_type` (TEXT) [è¦æ ¼:L43]
- [ ] 13.1.1.8 ä¸Šå‚³è€…ï¼š`uploaded_by` (INTEGER NOT NULL) [è¦æ ¼:L44]
- [ ] 13.1.1.9 å¯©è¨ˆèˆ‡åˆªé™¤ï¼š`uploaded_at`, `is_deleted` [è¦æ ¼:L45-L46]
- [ ] 13.1.1.10 å¤–éµï¼š`uploaded_by` REFERENCES Users(user_id) [è¦æ ¼:L48]
- [ ] 13.1.1.11 CHECK ç´„æŸï¼šentity_type IN ('client','receipt','sop','task') [è¦æ ¼:L49]
- [ ] 13.1.1.12 ç´¢å¼•ï¼š`idx_attachments_entity` ON (entity_type, entity_id) [è¦æ ¼:L52]
- [ ] 13.1.1.13 ç´¢å¼•ï¼š`idx_attachments_uploaded` ON (uploaded_at) [è¦æ ¼:L53]

---

#### 13.2 R2 Bucket é…ç½®èˆ‡æ•´åˆ [è¦æ ¼:L160-L287]

**13.2.1 é…ç½® wrangler.toml [è¦æ ¼:L162-L169]**
- [ ] 13.2.1.1 æ·»åŠ  R2 Bucket ç¶å®šï¼šATTACHMENTS_BUCKET [è¦æ ¼:L167]
- [ ] 13.2.1.2 è¨­ç½® bucket_nameï¼šhorgoscpa-attachments [è¦æ ¼:L168]

**13.2.2 R2 ç›®éŒ„çµæ§‹è¦åŠƒ [è¦æ ¼:L553-L577]**
- [ ] 13.2.2.1 è¨­è¨ˆç›®éŒ„çµæ§‹ï¼šentity_type/entity_id/timestamp-random.ext [è¦æ ¼:L194, L558-L576]
- [ ] 13.2.2.2 client/ ç›®éŒ„ï¼ˆå®¢æˆ¶é™„ä»¶ï¼‰[è¦æ ¼:L559-L564]
- [ ] 13.2.2.3 invoice/ ç›®éŒ„ï¼ˆæ”¶æ“šé™„ä»¶ï¼‰[è¦æ ¼:L565-L569]
- [ ] 13.2.2.4 sop/ ç›®éŒ„ï¼ˆSOP é™„ä»¶ï¼‰[è¦æ ¼:L570-L573]
- [ ] 13.2.2.5 task/ ç›®éŒ„ï¼ˆä»»å‹™é™„ä»¶ï¼‰[è¦æ ¼:L574-L576]

**13.2.3 æª”æ¡ˆä¸Šå‚³é‚è¼¯å¯¦ç¾ [è¦æ ¼:L171-L228]**
- [ ] 13.2.3.1 è§£æ multipart/form-dataï¼ˆfile, entity_type, entity_idï¼‰[è¦æ ¼:L176-L179]
- [ ] 13.2.3.2 èª¿ç”¨ validateUploadFile() é©—è­‰ [è¦æ ¼:L182-L188]
- [ ] 13.2.3.3 ç”Ÿæˆå”¯ä¸€æª”åï¼ˆtimestamp-random + å‰¯æª”åï¼‰[è¦æ ¼:L190-L194]
- [ ] 13.2.3.4 ä¸Šå‚³åˆ° R2 Bucketï¼ˆå« httpMetadataï¼‰[è¦æ ¼:L197-L201]
- [ ] 13.2.3.5 æ’å…¥ Attachments è¨˜éŒ„ [è¦æ ¼:L204-L217]
- [ ] 13.2.3.6 è¿”å›é™„ä»¶è³‡è¨Š [è¦æ ¼:L219-L227]

**13.2.4 æª”æ¡ˆä¸‹è¼‰é‚è¼¯å¯¦ç¾ [è¦æ ¼:L231-L259]**
- [ ] 13.2.4.1 æŸ¥è©¢ Attachments è¡¨ï¼ˆé©—è­‰å­˜åœ¨ä¸”æœªåˆªé™¤ï¼‰[è¦æ ¼:L237-L243]
- [ ] 13.2.4.2 å¾ R2 ç²å–æª”æ¡ˆï¼ˆenv.ATTACHMENTS_BUCKET.getï¼‰[è¦æ ¼:L246-L250]
- [ ] 13.2.4.3 è¨­ç½® Response Headersï¼ˆContent-Type, Content-Disposition, Content-Lengthï¼‰[è¦æ ¼:L252-L258]
- [ ] 13.2.4.4 è¿”å›æª”æ¡ˆæµ [è¦æ ¼:L252]

**13.2.5 æª”æ¡ˆåˆªé™¤é‚è¼¯å¯¦ç¾ [è¦æ ¼:L262-L285]**
- [ ] 13.2.5.1 æŸ¥è©¢ Attachments è¡¨ï¼ˆé©—è­‰å­˜åœ¨ï¼‰[è¦æ ¼:L268-L274]
- [ ] 13.2.5.2 å¾ R2 åˆªé™¤æª”æ¡ˆï¼ˆenv.ATTACHMENTS_BUCKET.deleteï¼‰[è¦æ ¼:L277]
- [ ] 13.2.5.3 è»Ÿåˆªé™¤è³‡æ–™åº«è¨˜éŒ„ï¼ˆis_deleted=1ï¼‰[è¦æ ¼:L280-L282]
- [ ] 13.2.5.4 è¿”å›æˆåŠŸéŸ¿æ‡‰ [è¦æ ¼:L284]

---

#### 13.3 é™„ä»¶ç®¡ç† APIï¼ˆ5å€‹ï¼‰[è¦æ ¼:L290-L351]

**13.3.1 POST /api/v1/attachments/uploadï¼ˆä¸Šå‚³é™„ä»¶ï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L295, L304-L323]**
- [ ] 13.3.1.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰[è¦æ ¼:L295]
- [ ] 13.3.1.2 Content-Typeï¼šmultipart/form-data [è¦æ ¼:L307]
- [ ] 13.3.1.3 è«‹æ±‚ Bodyï¼šfile (File), entity_type, entity_id [è¦æ ¼:L309-L312]
- [ ] 13.3.1.4 èª¿ç”¨ validateUploadFile() é©—è­‰ [è¦æ ¼:L182]
- [ ] 13.3.1.5 Service ä¸Šå‚³åˆ° R2 ä¸¦æ’å…¥è¨˜éŒ„ [è¦æ ¼:L173-L228]
- [ ] 13.3.1.6 è¿”å› 201 Createdï¼ˆå« attachment_id, file_pathï¼‰[è¦æ ¼:L315-L322]
- [ ] 13.3.1.7 æ·»åŠ  OpenAPI è¨»è§£

**13.3.2 GET /api/v1/attachments/:idï¼ˆæŸ¥è©¢é™„ä»¶è³‡è¨Šï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L296]**
- [ ] 13.3.2.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰[è¦æ ¼:L296]
- [ ] 13.3.2.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆattachment_idï¼‰
- [ ] 13.3.2.3 Repository æŸ¥è©¢é™„ä»¶è¨˜éŒ„ï¼ˆJOIN Users ç²å–ä¸Šå‚³è€…å§“åï¼‰
- [ ] 13.3.2.4 è¿”å›é™„ä»¶è©³æƒ…ï¼ˆå« file_name, file_size, mime_type, uploaded_by_nameï¼‰
- [ ] 13.3.2.5 æ·»åŠ  OpenAPI è¨»è§£

**13.3.3 GET /api/v1/attachments/:id/downloadï¼ˆä¸‹è¼‰é™„ä»¶ï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L297, L234-L259]**
- [ ] 13.3.3.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰[è¦æ ¼:L297]
- [ ] 13.3.3.2 è·¯å¾‘åƒæ•¸ï¼šidï¼ˆattachment_idï¼‰
- [ ] 13.3.3.3 èª¿ç”¨ downloadAttachment() [è¦æ ¼:L234-L259]
- [ ] 13.3.3.4 è¿”å›æª”æ¡ˆæµï¼ˆå«æ­£ç¢ºçš„ Content-Type èˆ‡ filenameï¼‰[è¦æ ¼:L252-L258]
- [ ] 13.3.3.5 æ·»åŠ  OpenAPI è¨»è§£

**13.3.4 DELETE /api/v1/attachments/:idï¼ˆåˆªé™¤é™„ä»¶ï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L298]**
- [ ] 13.3.4.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆâ­å°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼šæ‰€æœ‰äººå¯åˆªé™¤ï¼‰[è¦æ ¼:L292, L298]
- [ ] 13.3.4.2 è·¯å¾‘åƒæ•¸ï¼šid
- [ ] 13.3.4.3 èª¿ç”¨ deleteAttachment() [è¦æ ¼:L265-L285]
- [ ] 13.3.4.4 è¿”å›æˆåŠŸéŸ¿æ‡‰
- [ ] 13.3.4.5 æ·»åŠ  OpenAPI è¨»è§£

**13.3.5 GET /api/v1/attachmentsï¼ˆæŸ¥è©¢é™„ä»¶åˆ—è¡¨ï¼Œæ‰€æœ‰äººå¯ç”¨ï¼‰[è¦æ ¼:L299, L326-L350]**
- [ ] 13.3.5.1 æ¬Šé™ï¼šauthMiddlewareï¼ˆæ‰€æœ‰äººï¼‰[è¦æ ¼:L299]
- [ ] 13.3.5.2 æŸ¥è©¢åƒæ•¸ï¼šentity_type, entity_idï¼ˆå¿…å¡«ï¼‰[è¦æ ¼:L328]
- [ ] 13.3.5.3 Repository æŸ¥è©¢ï¼ˆWHERE entity_type=? AND entity_id=? AND is_deleted=0ï¼‰
- [ ] 13.3.5.4 è¿”å›åˆ—è¡¨ï¼ˆORDER BY uploaded_at DESCï¼‰[è¦æ ¼:L331-L349]
- [ ] 13.3.5.5 æ·»åŠ  OpenAPI è¨»è§£

---

#### 13.4 æª”æ¡ˆé©—è­‰èˆ‡å®‰å…¨é‚è¼¯ [è¦æ ¼:L58-L156, L506-L536]

**13.4.1 æª”æ¡ˆå¤§å°é™åˆ¶é©—è­‰ [è¦æ ¼:L60-L68, L514-L518]**
- [ ] 13.4.1.1 å®šç¾© MAX_FILE_SIZEï¼š10MBï¼ˆ10,485,760 bytesï¼‰[è¦æ ¼:L68]
- [ ] 13.4.1.2 é©—è­‰é‚è¼¯ï¼šfile.size > MAX_FILE_SIZE â†’ FILE_TOO_LARGE [è¦æ ¼:L108-L113]
- [ ] 13.4.1.3 å‰ç«¯é©—è­‰ï¼ˆææ—©é˜»æ­¢ï¼‰[è¦æ ¼:L516]
- [ ] 13.4.1.4 å¾Œç«¯é©—è­‰ï¼ˆé˜²æ­¢ç¹éï¼‰[è¦æ ¼:L517]

**13.4.2 æª”æ¡ˆé¡å‹é©—è­‰ [è¦æ ¼:L70-L82, L508-L512]**
- [ ] 13.4.2.1 å®šç¾© ALLOWED_MIME_TYPESï¼ˆPDF, JPEG, PNG, XLSX, DOCX ç­‰ï¼‰[è¦æ ¼:L71-L79]
- [ ] 13.4.2.2 å®šç¾© ALLOWED_EXTENSIONSï¼ˆ.pdf, .jpg, .png, .xlsx, .docx ç­‰ï¼‰[è¦æ ¼:L82]
- [ ] 13.4.2.3 é©—è­‰ MIME Type [è¦æ ¼:L116-L121]
- [ ] 13.4.2.4 é©—è­‰å‰¯æª”å [è¦æ ¼:L124-L130]
- [ ] 13.4.2.5 é›™é‡é©—è­‰é˜²æ­¢å½é€  [è¦æ ¼:L510-L512]

**13.4.3 æª”åå®‰å…¨æª¢æŸ¥ [è¦æ ¼:L132-L138, L520-L524]**
- [ ] 13.4.3.1 éæ¿¾è·¯å¾‘éæ­·å­—å…ƒï¼ˆ.., /, \ï¼‰[è¦æ ¼:L133-L138, L522]
- [ ] 13.4.3.2 ä½¿ç”¨æ™‚é–“æˆ³ + éš¨æ©Ÿå­—ä¸²é‡æ–°å‘½å [è¦æ ¼:L192-L194, L523]
- [ ] 13.4.3.3 ä¸‹è¼‰æ™‚ä½¿ç”¨åŸå§‹æª”åï¼ˆencodeURIComponentï¼‰[è¦æ ¼:L255, L524]

**13.4.4 é™„ä»¶æ•¸é‡é™åˆ¶é©—è­‰ [è¦æ ¼:L84-L91, L140-L152]**
- [ ] 13.4.4.1 å®šç¾© MAX_FILES_PER_ENTITYï¼ˆclient:20, receipt:5, sop:10, task:10ï¼‰[è¦æ ¼:L85-L90]
- [ ] 13.4.4.2 æŸ¥è©¢ç¾æœ‰é™„ä»¶æ•¸é‡ï¼ˆCOUNTï¼‰[è¦æ ¼:L141-L144]
- [ ] 13.4.4.3 é©—è­‰ï¼šcount >= maxFiles â†’ TOO_MANY_FILES [è¦æ ¼:L147-L152]

**13.4.5 å­˜å–æ¬Šé™èˆ‡å„²å­˜å®‰å…¨ [è¦æ ¼:L526-L536]**
- [ ] 13.4.5.1 ä¸Šå‚³éœ€ç™»å…¥ï¼ˆauthMiddlewareï¼‰[è¦æ ¼:L528]
- [ ] 13.4.5.2 ä¸‹è¼‰æª¢æŸ¥æ¬Šé™ï¼ˆåŒå…¬å¸/åŒåœ˜éšŠï¼‰[è¦æ ¼:L529]
- [ ] 13.4.5.3 åˆªé™¤æª¢æŸ¥æ¬Šé™ï¼ˆä¸Šå‚³è€…æˆ–ç®¡ç†å“¡ï¼Œæ­¤å°ˆæ¡ˆç‚ºæ‰€æœ‰äººï¼‰[è¦æ ¼:L530, L292]
- [ ] 13.4.5.4 ä½¿ç”¨ Cloudflare R2ï¼ˆè‡ªå‹•å‚™ä»½ï¼‰[è¦æ ¼:L534]
- [ ] 13.4.5.5 è»Ÿåˆªé™¤ï¼ˆå¯æ¢å¾©ï¼‰[è¦æ ¼:L535]

---

#### 13.5 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [ ] 13.5.1 [å…§éƒ¨] æ¸¬è©¦æª”æ¡ˆä¸Šå‚³èˆ‡å¤§å°é™åˆ¶ï¼ˆ10MBï¼‰
- [ ] 13.5.2 [å…§éƒ¨] æ¸¬è©¦æª”æ¡ˆé¡å‹é©—è­‰ï¼ˆåªå…è¨± PDF/JPG/PNG/XLSX/DOCXï¼‰
- [ ] 13.5.3 [å…§éƒ¨] æ¸¬è©¦æª”åå®‰å…¨ï¼ˆéæ¿¾ ../ï¼‰
- [ ] 13.5.4 [å…§éƒ¨] æ¸¬è©¦é™„ä»¶æ•¸é‡é™åˆ¶ï¼ˆclient:20, receipt:5ï¼‰
- [ ] 13.5.5 [å…§éƒ¨] æ¸¬è©¦æª”æ¡ˆä¸‹è¼‰èˆ‡åˆªé™¤
- [ ] 13.5.6 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰é™„ä»¶ç®¡ç†åŠŸèƒ½
- [ ] 13.5.7 [å…§éƒ¨] æº–å‚™åŸ·è¡Œä¸€è‡´æ€§é©—è­‰
- [ ] 13.5.8 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

### [ ] æ¨¡çµ„ 14ï¼šå ±è¡¨åˆ†æï¼ˆå ±è¡¨åˆ†æ-å®Œæ•´è¦æ ¼.mdï¼‰
**è³‡æ–™è¡¨ï¼š** 0 å€‹ï¼ˆä½¿ç”¨ç¾æœ‰è¡¨ï¼‰ | **APIï¼š** 4 å€‹ï¼ˆå®¢æˆ¶æˆæœ¬/å“¡å·¥å·¥æ™‚/è–ªè³‡å½™ç¸½/ç‡Ÿæ”¶å ±è¡¨ï¼‰| **Cron Jobsï¼š** 0 å€‹

#### 14.1 å®¢æˆ¶æˆæœ¬åˆ†æ API [è¦æ ¼:L35-L401]

**14.1.1 GET /api/v1/reports/client-cost-analysisï¼ˆå«å¹´çµ‚çé‡‘åˆ†æ”¤é¸é …ï¼‰[è¦æ ¼:L39, L68-L136]**
- [ ] 14.1.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 14.1.1.2 æŸ¥è©¢åƒæ•¸ï¼šstart_date, end_date, client_idï¼ˆå¯é¸ï¼‰, include_year_end_bonusï¼ˆé è¨­falseï¼‰[è¦æ ¼:L42-L48]
- [ ] 14.1.1.3 èª¿ç”¨ calculateClientCost()ï¼ˆä½¿ç”¨åŠ æ¬Šå·¥æ™‚ + å®Œæ•´æ™‚è–ªæˆæœ¬ç‡ï¼‰[è¦æ ¼:L157-L345]
- [ ] 14.1.1.4 æŸ¥è©¢æ‰€æœ‰å·¥æ™‚è¨˜éŒ„ï¼ˆJOIN Users, WorkTypesï¼‰[è¦æ ¼:L170-L185]
- [ ] 14.1.1.5 è¨ˆç®—å®Œæ•´æ™‚è–ªæˆæœ¬ç‡ï¼ˆå«ç®¡ç†æˆæœ¬ï¼Œä¸å«å¹´çµ‚ï¼‰[è¦æ ¼:L196-L203]
- [ ] 14.1.1.6 è¨ˆç®—åŠ æ¬Šå·¥æ™‚èˆ‡æˆæœ¬ï¼ˆweighted_hours Ã— hourlyCostRateï¼‰[è¦æ ¼:L209-L221]
- [ ] 14.1.1.7 å¹´çµ‚çé‡‘åˆ†æ”¤é‚è¼¯ï¼ˆå„ªåŒ–ç‰ˆï¼šæ‰¹æ¬¡æŸ¥è©¢ï¼‰[è¦æ ¼:L247-L312]
  - ä¸€æ¬¡æ€§æŸ¥è©¢æ‰€æœ‰å“¡å·¥å·¥æ™‚çµ±è¨ˆ [è¦æ ¼:L255-L266]
  - ä¸€æ¬¡æ€§æŸ¥è©¢æ‰€æœ‰å¹´çµ‚çé‡‘ [è¦æ ¼:L269-L275]
  - ä½¿ç”¨ Map å¿«é€ŸæŸ¥æ‰¾é¿å… NÂ² æŸ¥è©¢ [è¦æ ¼:L277-L311]
  - æ•ˆèƒ½å„ªåŒ–ï¼šå¾ 500 æ¬¡æŸ¥è©¢é™è‡³ 2 æ¬¡ [è¦æ ¼:L314-L330]
- [ ] 14.1.1.8 è¿”å›æ•¸æ“šçµæ§‹ï¼ˆå« cost_breakdown, user_breakdown, warningsï¼‰[è¦æ ¼:L68-L136]
- [ ] 14.1.1.9 ç®¡ç†æˆæœ¬è­¦å‘Šï¼ˆå®Œå…¨æœªè¼¸å…¥/éƒ¨åˆ†è¼¸å…¥ï¼‰[è¦æ ¼:L125-L152]
- [ ] 14.1.1.10 æ·»åŠ  OpenAPI è¨»è§£

---

#### 14.2 å“¡å·¥å·¥æ™‚åˆ†æ API [è¦æ ¼:L406-L568]

**14.2.1 GET /api/v1/reports/employee-hoursï¼ˆå«ä½¿ç”¨ç‡è¨ˆç®—ï¼‰[è¦æ ¼:L410, L421-L456]**
- [ ] 14.2.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 14.2.1.2 æŸ¥è©¢åƒæ•¸ï¼šyear, month, user_idï¼ˆå¯é¸ï¼‰[è¦æ ¼:L413-L418]
- [ ] 14.2.1.3 èª¿ç”¨ calculateEmployeeHours() [è¦æ ¼:L462-L567]
- [ ] 14.2.1.4 æŸ¥è©¢å·¥æ™‚è¨˜éŒ„ï¼ˆJOIN Users, Clients, Servicesï¼‰[è¦æ ¼:L467-L484]
- [ ] 14.2.1.5 åˆ†çµ„çµ±è¨ˆï¼ˆtotal_hours, normal_hours, overtime_hours, billable_hoursï¼‰[è¦æ ¼:L486-L539]
- [ ] 14.2.1.6 è¨ˆç®—ä½¿ç”¨ç‡ï¼ˆbillable_hours / standardHours Ã— 100ï¼‰[è¦æ ¼:L541-L545]
- [ ] 14.2.1.7 å®¢æˆ¶åˆ†å¸ƒçµ±è¨ˆï¼ˆå«ç™¾åˆ†æ¯”ï¼‰[è¦æ ¼:L547-L552]
- [ ] 14.2.1.8 æ¯æ—¥å·¥æ™‚è¶¨å‹¢ [è¦æ ¼:L554-L556]
- [ ] 14.2.1.9 è¿”å›å®Œæ•´æ•¸æ“š [è¦æ ¼:L424-L456]
- [ ] 14.2.1.10 æ·»åŠ  OpenAPI è¨»è§£

---

#### 14.3 è–ªè³‡å½™ç¸½å ±è¡¨ API [è¦æ ¼:L572-L660]

**14.3.1 GET /api/v1/reports/payroll-summaryï¼ˆå·²åœ¨ Module 10 å®šç¾©ï¼‰[è¦æ ¼:L576, L588-L625]**
- [ ] 14.3.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 14.3.1.2 æŸ¥è©¢åƒæ•¸ï¼šyear, month, user_idï¼ˆå¯é¸ï¼‰[è¦æ ¼:L579-L584]
- [ ] 14.3.1.3 æŸ¥è©¢ MonthlyPayroll è¡¨ï¼ˆJOIN Usersï¼‰
- [ ] 14.3.1.4 èšåˆçµ±è¨ˆï¼ˆSUM total_base_salary, total_allowances, total_bonuses, total_overtime_payï¼‰[è¦æ ¼:L593-L598]
- [ ] 14.3.1.5 è¿”å› summary èˆ‡ details [è¦æ ¼:L591-L625]
- [ ] 14.3.1.6 æ·»åŠ  OpenAPI è¨»è§£

---

#### 14.4 ç‡Ÿæ”¶å ±è¡¨ API [è¦æ ¼:L662-L730]

**14.4.1 GET /api/v1/reports/revenueï¼ˆå·²åœ¨ Module 12 å®šç¾©ï¼‰[è¦æ ¼:L666, L678-L720]**
- [ ] 14.4.1.1 æ¬Šé™ï¼šauthMiddleware + adminMiddleware
- [ ] 14.4.1.2 æŸ¥è©¢åƒæ•¸ï¼šstart_date, end_dateï¼ˆå¿…å¡«ï¼‰[è¦æ ¼:L669-L672]
- [ ] 14.4.1.3 æŸ¥è©¢ Receipts è¡¨ï¼ˆGROUP BY client_id, service_idï¼‰
- [ ] 14.4.1.4 JOIN Payments è¨ˆç®—æ”¶æ¬¾é‡‘é¡
- [ ] 14.4.1.5 è¨ˆç®—æ”¶æ¬¾ç‡ï¼ˆtotal_paid / total_receipts Ã— 100ï¼‰[è¦æ ¼:L697]
- [ ] 14.4.1.6 æœˆåº¦è¶¨å‹¢çµ±è¨ˆï¼ˆGROUP BY year, monthï¼‰[è¦æ ¼:L704-L713]
- [ ] 14.4.1.7 è¿”å› summary, by_client, by_service, monthly_trend [è¦æ ¼:L680-L718]
- [ ] 14.4.1.8 æ·»åŠ  OpenAPI è¨»è§£

---

#### 14.5 æ•ˆèƒ½å„ªåŒ–èˆ‡å¿«å– [è¦æ ¼:L901-L938]

**14.5.1 Workers KV å¿«å–å¯¦ç¾ [è¦æ ¼:L903-L919]**
- [ ] 14.5.1.1 é…ç½® KV namespace ç¶å®šï¼ˆCACHEï¼‰
- [ ] 14.5.1.2 å¯¦ç¾å¿«å–éµç”Ÿæˆï¼ˆreport:type:paramsï¼‰[è¦æ ¼:L907]
- [ ] 14.5.1.3 æª¢æŸ¥å¿«å–å­˜åœ¨ï¼ˆenv.CACHE.getï¼‰[è¦æ ¼:L908-L912]
- [ ] 14.5.1.4 ç”Ÿæˆå ±è¡¨å¾Œå¯«å…¥å¿«å–ï¼ˆTTL=3600 ç§’ï¼‰[è¦æ ¼:L916-L918]
- [ ] 14.5.1.5 å¿«å–å¤±æ•ˆç­–ç•¥ï¼ˆæ–°å¢/æ›´æ–°å·¥æ™‚æ™‚æ¸…é™¤ï¼‰

**14.5.2 åˆ†é åŠ è¼‰å¯¦ç¾ [è¦æ ¼:L921-L930]**
- [ ] 14.5.2.1 æ·»åŠ æŸ¥è©¢åƒæ•¸ï¼špage, page_sizeï¼ˆé è¨­ 20ï¼‰[è¦æ ¼:L926-L928]
- [ ] 14.5.2.2 è¿”å› total ç¸½æ•¸ [è¦æ ¼:L929]
- [ ] 14.5.2.3 ä½¿ç”¨ LIMIT å’Œ OFFSET

**14.5.3 ç´¢å¼•å„ªåŒ–é©—è­‰ [è¦æ ¼:L932-L938]**
- [ ] 14.5.3.1 é©—è­‰ idx_timelogs_date_client ç´¢å¼•å­˜åœ¨ [è¦æ ¼:L936]
- [ ] 14.5.3.2 é©—è­‰ idx_receipts_date_status ç´¢å¼•å­˜åœ¨ [è¦æ ¼:L937]
- [ ] 14.5.3.3 é©—è­‰æŸ¥è©¢è¨ˆç•«ä½¿ç”¨ç´¢å¼•ï¼ˆEXPLAIN QUERY PLANï¼‰

---

#### 14.6 æ¸¬è©¦èˆ‡éƒ¨ç½²
- [ ] 14.6.1 [å…§éƒ¨] æ¸¬è©¦å®¢æˆ¶æˆæœ¬åˆ†æï¼ˆå«/ä¸å«å¹´çµ‚çé‡‘ï¼‰
- [ ] 14.6.2 [å…§éƒ¨] æ¸¬è©¦å¹´çµ‚çé‡‘åˆ†æ”¤è¨ˆç®—ï¼ˆæŒ‰å·¥æ™‚æ¯”ä¾‹ï¼‰
- [ ] 14.6.3 [å…§éƒ¨] æ¸¬è©¦ç®¡ç†æˆæœ¬è­¦å‘Šï¼ˆå®Œå…¨æœªè¼¸å…¥/éƒ¨åˆ†è¼¸å…¥ï¼‰
- [ ] 14.6.4 [å…§éƒ¨] æ¸¬è©¦å“¡å·¥å·¥æ™‚ä½¿ç”¨ç‡è¨ˆç®—
- [ ] 14.6.5 [å…§éƒ¨] æ¸¬è©¦å ±è¡¨å¿«å–æ©Ÿåˆ¶ï¼ˆKV TTL=3600ï¼‰
- [ ] 14.6.6 [å…§éƒ¨] æ¸¬è©¦åˆ†é åŠ è¼‰ï¼ˆpage_size=20ï¼‰
- [ ] 14.6.7 [å…§éƒ¨] è‡ªè¡Œæ¸¬è©¦æ‰€æœ‰å ±è¡¨åŠŸèƒ½
- [ ] 14.6.8 [å…§éƒ¨] æº–å‚™åŸ·è¡Œä¸€è‡´æ€§é©—è­‰
- [ ] 14.6.9 [å…§éƒ¨] æº–å‚™åŸ·è¡Œè‡ªå‹•éƒ¨ç½²

---

## ğŸ” å…¨å±€ä¸€è‡´æ€§é©—è­‰ï¼ˆGlobal Consistency Checkï¼‰

### åœ¨æ‰€æœ‰æ¨¡çµ„å®Œæˆå¾ŒåŸ·è¡Œ

- [ ] **æœ€çµ‚é©—è­‰æ­¥é©Ÿ 1ï¼š** æå– SSOT çœŸç›¸
  ```powershell
  Get-Content "docs\ç³»çµ±è³‡æ–™\æ•¸æ“šè¡¨æ¸…å–®.md" | Select-String "è³‡æ–™è¡¨ç¸½è¦½"
  Get-Content "docs\ç³»çµ±è³‡æ–™\APIæ¸…å–®.md" | Select-String "ç¸½è¨ˆ"
  ```

- [ ] **æœ€çµ‚é©—è­‰æ­¥é©Ÿ 2ï¼š** åŸ·è¡Œå¿«é€Ÿä¸€è‡´æ€§æª¢æŸ¥
  ```powershell
  cd docs
  Get-ChildItem -Filter "*.md" -Recurse | Select-String "å€‹.*[è¡¨API]" | ForEach-Object {
      if ($_.Line -match '(\d+)å€‹') { "$($_.FileName): $($matches[1])å€‹" }
  } | Sort-Object | Get-Unique
  ```

- [ ] **æœ€çµ‚é©—è­‰æ­¥é©Ÿ 3ï¼š** ç¢ºèªæ‰€æœ‰æ•¸å­—ä¸€è‡´
  - æ‡‰åªçœ‹åˆ°ï¼š`45å€‹è¡¨` å’Œ `147å€‹API`
  - å¦‚æœ‰ä¸ä¸€è‡´ï¼Œç«‹å³ä¿®å¾©

- [ ] **æœ€çµ‚é©—è­‰æ­¥é©Ÿ 4ï¼š** æª¢æŸ¥äº¤å‰å¼•ç”¨å°ç¨±æ€§

- [ ] **æœ€çµ‚é©—è­‰æ­¥é©Ÿ 5ï¼š** åŸ·è¡Œå®Œæ•´ç³»çµ±æ¸¬è©¦

- [ ] **æœ€çµ‚é©—è­‰æ­¥é©Ÿ 6ï¼š** æœ€çµ‚éƒ¨ç½²èˆ‡ç·šä¸Šé©—è­‰

---

## ğŸ“Š é€²åº¦è¿½è¹¤

### å®Œæˆçµ±è¨ˆ
- **å·²å®Œæˆæ¨¡çµ„ï¼š** 8 / 14ï¼ˆ57.1%ï¼‰â­ è¶…éä¸€åŠï¼
- **å·²å®Œæˆè³‡æ–™è¡¨ï¼š** 32 / 45ï¼ˆ71.1%ï¼‰
- **å·²å®Œæˆ APIï¼š** 104 / 147ï¼ˆ70.7%ï¼‰â­ è¶…é 70%ï¼
- **å·²å®Œæˆ Cron Jobsï¼š** 4 / 6ï¼ˆ66.7%ï¼‰

### æ¨¡çµ„ç‹€æ…‹
| æ¨¡çµ„ | ç‹€æ…‹ | å®Œæˆæ—¥æœŸ | éƒ¨ç½²ç‹€æ…‹ |
|------|------|----------|----------|
| 1. ç³»çµ±åŸºç¤ | âœ… å·²å®Œæˆ | 2025-10-29 | âœ… å·²éƒ¨ç½² |
| 2. æ¥­å‹™è¦å‰‡ | âœ… å·²å®Œæˆ | 2025-10-29 | âœ… å·²éƒ¨ç½² |
| 3. å®¢æˆ¶ç®¡ç† | âœ… å·²å®Œæˆ | 2025-10-29 | âœ… å·²éƒ¨ç½² |
| 4. å·¥æ™‚ç®¡ç† | âœ… å·²å®Œæˆ | 2025-10-29 | âœ… å·²éƒ¨ç½² |
| 5. å‡æœŸç®¡ç† | âœ… å·²å®Œæˆ | 2025-10-29 | âœ… å·²éƒ¨ç½² |
| 6. æœå‹™ç”Ÿå‘½é€±æœŸ | âœ… å·²å®Œæˆ | 2025-10-29 | âœ… å·²éƒ¨ç½² |
| 7. ä»»å‹™ç®¡ç† | âœ… å·²å®Œæˆ | 2025-10-29 | â³ æº–å‚™éƒ¨ç½² |
| 8. çŸ¥è­˜ç®¡ç† | â¸ï¸ å¾…é–‹å§‹ | - | - |
| 9. å¤–éƒ¨å…§å®¹ç®¡ç† | â¸ï¸ å¾…é–‹å§‹ | - | - |
| 10. è–ªè³‡ç®¡ç† | â¸ï¸ å¾…é–‹å§‹ | - | - |
| 11. ç®¡ç†æˆæœ¬ | â¸ï¸ å¾…é–‹å§‹ | - | - |
| 12. æ”¶æ“šæ”¶æ¬¾ | â¸ï¸ å¾…é–‹å§‹ | - | - |
| 13. é™„ä»¶ç³»çµ± | â¸ï¸ å¾…é–‹å§‹ | - | - |
| 14. å ±è¡¨åˆ†æ | â¸ï¸ å¾…é–‹å§‹ | - | - |

---

## ğŸ“ è¨»è¨˜

### Cron Jobs ç¸½è¦½ï¼ˆéœ€åœ¨ wrangler.toml ä¸­é…ç½®ï¼‰
1. **ç‰¹ä¼‘å¹´åˆæ›´æ–°ï¼š** `0 0 1 1 *`ï¼ˆæ¯å¹´ 1 æœˆ 1 æ—¥ 00:00ï¼‰
2. **ä»»å‹™è‡ªå‹•ç”Ÿæˆï¼š** `0 0 1 * *`ï¼ˆæ¯æœˆ 1 æ—¥ 00:00ï¼‰
3. **è£œä¼‘åˆ°æœŸè½‰æ›ï¼š** `0 0 1 * *`ï¼ˆæ¯æœˆ 1 æ—¥ 00:00ï¼‰
4. **å·¥æ™‚å¡«å¯«æé†’ï¼š** `30 8 * * 1-5`ï¼ˆé€±ä¸€åˆ°é€±äº” 08:30ï¼‰
5. **è³‡æ–™åº«å‚™ä»½ï¼š** `0 2 * * *`ï¼ˆæ¯å¤© 02:00ï¼‰
6. **å¤±æ•— Cron Job è‡ªå‹•é‡è©¦ï¼š** `0 * * * *`ï¼ˆæ¯å°æ™‚ï¼‰

### é—œéµæŠ€è¡“æ±ºç­–
- **è³‡æ–™åº«ï¼š** Cloudflare D1 (SQLite)
- **å¾Œç«¯ï¼š** Cloudflare Workers + Hono + OpenAPI
- **å‰ç«¯ï¼š** Vue.js 3 + Tailwind CSS
- **èªè­‰ï¼š** JWT + HttpOnly Cookie
- **å„²å­˜ï¼š** Cloudflare R2ï¼ˆæª”æ¡ˆ/å‚™ä»½ï¼‰
- **éƒ¨ç½²ï¼š** Cloudflare Pagesï¼ˆGit Push è‡ªå‹•éƒ¨ç½²ï¼‰

### æ¬Šé™è¨­è¨ˆ
- **å…©ç´šæ¬Šé™ï¼š** Adminï¼ˆç®¡ç†å“¡ï¼‰/ Employeeï¼ˆå“¡å·¥ï¼‰
- **å°å‹äº‹å‹™æ‰€å½ˆæ€§è¨­è¨ˆï¼š** éƒ¨åˆ†åŠŸèƒ½æ”¾å¯¬çµ¦å“¡å·¥ï¼ˆå®¢æˆ¶ç®¡ç†ã€åœ‹å®šå‡æ—¥ç®¡ç†ç­‰ï¼‰
- **æ‰¹é‡æ“ä½œé™ç®¡ç†å“¡ï¼š** æ‰¹é‡æ›´æ–°ã€æ‰¹é‡å°å…¥ç­‰

---

## ğŸš¨ é—œéµæé†’

1. **æ¯å€‹å­ä»»å‹™å®Œæˆå¾Œï¼Œå¿…é ˆç«‹å³æ›´æ–°æœ¬è¨ˆç•«æª”æ¡ˆï¼ˆå°‡ `[ ]` æ”¹ç‚º `[x]`ï¼‰**
2. **æ¯å€‹æ¨¡çµ„å®Œæˆå¾Œï¼Œå¿…é ˆåŸ·è¡Œä¸€è‡´æ€§é©—è­‰**
3. **æ¯å€‹æ¨¡çµ„é©—è­‰é€šéå¾Œï¼Œå¿…é ˆè‡ªå‹•éƒ¨ç½²**
4. **çµ•ä¸è®“ç”¨æˆ¶æ¸¬è©¦æˆ–éƒ¨ç½²**
5. **æ‰€æœ‰ API å¿…é ˆåŒ…å« OpenAPI schema**
6. **æ‰€æœ‰ PowerShell å‘½ä»¤çµ•ä¸ä½¿ç”¨ `&&`**
7. **æ‰€æœ‰æ–‡ä»¶ä½¿ç”¨ UTF-8 ç·¨ç¢¼**

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025-10-29  
**ç‹€æ…‹ï¼š** âœ… è¨ˆç•«å·²ç”Ÿæˆï¼Œç­‰å¾…æ‰¹å‡†é–‹å§‹åŸ·è¡Œ

