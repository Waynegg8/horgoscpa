<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>测试金额转中文大写</title>
</head>
<body>
  <h1>金额转中文大写测试</h1>
  <div>
    <label>输入金额：</label>
    <input type="number" id="amount" value="560000" style="width:200px;padding:5px;">
    <button onclick="test()" style="padding:5px 15px;">转换</button>
  </div>
  <div style="margin-top:20px;font-size:18px;">
    <strong>结果：</strong><span id="result"></span>
  </div>
  
  <div style="margin-top:30px;">
    <h3>常见测试案例：</h3>
    <ul id="testCases"></ul>
  </div>

  <script>
    const convertAmountToChinese = (amount) => {
      const digits = ['零', '壹', '貳', '參', '肆', '伍', '陸', '柒', '捌', '玖'];
      const units = ['', '拾', '佰', '仟'];
      
      if (amount === 0) return '零';
      
      const amountInt = Math.floor(amount);
      
      // 转换一个4位数段
      const convertSection = (num) => {
        if (num === 0) return '';
        const str = num.toString().padStart(4, '0');
        let result = '';
        let hasNonZero = false;
        
        for (let i = 0; i < 4; i++) {
          const digit = parseInt(str[i]);
          const unitIndex = 3 - i;
          
          if (digit === 0) {
            if (hasNonZero && i < 3) {
              const hasNextNonZero = str.slice(i + 1).split('').some(d => d !== '0');
              if (hasNextNonZero) {
                result += '零';
                hasNonZero = false;
              }
            }
          } else {
            result += digits[digit] + units[unitIndex];
            hasNonZero = true;
          }
        }
        
        return result;
      };
      
      // 分段：亿、万、个
      const yi = Math.floor(amountInt / 100000000);
      const wan = Math.floor((amountInt % 100000000) / 10000);
      const ge = amountInt % 10000;
      
      let result = '';
      
      if (yi > 0) {
        result += convertSection(yi) + '億';
      }
      
      if (wan > 0) {
        if (result && wan < 1000) {
          result += '零';
        }
        result += convertSection(wan) + '萬';
      } else if (yi > 0 && ge > 0) {
        result += '零';
      }
      
      if (ge > 0) {
        if (result && ge < 1000) {
          result += '零';
        }
        result += convertSection(ge);
      }
      
      return result || '零';
    };
    
    function test() {
      const amount = parseFloat(document.getElementById('amount').value);
      const result = convertAmountToChinese(amount);
      document.getElementById('result').textContent = result + ' 元整';
    }
    
    // 自动测试常见案例
    window.onload = function() {
      const testCases = [
        560000,
        100,
        1000,
        10000,
        100000,
        123456,
        1000000,
        10000000,
        100000000
      ];
      
      const ul = document.getElementById('testCases');
      testCases.forEach(num => {
        const li = document.createElement('li');
        li.textContent = `${num.toLocaleString()} = ${convertAmountToChinese(num)}`;
        ul.appendChild(li);
      });
      
      test();
    };
  </script>
</body>
</html>

