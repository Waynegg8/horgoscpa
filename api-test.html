<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API æ¸¬è©¦é é¢</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 1200px; margin: 0 auto; }
    h1 { color: #333; }
    .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
    button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #1b65b8; color: white; border: none; border-radius: 4px; }
    button:hover { background: #154a8a; }
    pre { background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto; }
    .success { color: #28a745; }
    .error { color: #dc3545; }
  </style>
</head>
<body>
  <h1>ğŸ”§ å·¥æ™‚ç®¡ç†ç³»çµ± API æ¸¬è©¦</h1>
  
  <div class="test-section">
    <h2>1. æ¸¬è©¦å®¢æˆ¶åˆ—è¡¨ API</h2>
    <button onclick="testClientsAPI()">æ¸¬è©¦ GET /internal/api/v1/clients</button>
    <pre id="clientsResult">ç­‰å¾…æ¸¬è©¦...</pre>
  </div>

  <div class="test-section">
    <h2>2. æ¸¬è©¦å‡æ—¥ API</h2>
    <button onclick="testHolidaysAPI()">æ¸¬è©¦ GET /internal/api/v1/holidays</button>
    <pre id="holidaysResult">ç­‰å¾…æ¸¬è©¦...</pre>
  </div>

  <div class="test-section">
    <h2>3. æ¸¬è©¦å®¢æˆ¶æœå‹™ API</h2>
    <input type="text" id="clientIdInput" placeholder="è¼¸å…¥å®¢æˆ¶ID (å¦‚: c_002)" style="padding: 8px; width: 200px;">
    <button onclick="testClientServicesAPI()">æ¸¬è©¦ GET /internal/api/v1/clients/:id/services</button>
    <pre id="servicesResult">ç­‰å¾…æ¸¬è©¦...</pre>
  </div>

  <div class="test-section">
    <h2>4. æ¸¬è©¦æœå‹™å­é …ç›® API</h2>
    <input type="text" id="clientId2Input" placeholder="å®¢æˆ¶ID (å¦‚: c_002)" style="padding: 8px; width: 150px;">
    <input type="text" id="serviceIdInput" placeholder="æœå‹™ID (å¦‚: 1)" style="padding: 8px; width: 100px;">
    <button onclick="testServiceItemsAPI()">æ¸¬è©¦ GET /internal/api/v1/clients/:id/services/:sid/items</button>
    <pre id="itemsResult">ç­‰å¾…æ¸¬è©¦...</pre>
  </div>

  <script>
    async function testAPI(url, resultId) {
      const resultEl = document.getElementById(resultId);
      resultEl.textContent = 'æ¸¬è©¦ä¸­...';
      
      try {
        const response = await fetch(url, {
          credentials: 'include'
        });
        
        const data = await response.json();
        
        if (response.ok) {
          resultEl.innerHTML = `<span class="success">âœ… æˆåŠŸ (${response.status})</span>\n${JSON.stringify(data, null, 2)}`;
        } else {
          resultEl.innerHTML = `<span class="error">âŒ å¤±æ•— (${response.status})</span>\n${JSON.stringify(data, null, 2)}`;
        }
      } catch (error) {
        resultEl.innerHTML = `<span class="error">âŒ éŒ¯èª¤</span>\n${error.message}\n${error.stack}`;
      }
    }

    function testClientsAPI() {
      testAPI('/internal/api/v1/clients?perPage=10', 'clientsResult');
    }

    function testHolidaysAPI() {
      const start = '2025-10-27';
      const end = '2025-11-02';
      testAPI(`/internal/api/v1/holidays?start_date=${start}&end_date=${end}`, 'holidaysResult');
    }

    function testClientServicesAPI() {
      const clientId = document.getElementById('clientIdInput').value || 'c_002';
      testAPI(`/internal/api/v1/clients/${clientId}/services`, 'servicesResult');
    }

    function testServiceItemsAPI() {
      const clientId = document.getElementById('clientId2Input').value || 'c_002';
      const serviceId = document.getElementById('serviceIdInput').value || '1';
      testAPI(`/internal/api/v1/clients/${clientId}/services/${serviceId}/items`, 'itemsResult');
    }
  </script>
</body>
</html>

