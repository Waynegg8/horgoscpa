<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â§ñÈÉ®ÂÖßÂÆπÁÆ°ÁêÜ - ÈúçÁàæÊûúÊñØÊúÉË®àÂ∏´‰∫ãÂãôÊâÄ</title>
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="assets/css/internal-system.css">
    <link rel="stylesheet" href="assets/css/internal-components.css">
    <link rel="stylesheet" href="assets/css/content-editor-page.css">
    <!-- ÂÖ±Áî®Ê®°ÁµÑ -->
  <!-- Êñ∞Ê®°ÂùóÂåñÊû∂ÊûÑ -->
  <script type="module" src="assets/js/core/config/app.config.js"></script>
  <script type="module" src="assets/js/core/api/client.js"></script>
  <script type="module" src="assets/js/core/utils/auth.js"></script>
  <script type="module" src="assets/js/components/feedback/Toast.js"></script>
  
  <!-- Êóß‰ª£Á†ÅÊöÇÊó∂‰øùÁïô -->
  <script src="assets/js/config.js"></script>
  <script src="assets/js/common-utils.js"></script>
  <script src="assets/js/auth-common.js"></script>
  <script src="assets/js/error-handler.js"></script>
</head>
<body>
    <!-- Á∞°ÊΩîÁöÑÂÖßÈÉ®Â∞éËà™Ê¨Ñ -->
    <nav class="internal-navbar">
        <div class="internal-nav-container">
            <a href="dashboard.html" class="internal-nav-brand">
                <img src="assets/images/logo-white.png" alt="ÈúçÁàæÊûúÊñØ">
                <span>ÂÖßÈÉ®ÁÆ°ÁêÜÁ≥ªÁµ±</span>
            </a>
            
            <button class="internal-mobile-toggle" id="mobileToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <div class="internal-nav-links" id="navLinks">
                <a href="dashboard.html" class="internal-nav-link">
                    <span class="material-symbols-outlined">home</span>
                    Â∑•‰ΩúÂè∞
                </a>
                <a href="timesheet.html" class="internal-nav-link">
                    <span class="material-symbols-outlined">calendar_month</span>
                    Â∑•ÊôÇË°®
                </a>
                <a href="tasks.html" class="internal-nav-link">
                    <span class="material-symbols-outlined">task_alt</span>
                    ‰ªªÂãô
                </a>
                <a href="knowledge.html" class="internal-nav-link">
                    <span class="material-symbols-outlined">school</span>
                    Áü•Ë≠òÂ∫´
                </a>
                <a href="content-editor.html" class="internal-nav-link active admin-only" style="display:none;">
                    <span class="material-symbols-outlined">edit_note</span>
                    ÂÖßÂÆπ
                </a>
                <a href="reports.html" class="internal-nav-link">
                    <span class="material-symbols-outlined">assessment</span>
                    Â†±Ë°®
                </a>
                <a href="settings.html" class="internal-nav-link">
                    <span class="material-symbols-outlined">settings</span>
                    Ë®≠ÂÆö
                </a>
                
                <div class="internal-nav-user">
                    <div>
                        <div class="internal-user-name" id="userName">ËºâÂÖ•‰∏≠...</div>
                        <div class="internal-user-role" id="userRole"></div>
                    </div>
                    <button class="internal-logout-btn" id="logoutBtn">ÁôªÂá∫</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="internal-main">
        <div class="internal-container">
            <!-- Ê®ôÁ±§È†ÅÂàáÊèõ -->
            <div class="tabs-container">
                <div class="tab-nav">
                    <button class="tab-button active" onclick="switchContentTab('posts')">
                        <span class="material-symbols-outlined">article</span>
                        ÈÉ®ËêΩÊ†ºÊñáÁ´†
                    </button>
                    <button class="tab-button" onclick="switchContentTab('faq')">
                        <span class="material-symbols-outlined">help</span>
                        ÂÖ¨ÈñãFAQ
                    </button>
                    <button class="tab-button" onclick="switchContentTab('resources')">
                        <span class="material-symbols-outlined">folder</span>
                        Ë≥áÊ∫ê‰∏ãËºâ
                    </button>
                    <button class="tab-button" onclick="switchContentTab('media')">
                        <span class="material-symbols-outlined">photo_library</span>
                        ÂúñÁâáÁ¥†Êùê
                    </button>
                </div>

            <!-- ÊñáÁ´†ÁÆ°ÁêÜ -->
            <div id="posts-section" class="tab-content active">
                <!-- ÊñáÁ´†ÂàóË°®Ë¶ñÂúñ -->
                <div id="posts-list-view">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2>ÊñáÁ´†ÁÆ°ÁêÜ</h2>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary" id="selectAllBtn" onclick="toggleSelectAll()">ÂÖ®ÈÅ∏</button>
                            <button class="btn btn-primary" onclick="showPostEditor(null)">
                                <span class="material-symbols-outlined">add</span>
                                Êñ∞Â¢ûÊñáÁ´†
                            </button>
                        </div>
                    </div>
                    
                    <div class="search-box" style="margin-bottom: 20px;">
                        <input type="text" id="postSearch" placeholder="ÊêúÂ∞ãÊñáÁ´†Ê®ôÈ°å..." onkeyup="filterPosts()">
                        <span class="material-symbols-outlined search-icon">search</span>
                    </div>
                    
                    <div id="posts-list">
                        <div class="loading"><div class="loading-spinner"></div> ËºâÂÖ•‰∏≠...</div>
                    </div>
                </div>
                
                <!-- ÊñáÁ´†Á∑®ËºØÂô®Ë¶ñÂúñ -->
                <div id="post-editor-view" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div>
                            <h2 id="post-editor-title">Êñ∞Â¢ûÊñáÁ´†</h2>
                            <span id="autoSaveIndicator" style="font-size: 13px; color: var(--text-secondary);"></span>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary" onclick="togglePreview()">
                                <span class="material-symbols-outlined">visibility</span>
                                È†êË¶Ω
                            </button>
                            <button class="btn btn-secondary" onclick="closePostEditor()">
                                <span class="material-symbols-outlined">close</span>
                                ËøîÂõûÂàóË°®
                            </button>
                        </div>
                    </div>
                    
                    <div class="editor-container">
                        <input type="hidden" id="postId">
                        
                        <div class="form-group">
                            <label>ÊñáÁ´†Ê®ôÈ°å *</label>
                            <input type="text" id="postTitle" placeholder="Ëº∏ÂÖ•ÊñáÁ´†Ê®ôÈ°å..." required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>URL ‰ª£Á®±ÔºàSlugÔºâ*</label>
                                <input type="text" id="postSlug" placeholder="article-url-slug" required>
                                <small>Â∞áÁî®ÊñºÊñáÁ´†Á∂≤ÂùÄÔºåÂè™ËÉΩÂåÖÂê´Â∞èÂØ´Â≠óÊØç„ÄÅÊï∏Â≠óÂíåÈÄ£Â≠óËôü</small>
                            </div>
                            <div class="form-group">
                                <label>ÂàÜÈ°û</label>
                                <input type="text" id="postCategory" placeholder="‰æãÔºöÁ®ÖÂãô„ÄÅÊúÉË®à„ÄÅÂâµÊ•≠">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ÊëòË¶Å</label>
                            <textarea id="postSummary" rows="2" placeholder="Á∞°Áü≠ÊèèËø∞ÊñáÁ´†ÂÖßÂÆπ..."></textarea>
                        </div>
                        
                            <div class="form-group">
                                <label>ÂÖßÂÆπ * (ÊîØÊè¥ Markdown)</label>
                                <div style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap;">
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="insertMarkdown('**', '**', 'Á≤óÈ´îÊñáÂ≠ó')">
                                        <strong>B</strong> Á≤óÈ´î
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="insertMarkdown('*', '*', 'ÊñúÈ´îÊñáÂ≠ó')">
                                        <em>I</em> ÊñúÈ´î
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="insertMarkdown('## ', '', 'Ê®ôÈ°å')">
                                        H2 Ê®ôÈ°å
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="insertMarkdown('[', '](url)', 'ÈÄ£ÁµêÊñáÂ≠ó')">
                                        üîó ÈÄ£Áµê
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="insertMarkdown('- ', '', 'ÂàóË°®È†ÖÁõÆ')">
                                        ‚Ä¢ ÂàóË°®
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="insertMarkdown('![', '](url)', 'ÂúñÁâáË™™Êòé')">
                                        üñºÔ∏è ÂúñÁâá
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="insertMarkdown('\n```\n', '\n```\n', 'Á®ãÂºèÁ¢º')">
                                        üíª Á®ãÂºèÁ¢º
                                    </button>
                                </div>
                                <textarea id="postContent" rows="15" placeholder="‰ΩøÁî® Markdown Ê†ºÂºèÊí∞ÂØ´ÊñáÁ´†ÂÖßÂÆπ..." style="font-family: 'Consolas', 'Monaco', 'Courier New', monospace;"></textarea>
                                <div id="markdownPreview" style="display: none; border: 2px solid var(--border-color); border-radius: 8px; padding: 20px; background: white; min-height: 400px; max-height: 600px; overflow-y: auto;"></div>
                            </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>SEO Ê®ôÈ°å</label>
                                <input type="text" id="postMetaTitle" placeholder="ÊêúÂ∞ãÂºïÊìéÈ°ØÁ§∫ÁöÑÊ®ôÈ°å">
                            </div>
                            <div class="form-group">
                                <label>SEO ÊèèËø∞</label>
                                <input type="text" id="postMetaDescription" placeholder="ÊêúÂ∞ãÂºïÊìéÈ°ØÁ§∫ÁöÑÊèèËø∞">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>ÁãÄÊÖã</label>
                                <select id="postStatus">
                                    <option value="draft">ËçâÁ®ø</option>
                                    <option value="published">Â∑≤ÁôºÂ∏É</option>
                                    <option value="archived">Â∑≤Â∞ÅÂ≠ò</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ÁôºÂ∏ÉÊôÇÈñì</label>
                                <input type="datetime-local" id="postPublishedAt">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-primary" onclick="savePost()">
                                <span class="material-symbols-outlined">save</span>
                                ÂÑ≤Â≠òÊñáÁ´†
                            </button>
                            <button class="btn btn-secondary" onclick="closePostEditor()">
                                ÂèñÊ∂à
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Â∏∏Ë¶ãÂïèÁ≠î -->
            <div id="faq-section" class="tab-content">
                <div id="faq-list-container">
                    <!-- Â∏∏Ë¶ãÂïèÁ≠îÂàóË°®Â∞áÈÄöÈÅé JavaScript ËºâÂÖ• -->
                </div>
            </div>

            <!-- SOP Êñá‰ª∂ -->
            <div id="sop-section" class="content-section">
                <div id="sop-list-container">
                    <!-- SOP ÂàóË°®Â∞áÈÄöÈÅé JavaScript ËºâÂÖ• -->
                </div>
            </div>

            <!-- Ë≥áÊ∫êÁÆ°ÁêÜ -->
            <div id="resources-section" class="tab-content">
                <div id="resources-list-container">
                    <!-- Ë≥áÊ∫êÂàóË°®Â∞áÈÄöÈÅé JavaScript ËºâÂÖ• -->
                </div>
            </div>

            <!-- Â™íÈ´îÂ∫´ -->
            <div id="media-section" class="tab-content">
                <div id="media-list-container">
                    <!-- Â™íÈ´îÂàóË°®Â∞áÈÄöÈÅé JavaScript ËºâÂÖ• -->
                </div>
            </div>
            </div>
        </div>
    </main>

    <footer class="internal-footer">
        &copy; 2025 ÈúçÁàæÊûúÊñØÊúÉË®àÂ∏´‰∫ãÂãôÊâÄ ÂÖßÈÉ®ÁÆ°ÁêÜÁ≥ªÁµ±
    </footer>

    <script src="assets/js/content-management.js"></script>
</body>
</html>

